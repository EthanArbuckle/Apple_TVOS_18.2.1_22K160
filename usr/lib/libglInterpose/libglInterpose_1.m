void sub_2A080( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  unsigned int *v16;
  atomic_store(0, v16);
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

uint64_t get_error(__GLIContextRec *a1)
{
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v7);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_58:
        unsigned int v47 = __ldaxr(v8);
      while (__stlxr(v47 - 1, v8));
      v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 816LL))(a1);
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  v53 = 0LL;
  v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v12))
  {
    v14 = (char *)v53;
    v13 = v54;
    int64_t v15 = v54 - (_BYTE *)v53;
    unsigned int v16 = v55;
    unint64_t v17 = v55 - (v54 - (_BYTE *)v53);
    if (v17 > 0x2F) {
      goto LABEL_24;
    }
    int v49 = (303 - v17) & 0xFFFFFF00;
    v55 += v49;
    v14 = (char *)malloc(v49 + v16);
    v53 = v14;
    if (v14)
    {
      if ((v14 & 3) == 0)
      {
        v13 = &v14[v15];
LABEL_24:
        *((_OWORD *)v13 + 1) = 0u;
        *((_OWORD *)v13 + 2) = 0u;
        *(_OWORD *)v13 = 0u;
        v54 = v13 + 48;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v14 + 1) = 235;
        *((_DWORD *)v14 + 8) = 256;
        __uint64_t v52 = 0LL;
        uint64_t v18 = pthread_threadid_np(0LL, &v52);
        *((void *)v14 + 1) = v52;
        *((_WORD *)v14 + 18) = 67;
        *((void *)v14 + 5) = *(void *)v7;
        char v19 = byte_206F43;
        if ((byte_206F43 & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)((char *)&stru_B8.offset + 3),  1LL,  *(unsigned int *)(v7 + 3404),  v7);
        }
        id v20 = [(id)DYGetGLGuestAppClient(v18) overrideFlags];
        if (v20 & 0x10 | v19 & 4)
        {
          uint64_t v26 = 0LL;
          goto LABEL_31;
        }

        uint64_t v26 = *(unsigned int *)(v7 + 3400);
        if (!(_DWORD)v26)
        {
          uint64_t v27 = mach_absolute_time();
          uint64_t v26 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 816LL))(a1);
          uint64_t v28 = mach_absolute_time() - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            v30 = v53;
            *((void *)v53 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors)
            {
LABEL_30:
              GPUTools::FB::Encode((uint64_t)&v53, 4294955008LL, (uint64_t)"e", v21, v22, v23, v24, v25, v26);
LABEL_31:
              id v31 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v20), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
              if ((_DWORD)v31) {
                id v31 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v53, v32);
              }
              v34 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v7 + 3404);
              if ((_DWORD)v34) {
                id v31 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v53, v34, v33);
              }
              if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
                encode_driver_events((id *)v7, (uint64_t)&v53);
              }
              v35 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v7 + 3480),  (GPUTools::FB::Fbuf *)(v7 + 3520),  (GPUTools::FB *)&v53);
              if ((v19 & 2) != 0) {
                breakpoint_break( (uint64_t)&v53,  (volatile int *)((char *)&stru_B8.offset + 3),  2LL,  *(unsigned int *)(v7 + 3404),  v7);
              }
              v36 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v35) defaultFbufStream];
              v37 = (unsigned int *)((char *)v36 + 56);
              do
                unsigned int v38 = __ldaxr(v37);
              while (__stlxr(1u, v37));
              if (v38 == 1)
              {
                do
                {
                  while (*v37 == 1)
                    ;
                  do
                    unsigned int v39 = __ldaxr(v37);
                  while (__stlxr(1u, v37));
                }

                while (v39 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v36, (GPUTools::FB::Fbuf *)&v53, *(unsigned int *)v53, 1);
              atomic_store(0, v37);
              do
              {
                unsigned int v40 = __ldaxr(v8);
                signed int v41 = v40 - 1;
              }

              while (__stlxr(v41, v8));
              if (gCheckGLErrors) {
                BOOL v42 = v41 < 1;
              }
              else {
                BOOL v42 = 1;
              }
              if (!v42) {
                handle_opengl_thread_conflict((const void **)v7);
              }
              goto LABEL_52;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            v51 = v53;
            *((void *)v53 + 3) = v50;
            v51[2] = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          check_errors(v7);
          goto LABEL_30;
        }

        *(_DWORD *)(v7 + 3400) = 0;
        goto LABEL_30;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v14, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v44 = __ldaxr(v8);
  while (__stlxr(v44 - 1, v8));
  [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
  uint64_t v26 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 816LL))(a1);
LABEL_52:
  if (v53) {
    free(v53);
  }
  return v26;
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  char *v13;
  char *v14;
  int64_t v15;
  unsigned int v16;
  unint64_t v17;
  uint64_t v18;
  char v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  GPUTools::FB::Stream *v36;
  unsigned int *v37;
  unsigned int v38;
  unsigned int v39;
  unsigned int v40;
  signed int v41;
  BOOL v42;
  uint64_t result;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v7);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_58:
        unsigned int v47 = __ldaxr(v8);
      while (__stlxr(v47 - 1, v8));
      v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 816LL))(a1);
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  v53 = 0LL;
  v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v12))
  {
    v14 = (char *)v53;
    v13 = v54;
    int64_t v15 = v54 - (_BYTE *)v53;
    unsigned int v16 = v55;
    unint64_t v17 = v55 - (v54 - (_BYTE *)v53);
    if (v17 > 0x2F) {
      goto LABEL_24;
    }
    int v49 = (303 - v17) & 0xFFFFFF00;
    v55 += v49;
    v14 = (char *)malloc(v49 + v16);
    v53 = v14;
    if (v14)
    {
      if ((v14 & 3) == 0)
      {
        v13 = &v14[v15];
LABEL_24:
        *((_OWORD *)v13 + 1) = 0u;
        *((_OWORD *)v13 + 2) = 0u;
        *(_OWORD *)v13 = 0u;
        v54 = v13 + 48;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v14 + 1) = 235;
        *((_DWORD *)v14 + 8) = 256;
        __uint64_t v52 = 0LL;
        uint64_t v18 = pthread_threadid_np(0LL, &v52);
        *((void *)v14 + 1) = v52;
        *((_WORD *)v14 + 18) = 67;
        *((void *)v14 + 5) = *(void *)v7;
        char v19 = byte_206F43;
        if ((byte_206F43 & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)((char *)&stru_B8.offset + 3),  1LL,  *(unsigned int *)(v7 + 3404),  v7);
        }
        id v20 = [(id)DYGetGLGuestAppClient(v18) overrideFlags];
        if (v20 & 0x10 | v19 & 4)
        {
          uint64_t v26 = 0LL;
          goto LABEL_31;
        }

        uint64_t v26 = *(unsigned int *)(v7 + 3400);
        if (!(_DWORD)v26)
        {
          uint64_t v27 = mach_absolute_time();
          uint64_t v26 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 816LL))(a1);
          uint64_t v28 = mach_absolute_time() - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            v30 = v53;
            *((void *)v53 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors)
            {
LABEL_30:
              GPUTools::FB::Encode((uint64_t)&v53, 4294955008LL, (uint64_t)"e", v21, v22, v23, v24, v25, v26);
LABEL_31:
              id v31 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v20), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
              if ((_DWORD)v31) {
                id v31 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v53, v32);
              }
              v34 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v7 + 3404);
              if ((_DWORD)v34) {
                id v31 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v53, v34, v33);
              }
              if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
                encode_driver_events((id *)v7, (uint64_t)&v53);
              }
              v35 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v7 + 3480),  (GPUTools::FB::Fbuf *)(v7 + 3520),  (GPUTools::FB *)&v53);
              if ((v19 & 2) != 0) {
                breakpoint_break( (uint64_t)&v53,  (volatile int *)((char *)&stru_B8.offset + 3),  2LL,  *(unsigned int *)(v7 + 3404),  v7);
              }
              v36 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v35) defaultFbufStream];
              v37 = (unsigned int *)((char *)v36 + 56);
              do
                unsigned int v38 = __ldaxr(v37);
              while (__stlxr(1u, v37));
              if (v38 == 1)
              {
                do
                {
                  while (*v37 == 1)
                    ;
                  do
                    unsigned int v39 = __ldaxr(v37);
                  while (__stlxr(1u, v37));
                }

                while (v39 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v36, (GPUTools::FB::Fbuf *)&v53, *(unsigned int *)v53, 1);
              atomic_store(0, v37);
              do
              {
                unsigned int v40 = __ldaxr(v8);
                signed int v41 = v40 - 1;
              }

              while (__stlxr(v41, v8));
              if (gCheckGLErrors) {
                BOOL v42 = v41 < 1;
              }
              else {
                BOOL v42 = 1;
              }
              if (!v42) {
                handle_opengl_thread_conflict((const void **)v7);
              }
              goto LABEL_52;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            v51 = v53;
            *((void *)v53 + 3) = v50;
            v51[2] = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          check_errors(v7);
          goto LABEL_30;
        }

        *(_DWORD *)(v7 + 3400) = 0;
        goto LABEL_30;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v14, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v44 = __ldaxr(v8);
  while (__stlxr(v44 - 1, v8));
  [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
  uint64_t v26 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 816LL))(a1);
LABEL_52:
  if (v53) {
    free(v53);
  }
  return v26;
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  uint64_t v13;
  unsigned int v14;
  signed int v15;
  BOOL v16;
  unsigned int v17;
  uint64_t v18;
  id v19;
  unsigned int v20;
  dispatch_queue_s *v21;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    char v19 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v18 = handle_opengl_thread_conflict((const void **)v7);
    char v19 = [(id)DYGetGLGuestAppClient(v18) waitOnGraphicsSemaphoreAssertions];
    if ((int)v19 >= 1)
    {
      do
LABEL_36:
        id v20 = __ldaxr(v8);
      while (__stlxr(v20 - 1, v8));
      uint64_t v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v19) graphicsLockWaitQueue];
      dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 816LL))(a1);
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v19) state] == (char *)&dword_0 + 1)
  {
    id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        unint64_t v17 = __ldaxr(v8);
      while (__stlxr(v17 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 816LL))(a1);
    }
  }

  v13 = *(unsigned int *)(v7 + 3400);
  if ((_DWORD)v13) {
    *(_DWORD *)(v7 + 3400) = 0;
  }
  else {
    v13 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 816LL))(a1);
  }
  do
  {
    v14 = __ldaxr(v8);
    int64_t v15 = v14 - 1;
  }

  while (__stlxr(v15, v8));
  if (gCheckGLErrors) {
    unsigned int v16 = v15 < 1;
  }
  else {
    unsigned int v16 = 1;
  }
  if (!v16) {
    handle_opengl_thread_conflict((const void **)v7);
  }
  return v13;
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  uint64_t v13;
  unsigned int v14;
  signed int v15;
  BOOL v16;
  unsigned int v17;
  uint64_t v18;
  id v19;
  unsigned int v20;
  dispatch_queue_s *v21;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    char v19 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v18 = handle_opengl_thread_conflict((const void **)v7);
    char v19 = [(id)DYGetGLGuestAppClient(v18) waitOnGraphicsSemaphoreAssertions];
    if ((int)v19 >= 1)
    {
      do
LABEL_36:
        id v20 = __ldaxr(v8);
      while (__stlxr(v20 - 1, v8));
      uint64_t v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v19) graphicsLockWaitQueue];
      dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 816LL))(a1);
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v19) state] == (char *)&dword_0 + 1)
  {
    id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        unint64_t v17 = __ldaxr(v8);
      while (__stlxr(v17 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 816LL))(a1);
    }
  }

  v13 = *(unsigned int *)(v7 + 3400);
  if ((_DWORD)v13) {
    *(_DWORD *)(v7 + 3400) = 0;
  }
  else {
    v13 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 816LL))(a1);
  }
  do
  {
    v14 = __ldaxr(v8);
    int64_t v15 = v14 - 1;
  }

  while (__stlxr(v15, v8));
  if (gCheckGLErrors) {
    unsigned int v16 = v15 < 1;
  }
  else {
    unsigned int v16 = 1;
  }
  if (!v16) {
    handle_opengl_thread_conflict((const void **)v7);
  }
  return v13;
}

{
  __GLIContextRec *v1;
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  id v13;
  uint64_t v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v19;
  dispatch_queue_s *v20;
  unsigned int v21;
  v1 = a1;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (!v11) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v7);
  }
  id v12 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v12 >= 1)
  {
    do
      char v19 = __ldaxr(v8);
    while (__stlxr(v19 - 1, v8));
    id v20 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v12) graphicsLockWaitQueue];
    dispatch_sync_f(v20, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 816LL))(v1);
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v12) state] == (char *)&dword_0 + 1)
  {
    v13 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v13)
    {
      do
        uint64_t v21 = __ldaxr(v8);
      while (__stlxr(v21 - 1, v8));
      [(id)DYGetGLGuestAppClient(v13) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 816LL))(v1);
    }
  }

  v14 = *(unsigned int *)(v7 + 3400);
  if ((_DWORD)v14) {
    *(_DWORD *)(v7 + 3400) = 0;
  }
  else {
    v14 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 816LL))(v1);
  }
  do
  {
    int64_t v15 = __ldaxr(v8);
    unsigned int v16 = v15 - 1;
  }

  while (__stlxr(v16, v8));
  if (gCheckGLErrors) {
    unint64_t v17 = v16 < 1;
  }
  else {
    unint64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v7);
  }
  return v14;
}

{
  void *v1;
  uint64_t v2;
  unint64_t v3;
  BOOL v4;
  void *v5;
  uint64_t v6;
  uint64_t v7;
  v1 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v1) {
    goto LABEL_12;
  }
  v2 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v3 = v1[4];
    unint64_t v4 = v3 >= (unint64_t)a1;
    else {
      BOOL v5 = v1 + 1;
    }
    if (v4) {
      v2 = (uint64_t)v1;
    }
    v1 = (void *)*v5;
  }

  while (*v5);
  if (v2 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v2 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    v2 = ContextInfo::activeCtxInfoMap + 8;
  v6 = *(void *)(v2 + 40);
  uint64_t v7 = *(unsigned int *)(v6 + 3400);
  if (!(_DWORD)v7) {
    return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v6 + 32) + 816LL))(a1);
  }
  *(_DWORD *)(v6 + 3400) = 0;
  return v7;
}

void sub_2A55C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_floatv(__GLIContextRec *a1, GPUTools::GL *a2, float *a3)
{
  v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_62:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      __uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, float *))(*(void *)(v11 + 24) + 824LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v58 = 0LL;
  v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v17))
  {
    if ((_DWORD)a2 == 34467)
    {
      (*(void (**)(void, uint64_t, _BYTE *))(*(void *)(v11 + 32) + 832LL))( *(void *)(v11 + 16),  34466LL,  &v61[1]);
      v61[0] = 1;
      uint64_t v18 = 110LL;
    }

    else
    {
      GPUTools::GL::DYGetParameterInfo(a2, &v61[1], (unsigned int *)v61, v16);
      if (v61[0]) {
        uint64_t v18 = 110LL;
      }
      else {
        uint64_t v18 = 102LL;
      }
    }

    snprintf((char *)(v11 + 4709), 0x40uLL, "Ce@%u%c", *(_DWORD *)&v61[1], v18);
    GPUTools::FB::Encode((uint64_t)&v58, 238LL, 256LL, v11 + 4709, v19, v20, v21, v22, *(void *)v11);
    char v24 = byte_206F46;
    if ((byte_206F46 & 1) != 0) {
      breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_B8.align + 2),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v23) overrideFlags] & 0x10 | v24 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, float *))(*(void *)(v11 + 32) + 824LL))(a1, a2, a3);
      uint64_t v30 = mach_absolute_time() - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        v32 = v58;
        *((void *)v58 + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        v56 = v58;
        *((void *)v58 + 3) = v55;
        v56[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  BOOL *v16;
  id v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  _OWORD *v33;
  uint64_t v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __int128 v57;
  void *v58;
  void *v59;
  unsigned int v60;
  _BYTE v61[5];
  v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_62:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      __uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, float *))(*(void *)(v11 + 24) + 824LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v58 = 0LL;
  v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v17))
  {
    if ((_DWORD)a2 == 34467)
    {
      (*(void (**)(void, uint64_t, _BYTE *))(*(void *)(v11 + 32) + 832LL))( *(void *)(v11 + 16),  34466LL,  &v61[1]);
      v61[0] = 1;
      uint64_t v18 = 110LL;
    }

    else
    {
      GPUTools::GL::DYGetParameterInfo(a2, &v61[1], (unsigned int *)v61, v16);
      if (v61[0]) {
        uint64_t v18 = 110LL;
      }
      else {
        uint64_t v18 = 102LL;
      }
    }

    snprintf((char *)(v11 + 4709), 0x40uLL, "Ce@%u%c", *(_DWORD *)&v61[1], v18);
    GPUTools::FB::Encode((uint64_t)&v58, 238LL, 256LL, v11 + 4709, v19, v20, v21, v22, *(void *)v11);
    char v24 = byte_206F46;
    if ((byte_206F46 & 1) != 0) {
      breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_B8.align + 2),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v23) overrideFlags] & 0x10 | v24 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, float *))(*(void *)(v11 + 32) + 824LL))(a1, a2, a3);
      uint64_t v30 = mach_absolute_time() - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        v32 = v58;
        *((void *)v58 + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        v56 = v58;
        *((void *)v58 + 3) = v55;
        v56[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      check_errors(v11);
    }

LABEL_32:
    unsigned int v33 = v58;
    __int128 v57 = *((_OWORD *)v58 + 1);
    v59 = v58;
    if (v60 >= 0x24)
    {
      *((_DWORD *)v58 + 8) = 0;
      *unsigned int v33 = 0u;
      v33[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v58, 238LL, 256LL, v11 + 4709, v25, v26, v27, v28, *(void *)v11);
    *((_OWORD *)v58 + 1) = v57;
    id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v35) {
      id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v36);
    }
    unsigned int v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v38) {
      id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v38, v37);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)&v58);
    }
    unsigned int v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v58);
    uint64_t v40 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v40 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v24 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 238LL;
    }

    breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v40, v11);
LABEL_43:
    signed int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
    BOOL v42 = (unsigned int *)((char *)v41 + 56);
    do
      unsigned int v43 = __ldaxr(v42);
    while (__stlxr(1u, v42));
    if (v43 == 1)
    {
      do
      {
        while (*v42 == 1)
          ;
        do
          unsigned int v44 = __ldaxr(v42);
        while (__stlxr(1u, v42));
      }

      while (v44 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
    atomic_store(0, v42);
    do
    {
      unsigned int v45 = __ldaxr(v12);
      signed int v46 = v45 - 1;
    }

    while (__stlxr(v46, v12));
    if (gCheckGLErrors) {
      BOOL v47 = v46 < 1;
    }
    else {
      BOOL v47 = 1;
    }
    if (!v47) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_56;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, float *))(*(void *)(v11 + 24) + 824LL))(a1, a2, a3);
LABEL_56:
  if (v58) {
    free(v58);
  }
}

    unsigned int v33 = v58;
    __int128 v57 = *((_OWORD *)v58 + 1);
    v59 = v58;
    if (v60 >= 0x24)
    {
      *((_DWORD *)v58 + 8) = 0;
      *unsigned int v33 = 0u;
      v33[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v58, 247LL, 256LL, v11 + 4709, v25, v26, v27, v28, *(void *)v11);
    *((_OWORD *)v58 + 1) = v57;
    id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v35) {
      id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v36);
    }
    unsigned int v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v38) {
      id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v38, v37);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)&v58);
    }
    unsigned int v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v58);
    uint64_t v40 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v40 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v24 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 247LL;
    }

    breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v40, v11);
LABEL_43:
    signed int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
    BOOL v42 = (unsigned int *)((char *)v41 + 56);
    do
      unsigned int v43 = __ldaxr(v42);
    while (__stlxr(1u, v42));
    if (v43 == 1)
    {
      do
      {
        while (*v42 == 1)
          ;
        do
          unsigned int v44 = __ldaxr(v42);
        while (__stlxr(1u, v42));
      }

      while (v44 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
    atomic_store(0, v42);
    do
    {
      unsigned int v45 = __ldaxr(v12);
      signed int v46 = v45 - 1;
    }

    while (__stlxr(v46, v12));
    if (gCheckGLErrors) {
      BOOL v47 = v46 < 1;
    }
    else {
      BOOL v47 = 1;
    }
    if (!v47) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_56;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, int *))(*(void *)(v11 + 24) + 832LL))(a1, a2, a3);
LABEL_56:
  if (v58) {
    free(v58);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v70, v39);
    }
    signed int v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v20 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v70, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v20, (uint64_t)v70);
    }
    BOOL v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v20 + 3480),  (GPUTools::FB::Fbuf *)(v20 + 3520),  (GPUTools::FB *)v70);
    unsigned int v43 = *(unsigned int *)(v20 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      v62 = 3LL;
      v63 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_41;
      }
      v62 = 2LL;
      v63 = 603LL;
    }

    breakpoint_break((uint64_t)v70, (volatile int *)v63, v62, v43, v20);
LABEL_41:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      signed int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          BOOL v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v70, *(unsigned int *)v70[0], 1);
    atomic_store(0, v45);
    wrapper_encode_texture_format_info(*(ContextInfo **)v20, a10, v48, v49, v50, v51, v52, v53);
    do
    {
      uint64_t v54 = __ldaxr(v21);
      uint64_t v55 = v54 - 1;
    }

    while (__stlxr(v55, v21));
    if (gCheckGLErrors) {
      v56 = v55 < 1;
    }
    else {
      v56 = 1;
    }
    if (!v56) {
      handle_opengl_thread_conflict((const void **)v20);
    }
    goto LABEL_54;
  }

  do
    __int128 v57 = __ldaxr(v21);
  while (__stlxr(v57 - 1, v21));
  [(id)DYGetGLGuestAppClient(v29) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, _DWORD, const void *))(*(void *)(v20 + 24) + 2456LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
LABEL_54:
  if (v70[0]) {
    free(v70[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v40);
    }
    BOOL v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v20 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v20, (uint64_t)v65);
    }
    unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v20 + 3480),  (GPUTools::FB::Fbuf *)(v20 + 3520),  (GPUTools::FB *)v65);
    unsigned int v44 = *(unsigned int *)(v20 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_41;
      }
      __int128 v57 = 2LL;
      v58 = 96LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v58, v57, v44, v20);
LABEL_41:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    signed int v46 = (unsigned int *)((char *)v45 + 56);
    do
      BOOL v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v46);
    wrapper_encode_texture_format_info((ContextInfo *)v20, a2, a3, a10);
    do
    {
      uint64_t v49 = __ldaxr(v21);
      id v50 = v49 - 1;
    }

    while (__stlxr(v50, v21));
    if (gCheckGLErrors) {
      unsigned int v51 = v50 < 1;
    }
    else {
      unsigned int v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v20);
    }
    goto LABEL_54;
  }

  do
    __uint64_t v52 = __ldaxr(v21);
  while (__stlxr(v52 - 1, v21));
  [(id)DYGetGLGuestAppClient(v25) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, _DWORD, const void *))(*(void *)(v20 + 24) + 3032LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
LABEL_54:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v40);
    }
    BOOL v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v20 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v20, (uint64_t)v64);
    }
    unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v20 + 3480),  (GPUTools::FB::Fbuf *)(v20 + 3520),  (GPUTools::FB *)v64);
    unsigned int v44 = *(unsigned int *)(v20 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_41;
      }
      __int128 v57 = 2LL;
      v58 = 95LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v58, v57, v44, v20);
LABEL_41:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    signed int v46 = (unsigned int *)((char *)v45 + 56);
    do
      BOOL v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v46);
    wrapper_encode_texture_format_info((ContextInfo *)v20, a2, a3, a9);
    do
    {
      uint64_t v49 = __ldaxr(v21);
      id v50 = v49 - 1;
    }

    while (__stlxr(v50, v21));
    if (gCheckGLErrors) {
      unsigned int v51 = v50 < 1;
    }
    else {
      unsigned int v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v20);
    }
    goto LABEL_54;
  }

  do
    __uint64_t v52 = __ldaxr(v21);
  while (__stlxr(v52 - 1, v21));
  [(id)DYGetGLGuestAppClient(v25) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v20 + 24) + 3040LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9);
LABEL_54:
  if (v64[0]) {
    free(v64[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v73, v39);
    }
    signed int v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v19 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v73, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v19, (uint64_t)v73);
    }
    BOOL v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v19 + 3480),  (GPUTools::FB::Fbuf *)(v19 + 3520),  (GPUTools::FB *)v73);
    unsigned int v43 = *(unsigned int *)(v19 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      v62 = 3LL;
      v63 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_41;
      }
      v62 = 2LL;
      v63 = 99LL;
    }

    breakpoint_break((uint64_t)v73, (volatile int *)v63, v62, v43, v19);
LABEL_41:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      signed int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          BOOL v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v73, *(unsigned int *)v73[0], 1);
    atomic_store(0, v45);
    wrapper_encode_texture_format_info(*(ContextInfo **)v19, a11, v48, v49, v50, v51, v52, v53);
    do
    {
      uint64_t v54 = __ldaxr(v20);
      uint64_t v55 = v54 - 1;
    }

    while (__stlxr(v55, v20));
    if (gCheckGLErrors) {
      v56 = v55 < 1;
    }
    else {
      v56 = 1;
    }
    if (!v56) {
      handle_opengl_thread_conflict((const void **)v19);
    }
    goto LABEL_54;
  }

  do
    __int128 v57 = __ldaxr(v20);
  while (__stlxr(v57 - 1, v20));
  [(id)DYGetGLGuestAppClient(v24) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, _DWORD, const void *))(*(void *)(v19 + 24) + 3056LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10,  a11);
LABEL_54:
  if (v73[0]) {
    free(v73[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v71, v40);
    }
    BOOL v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v20 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v71, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v20, (uint64_t)v71);
    }
    unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v20 + 3480),  (GPUTools::FB::Fbuf *)(v20 + 3520),  (GPUTools::FB *)v71);
    unsigned int v44 = *(unsigned int *)(v20 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      v63 = 3LL;
      v64 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_41;
      }
      v63 = 2LL;
      v64 = 98LL;
    }

    breakpoint_break((uint64_t)v71, (volatile int *)v64, v63, v44, v20);
LABEL_41:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    signed int v46 = (unsigned int *)((char *)v45 + 56);
    do
      BOOL v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v71, *(unsigned int *)v71[0], 1);
    atomic_store(0, v46);
    wrapper_encode_texture_format_info(*(ContextInfo **)v20, a10, v49, v50, v51, v52, v53, v54);
    do
    {
      uint64_t v55 = __ldaxr(v21);
      v56 = v55 - 1;
    }

    while (__stlxr(v56, v21));
    if (gCheckGLErrors) {
      __int128 v57 = v56 < 1;
    }
    else {
      __int128 v57 = 1;
    }
    if (!v57) {
      handle_opengl_thread_conflict((const void **)v20);
    }
    goto LABEL_54;
  }

  do
    v58 = __ldaxr(v21);
  while (__stlxr(v58 - 1, v21));
  [(id)DYGetGLGuestAppClient(v25) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, _DWORD, const void *))(*(void *)(v20 + 24) + 3064LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
LABEL_54:
  if (v71[0]) {
    free(v71[0]);
  }
}

    v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v71, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v19 + 3404);
    if ((_DWORD)v39) {
      v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v71, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v19, (uint64_t)v71);
    }
    uint64_t v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v19 + 3480),  (GPUTools::FB::Fbuf *)(v19 + 3520),  (GPUTools::FB *)v71);
    signed int v41 = *(unsigned int *)(v19 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      unsigned int v60 = 3LL;
      v61 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v65 & 2) == 0) {
        goto LABEL_41;
      }
      unsigned int v60 = 2LL;
      v61 = 604LL;
    }

    breakpoint_break((uint64_t)v71, (volatile int *)v61, v60, v41, v19);
LABEL_41:
    BOOL v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    unsigned int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v71, *(unsigned int *)v71[0], 1);
    atomic_store(0, v43);
    wrapper_encode_texture_format_info(*(ContextInfo **)v19, a11, v46, v47, v48, v49, v50, v51);
    do
    {
      __uint64_t v52 = __ldaxr(v20);
      uint64_t v53 = v52 - 1;
    }

    while (__stlxr(v53, v20));
    if (gCheckGLErrors) {
      uint64_t v54 = v53 < 1;
    }
    else {
      uint64_t v54 = 1;
    }
    if (!v54) {
      handle_opengl_thread_conflict((const void **)v19);
    }
    goto LABEL_54;
  }

  do
    uint64_t v55 = __ldaxr(v20);
  while (__stlxr(v55 - 1, v20));
  [(id)DYGetGLGuestAppClient(v28) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, _DWORD, const void *))(*(void *)(v19 + 24) + 3512LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10,  a11);
LABEL_54:
  if (v71[0]) {
    free(v71[0]);
  }
}

    unsigned int v33 = v58;
    __int128 v57 = *((_OWORD *)v58 + 1);
    v59 = v58;
    if (v60 >= 0x24)
    {
      *((_DWORD *)v58 + 8) = 0;
      *unsigned int v33 = 0u;
      v33[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v58, 882LL, 256LL, v11 + 4709, v25, v26, v27, v28, *(void *)v11);
    *((_OWORD *)v58 + 1) = v57;
    id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v35) {
      id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v36);
    }
    unsigned int v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v38) {
      id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v38, v37);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)&v58);
    }
    unsigned int v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v58);
    uint64_t v40 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v40 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v24 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 882LL;
    }

    breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v40, v11);
LABEL_43:
    signed int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
    BOOL v42 = (unsigned int *)((char *)v41 + 56);
    do
      unsigned int v43 = __ldaxr(v42);
    while (__stlxr(1u, v42));
    if (v43 == 1)
    {
      do
      {
        while (*v42 == 1)
          ;
        do
          unsigned int v44 = __ldaxr(v42);
        while (__stlxr(1u, v42));
      }

      while (v44 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
    atomic_store(0, v42);
    do
    {
      unsigned int v45 = __ldaxr(v12);
      signed int v46 = v45 - 1;
    }

    while (__stlxr(v46, v12));
    if (gCheckGLErrors) {
      BOOL v47 = v46 < 1;
    }
    else {
      BOOL v47 = 1;
    }
    if (!v47) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_56;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t *))(*(void *)(v11 + 24) + 6272LL))(a1, a2, a3);
LABEL_56:
  if (v58) {
    free(v58);
  }
}

    unsigned int v33 = v58;
    __int128 v57 = *((_OWORD *)v58 + 1);
    v59 = v58;
    if (v60 >= 0x24)
    {
      *((_DWORD *)v58 + 8) = 0;
      *unsigned int v33 = 0u;
      v33[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v58, 238LL, 256LL, v11 + 4709, v25, v26, v27, v28, *(void *)v11);
    *((_OWORD *)v58 + 1) = v57;
    id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v35) {
      id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v36);
    }
    unsigned int v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v38) {
      id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v38, v37);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)&v58);
    }
    unsigned int v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v58);
    uint64_t v40 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v40 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v24 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 238LL;
    }

    breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v40, v11);
LABEL_43:
    signed int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
    BOOL v42 = (unsigned int *)((char *)v41 + 56);
    do
      unsigned int v43 = __ldaxr(v42);
    while (__stlxr(1u, v42));
    if (v43 == 1)
    {
      do
      {
        while (*v42 == 1)
          ;
        do
          unsigned int v44 = __ldaxr(v42);
        while (__stlxr(1u, v42));
      }

      while (v44 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
    atomic_store(0, v42);
    do
    {
      unsigned int v45 = __ldaxr(v12);
      signed int v46 = v45 - 1;
    }

    while (__stlxr(v46, v12));
    if (gCheckGLErrors) {
      BOOL v47 = v46 < 1;
    }
    else {
      BOOL v47 = 1;
    }
    if (!v47) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_56;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, float *))(*(void *)(v11 + 24) + 824LL))(a1, a2, a3);
LABEL_56:
  if (v58) {
    free(v58);
  }
}

    unsigned int v33 = v58;
    __int128 v57 = *((_OWORD *)v58 + 1);
    v59 = v58;
    if (v60 >= 0x24)
    {
      *((_DWORD *)v58 + 8) = 0;
      *unsigned int v33 = 0u;
      v33[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v58, 247LL, 256LL, v11 + 4709, v25, v26, v27, v28, *(void *)v11);
    *((_OWORD *)v58 + 1) = v57;
    id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v35) {
      id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v36);
    }
    unsigned int v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v38) {
      id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v38, v37);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)&v58);
    }
    unsigned int v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v58);
    uint64_t v40 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v40 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v24 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 247LL;
    }

    breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v40, v11);
LABEL_43:
    signed int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
    BOOL v42 = (unsigned int *)((char *)v41 + 56);
    do
      unsigned int v43 = __ldaxr(v42);
    while (__stlxr(1u, v42));
    if (v43 == 1)
    {
      do
      {
        while (*v42 == 1)
          ;
        do
          unsigned int v44 = __ldaxr(v42);
        while (__stlxr(1u, v42));
      }

      while (v44 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
    atomic_store(0, v42);
    do
    {
      unsigned int v45 = __ldaxr(v12);
      signed int v46 = v45 - 1;
    }

    while (__stlxr(v46, v12));
    if (gCheckGLErrors) {
      BOOL v47 = v46 < 1;
    }
    else {
      BOOL v47 = 1;
    }
    if (!v47) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_56;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, int *))(*(void *)(v11 + 24) + 832LL))(a1, a2, a3);
LABEL_56:
  if (v58) {
    free(v58);
  }
}

    unsigned int v33 = v58;
    __int128 v57 = *((_OWORD *)v58 + 1);
    v59 = v58;
    if (v60 >= 0x24)
    {
      *((_DWORD *)v58 + 8) = 0;
      *unsigned int v33 = 0u;
      v33[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v58, 882LL, 256LL, v11 + 4709, v25, v26, v27, v28, *(void *)v11);
    *((_OWORD *)v58 + 1) = v57;
    id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v35) {
      id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v36);
    }
    unsigned int v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v38) {
      id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v38, v37);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)&v58);
    }
    unsigned int v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v58);
    uint64_t v40 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v40 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v24 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 882LL;
    }

    breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v40, v11);
LABEL_43:
    signed int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
    BOOL v42 = (unsigned int *)((char *)v41 + 56);
    do
      unsigned int v43 = __ldaxr(v42);
    while (__stlxr(1u, v42));
    if (v43 == 1)
    {
      do
      {
        while (*v42 == 1)
          ;
        do
          unsigned int v44 = __ldaxr(v42);
        while (__stlxr(1u, v42));
      }

      while (v44 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
    atomic_store(0, v42);
    do
    {
      unsigned int v45 = __ldaxr(v12);
      signed int v46 = v45 - 1;
    }

    while (__stlxr(v46, v12));
    if (gCheckGLErrors) {
      BOOL v47 = v46 < 1;
    }
    else {
      BOOL v47 = 1;
    }
    if (!v47) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_56;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t *))(*(void *)(v11 + 24) + 6272LL))(a1, a2, a3);
LABEL_56:
  if (v58) {
    free(v58);
  }
}

void sub_2AA5C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, void *a15)
{
  if (a15) {
    free(a15);
  }
  _Unwind_Resume(exception_object);
}

void get_integerv(__GLIContextRec *a1, GPUTools::GL *a2, int *a3)
{
  v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_62:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      __uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, int *))(*(void *)(v11 + 24) + 832LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v58 = 0LL;
  v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v17))
  {
    if ((_DWORD)a2 == 34467)
    {
      (*(void (**)(void, uint64_t, _BYTE *))(*(void *)(v11 + 32) + 832LL))( *(void *)(v11 + 16),  34466LL,  &v61[1]);
      v61[0] = 1;
      uint64_t v18 = 101LL;
    }

    else
    {
      GPUTools::GL::DYGetParameterInfo(a2, &v61[1], (unsigned int *)v61, v16);
      if (v61[0]) {
        uint64_t v18 = 101LL;
      }
      else {
        uint64_t v18 = 105LL;
      }
    }

    snprintf((char *)(v11 + 4709), 0x40uLL, "Ce@%u%c", *(_DWORD *)&v61[1], v18);
    GPUTools::FB::Encode((uint64_t)&v58, 247LL, 256LL, v11 + 4709, v19, v20, v21, v22, *(void *)v11);
    char v24 = byte_206F4F;
    if ((byte_206F4F & 1) != 0) {
      breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_B8.nreloc + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v23) overrideFlags] & 0x10 | v24 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, int *))(*(void *)(v11 + 32) + 832LL))(a1, a2, a3);
      uint64_t v30 = mach_absolute_time() - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        v32 = v58;
        *((void *)v58 + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        v56 = v58;
        *((void *)v58 + 3) = v55;
        v56[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  BOOL *v16;
  id v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  _OWORD *v33;
  uint64_t v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __int128 v57;
  void *v58;
  void *v59;
  unsigned int v60;
  _BYTE v61[5];
  v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_62:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      __uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, int *))(*(void *)(v11 + 24) + 832LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v58 = 0LL;
  v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v17))
  {
    if ((_DWORD)a2 == 34467)
    {
      (*(void (**)(void, uint64_t, _BYTE *))(*(void *)(v11 + 32) + 832LL))( *(void *)(v11 + 16),  34466LL,  &v61[1]);
      v61[0] = 1;
      uint64_t v18 = 101LL;
    }

    else
    {
      GPUTools::GL::DYGetParameterInfo(a2, &v61[1], (unsigned int *)v61, v16);
      if (v61[0]) {
        uint64_t v18 = 101LL;
      }
      else {
        uint64_t v18 = 105LL;
      }
    }

    snprintf((char *)(v11 + 4709), 0x40uLL, "Ce@%u%c", *(_DWORD *)&v61[1], v18);
    GPUTools::FB::Encode((uint64_t)&v58, 247LL, 256LL, v11 + 4709, v19, v20, v21, v22, *(void *)v11);
    char v24 = byte_206F4F;
    if ((byte_206F4F & 1) != 0) {
      breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_B8.nreloc + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v23) overrideFlags] & 0x10 | v24 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, int *))(*(void *)(v11 + 32) + 832LL))(a1, a2, a3);
      uint64_t v30 = mach_absolute_time() - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        v32 = v58;
        *((void *)v58 + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        v56 = v58;
        *((void *)v58 + 3) = v55;
        v56[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      check_errors(v11);
    }

void sub_2AF58( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, void *a15)
{
  if (a15) {
    free(a15);
  }
  _Unwind_Resume(exception_object);
}

void get_lightfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_60:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 840LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v63 = 0LL;
  v64 = 0LL;
  unsigned int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    int v20 = GPUTools::GL::dy_light_array_size(a3, v18);
    uint64_t v21 = v13 + 4709;
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%df", v20);
    GPUTools::FB::Encode((uint64_t)&v63, 248LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F50;
    if ((byte_206F50 & 1) != 0) {
      breakpoint_break((uint64_t)&v63, (volatile int *)&stru_B8.flags, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 840LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v63;
        *((void *)v63 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v63;
        *((void *)v63 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v21 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    unsigned int v38 = v63;
    __int128 v62 = *((_OWORD *)v63 + 1);
    v64 = v63;
    if (v65 >= 0x24)
    {
      *((_DWORD *)v63 + 8) = 0;
      *unsigned int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v63, 248LL, 256LL, v21, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v63 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v63, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v63, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v63);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v63);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_41;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 248LL;
    }

    breakpoint_break((uint64_t)&v63, (volatile int *)v59, v58, v45, v13);
LABEL_41:
    signed int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    BOOL v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v63, *(unsigned int *)v63, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_54;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 840LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63) {
    free(v63);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  id v19;
  int v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  void *v63;
  void *v64;
  unsigned int v65;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_60:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 840LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v63 = 0LL;
  v64 = 0LL;
  unsigned int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    int v20 = GPUTools::GL::dy_light_array_size(a3, v18);
    uint64_t v21 = v13 + 4709;
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%df", v20);
    GPUTools::FB::Encode((uint64_t)&v63, 248LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F50;
    if ((byte_206F50 & 1) != 0) {
      breakpoint_break((uint64_t)&v63, (volatile int *)&stru_B8.flags, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 840LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v63;
        *((void *)v63 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v63;
        *((void *)v63 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v21 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    unsigned int v38 = v63;
    __int128 v62 = *((_OWORD *)v63 + 1);
    v64 = v63;
    if (v65 >= 0x24)
    {
      *((_DWORD *)v63 + 8) = 0;
      *unsigned int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v63, 248LL, 256LL, v21, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v63 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v63, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v63, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v63);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v63);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_41;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 248LL;
    }

    breakpoint_break((uint64_t)&v63, (volatile int *)v59, v58, v45, v13);
LABEL_41:
    signed int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    BOOL v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v63, *(unsigned int *)v63, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_54;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 840LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63) {
    free(v63);
  }
}

void sub_2B424( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_materialfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_60:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 880LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v63 = 0LL;
  v64 = 0LL;
  unsigned int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    int v20 = GPUTools::GL::DYMaterialParameterComponentCount(a3, v18);
    uint64_t v21 = v13 + 4709;
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%df", v20);
    GPUTools::FB::Encode((uint64_t)&v63, 253LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F55;
    if ((byte_206F55 & 1) != 0) {
      breakpoint_break( (uint64_t)&v63,  (volatile int *)((char *)&stru_B8.reserved1 + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 880LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v63;
        *((void *)v63 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v63;
        *((void *)v63 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v21 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    unsigned int v38 = v63;
    __int128 v62 = *((_OWORD *)v63 + 1);
    v64 = v63;
    if (v65 >= 0x24)
    {
      *((_DWORD *)v63 + 8) = 0;
      *unsigned int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v63, 253LL, 256LL, v21, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v63 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v63, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v63, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v63);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v63);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_41;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 253LL;
    }

    breakpoint_break((uint64_t)&v63, (volatile int *)v59, v58, v45, v13);
LABEL_41:
    signed int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    BOOL v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v63, *(unsigned int *)v63, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_54;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 880LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63) {
    free(v63);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  id v19;
  int v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  void *v63;
  void *v64;
  unsigned int v65;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_60:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 880LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v63 = 0LL;
  v64 = 0LL;
  unsigned int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    int v20 = GPUTools::GL::DYMaterialParameterComponentCount(a3, v18);
    uint64_t v21 = v13 + 4709;
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%df", v20);
    GPUTools::FB::Encode((uint64_t)&v63, 253LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F55;
    if ((byte_206F55 & 1) != 0) {
      breakpoint_break( (uint64_t)&v63,  (volatile int *)((char *)&stru_B8.reserved1 + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 880LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v63;
        *((void *)v63 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v63;
        *((void *)v63 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v21 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    unsigned int v38 = v63;
    __int128 v62 = *((_OWORD *)v63 + 1);
    v64 = v63;
    if (v65 >= 0x24)
    {
      *((_DWORD *)v63 + 8) = 0;
      *unsigned int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v63, 253LL, 256LL, v21, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v63 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v63, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v63, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v63);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v63);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_41;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 253LL;
    }

    breakpoint_break((uint64_t)&v63, (volatile int *)v59, v58, v45, v13);
LABEL_41:
    signed int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    BOOL v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v63, *(unsigned int *)v63, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_54;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 880LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63) {
    free(v63);
  }
}

void sub_2B8F0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_pointerv(__GLIContextRec *a1, uint64_t a2, void **a3)
{
  v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v11);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_58:
        unsigned int v49 = __ldaxr(v12);
      while (__stlxr(v49 - 1, v12));
      unsigned int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, void **))(*(void *)(v11 + 24) + 920LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v56 = 0LL;
  __int128 v57 = 0LL;
  unsigned int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)&v56, 264LL, 256LL, (uint64_t)"Ce@1t", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_206F60;
    if ((byte_206F60 & 1) != 0) {
      breakpoint_break((uint64_t)&v56, (volatile int *)&stru_108, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, void **))(*(void *)(v11 + 32) + 920LL))(a1, a2, a3);
      uint64_t v28 = mach_absolute_time() - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v56;
        *((void *)v56 + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        uint64_t v54 = v56;
        *((void *)v56 + 3) = v53;
        v54[2] = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  _OWORD *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  __int128 v55;
  void *v56;
  void *v57;
  unsigned int v58;
  v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v11);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_58:
        unsigned int v49 = __ldaxr(v12);
      while (__stlxr(v49 - 1, v12));
      unsigned int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, void **))(*(void *)(v11 + 24) + 920LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v56 = 0LL;
  __int128 v57 = 0LL;
  unsigned int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)&v56, 264LL, 256LL, (uint64_t)"Ce@1t", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_206F60;
    if ((byte_206F60 & 1) != 0) {
      breakpoint_break((uint64_t)&v56, (volatile int *)&stru_108, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, void **))(*(void *)(v11 + 32) + 920LL))(a1, a2, a3);
      uint64_t v28 = mach_absolute_time() - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v56;
        *((void *)v56 + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        uint64_t v54 = v56;
        *((void *)v56 + 3) = v53;
        v54[2] = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    char v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, void **))(*(void *)(v11 + 24) + 920LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        id v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, void **))(*(void *)(v11 + 32) + 920LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, void **))(*(void *)(v11 + 24) + 920LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, void **))(*(void *)(v11 + 32) + 920LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    id v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    char v22 = v21 < 1;
  }
  else {
    char v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_2BD68( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

uint64_t get_string(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v9);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_56:
        unsigned int v49 = __ldaxr(v10);
      while (__stlxr(v49 - 1, v10));
      unsigned int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 936LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v55, 282LL, 256LL, (uint64_t)"Ce", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_206F72;
    if ((byte_206F72 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_108.segname[2], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    if ([(id)DYGetGLGuestAppClient(v19) overrideFlags] & 0x10 | v20 & 4)
    {
      uint64_t v27 = 0LL;
      goto LABEL_28;
    }

    uint64_t v26 = mach_absolute_time();
    uint64_t v27 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 936LL))(a1, a2);
    uint64_t v28 = mach_absolute_time() - v26;
    unint64_t v29 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v30 = v55[0];
      *((void *)v55[0] + 2) = v26;
      v30[3] = v28;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v53 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
      uint64_t v54 = v55[0];
      *((void *)v55[0] + 3) = v53;
      v54[2] = __udivti3(v29 * v26, (v29 * (unsigned __int128)v26) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v9);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v55, 4294955008LL, (uint64_t)"S", v21, v22, v23, v24, v25, v27);
    id v32 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v32) {
      id v32 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v55, v33);
    }
    unsigned int v35 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
    if ((_DWORD)v35) {
      id v32 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v55, v35, v34);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v9, (uint64_t)v55);
    }
    unint64_t v36 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)v55);
    uint64_t v37 = *(unsigned int *)(v9 + 3404);
    if ((_DWORD)v37 && gBreakOnError)
    {
      uint64_t v51 = 3LL;
      uint64_t v52 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v20 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v51 = 2LL;
      uint64_t v52 = 282LL;
    }

    breakpoint_break((uint64_t)v55, (volatile int *)v52, v51, v37, v9);
LABEL_37:
    uint64_t v38 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v36) defaultFbufStream];
    uint64_t v39 = (unsigned int *)((char *)v38 + 56);
    do
      unsigned int v40 = __ldaxr(v39);
    while (__stlxr(1u, v39));
    if (v40 == 1)
    {
      do
      {
        while (*v39 == 1)
          ;
        do
          unsigned int v41 = __ldaxr(v39);
        while (__stlxr(1u, v39));
      }

      while (v41 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v38, (GPUTools::FB::Fbuf *)v55, *(unsigned int *)v55[0], 1);
    atomic_store(0, v39);
    do
    {
      unsigned int v42 = __ldaxr(v10);
      signed int v43 = v42 - 1;
    }

    while (__stlxr(v43, v10));
    if (gCheckGLErrors) {
      BOOL v44 = v43 < 1;
    }
    else {
      BOOL v44 = 1;
    }
    if (!v44) {
      handle_opengl_thread_conflict((const void **)v9);
    }
    goto LABEL_50;
  }

  do
    unsigned int v46 = __ldaxr(v10);
  while (__stlxr(v46 - 1, v10));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  uint64_t v27 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 936LL))(a1, a2);
LABEL_50:
  if (v55[0]) {
    free(v55[0]);
  }
  return v27;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  id v18;
  uint64_t v19;
  char v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  uint64_t v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  void *v55[2];
  int v56;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v9);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_56:
        unsigned int v49 = __ldaxr(v10);
      while (__stlxr(v49 - 1, v10));
      unsigned int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 936LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v55, 282LL, 256LL, (uint64_t)"Ce", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_206F72;
    if ((byte_206F72 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_108.segname[2], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    if ([(id)DYGetGLGuestAppClient(v19) overrideFlags] & 0x10 | v20 & 4)
    {
      uint64_t v27 = 0LL;
      goto LABEL_28;
    }

    uint64_t v26 = mach_absolute_time();
    uint64_t v27 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 936LL))(a1, a2);
    uint64_t v28 = mach_absolute_time() - v26;
    unint64_t v29 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v30 = v55[0];
      *((void *)v55[0] + 2) = v26;
      v30[3] = v28;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v53 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
      uint64_t v54 = v55[0];
      *((void *)v55[0] + 3) = v53;
      v54[2] = __udivti3(v29 * v26, (v29 * (unsigned __int128)v26) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v9);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v55, 4294955008LL, (uint64_t)"S", v21, v22, v23, v24, v25, v27);
    id v32 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v32) {
      id v32 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v55, v33);
    }
    unsigned int v35 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
    if ((_DWORD)v35) {
      id v32 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v55, v35, v34);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v9, (uint64_t)v55);
    }
    unint64_t v36 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)v55);
    uint64_t v37 = *(unsigned int *)(v9 + 3404);
    if ((_DWORD)v37 && gBreakOnError)
    {
      uint64_t v51 = 3LL;
      uint64_t v52 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v20 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v51 = 2LL;
      uint64_t v52 = 282LL;
    }

    breakpoint_break((uint64_t)v55, (volatile int *)v52, v51, v37, v9);
LABEL_37:
    uint64_t v38 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v36) defaultFbufStream];
    uint64_t v39 = (unsigned int *)((char *)v38 + 56);
    do
      unsigned int v40 = __ldaxr(v39);
    while (__stlxr(1u, v39));
    if (v40 == 1)
    {
      do
      {
        while (*v39 == 1)
          ;
        do
          unsigned int v41 = __ldaxr(v39);
        while (__stlxr(1u, v39));
      }

      while (v41 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v38, (GPUTools::FB::Fbuf *)v55, *(unsigned int *)v55[0], 1);
    atomic_store(0, v39);
    do
    {
      unsigned int v42 = __ldaxr(v10);
      signed int v43 = v42 - 1;
    }

    while (__stlxr(v43, v10));
    if (gCheckGLErrors) {
      BOOL v44 = v43 < 1;
    }
    else {
      BOOL v44 = 1;
    }
    if (!v44) {
      handle_opengl_thread_conflict((const void **)v9);
    }
    goto LABEL_50;
  }

  do
    unsigned int v46 = __ldaxr(v10);
  while (__stlxr(v46 - 1, v10));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  uint64_t v27 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 936LL))(a1, a2);
LABEL_50:
  if (v55[0]) {
    free(v55[0]);
  }
  return v27;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v20 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 936LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 936LL))(a1, a2);
    }
  }

  uint64_t v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 936LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    uint64_t v16 = __ldaxr(v10);
    uint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    id v18 = v17 < 1;
  }
  else {
    id v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 936LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 936LL))(a1, a2);
    }
  }

  uint64_t v15 = mach_absolute_time();
  uint64_t v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 936LL))(a1, a2);
  uint64_t v17 = mach_absolute_time();
  id v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v10);
    char v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  uint64_t v3 = a1;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  uint64_t v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      char v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    uint64_t v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 936LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    uint64_t v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 936LL))(v3, a2);
    }
  }

  do
  {
    uint64_t v16 = __ldaxr(v10);
    uint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    id v18 = v17 < 1;
  }
  else {
    id v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_2C1A0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_tex_envfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 944LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 110LL;
    if (!v63[0]) {
      uint64_t v21 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 283LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F73;
    if ((byte_206F73 & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.segname[3], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 944LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 283LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    signed int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    BOOL v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 283LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 944LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 944LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 110LL;
    if (!v63[0]) {
      uint64_t v21 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 283LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F73;
    if ((byte_206F73 & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.segname[3], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 944LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 283LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    signed int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    BOOL v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 283LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 944LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_2C68C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_tex_enviv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 952LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 284LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F74;
    if ((byte_206F74 & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.segname[4], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 952LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 284LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    signed int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    BOOL v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 284LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 952LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 952LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 284LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F74;
    if ((byte_206F74 & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.segname[4], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 952LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 284LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    signed int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    BOOL v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 284LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 952LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_2CB7C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_tex_image(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, void *a6)
{
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  id v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      BOOL v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                            + 984LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  uint64_t v59 = 0LL;
  uint64_t v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v24 = (char *)v59;
    uint64_t v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x4B) {
      goto LABEL_24;
    }
    int v53 = (331 - v27) & 0xFFFFFF00;
    v61 += v53;
    uint64_t v24 = (char *)malloc(v53 + v26);
    uint64_t v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        uint64_t v23 = &v24[v25];
LABEL_24:
        *(_OWORD *)(v23 + 60) = 0u;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)uint64_t v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        uint64_t v60 = v23 + 76;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 288;
        *((_DWORD *)v24 + 8) = 256;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        strcpy(v24 + 36, "Ceieep");
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *((_DWORD *)v24 + 15) = a4;
        *((_DWORD *)v24 + 16) = a5;
        *(void *)(v24 + 68) = a6;
        char v29 = byte_206F78;
        if ((byte_206F78 & 1) != 0) {
          breakpoint_break((uint64_t)&v59, (volatile int *)&stru_108.segname[8], 1LL, *(unsigned int *)(v17 + 3404), v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 32)
                                                                                                + 984LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            __int128 v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  char *v23;
  char *v24;
  int64_t v25;
  unsigned int v26;
  unint64_t v27;
  uint64_t v28;
  char v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  unint64_t v33;
  void *v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  int v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  __uint64_t v58;
  void *v59;
  char *v60;
  unsigned int v61;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  id v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      BOOL v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                            + 984LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  uint64_t v59 = 0LL;
  uint64_t v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v24 = (char *)v59;
    uint64_t v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x4B) {
      goto LABEL_24;
    }
    int v53 = (331 - v27) & 0xFFFFFF00;
    v61 += v53;
    uint64_t v24 = (char *)malloc(v53 + v26);
    uint64_t v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        uint64_t v23 = &v24[v25];
LABEL_24:
        *(_OWORD *)(v23 + 60) = 0u;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)uint64_t v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        uint64_t v60 = v23 + 76;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 288;
        *((_DWORD *)v24 + 8) = 256;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        strcpy(v24 + 36, "Ceieep");
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *((_DWORD *)v24 + 15) = a4;
        *((_DWORD *)v24 + 16) = a5;
        *(void *)(v24 + 68) = a6;
        char v29 = byte_206F78;
        if ((byte_206F78 & 1) != 0) {
          breakpoint_break((uint64_t)&v59, (volatile int *)&stru_108.segname[8], 1LL, *(unsigned int *)(v17 + 3404), v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 32)
                                                                                                + 984LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            __int128 v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  id v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                            + 984LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        unsigned int v26 = __ldaxr(v18);
      while (__stlxr(v26 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 32) + 984LL))( a1,  a2,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v17);
      }
    }
  }

  do
  {
    uint64_t v23 = __ldaxr(v18);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v18));
  if (gCheckGLErrors) {
    int64_t v25 = v24 < 1;
  }
  else {
    int64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  int64x2_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  id v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        uint64_t v32 = __ldaxr(v18);
      while (__stlxr(v32 - 1, v18));
      unint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                            + 984LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 32) + 984LL))( a1,  a2,  a3,  a4,  a5,  a6);
  uint64_t v24 = mach_absolute_time();
  int64_t v25 = vdupq_n_s64(1uLL);
  v25.i64[0] = v24 - v23;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v25, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      char v34 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v17);
      }
    }
  }

  do
  {
    unsigned int v26 = __ldaxr(v18);
    unint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v18));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_2D0C8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_tex_level_parameteriv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, int *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      id v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 1000LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __int128 v57 = 0LL;
  __uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    id v22 = (char *)v57;
    BOOL v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x47) {
      goto LABEL_24;
    }
    int v51 = (327 - v25) & 0xFFFFFF00;
    v59 += v51;
    id v22 = (char *)malloc(v51 + v24);
    __int128 v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        BOOL v21 = &v22[v23];
LABEL_24:
        *((void *)v21 + 8) = 0LL;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)BOOL v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        __uint64_t v58 = v21 + 72;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 290;
        *((_DWORD *)v22 + 8) = 256;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceiep");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((void *)v22 + 8) = a5;
        char v27 = byte_206F7A;
        if ((byte_206F7A & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)&stru_108.segname[10],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *))(*(void *)(v15 + 32) + 1000LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            uint64_t v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      id v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 1000LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __int128 v57 = 0LL;
  __uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    id v22 = (char *)v57;
    BOOL v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x47) {
      goto LABEL_24;
    }
    int v51 = (327 - v25) & 0xFFFFFF00;
    v59 += v51;
    id v22 = (char *)malloc(v51 + v24);
    __int128 v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        BOOL v21 = &v22[v23];
LABEL_24:
        *((void *)v21 + 8) = 0LL;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)BOOL v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        __uint64_t v58 = v21 + 72;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 290;
        *((_DWORD *)v22 + 8) = 256;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceiep");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((void *)v22 + 8) = a5;
        char v27 = byte_206F7A;
        if ((byte_206F7A & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)&stru_108.segname[10],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *))(*(void *)(v15 + 32) + 1000LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            uint64_t v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 1000LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        unsigned int v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *))(*(void *)(v15 + 32) + 1000LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    BOOL v21 = __ldaxr(v16);
    id v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    int64_t v23 = v22 < 1;
  }
  else {
    int64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 1000LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *))(*(void *)(v15 + 32) + 1000LL))( a1,  a2,  a3,  a4,  a5);
  id v22 = mach_absolute_time();
  int64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    unsigned int v24 = __ldaxr(v16);
    unint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_2D5E8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_tex_parameterfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 1008LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 110LL;
    if (!v63[0]) {
      uint64_t v21 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 294LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F7E;
    if ((byte_206F7E & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.segname[14], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 1008LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 294LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    signed int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 294LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 1008LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 1008LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 110LL;
    if (!v63[0]) {
      uint64_t v21 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 294LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F7E;
    if ((byte_206F7E & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.segname[14], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 1008LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 294LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    signed int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 294LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 1008LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_2DAD8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_tex_parameteriv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 1016LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 295LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F7F;
    if ((byte_206F7F & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.segname[15], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 1016LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 295LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    signed int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 295LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 1016LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __int128 v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 1016LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 295LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F7F;
    if ((byte_206F7F & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.segname[15], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 1016LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 295LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    signed int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 295LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 1016LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_2DFC8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void hint(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 1024LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    signed int v18 = (char *)v53;
    BOOL v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v47 = (311 - v21) & 0xFFFFFF00;
    v55 += v47;
    signed int v18 = (char *)malloc(v47 + v20);
    unsigned int v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        uint64_t v54 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 309;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        *((_DWORD *)v18 + 9) = 6645059;
        *((void *)v18 + 5) = *(void *)v11;
        *((_DWORD *)v18 + 12) = a2;
        *((_DWORD *)v18 + 13) = a3;
        char v23 = byte_206F8D;
        if ((byte_206F8D & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)((char *)&stru_108.size + 5),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 1024LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            signed int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 1024LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    signed int v18 = (char *)v53;
    BOOL v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v47 = (311 - v21) & 0xFFFFFF00;
    v55 += v47;
    signed int v18 = (char *)malloc(v47 + v20);
    unsigned int v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        uint64_t v54 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 309;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        *((_DWORD *)v18 + 9) = 6645059;
        *((void *)v18 + 5) = *(void *)v11;
        *((_DWORD *)v18 + 12) = a2;
        *((_DWORD *)v18 + 13) = a3;
        char v23 = byte_206F8D;
        if ((byte_206F8D & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)((char *)&stru_108.size + 5),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 1024LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            signed int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 1024LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 1024LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    BOOL v17 = __ldaxr(v12);
    signed int v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 1024LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 1024LL))(a1, a2, a3);
  signed int v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_2E4A4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_enabled(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1144LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        uint64_t v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 326;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206F9E;
        if ((byte_206F9E & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.nreloc + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1144LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          unsigned int v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unint64_t v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 326LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        unsigned int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        signed int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1144LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1144LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        uint64_t v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 326;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206F9E;
        if ((byte_206F9E & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.nreloc + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1144LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          unsigned int v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unint64_t v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 326LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        unsigned int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        signed int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1144LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1144LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1144LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1144LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1144LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1144LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1144LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  uint64_t v3 = a1;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1144LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1144LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_2E9B0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_texture(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1160LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        uint64_t v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 336;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA8;
        if ((byte_206FA8 & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_108.reserved2, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1160LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          unsigned int v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unint64_t v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 336LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        unsigned int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        signed int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1160LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1160LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        uint64_t v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 336;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA8;
        if ((byte_206FA8 & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_108.reserved2, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1160LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          unsigned int v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unint64_t v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 336LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        unsigned int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        signed int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1160LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1160LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1160LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1160LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1160LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1160LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1160LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  uint64_t v3 = a1;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1160LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1160LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_2EEBC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void light_modelf(__GLIContextRec *a1, uint64_t a2, float a3)
{
  if ((_DWORD)a2 == 33272) {
    unint64_t v6 = "Cen";
  }
  else {
    unint64_t v6 = "Cef";
  }
  BOOL v7 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v7) {
    goto LABEL_15;
  }
  uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v9 = v7[4];
    BOOL v10 = v9 >= (unint64_t)a1;
    else {
      unsigned int v11 = v7 + 1;
    }
    if (v10) {
      uint64_t v8 = (uint64_t)v7;
    }
    BOOL v7 = (void *)*v11;
  }

  while (*v11);
  if (v8 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v8 + 32) > (unint64_t)a1) {
LABEL_15:
  }
    uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v12 = *(void *)(v8 + 40);
  BOOL v13 = (unsigned int *)(v12 + 4640);
  do
  {
    unsigned int v14 = __ldaxr(v13);
    signed int v15 = v14 + 1;
  }

  while (__stlxr(v15, v13));
  if (gCheckGLErrors) {
    BOOL v16 = v15 <= 1;
  }
  else {
    BOOL v16 = 1;
  }
  if (v16)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v12);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v13);
      while (__stlxr(v45 - 1, v13));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v12 + 24) + 1168LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v12 + 4838) = 1;
  v51[0] = 0LL;
  v51[1] = 0LL;
  int v52 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::FB::Encode((uint64_t)v51, 339LL, 0LL, (uint64_t)v6, v17, v18, v19, v20, *(void *)v12);
    char v23 = byte_206FAB;
    if ((byte_206FAB & 1) != 0) {
      breakpoint_break( (uint64_t)v51,  (volatile int *)((char *)&stru_108.reserved2 + 3),  1LL,  *(unsigned int *)(v12 + 3404),  v12);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v12 + 32) + 1168LL))(a1, a2, a3);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v51[0];
        *((void *)v51[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        unsigned int v50 = v51[0];
        *((void *)v51[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      uint64_t v24 = check_errors(v12);
    }

{
  const char *v6;
  void *v7;
  uint64_t v8;
  unint64_t v9;
  BOOL v10;
  void *v11;
  uint64_t v12;
  unsigned int *v13;
  unsigned int v14;
  signed int v15;
  BOOL v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  id v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  void *v51[2];
  int v52;
  if ((_DWORD)a2 == 33272) {
    unint64_t v6 = "Cen";
  }
  else {
    unint64_t v6 = "Cef";
  }
  BOOL v7 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v7) {
    goto LABEL_15;
  }
  uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v9 = v7[4];
    BOOL v10 = v9 >= (unint64_t)a1;
    else {
      unsigned int v11 = v7 + 1;
    }
    if (v10) {
      uint64_t v8 = (uint64_t)v7;
    }
    BOOL v7 = (void *)*v11;
  }

  while (*v11);
  if (v8 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v8 + 32) > (unint64_t)a1) {
LABEL_15:
  }
    uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v12 = *(void *)(v8 + 40);
  BOOL v13 = (unsigned int *)(v12 + 4640);
  do
  {
    unsigned int v14 = __ldaxr(v13);
    signed int v15 = v14 + 1;
  }

  while (__stlxr(v15, v13));
  if (gCheckGLErrors) {
    BOOL v16 = v15 <= 1;
  }
  else {
    BOOL v16 = 1;
  }
  if (v16)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v12);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v13);
      while (__stlxr(v45 - 1, v13));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v12 + 24) + 1168LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v12 + 4838) = 1;
  v51[0] = 0LL;
  v51[1] = 0LL;
  int v52 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::FB::Encode((uint64_t)v51, 339LL, 0LL, (uint64_t)v6, v17, v18, v19, v20, *(void *)v12);
    char v23 = byte_206FAB;
    if ((byte_206FAB & 1) != 0) {
      breakpoint_break( (uint64_t)v51,  (volatile int *)((char *)&stru_108.reserved2 + 3),  1LL,  *(unsigned int *)(v12 + 3404),  v12);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v12 + 32) + 1168LL))(a1, a2, a3);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v51[0];
        *((void *)v51[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        unsigned int v50 = v51[0];
        *((void *)v51[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      uint64_t v24 = check_errors(v12);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  BOOL v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v8 = v6[4];
    unint64_t v9 = v8 >= (unint64_t)a1;
    else {
      BOOL v10 = v6 + 1;
    }
    if (v9) {
      BOOL v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    BOOL v7 = ContextInfo::activeCtxInfoMap + 8;
  unsigned int v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    BOOL v13 = __ldaxr(v12);
    unsigned int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    signed int v15 = v14 <= 1;
  }
  else {
    signed int v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 1168LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    BOOL v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 1168LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  BOOL v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v8 = v6[4];
    unint64_t v9 = v8 >= (unint64_t)a1;
    else {
      BOOL v10 = v6 + 1;
    }
    if (v9) {
      BOOL v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    BOOL v7 = ContextInfo::activeCtxInfoMap + 8;
  unsigned int v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    BOOL v13 = __ldaxr(v12);
    unsigned int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    signed int v15 = v14 <= 1;
  }
  else {
    signed int v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 1168LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    BOOL v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 1168LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    id v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

LABEL_31:
    id v29 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v24), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v29) {
      id v29 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v51, v30);
    }
    uint64_t v32 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v32) {
      id v29 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v51, v32, v31);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v51);
    }
    id v33 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v51);
    uint64_t v34 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v34 && gBreakOnError)
    {
      uint64_t v47 = 3LL;
      uint64_t v48 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v23 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v47 = 2LL;
      uint64_t v48 = 339LL;
    }

    breakpoint_break((uint64_t)v51, (volatile int *)v48, v47, v34, v12);
LABEL_40:
    unsigned int v35 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v33) defaultFbufStream];
    unint64_t v36 = (unsigned int *)((char *)v35 + 56);
    do
      unsigned int v37 = __ldaxr(v36);
    while (__stlxr(1u, v36));
    if (v37 == 1)
    {
      do
      {
        while (*v36 == 1)
          ;
        do
          unsigned int v38 = __ldaxr(v36);
        while (__stlxr(1u, v36));
      }

      while (v38 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v35, (GPUTools::FB::Fbuf *)v51, *(unsigned int *)v51[0], 1);
    atomic_store(0, v36);
    do
    {
      unsigned int v39 = __ldaxr(v13);
      signed int v40 = v39 - 1;
    }

    while (__stlxr(v40, v13));
    if (gCheckGLErrors) {
      BOOL v41 = v40 < 1;
    }
    else {
      BOOL v41 = 1;
    }
    if (!v41) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    goto LABEL_53;
  }

  do
    unsigned int v42 = __ldaxr(v13);
  while (__stlxr(v42 - 1, v13));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v12 + 24) + 1168LL))(a1, a2, a3);
LABEL_53:
  if (v51[0]) {
    free(v51[0]);
  }
}

    unsigned int v31 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v26), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v31) {
      unsigned int v31 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v53, v32);
    }
    uint64_t v34 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v34) {
      unsigned int v31 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v53, v34, v33);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v53);
    }
    unsigned int v35 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v53);
    unint64_t v36 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v36 && gBreakOnError)
    {
      uint64_t v49 = 3LL;
      unsigned int v50 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v25 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v49 = 2LL;
      unsigned int v50 = 340LL;
    }

    breakpoint_break((uint64_t)v53, (volatile int *)v50, v49, v36, v11);
LABEL_40:
    unsigned int v37 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v35) defaultFbufStream];
    unsigned int v38 = (unsigned int *)((char *)v37 + 56);
    do
      unsigned int v39 = __ldaxr(v38);
    while (__stlxr(1u, v38));
    if (v39 == 1)
    {
      do
      {
        while (*v38 == 1)
          ;
        do
          signed int v40 = __ldaxr(v38);
        while (__stlxr(1u, v38));
      }

      while (v40 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v37, (GPUTools::FB::Fbuf *)v53, *(unsigned int *)v53[0], 1);
    atomic_store(0, v38);
    do
    {
      BOOL v41 = __ldaxr(v12);
      unsigned int v42 = v41 - 1;
    }

    while (__stlxr(v42, v12));
    if (gCheckGLErrors) {
      uint64_t v43 = v42 < 1;
    }
    else {
      uint64_t v43 = 1;
    }
    if (!v43) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_53;
  }

  do
    id v44 = __ldaxr(v12);
  while (__stlxr(v44 - 1, v12));
  [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, const float *))(*(void *)(v11 + 24) + 1176LL))( a1,  a2,  a3);
LABEL_53:
  if (v53[0]) {
    free(v53[0]);
  }
}

    id v29 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v24), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v29) {
      id v29 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v51, v30);
    }
    uint64_t v32 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v32) {
      id v29 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v51, v32, v31);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v51);
    }
    id v33 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v51);
    uint64_t v34 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v34 && gBreakOnError)
    {
      uint64_t v47 = 3LL;
      uint64_t v48 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v23 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v47 = 2LL;
      uint64_t v48 = 445LL;
    }

    breakpoint_break((uint64_t)v51, (volatile int *)v48, v47, v34, v12);
LABEL_40:
    unsigned int v35 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v33) defaultFbufStream];
    unint64_t v36 = (unsigned int *)((char *)v35 + 56);
    do
      unsigned int v37 = __ldaxr(v36);
    while (__stlxr(1u, v36));
    if (v37 == 1)
    {
      do
      {
        while (*v36 == 1)
          ;
        do
          unsigned int v38 = __ldaxr(v36);
        while (__stlxr(1u, v36));
      }

      while (v38 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v35, (GPUTools::FB::Fbuf *)v51, *(unsigned int *)v51[0], 1);
    atomic_store(0, v36);
    do
    {
      unsigned int v39 = __ldaxr(v13);
      signed int v40 = v39 - 1;
    }

    while (__stlxr(v40, v13));
    if (gCheckGLErrors) {
      BOOL v41 = v40 < 1;
    }
    else {
      BOOL v41 = 1;
    }
    if (!v41) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    goto LABEL_53;
  }

  do
    unsigned int v42 = __ldaxr(v13);
  while (__stlxr(v42 - 1, v13));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v12 + 24) + 4328LL))(a1, a2, a3);
LABEL_53:
  if (v51[0]) {
    free(v51[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v61, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v61, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v61);
    }
    uint64_t v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v61);
    id v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __uint64_t v57 = 3LL;
      uint64_t v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_40;
      }
      __uint64_t v57 = 2LL;
      uint64_t v58 = 29LL;
    }

    breakpoint_break((uint64_t)v61, (volatile int *)v58, v57, v44, v15);
LABEL_40:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      uint64_t v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          uint64_t v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v61, *(unsigned int *)v61[0], 1);
    atomic_store(0, v46);
    if (!gCheckGLErrors) {
      check_errors(v15);
    }
    if (!*(_DWORD *)(v15 + 3404)) {
      wrapper_cache_buffer_target(v15, a2);
    }
    do
    {
      uint64_t v49 = __ldaxr(v16);
      unsigned int v50 = v49 - 1;
    }

    while (__stlxr(v50, v16));
    if (gCheckGLErrors) {
      signed int v51 = v50 < 1;
    }
    else {
      signed int v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_56;
  }

  do
    int v52 = __ldaxr(v16);
  while (__stlxr(v52 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, const void *, uint64_t))(*(void *)(v15 + 24)
                                                                                            + 5168LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v61[0]) {
    free(v61[0]);
  }
}

    GPUTools::FB::Encode((uint64_t)v83, 824LL, v13 + 4709, v21, v22, v23, v24, v25, *(void *)v13);
    id v33 = byte_207190;
    if ((byte_207190 & 1) != 0) {
      breakpoint_break((uint64_t)v83, (volatile int *)&stru_338, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (v34 & 0x10 | v33 & 4) {
      goto LABEL_37;
    }
    unsigned int v35 = [(id)DYGetGLGuestAppClient(v34) overrideFlags];
    if (!(_DWORD)v35)
    {
      unint64_t v36 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, void, GPUTools::GL *, void *, uint64_t))(*(void *)(v13 + 32)
                                                                                                  + 6104LL))( a1,  a2,  v86,  a4,  v85,  a6);
      uint64_t v34 = mach_absolute_time();
      unsigned int v37 = v34 - v36;
      unsigned int v38 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v39 = v83[0];
        *((void *)v83[0] + 2) = v36;
        v39[3] = v37;
        if (!gCheckGLErrors) {
          goto LABEL_37;
        }
      }

      else
      {
        v76 = __udivti3(g_DYTimebaseInfo * v37, (g_DYTimebaseInfo * (unsigned __int128)v37) >> 64);
        v77 = v83[0];
        *((void *)v83[0] + 3) = v76;
        uint64_t v34 = __udivti3(v38 * v36, (v38 * (unsigned __int128)v36) >> 64);
        v77[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_37;
        }
      }

      uint64_t v34 = check_errors(v13);
LABEL_37:
      signed int v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v40) {
        signed int v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v83, v41);
      }
      uint64_t v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
      if ((_DWORD)v43) {
        signed int v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v83, v43, v42);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v13, (uint64_t)v83);
      }
      id v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v83);
      unsigned int v45 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v45 && gBreakOnError)
      {
        v67 = 3LL;
        v68 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v33 & 2) == 0) {
          goto LABEL_46;
        }
        v67 = 2LL;
        v68 = 824LL;
      }

      breakpoint_break((uint64_t)v83, (volatile int *)v68, v67, v45, v13);
LABEL_46:
      unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
      uint64_t v47 = (unsigned int *)((char *)v46 + 56);
      do
        uint64_t v48 = __ldaxr(v47);
      while (__stlxr(1u, v47));
      if (v48 == 1)
      {
        do
        {
          while (*v47 == 1)
            ;
          do
            uint64_t v49 = __ldaxr(v47);
          while (__stlxr(1u, v47));
        }

        while (v49 == 1);
      }

      GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)v83, *(unsigned int *)v83[0], 1);
      atomic_store(0, v47);
      if (v80)
      {
        GPUTools::FB::Encode((uint64_t)v83, 4294955021LL, 4LL, (uint64_t)"C", v50, v51, v52, v53, *(void *)v13);
        uint64_t v55 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v54) defaultFbufStream];
        unsigned int v56 = (unsigned int *)((char *)v55 + 56);
        do
          __uint64_t v57 = __ldaxr(v56);
        while (__stlxr(1u, v56));
        if (v57 == 1)
        {
          do
          {
            while (*v56 == 1)
              ;
            do
              uint64_t v58 = __ldaxr(v56);
            while (__stlxr(1u, v56));
          }

          while (v58 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v55, (GPUTools::FB::Fbuf *)v83, *(unsigned int *)v83[0], 1);
        atomic_store(0, v56);
      }

      do
      {
        uint64_t v59 = __ldaxr(v14);
        unsigned int v60 = v59 - 1;
      }

      while (__stlxr(v60, v14));
      if (gCheckGLErrors) {
        uint64_t v61 = v60 < 1;
      }
      else {
        uint64_t v61 = 1;
      }
      if (!v61) {
        handle_opengl_thread_conflict((const void **)v13);
      }
      goto LABEL_66;
    }

    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v35) overrideFlags];
    if ((v34 & 8) != 0) {
      goto LABEL_37;
    }
    v69 = (volatile int *)[(id)DYGetGLGuestAppClient(v34) overrideFlags];
    apply_draw_overrides(v13, v69);
    v70 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, void, GPUTools::GL *, void *, uint64_t))(*(void *)(v13 + 32)
                                                                                                + 6104LL))( a1,  a2,  v86,  a4,  v85,  a6);
    v71 = mach_absolute_time();
    v72 = v71 - v70;
    v73 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      v74 = v83[0];
      *((void *)v83[0] + 2) = v70;
      v74[3] = v72;
      if (!gCheckGLErrors)
      {
LABEL_78:
        v75 = [(id)DYGetGLGuestAppClient(v71) overrideFlags];
        unapply_draw_overrides(v13, v75);
        goto LABEL_37;
      }
    }

    else
    {
      v78 = __udivti3(g_DYTimebaseInfo * v72, (g_DYTimebaseInfo * (unsigned __int128)v72) >> 64);
      v79 = v83[0];
      *((void *)v83[0] + 3) = v78;
      v71 = __udivti3(v73 * v70, (v73 * (unsigned __int128)v70) >> 64);
      v79[2] = v71;
      if (!gCheckGLErrors) {
        goto LABEL_78;
      }
    }

    v71 = check_errors(v13);
    goto LABEL_78;
  }

  do
    __int128 v62 = __ldaxr(v14);
  while (__stlxr(v62 - 1, v14));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, void, GPUTools::GL *, void *, uint64_t))(*(void *)(v13 + 24)
                                                                                              + 6104LL))( a1,  a2,  v86,  a4,  v85,  a6);
LABEL_66:
  if (v83[0]) {
    free(v83[0]);
  }
}

    id v29 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v24), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v29) {
      id v29 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v51, v30);
    }
    uint64_t v32 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v32) {
      id v29 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v51, v32, v31);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v51);
    }
    id v33 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v51);
    uint64_t v34 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v34 && gBreakOnError)
    {
      uint64_t v47 = 3LL;
      uint64_t v48 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v23 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v47 = 2LL;
      uint64_t v48 = 789LL;
    }

    breakpoint_break((uint64_t)v51, (volatile int *)v48, v47, v34, v12);
LABEL_40:
    unsigned int v35 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v33) defaultFbufStream];
    unint64_t v36 = (unsigned int *)((char *)v35 + 56);
    do
      unsigned int v37 = __ldaxr(v36);
    while (__stlxr(1u, v36));
    if (v37 == 1)
    {
      do
      {
        while (*v36 == 1)
          ;
        do
          unsigned int v38 = __ldaxr(v36);
        while (__stlxr(1u, v36));
      }

      while (v38 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v35, (GPUTools::FB::Fbuf *)v51, *(unsigned int *)v51[0], 1);
    atomic_store(0, v36);
    do
    {
      unsigned int v39 = __ldaxr(v13);
      signed int v40 = v39 - 1;
    }

    while (__stlxr(v40, v13));
    if (gCheckGLErrors) {
      BOOL v41 = v40 < 1;
    }
    else {
      BOOL v41 = 1;
    }
    if (!v41) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    goto LABEL_53;
  }

  do
    unsigned int v42 = __ldaxr(v13);
  while (__stlxr(v42 - 1, v13));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v12 + 24) + 7888LL))(a1, a2, a3);
LABEL_53:
  if (v51[0]) {
    free(v51[0]);
  }
}

    unsigned int v31 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v26), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v31) {
      unsigned int v31 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v53, v32);
    }
    uint64_t v34 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v34) {
      unsigned int v31 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v53, v34, v33);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v53);
    }
    unsigned int v35 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v53);
    unint64_t v36 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v36 && gBreakOnError)
    {
      uint64_t v49 = 3LL;
      unsigned int v50 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v25 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v49 = 2LL;
      unsigned int v50 = 790LL;
    }

    breakpoint_break((uint64_t)v53, (volatile int *)v50, v49, v36, v11);
LABEL_40:
    unsigned int v37 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v35) defaultFbufStream];
    unsigned int v38 = (unsigned int *)((char *)v37 + 56);
    do
      unsigned int v39 = __ldaxr(v38);
    while (__stlxr(1u, v38));
    if (v39 == 1)
    {
      do
      {
        while (*v38 == 1)
          ;
        do
          signed int v40 = __ldaxr(v38);
        while (__stlxr(1u, v38));
      }

      while (v40 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v37, (GPUTools::FB::Fbuf *)v53, *(unsigned int *)v53[0], 1);
    atomic_store(0, v38);
    do
    {
      BOOL v41 = __ldaxr(v12);
      unsigned int v42 = v41 - 1;
    }

    while (__stlxr(v42, v12));
    if (gCheckGLErrors) {
      uint64_t v43 = v42 < 1;
    }
    else {
      uint64_t v43 = 1;
    }
    if (!v43) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_53;
  }

  do
    id v44 = __ldaxr(v12);
  while (__stlxr(v44 - 1, v12));
  [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, const int *))(*(void *)(v11 + 24) + 7896LL))(a1, a2, a3);
LABEL_53:
  if (v53[0]) {
    free(v53[0]);
  }
}

    id v29 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v24), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v29) {
      id v29 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v51, v30);
    }
    uint64_t v32 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v32) {
      id v29 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v51, v32, v31);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v51);
    }
    id v33 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v51);
    uint64_t v34 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v34 && gBreakOnError)
    {
      uint64_t v47 = 3LL;
      uint64_t v48 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v23 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v47 = 2LL;
      uint64_t v48 = 805LL;
    }

    breakpoint_break((uint64_t)v51, (volatile int *)v48, v47, v34, v12);
LABEL_40:
    unsigned int v35 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v33) defaultFbufStream];
    unint64_t v36 = (unsigned int *)((char *)v35 + 56);
    do
      unsigned int v37 = __ldaxr(v36);
    while (__stlxr(1u, v36));
    if (v37 == 1)
    {
      do
      {
        while (*v36 == 1)
          ;
        do
          unsigned int v38 = __ldaxr(v36);
        while (__stlxr(1u, v36));
      }

      while (v38 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v35, (GPUTools::FB::Fbuf *)v51, *(unsigned int *)v51[0], 1);
    atomic_store(0, v36);
    do
    {
      unsigned int v39 = __ldaxr(v13);
      signed int v40 = v39 - 1;
    }

    while (__stlxr(v40, v13));
    if (gCheckGLErrors) {
      BOOL v41 = v40 < 1;
    }
    else {
      BOOL v41 = 1;
    }
    if (!v41) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    goto LABEL_53;
  }

  do
    unsigned int v42 = __ldaxr(v13);
  while (__stlxr(v42 - 1, v13));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, const int *))(*(void *)(v12 + 24) + 8080LL))(a1, a2, a3);
LABEL_53:
  if (v51[0]) {
    free(v51[0]);
  }
}

    id v29 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v24), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v29) {
      id v29 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v51, v30);
    }
    uint64_t v32 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v32) {
      id v29 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v51, v32, v31);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v51);
    }
    id v33 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v51);
    uint64_t v34 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v34 && gBreakOnError)
    {
      uint64_t v47 = 3LL;
      uint64_t v48 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v23 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v47 = 2LL;
      uint64_t v48 = 339LL;
    }

    breakpoint_break((uint64_t)v51, (volatile int *)v48, v47, v34, v12);
LABEL_40:
    unsigned int v35 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v33) defaultFbufStream];
    unint64_t v36 = (unsigned int *)((char *)v35 + 56);
    do
      unsigned int v37 = __ldaxr(v36);
    while (__stlxr(1u, v36));
    if (v37 == 1)
    {
      do
      {
        while (*v36 == 1)
          ;
        do
          unsigned int v38 = __ldaxr(v36);
        while (__stlxr(1u, v36));
      }

      while (v38 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v35, (GPUTools::FB::Fbuf *)v51, *(unsigned int *)v51[0], 1);
    atomic_store(0, v36);
    do
    {
      unsigned int v39 = __ldaxr(v13);
      signed int v40 = v39 - 1;
    }

    while (__stlxr(v40, v13));
    if (gCheckGLErrors) {
      BOOL v41 = v40 < 1;
    }
    else {
      BOOL v41 = 1;
    }
    if (!v41) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    goto LABEL_53;
  }

  do
    unsigned int v42 = __ldaxr(v13);
  while (__stlxr(v42 - 1, v13));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v12 + 24) + 1168LL))(a1, a2, a3);
LABEL_53:
  if (v51[0]) {
    free(v51[0]);
  }
}

    unsigned int v31 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v26), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v31) {
      unsigned int v31 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v53, v32);
    }
    uint64_t v34 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v34) {
      unsigned int v31 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v53, v34, v33);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v53);
    }
    unsigned int v35 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v53);
    unint64_t v36 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v36 && gBreakOnError)
    {
      uint64_t v49 = 3LL;
      unsigned int v50 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v25 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v49 = 2LL;
      unsigned int v50 = 340LL;
    }

    breakpoint_break((uint64_t)v53, (volatile int *)v50, v49, v36, v11);
LABEL_40:
    unsigned int v37 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v35) defaultFbufStream];
    unsigned int v38 = (unsigned int *)((char *)v37 + 56);
    do
      unsigned int v39 = __ldaxr(v38);
    while (__stlxr(1u, v38));
    if (v39 == 1)
    {
      do
      {
        while (*v38 == 1)
          ;
        do
          signed int v40 = __ldaxr(v38);
        while (__stlxr(1u, v38));
      }

      while (v40 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v37, (GPUTools::FB::Fbuf *)v53, *(unsigned int *)v53[0], 1);
    atomic_store(0, v38);
    do
    {
      BOOL v41 = __ldaxr(v12);
      unsigned int v42 = v41 - 1;
    }

    while (__stlxr(v42, v12));
    if (gCheckGLErrors) {
      uint64_t v43 = v42 < 1;
    }
    else {
      uint64_t v43 = 1;
    }
    if (!v43) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_53;
  }

  do
    id v44 = __ldaxr(v12);
  while (__stlxr(v44 - 1, v12));
  [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, const float *))(*(void *)(v11 + 24) + 1176LL))( a1,  a2,  a3);
LABEL_53:
  if (v53[0]) {
    free(v53[0]);
  }
}

    id v29 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v24), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v29) {
      id v29 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v51, v30);
    }
    uint64_t v32 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v32) {
      id v29 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v51, v32, v31);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v51);
    }
    id v33 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v51);
    uint64_t v34 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v34 && gBreakOnError)
    {
      uint64_t v47 = 3LL;
      uint64_t v48 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v23 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v47 = 2LL;
      uint64_t v48 = 445LL;
    }

    breakpoint_break((uint64_t)v51, (volatile int *)v48, v47, v34, v12);
LABEL_40:
    unsigned int v35 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v33) defaultFbufStream];
    unint64_t v36 = (unsigned int *)((char *)v35 + 56);
    do
      unsigned int v37 = __ldaxr(v36);
    while (__stlxr(1u, v36));
    if (v37 == 1)
    {
      do
      {
        while (*v36 == 1)
          ;
        do
          unsigned int v38 = __ldaxr(v36);
        while (__stlxr(1u, v36));
      }

      while (v38 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v35, (GPUTools::FB::Fbuf *)v51, *(unsigned int *)v51[0], 1);
    atomic_store(0, v36);
    do
    {
      unsigned int v39 = __ldaxr(v13);
      signed int v40 = v39 - 1;
    }

    while (__stlxr(v40, v13));
    if (gCheckGLErrors) {
      BOOL v41 = v40 < 1;
    }
    else {
      BOOL v41 = 1;
    }
    if (!v41) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    goto LABEL_53;
  }

  do
    unsigned int v42 = __ldaxr(v13);
  while (__stlxr(v42 - 1, v13));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v12 + 24) + 4328LL))(a1, a2, a3);
LABEL_53:
  if (v51[0]) {
    free(v51[0]);
  }
}

    id v29 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v24), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v29) {
      id v29 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v51, v30);
    }
    uint64_t v32 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v32) {
      id v29 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v51, v32, v31);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v51);
    }
    id v33 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v51);
    uint64_t v34 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v34 && gBreakOnError)
    {
      uint64_t v47 = 3LL;
      uint64_t v48 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v23 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v47 = 2LL;
      uint64_t v48 = 789LL;
    }

    breakpoint_break((uint64_t)v51, (volatile int *)v48, v47, v34, v12);
LABEL_40:
    unsigned int v35 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v33) defaultFbufStream];
    unint64_t v36 = (unsigned int *)((char *)v35 + 56);
    do
      unsigned int v37 = __ldaxr(v36);
    while (__stlxr(1u, v36));
    if (v37 == 1)
    {
      do
      {
        while (*v36 == 1)
          ;
        do
          unsigned int v38 = __ldaxr(v36);
        while (__stlxr(1u, v36));
      }

      while (v38 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v35, (GPUTools::FB::Fbuf *)v51, *(unsigned int *)v51[0], 1);
    atomic_store(0, v36);
    do
    {
      unsigned int v39 = __ldaxr(v13);
      signed int v40 = v39 - 1;
    }

    while (__stlxr(v40, v13));
    if (gCheckGLErrors) {
      BOOL v41 = v40 < 1;
    }
    else {
      BOOL v41 = 1;
    }
    if (!v41) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    goto LABEL_53;
  }

  do
    unsigned int v42 = __ldaxr(v13);
  while (__stlxr(v42 - 1, v13));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v12 + 24) + 7888LL))(a1, a2, a3);
LABEL_53:
  if (v51[0]) {
    free(v51[0]);
  }
}

    unsigned int v31 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v26), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v31) {
      unsigned int v31 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v53, v32);
    }
    uint64_t v34 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v34) {
      unsigned int v31 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v53, v34, v33);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v53);
    }
    unsigned int v35 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v53);
    unint64_t v36 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v36 && gBreakOnError)
    {
      uint64_t v49 = 3LL;
      unsigned int v50 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v25 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v49 = 2LL;
      unsigned int v50 = 790LL;
    }

    breakpoint_break((uint64_t)v53, (volatile int *)v50, v49, v36, v11);
LABEL_40:
    unsigned int v37 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v35) defaultFbufStream];
    unsigned int v38 = (unsigned int *)((char *)v37 + 56);
    do
      unsigned int v39 = __ldaxr(v38);
    while (__stlxr(1u, v38));
    if (v39 == 1)
    {
      do
      {
        while (*v38 == 1)
          ;
        do
          signed int v40 = __ldaxr(v38);
        while (__stlxr(1u, v38));
      }

      while (v40 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v37, (GPUTools::FB::Fbuf *)v53, *(unsigned int *)v53[0], 1);
    atomic_store(0, v38);
    do
    {
      BOOL v41 = __ldaxr(v12);
      unsigned int v42 = v41 - 1;
    }

    while (__stlxr(v42, v12));
    if (gCheckGLErrors) {
      uint64_t v43 = v42 < 1;
    }
    else {
      uint64_t v43 = 1;
    }
    if (!v43) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_53;
  }

  do
    id v44 = __ldaxr(v12);
  while (__stlxr(v44 - 1, v12));
  [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, const int *))(*(void *)(v11 + 24) + 7896LL))(a1, a2, a3);
LABEL_53:
  if (v53[0]) {
    free(v53[0]);
  }
}

    id v29 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v24), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v29) {
      id v29 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v51, v30);
    }
    uint64_t v32 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v32) {
      id v29 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v51, v32, v31);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v51);
    }
    id v33 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v51);
    uint64_t v34 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v34 && gBreakOnError)
    {
      uint64_t v47 = 3LL;
      uint64_t v48 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v23 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v47 = 2LL;
      uint64_t v48 = 805LL;
    }

    breakpoint_break((uint64_t)v51, (volatile int *)v48, v47, v34, v12);
LABEL_40:
    unsigned int v35 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v33) defaultFbufStream];
    unint64_t v36 = (unsigned int *)((char *)v35 + 56);
    do
      unsigned int v37 = __ldaxr(v36);
    while (__stlxr(1u, v36));
    if (v37 == 1)
    {
      do
      {
        while (*v36 == 1)
          ;
        do
          unsigned int v38 = __ldaxr(v36);
        while (__stlxr(1u, v36));
      }

      while (v38 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v35, (GPUTools::FB::Fbuf *)v51, *(unsigned int *)v51[0], 1);
    atomic_store(0, v36);
    do
    {
      unsigned int v39 = __ldaxr(v13);
      signed int v40 = v39 - 1;
    }

    while (__stlxr(v40, v13));
    if (gCheckGLErrors) {
      BOOL v41 = v40 < 1;
    }
    else {
      BOOL v41 = 1;
    }
    if (!v41) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    goto LABEL_53;
  }

  do
    unsigned int v42 = __ldaxr(v13);
  while (__stlxr(v42 - 1, v13));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, const int *))(*(void *)(v12 + 24) + 8080LL))(a1, a2, a3);
LABEL_53:
  if (v51[0]) {
    free(v51[0]);
  }
}

void sub_2F2FC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void light_modelfv(__GLIContextRec *a1, GPUTools::GL *a2, const float *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      BOOL v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v11);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v12);
      while (__stlxr(v47 - 1, v12));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, const float *))(*(void *)(v11 + 24) + 1176LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v17))
  {
    int v18 = GPUTools::GL::dy_light_model_param_component_count(a2, v16);
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ce@%d", v18);
    if ((_DWORD)a2 == 33272) {
      uint64_t v19 = "n";
    }
    else {
      uint64_t v19 = "f";
    }
    strlcat((char *)(v11 + 4709), v19, 0x40uLL);
    GPUTools::FB::Encode((uint64_t)v53, 340LL, 0LL, v11 + 4709, v20, v21, v22, v23, *(void *)v11);
    char v25 = byte_206FAC;
    if ((byte_206FAC & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_108.reserved3, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, const float *))(*(void *)(v11 + 32) + 1176LL))( a1,  a2,  a3);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v30 = v53[0];
        *((void *)v53[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        int v52 = v53[0];
        *((void *)v53[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      uint64_t v26 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  unsigned int v16;
  id v17;
  int v18;
  const char *v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  void *v53[2];
  int v54;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      BOOL v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v11);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v12);
      while (__stlxr(v47 - 1, v12));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, const float *))(*(void *)(v11 + 24) + 1176LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v17))
  {
    int v18 = GPUTools::GL::dy_light_model_param_component_count(a2, v16);
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ce@%d", v18);
    if ((_DWORD)a2 == 33272) {
      uint64_t v19 = "n";
    }
    else {
      uint64_t v19 = "f";
    }
    strlcat((char *)(v11 + 4709), v19, 0x40uLL);
    GPUTools::FB::Encode((uint64_t)v53, 340LL, 0LL, v11 + 4709, v20, v21, v22, v23, *(void *)v11);
    char v25 = byte_206FAC;
    if ((byte_206FAC & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_108.reserved3, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, const float *))(*(void *)(v11 + 32) + 1176LL))( a1,  a2,  a3);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v30 = v53[0];
        *((void *)v53[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        int v52 = v53[0];
        *((void *)v53[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      uint64_t v26 = check_errors(v11);
    }

void sub_2F758( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void lightf(__GLIContextRec *a1, uint64_t a2, uint64_t a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 24) + 1200LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v55 = 0LL;
  unsigned int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    uint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    uint64_t v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        uint64_t v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)uint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        unsigned int v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 343;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Ceef");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((_DWORD *)v20 + 14) = a3;
        *((float *)v20 + 15) = a4;
        char v25 = byte_206FAF;
        if ((byte_206FAF & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_108.reserved3 + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 32) + 1200LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            uint64_t v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  __uint64_t v54;
  void *v55;
  char *v56;
  unsigned int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 24) + 1200LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v55 = 0LL;
  unsigned int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    uint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    uint64_t v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        uint64_t v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)uint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        unsigned int v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 343;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Ceef");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((_DWORD *)v20 + 14) = a3;
        *((float *)v20 + 15) = a4;
        char v25 = byte_206FAF;
        if ((byte_206FAF & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_108.reserved3 + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 32) + 1200LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            uint64_t v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 24) + 1200LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        unsigned int v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 32) + 1200LL))(a1, a2, a3, a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    int64_t v21 = v20 < 1;
  }
  else {
    int64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 24) + 1200LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 32) + 1200LL))(a1, a2, a3, a4);
  uint64_t v20 = mach_absolute_time();
  int64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    unsigned int v22 = __ldaxr(v14);
    unint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_2FC4C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void lightfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, const float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 24) + 1208LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    int v20 = GPUTools::GL::dy_light_array_size(a3, v18);
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%df", v20);
    GPUTools::FB::Encode((uint64_t)v54, 344LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_206FB0;
    if ((byte_206FB0 & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)&stru_158, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 32) + 1208LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  id v19;
  int v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  void *v54[2];
  int v55;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 24) + 1208LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    int v20 = GPUTools::GL::dy_light_array_size(a3, v18);
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%df", v20);
    GPUTools::FB::Encode((uint64_t)v54, 344LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_206FB0;
    if ((byte_206FB0 & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)&stru_158, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 32) + 1208LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_300A4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void line_width(__GLIContextRec *a1, float a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      BOOL v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 24) + 1240LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v51;
    unsigned int v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    signed int v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        unsigned int v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)unsigned int v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 348;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Cf");
        *((void *)v16 + 5) = *(void *)v9;
        *((float *)v16 + 12) = a2;
        char v21 = byte_206FB4;
        if ((byte_206FB4 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_158.sectname[4], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 32) + 1240LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      BOOL v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 24) + 1240LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v51;
    unsigned int v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    signed int v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        unsigned int v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)unsigned int v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 348;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Cf");
        *((void *)v16 + 5) = *(void *)v9;
        *((float *)v16 + 12) = a2;
        char v21 = byte_206FB4;
        if ((byte_206FB4 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_158.sectname[4], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 32) + 1240LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 24) + 1240LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 32) + 1240LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    unsigned int v15 = __ldaxr(v10);
    signed int v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 24) + 1240LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unsigned int v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 32) + 1240LL))(a1, a2);
  signed int v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      char v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_30574( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void load_identity(__GLIContextRec *a1)
{
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v40 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v39 = handle_opengl_thread_conflict((const void **)v7);
    id v40 = [(id)DYGetGLGuestAppClient(v39) waitOnGraphicsSemaphoreAssertions];
    if ((int)v40 >= 1)
    {
      do
LABEL_57:
        unsigned int v41 = __ldaxr(v8);
      while (__stlxr(v41 - 1, v8));
      id v42 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v40) graphicsLockWaitQueue];
      dispatch_sync_f(v42, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1256LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  int v49 = 0LL;
  __uint64_t v50 = 0LL;
  unsigned int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v40) state] != (char *)&dword_0 + 1
    || (id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v12))
  {
    id v14 = (char *)v49;
    BOOL v13 = v50;
    int64_t v15 = v50 - (_BYTE *)v49;
    unsigned int v16 = v51;
    unint64_t v17 = v51 - (v50 - (_BYTE *)v49);
    if (v17 > 0x2F) {
      goto LABEL_24;
    }
    int v43 = (303 - v17) & 0xFFFFFF00;
    v51 += v43;
    id v14 = (char *)malloc(v43 + v16);
    int v49 = v14;
    if (v14)
    {
      if ((v14 & 3) == 0)
      {
        BOOL v13 = &v14[v15];
LABEL_24:
        *((_OWORD *)v13 + 1) = 0u;
        *((_OWORD *)v13 + 2) = 0u;
        *(_OWORD *)BOOL v13 = 0u;
        __uint64_t v50 = v13 + 48;
        GPUTools::FB::Fbuf::align((char **)&v49);
        *((_DWORD *)v14 + 1) = 351;
        *((_DWORD *)v14 + 8) = 0;
        __uint64_t v48 = 0LL;
        uint64_t v18 = pthread_threadid_np(0LL, &v48);
        *((void *)v14 + 1) = v48;
        *((_WORD *)v14 + 18) = 67;
        *((void *)v14 + 5) = *(void *)v7;
        char v19 = byte_206FB7;
        if ((byte_206FB7 & 1) != 0) {
          breakpoint_break((uint64_t)&v49, (volatile int *)&stru_158.sectname[7], 1LL, *(unsigned int *)(v7 + 3404), v7);
        }
        uint64_t v20 = (uint64_t)[(id)DYGetGLGuestAppClient(v18) overrideFlags];
        if (!(v20 & 0x10 | v19 & 4))
        {
          uint64_t v21 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1256LL))(a1);
          uint64_t v20 = mach_absolute_time();
          uint64_t v22 = v20 - v21;
          unint64_t v23 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v24 = v49;
            *((void *)v49 + 2) = v21;
            v24[3] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v46 = __udivti3(g_DYTimebaseInfo * v22, (g_DYTimebaseInfo * (unsigned __int128)v22) >> 64);
            uint64_t v47 = v49;
            *((void *)v49 + 3) = v46;
            uint64_t v20 = __udivti3(v23 * v21, (v23 * (unsigned __int128)v21) >> 64);
            v47[2] = v20;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v20 = check_errors(v7);
        }

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  char *v13;
  char *v14;
  int64_t v15;
  unsigned int v16;
  unint64_t v17;
  uint64_t v18;
  char v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  unint64_t v23;
  void *v24;
  id v25;
  GPUTools::FB::Fbuf *v26;
  unsigned int v27;
  GPUTools::FB::Fbuf *v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  GPUTools::FB::Stream *v31;
  unsigned int *v32;
  unsigned int v33;
  unsigned int v34;
  unsigned int v35;
  signed int v36;
  BOOL v37;
  unsigned int v38;
  uint64_t v39;
  id v40;
  unsigned int v41;
  dispatch_queue_s *v42;
  int v43;
  uint64_t v44;
  uint64_t v45;
  uint64_t v46;
  void *v47;
  __uint64_t v48;
  void *v49;
  char *v50;
  unsigned int v51;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v40 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v39 = handle_opengl_thread_conflict((const void **)v7);
    id v40 = [(id)DYGetGLGuestAppClient(v39) waitOnGraphicsSemaphoreAssertions];
    if ((int)v40 >= 1)
    {
      do
LABEL_57:
        unsigned int v41 = __ldaxr(v8);
      while (__stlxr(v41 - 1, v8));
      id v42 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v40) graphicsLockWaitQueue];
      dispatch_sync_f(v42, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1256LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  int v49 = 0LL;
  __uint64_t v50 = 0LL;
  unsigned int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v40) state] != (char *)&dword_0 + 1
    || (id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v12))
  {
    id v14 = (char *)v49;
    BOOL v13 = v50;
    int64_t v15 = v50 - (_BYTE *)v49;
    unsigned int v16 = v51;
    unint64_t v17 = v51 - (v50 - (_BYTE *)v49);
    if (v17 > 0x2F) {
      goto LABEL_24;
    }
    int v43 = (303 - v17) & 0xFFFFFF00;
    v51 += v43;
    id v14 = (char *)malloc(v43 + v16);
    int v49 = v14;
    if (v14)
    {
      if ((v14 & 3) == 0)
      {
        BOOL v13 = &v14[v15];
LABEL_24:
        *((_OWORD *)v13 + 1) = 0u;
        *((_OWORD *)v13 + 2) = 0u;
        *(_OWORD *)BOOL v13 = 0u;
        __uint64_t v50 = v13 + 48;
        GPUTools::FB::Fbuf::align((char **)&v49);
        *((_DWORD *)v14 + 1) = 351;
        *((_DWORD *)v14 + 8) = 0;
        __uint64_t v48 = 0LL;
        uint64_t v18 = pthread_threadid_np(0LL, &v48);
        *((void *)v14 + 1) = v48;
        *((_WORD *)v14 + 18) = 67;
        *((void *)v14 + 5) = *(void *)v7;
        char v19 = byte_206FB7;
        if ((byte_206FB7 & 1) != 0) {
          breakpoint_break((uint64_t)&v49, (volatile int *)&stru_158.sectname[7], 1LL, *(unsigned int *)(v7 + 3404), v7);
        }
        uint64_t v20 = (uint64_t)[(id)DYGetGLGuestAppClient(v18) overrideFlags];
        if (!(v20 & 0x10 | v19 & 4))
        {
          uint64_t v21 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1256LL))(a1);
          uint64_t v20 = mach_absolute_time();
          uint64_t v22 = v20 - v21;
          unint64_t v23 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v24 = v49;
            *((void *)v49 + 2) = v21;
            v24[3] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v46 = __udivti3(g_DYTimebaseInfo * v22, (g_DYTimebaseInfo * (unsigned __int128)v22) >> 64);
            uint64_t v47 = v49;
            *((void *)v49 + 3) = v46;
            uint64_t v20 = __udivti3(v23 * v21, (v23 * (unsigned __int128)v21) >> 64);
            v47[2] = v20;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v20 = check_errors(v7);
        }

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  unsigned int v16;
  uint64_t v17;
  id v18;
  unsigned int v19;
  dispatch_queue_s *v20;
  uint64_t v21;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v17 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v18 = [(id)DYGetGLGuestAppClient(v17) waitOnGraphicsSemaphoreAssertions];
    if ((int)v18 >= 1)
    {
      do
LABEL_34:
        char v19 = __ldaxr(v8);
      while (__stlxr(v19 - 1, v8));
      uint64_t v20 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v18) graphicsLockWaitQueue];
      dispatch_sync_f(v20, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1256LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v18) state] == (char *)&dword_0 + 1)
  {
    id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        unsigned int v16 = __ldaxr(v8);
      while (__stlxr(v16 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1256LL))(a1);
  ++*(void *)(v7 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      uint64_t v21 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v21) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v21, v7);
      }
    }
  }

  do
  {
    BOOL v13 = __ldaxr(v8);
    id v14 = v13 - 1;
  }

  while (__stlxr(v14, v8));
  if (gCheckGLErrors) {
    int64_t v15 = v14 < 1;
  }
  else {
    int64_t v15 = 1;
  }
  if (!v15) {
    handle_opengl_thread_conflict((const void **)v7);
  }
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  uint64_t v13;
  uint64_t v14;
  int64x2_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_34:
        uint64_t v22 = __ldaxr(v8);
      while (__stlxr(v22 - 1, v8));
      unint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1256LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        char v19 = __ldaxr(v8);
      while (__stlxr(v19 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v13 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1256LL))(a1);
  id v14 = mach_absolute_time();
  int64_t v15 = vdupq_n_s64(1uLL);
  v15.i64[0] = v14 - v13;
  *(int64x2_t *)(v7 + 3696) = vaddq_s64(v15, *(int64x2_t *)(v7 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v7);
      }
    }
  }

  do
  {
    unsigned int v16 = __ldaxr(v8);
    unint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v8));
  if (gCheckGLErrors) {
    uint64_t v18 = v17 < 1;
  }
  else {
    uint64_t v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v7);
  }
}

void sub_30A24( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void load_matrixf(__GLIContextRec *a1, const float *a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v9);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_57:
        unsigned int v46 = __ldaxr(v10);
      while (__stlxr(v46 - 1, v10));
      uint64_t v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 24) + 1272LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  __uint64_t v54 = 0LL;
  int v55 = 0LL;
  unsigned int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    unsigned int v16 = (char *)v54;
    int64_t v15 = v55;
    int64_t v17 = v55 - (_BYTE *)v54;
    unsigned int v18 = v56;
    unint64_t v19 = v56 - (v55 - (_BYTE *)v54);
    if (v19 > 0x73) {
      goto LABEL_24;
    }
    int v48 = (371 - v19) & 0xFFFFFF00;
    v56 += v48;
    unsigned int v16 = (char *)malloc(v48 + v18);
    __uint64_t v54 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        int64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 28) = 0;
        *((_OWORD *)v15 + 5) = 0u;
        *((_OWORD *)v15 + 6) = 0u;
        *((_OWORD *)v15 + 3) = 0u;
        *((_OWORD *)v15 + 4) = 0u;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)int64_t v15 = 0u;
        int v55 = v15 + 116;
        GPUTools::FB::Fbuf::align((char **)&v54);
        *((_DWORD *)v16 + 1) = 353;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v53 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v53);
        *((void *)v16 + 1) = v53;
        strcpy(v16 + 36, "C@16f");
        *(void *)(v16 + 44) = *(void *)v9;
        __int128 v21 = *(_OWORD *)a2;
        __int128 v22 = *((_OWORD *)a2 + 1);
        __int128 v23 = *((_OWORD *)a2 + 2);
        *(_OWORD *)(v16 + 100) = *((_OWORD *)a2 + 3);
        *(_OWORD *)(v16 + 84) = v23;
        *(_OWORD *)(v16 + 68) = v22;
        *(_OWORD *)(v16 + 52) = v21;
        char v24 = byte_206FB9;
        if ((byte_206FB9 & 1) != 0) {
          breakpoint_break((uint64_t)&v54, (volatile int *)&stru_158.sectname[9], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v25 & 0x10 | v24 & 4))
        {
          uint64_t v26 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 32) + 1272LL))(a1, a2);
          uint64_t v25 = mach_absolute_time();
          uint64_t v27 = v25 - v26;
          unint64_t v28 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unsigned int v29 = v54;
            *((void *)v54 + 2) = v26;
            v29[3] = v27;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v51 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
            uint64_t v52 = v54;
            *((void *)v54 + 3) = v51;
            uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
            v52[2] = v25;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v25 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  __int128 v21;
  __int128 v22;
  __int128 v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  unint64_t v28;
  void *v29;
  id v30;
  GPUTools::FB::Fbuf *v31;
  unsigned int v32;
  GPUTools::FB::Fbuf *v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  GPUTools::FB::Stream *v36;
  unsigned int *v37;
  unsigned int v38;
  unsigned int v39;
  unsigned int v40;
  signed int v41;
  BOOL v42;
  unsigned int v43;
  uint64_t v44;
  id v45;
  unsigned int v46;
  dispatch_queue_s *v47;
  int v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  __uint64_t v53;
  void *v54;
  char *v55;
  unsigned int v56;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v9);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_57:
        unsigned int v46 = __ldaxr(v10);
      while (__stlxr(v46 - 1, v10));
      uint64_t v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 24) + 1272LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  __uint64_t v54 = 0LL;
  int v55 = 0LL;
  unsigned int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    unsigned int v16 = (char *)v54;
    int64_t v15 = v55;
    int64_t v17 = v55 - (_BYTE *)v54;
    unsigned int v18 = v56;
    unint64_t v19 = v56 - (v55 - (_BYTE *)v54);
    if (v19 > 0x73) {
      goto LABEL_24;
    }
    int v48 = (371 - v19) & 0xFFFFFF00;
    v56 += v48;
    unsigned int v16 = (char *)malloc(v48 + v18);
    __uint64_t v54 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        int64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 28) = 0;
        *((_OWORD *)v15 + 5) = 0u;
        *((_OWORD *)v15 + 6) = 0u;
        *((_OWORD *)v15 + 3) = 0u;
        *((_OWORD *)v15 + 4) = 0u;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)int64_t v15 = 0u;
        int v55 = v15 + 116;
        GPUTools::FB::Fbuf::align((char **)&v54);
        *((_DWORD *)v16 + 1) = 353;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v53 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v53);
        *((void *)v16 + 1) = v53;
        strcpy(v16 + 36, "C@16f");
        *(void *)(v16 + 44) = *(void *)v9;
        __int128 v21 = *(_OWORD *)a2;
        __int128 v22 = *((_OWORD *)a2 + 1);
        __int128 v23 = *((_OWORD *)a2 + 2);
        *(_OWORD *)(v16 + 100) = *((_OWORD *)a2 + 3);
        *(_OWORD *)(v16 + 84) = v23;
        *(_OWORD *)(v16 + 68) = v22;
        *(_OWORD *)(v16 + 52) = v21;
        char v24 = byte_206FB9;
        if ((byte_206FB9 & 1) != 0) {
          breakpoint_break((uint64_t)&v54, (volatile int *)&stru_158.sectname[9], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v25 & 0x10 | v24 & 4))
        {
          uint64_t v26 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 32) + 1272LL))(a1, a2);
          uint64_t v25 = mach_absolute_time();
          uint64_t v27 = v25 - v26;
          unint64_t v28 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unsigned int v29 = v54;
            *((void *)v54 + 2) = v26;
            v29[3] = v27;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v51 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
            uint64_t v52 = v54;
            *((void *)v54 + 3) = v51;
            uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
            v52[2] = v25;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v25 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        __int128 v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      __int128 v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 24) + 1272LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 32) + 1272LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      __int128 v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    int64_t v15 = __ldaxr(v10);
    unsigned int v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    __int128 v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    __int128 v22 = handle_opengl_thread_conflict((const void **)v9);
    __int128 v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        char v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 24) + 1272LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        __int128 v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  int64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 32) + 1272LL))(a1, a2);
  unsigned int v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_30F14( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void logic_op(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      uint64_t v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1288LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    unsigned int v16 = (char *)v51;
    int64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    unsigned int v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        int64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)int64_t v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 358;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FBE;
        if ((byte_206FBE & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_158.sectname[14], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1288LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            uint64_t v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      uint64_t v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1288LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    unsigned int v16 = (char *)v51;
    int64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    unsigned int v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        int64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)int64_t v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 358;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FBE;
        if ((byte_206FBE & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_158.sectname[14], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1288LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            uint64_t v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1288LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1288LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    int64_t v15 = __ldaxr(v10);
    unsigned int v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1288LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  int64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1288LL))(a1, a2);
  unsigned int v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_313E0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void materialf(__GLIContextRec *a1, uint64_t a2, uint64_t a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 24) + 1360LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  int v55 = 0LL;
  unsigned int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    unint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        unsigned int v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 372;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Ceef");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((_DWORD *)v20 + 14) = a3;
        *((float *)v20 + 15) = a4;
        char v25 = byte_206FCC;
        if ((byte_206FCC & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)&stru_158.segname[12],  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 32) + 1360LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            id v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            unsigned int v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  __uint64_t v54;
  void *v55;
  char *v56;
  unsigned int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 24) + 1360LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  int v55 = 0LL;
  unsigned int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    unint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        unsigned int v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 372;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Ceef");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((_DWORD *)v20 + 14) = a3;
        *((float *)v20 + 15) = a4;
        char v25 = byte_206FCC;
        if ((byte_206FCC & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)&stru_158.segname[12],  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 32) + 1360LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            id v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            unsigned int v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 24) + 1360LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        unsigned int v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 32) + 1360LL))(a1, a2, a3, a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    int64_t v21 = v20 < 1;
  }
  else {
    int64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 24) + 1360LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float))(*(void *)(v13 + 32) + 1360LL))(a1, a2, a3, a4);
  uint64_t v20 = mach_absolute_time();
  int64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      id v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    unsigned int v22 = __ldaxr(v14);
    unint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_318DC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void materialfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, const float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 24) + 1368LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    int v20 = GPUTools::GL::DYMaterialParameterComponentCount(a3, v18);
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%df", v20);
    GPUTools::FB::Encode((uint64_t)v54, 373LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_206FCD;
    if ((byte_206FCD & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)&stru_158.segname[13], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 32) + 1368LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  id v19;
  int v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  void *v54[2];
  int v55;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 24) + 1368LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    int v20 = GPUTools::GL::DYMaterialParameterComponentCount(a3, v18);
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%df", v20);
    GPUTools::FB::Encode((uint64_t)v54, 373LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_206FCD;
    if ((byte_206FCD & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)&stru_158.segname[13], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 32) + 1368LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_31D34( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void matrix_mode(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      BOOL v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1392LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v51;
    unsigned int v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    signed int v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        unsigned int v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)unsigned int v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 376;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FD0;
        if ((byte_206FD0 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_158.addr, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1392LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      BOOL v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1392LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v51;
    unsigned int v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    signed int v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        unsigned int v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)unsigned int v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 376;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FD0;
        if ((byte_206FD0 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_158.addr, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1392LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1392LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1392LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    unsigned int v15 = __ldaxr(v10);
    signed int v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1392LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unsigned int v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1392LL))(a1, a2);
  signed int v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      char v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_321F8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void mult_matrixf(__GLIContextRec *a1, const float *a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v9);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_57:
        unsigned int v46 = __ldaxr(v10);
      while (__stlxr(v46 - 1, v10));
      uint64_t v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 24) + 1408LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  __uint64_t v54 = 0LL;
  int v55 = 0LL;
  unsigned int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v54;
    unsigned int v15 = v55;
    int64_t v17 = v55 - (_BYTE *)v54;
    unsigned int v18 = v56;
    unint64_t v19 = v56 - (v55 - (_BYTE *)v54);
    if (v19 > 0x73) {
      goto LABEL_24;
    }
    int v48 = (371 - v19) & 0xFFFFFF00;
    v56 += v48;
    signed int v16 = (char *)malloc(v48 + v18);
    __uint64_t v54 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        unsigned int v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 28) = 0;
        *((_OWORD *)v15 + 5) = 0u;
        *((_OWORD *)v15 + 6) = 0u;
        *((_OWORD *)v15 + 3) = 0u;
        *((_OWORD *)v15 + 4) = 0u;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)unsigned int v15 = 0u;
        int v55 = v15 + 116;
        GPUTools::FB::Fbuf::align((char **)&v54);
        *((_DWORD *)v16 + 1) = 379;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v53 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v53);
        *((void *)v16 + 1) = v53;
        strcpy(v16 + 36, "C@16f");
        *(void *)(v16 + 44) = *(void *)v9;
        __int128 v21 = *(_OWORD *)a2;
        __int128 v22 = *((_OWORD *)a2 + 1);
        __int128 v23 = *((_OWORD *)a2 + 2);
        *(_OWORD *)(v16 + 100) = *((_OWORD *)a2 + 3);
        *(_OWORD *)(v16 + 84) = v23;
        *(_OWORD *)(v16 + 68) = v22;
        *(_OWORD *)(v16 + 52) = v21;
        char v24 = byte_206FD3;
        if ((byte_206FD3 & 1) != 0) {
          breakpoint_break( (uint64_t)&v54,  (volatile int *)((char *)&stru_158.addr + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v25 & 0x10 | v24 & 4))
        {
          uint64_t v26 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 32) + 1408LL))(a1, a2);
          uint64_t v25 = mach_absolute_time();
          uint64_t v27 = v25 - v26;
          unint64_t v28 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unsigned int v29 = v54;
            *((void *)v54 + 2) = v26;
            v29[3] = v27;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v51 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
            uint64_t v52 = v54;
            *((void *)v54 + 3) = v51;
            uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
            v52[2] = v25;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v25 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  __int128 v21;
  __int128 v22;
  __int128 v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  unint64_t v28;
  void *v29;
  id v30;
  GPUTools::FB::Fbuf *v31;
  unsigned int v32;
  GPUTools::FB::Fbuf *v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  GPUTools::FB::Stream *v36;
  unsigned int *v37;
  unsigned int v38;
  unsigned int v39;
  unsigned int v40;
  signed int v41;
  BOOL v42;
  unsigned int v43;
  uint64_t v44;
  id v45;
  unsigned int v46;
  dispatch_queue_s *v47;
  int v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  __uint64_t v53;
  void *v54;
  char *v55;
  unsigned int v56;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v9);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_57:
        unsigned int v46 = __ldaxr(v10);
      while (__stlxr(v46 - 1, v10));
      uint64_t v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 24) + 1408LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  __uint64_t v54 = 0LL;
  int v55 = 0LL;
  unsigned int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v54;
    unsigned int v15 = v55;
    int64_t v17 = v55 - (_BYTE *)v54;
    unsigned int v18 = v56;
    unint64_t v19 = v56 - (v55 - (_BYTE *)v54);
    if (v19 > 0x73) {
      goto LABEL_24;
    }
    int v48 = (371 - v19) & 0xFFFFFF00;
    v56 += v48;
    signed int v16 = (char *)malloc(v48 + v18);
    __uint64_t v54 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        unsigned int v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 28) = 0;
        *((_OWORD *)v15 + 5) = 0u;
        *((_OWORD *)v15 + 6) = 0u;
        *((_OWORD *)v15 + 3) = 0u;
        *((_OWORD *)v15 + 4) = 0u;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)unsigned int v15 = 0u;
        int v55 = v15 + 116;
        GPUTools::FB::Fbuf::align((char **)&v54);
        *((_DWORD *)v16 + 1) = 379;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v53 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v53);
        *((void *)v16 + 1) = v53;
        strcpy(v16 + 36, "C@16f");
        *(void *)(v16 + 44) = *(void *)v9;
        __int128 v21 = *(_OWORD *)a2;
        __int128 v22 = *((_OWORD *)a2 + 1);
        __int128 v23 = *((_OWORD *)a2 + 2);
        *(_OWORD *)(v16 + 100) = *((_OWORD *)a2 + 3);
        *(_OWORD *)(v16 + 84) = v23;
        *(_OWORD *)(v16 + 68) = v22;
        *(_OWORD *)(v16 + 52) = v21;
        char v24 = byte_206FD3;
        if ((byte_206FD3 & 1) != 0) {
          breakpoint_break( (uint64_t)&v54,  (volatile int *)((char *)&stru_158.addr + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v25 & 0x10 | v24 & 4))
        {
          uint64_t v26 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 32) + 1408LL))(a1, a2);
          uint64_t v25 = mach_absolute_time();
          uint64_t v27 = v25 - v26;
          unint64_t v28 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unsigned int v29 = v54;
            *((void *)v54 + 2) = v26;
            v29[3] = v27;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v51 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
            uint64_t v52 = v54;
            *((void *)v54 + 3) = v51;
            uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
            v52[2] = v25;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v25 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        __int128 v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      __int128 v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 24) + 1408LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 32) + 1408LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      __int128 v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    unsigned int v15 = __ldaxr(v10);
    signed int v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    __int128 v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    __int128 v22 = handle_opengl_thread_conflict((const void **)v9);
    __int128 v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        char v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 24) + 1408LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        __int128 v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unsigned int v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, const float *))(*(void *)(v9 + 32) + 1408LL))(a1, a2);
  signed int v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_326E8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void normal3f(__GLIContextRec *a1, float a2, float a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 1456LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  int v55 = 0LL;
  unsigned int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    unint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        unsigned int v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 423;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Cfff");
        *(void *)(v20 + 44) = *(void *)v13;
        *((float *)v20 + 13) = a2;
        *((float *)v20 + 14) = a3;
        *((float *)v20 + 15) = a4;
        char v25 = byte_206FFF;
        if ((byte_206FFF & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_158.reserved3 + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 1456LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            id v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            __uint64_t v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  __uint64_t v54;
  void *v55;
  char *v56;
  unsigned int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 1456LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  int v55 = 0LL;
  unsigned int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    unint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        unsigned int v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 423;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Cfff");
        *(void *)(v20 + 44) = *(void *)v13;
        *((float *)v20 + 13) = a2;
        *((float *)v20 + 14) = a3;
        *((float *)v20 + 15) = a4;
        char v25 = byte_206FFF;
        if ((byte_206FFF & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_158.reserved3 + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 1456LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            id v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            __uint64_t v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 1456LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        unsigned int v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 1456LL))(a1, a2, a3, a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    int64_t v21 = v20 < 1;
  }
  else {
    int64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 1456LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 1456LL))(a1, a2, a3, a4);
  uint64_t v20 = mach_absolute_time();
  int64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      id v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    unsigned int v22 = __ldaxr(v14);
    unint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_32BF0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void normal_pointer(__GLIContextRec *a1, uint64_t a2, uint64_t a3, const void *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_56:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 24) + 1504LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    int v23 = *(_DWORD *)(v13 + 2032);
    *(_DWORD *)(v13 + 1276) = a2;
    *(_DWORD *)(v13 + 1284) = a3;
    *(void *)(v13 + 1264) = a4;
    *(_DWORD *)(v13 + 1272) = v23;
    GPUTools::FB::Encode( (uint64_t)v53,  429LL,  2 * (v23 == 0),  (uint64_t)"Ceit",  v18,  v19,  v20,  v21,  *(void *)v13);
    char v25 = byte_207005;
    if ((byte_207005 & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_1A8.sectname[5], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 32) + 1504LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v30 = v53[0];
        *((void *)v53[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        uint64_t v52 = v53[0];
        *((void *)v53[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v26 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  id v22;
  int v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  void *v53[2];
  int v54;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_56:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 24) + 1504LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    int v23 = *(_DWORD *)(v13 + 2032);
    *(_DWORD *)(v13 + 1276) = a2;
    *(_DWORD *)(v13 + 1284) = a3;
    *(void *)(v13 + 1264) = a4;
    *(_DWORD *)(v13 + 1272) = v23;
    GPUTools::FB::Encode( (uint64_t)v53,  429LL,  2 * (v23 == 0),  (uint64_t)"Ceit",  v18,  v19,  v20,  v21,  *(void *)v13);
    char v25 = byte_207005;
    if ((byte_207005 & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_1A8.sectname[5], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 32) + 1504LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v30 = v53[0];
        *((void *)v53[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        uint64_t v52 = v53[0];
        *((void *)v53[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v26 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    int v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 24) + 1504LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        id v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 32) + 1504LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 24) + 1504LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 32) + 1504LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  uint64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      id v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    id v22 = __ldaxr(v14);
    int v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_33040( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void pixel_storei(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      id v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 1560LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  __uint64_t v53 = 0LL;
  int v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v18 = (char *)v53;
    BOOL v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v47 = (311 - v21) & 0xFFFFFF00;
    v55 += v47;
    uint64_t v18 = (char *)malloc(v47 + v20);
    __uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        int v54 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 438;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        *((_DWORD *)v18 + 9) = 6907203;
        *((void *)v18 + 5) = *(void *)v11;
        *((_DWORD *)v18 + 12) = a2;
        *((_DWORD *)v18 + 13) = a3;
        char v23 = byte_20700E;
        if ((byte_20700E & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)&stru_1A8.sectname[14],  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 1560LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            uint64_t v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      id v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 1560LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  __uint64_t v53 = 0LL;
  int v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v18 = (char *)v53;
    BOOL v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v47 = (311 - v21) & 0xFFFFFF00;
    v55 += v47;
    uint64_t v18 = (char *)malloc(v47 + v20);
    __uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        int v54 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 438;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        *((_DWORD *)v18 + 9) = 6907203;
        *((void *)v18 + 5) = *(void *)v11;
        *((_DWORD *)v18 + 12) = a2;
        *((_DWORD *)v18 + 13) = a3;
        char v23 = byte_20700E;
        if ((byte_20700E & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)&stru_1A8.sectname[14],  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 1560LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            uint64_t v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 1560LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 1560LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    BOOL v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 1560LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 1560LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_33518( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void point_size(__GLIContextRec *a1, float a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      id v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 24) + 1592LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  __uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        __uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 448;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Cf");
        *((void *)v16 + 5) = *(void *)v9;
        *((float *)v16 + 12) = a2;
        char v21 = byte_207018;
        if ((byte_207018 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_1A8.segname[8], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 32) + 1592LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            uint64_t v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      id v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 24) + 1592LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  __uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        __uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 448;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Cf");
        *((void *)v16 + 5) = *(void *)v9;
        *((float *)v16 + 12) = a2;
        char v21 = byte_207018;
        if ((byte_207018 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_1A8.segname[8], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 32) + 1592LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            uint64_t v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 24) + 1592LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 32) + 1592LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    BOOL v15 = __ldaxr(v10);
    id v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 24) + 1592LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, float))(*(void *)(v9 + 32) + 1592LL))(a1, a2);
  id v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_339F0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void polygon_offset(__GLIContextRec *a1, float a2, float a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float))(*(void *)(v11 + 24) + 1608LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v53 = 0LL;
  int v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v47 = (311 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    unsigned int v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        int v54 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 450;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        *((_DWORD *)v18 + 9) = 6710851;
        *((void *)v18 + 5) = *(void *)v11;
        *((float *)v18 + 12) = a2;
        *((float *)v18 + 13) = a3;
        char v23 = byte_20701A;
        if ((byte_20701A & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)&stru_1A8.segname[10],  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float))(*(void *)(v11 + 32) + 1608LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            uint64_t v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float))(*(void *)(v11 + 24) + 1608LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v53 = 0LL;
  int v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v47 = (311 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    unsigned int v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        int v54 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 450;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        *((_DWORD *)v18 + 9) = 6710851;
        *((void *)v18 + 5) = *(void *)v11;
        *((float *)v18 + 12) = a2;
        *((float *)v18 + 13) = a3;
        char v23 = byte_20701A;
        if ((byte_20701A & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)&stru_1A8.segname[10],  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float))(*(void *)(v11 + 32) + 1608LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            uint64_t v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float))(*(void *)(v11 + 24) + 1608LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, float, float))(*(void *)(v11 + 32) + 1608LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    int64_t v17 = __ldaxr(v12);
    unsigned int v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float))(*(void *)(v11 + 24) + 1608LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  int64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, float, float))(*(void *)(v11 + 32) + 1608LL))(a1, a2, a3);
  unsigned int v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_33ED8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void pop_matrix(__GLIContextRec *a1)
{
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v40 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v39 = handle_opengl_thread_conflict((const void **)v7);
    id v40 = [(id)DYGetGLGuestAppClient(v39) waitOnGraphicsSemaphoreAssertions];
    if ((int)v40 >= 1)
    {
      do
LABEL_57:
        unsigned int v41 = __ldaxr(v8);
      while (__stlxr(v41 - 1, v8));
      unsigned int v42 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v40) graphicsLockWaitQueue];
      dispatch_sync_f(v42, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1640LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  uint64_t v49 = 0LL;
  uint64_t v50 = 0LL;
  unsigned int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v40) state] != (char *)&dword_0 + 1
    || (id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v12))
  {
    signed int v14 = (char *)v49;
    unsigned int v13 = v50;
    int64_t v15 = v50 - (_BYTE *)v49;
    unsigned int v16 = v51;
    unint64_t v17 = v51 - (v50 - (_BYTE *)v49);
    if (v17 > 0x2F) {
      goto LABEL_24;
    }
    int v43 = (303 - v17) & 0xFFFFFF00;
    v51 += v43;
    signed int v14 = (char *)malloc(v43 + v16);
    uint64_t v49 = v14;
    if (v14)
    {
      if ((v14 & 3) == 0)
      {
        unsigned int v13 = &v14[v15];
LABEL_24:
        *((_OWORD *)v13 + 1) = 0u;
        *((_OWORD *)v13 + 2) = 0u;
        *(_OWORD *)unsigned int v13 = 0u;
        uint64_t v50 = v13 + 48;
        GPUTools::FB::Fbuf::align((char **)&v49);
        *((_DWORD *)v14 + 1) = 454;
        *((_DWORD *)v14 + 8) = 0;
        __uint64_t v48 = 0LL;
        uint64_t v18 = pthread_threadid_np(0LL, &v48);
        *((void *)v14 + 1) = v48;
        *((_WORD *)v14 + 18) = 67;
        *((void *)v14 + 5) = *(void *)v7;
        char v19 = byte_20701E;
        if ((byte_20701E & 1) != 0) {
          breakpoint_break((uint64_t)&v49, (volatile int *)&stru_1A8.segname[14], 1LL, *(unsigned int *)(v7 + 3404), v7);
        }
        uint64_t v20 = (uint64_t)[(id)DYGetGLGuestAppClient(v18) overrideFlags];
        if (!(v20 & 0x10 | v19 & 4))
        {
          uint64_t v21 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1640LL))(a1);
          uint64_t v20 = mach_absolute_time();
          uint64_t v22 = v20 - v21;
          unint64_t v23 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v24 = v49;
            *((void *)v49 + 2) = v21;
            v24[3] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v46 = __udivti3(g_DYTimebaseInfo * v22, (g_DYTimebaseInfo * (unsigned __int128)v22) >> 64);
            int v47 = v49;
            *((void *)v49 + 3) = v46;
            uint64_t v20 = __udivti3(v23 * v21, (v23 * (unsigned __int128)v21) >> 64);
            v47[2] = v20;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v20 = check_errors(v7);
        }

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  char *v13;
  char *v14;
  int64_t v15;
  unsigned int v16;
  unint64_t v17;
  uint64_t v18;
  char v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  unint64_t v23;
  void *v24;
  id v25;
  GPUTools::FB::Fbuf *v26;
  unsigned int v27;
  GPUTools::FB::Fbuf *v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  GPUTools::FB::Stream *v31;
  unsigned int *v32;
  unsigned int v33;
  unsigned int v34;
  unsigned int v35;
  signed int v36;
  BOOL v37;
  unsigned int v38;
  uint64_t v39;
  id v40;
  unsigned int v41;
  dispatch_queue_s *v42;
  int v43;
  uint64_t v44;
  uint64_t v45;
  uint64_t v46;
  void *v47;
  __uint64_t v48;
  void *v49;
  char *v50;
  unsigned int v51;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v40 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v39 = handle_opengl_thread_conflict((const void **)v7);
    id v40 = [(id)DYGetGLGuestAppClient(v39) waitOnGraphicsSemaphoreAssertions];
    if ((int)v40 >= 1)
    {
      do
LABEL_57:
        unsigned int v41 = __ldaxr(v8);
      while (__stlxr(v41 - 1, v8));
      unsigned int v42 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v40) graphicsLockWaitQueue];
      dispatch_sync_f(v42, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1640LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  uint64_t v49 = 0LL;
  uint64_t v50 = 0LL;
  unsigned int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v40) state] != (char *)&dword_0 + 1
    || (id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v12))
  {
    signed int v14 = (char *)v49;
    unsigned int v13 = v50;
    int64_t v15 = v50 - (_BYTE *)v49;
    unsigned int v16 = v51;
    unint64_t v17 = v51 - (v50 - (_BYTE *)v49);
    if (v17 > 0x2F) {
      goto LABEL_24;
    }
    int v43 = (303 - v17) & 0xFFFFFF00;
    v51 += v43;
    signed int v14 = (char *)malloc(v43 + v16);
    uint64_t v49 = v14;
    if (v14)
    {
      if ((v14 & 3) == 0)
      {
        unsigned int v13 = &v14[v15];
LABEL_24:
        *((_OWORD *)v13 + 1) = 0u;
        *((_OWORD *)v13 + 2) = 0u;
        *(_OWORD *)unsigned int v13 = 0u;
        uint64_t v50 = v13 + 48;
        GPUTools::FB::Fbuf::align((char **)&v49);
        *((_DWORD *)v14 + 1) = 454;
        *((_DWORD *)v14 + 8) = 0;
        __uint64_t v48 = 0LL;
        uint64_t v18 = pthread_threadid_np(0LL, &v48);
        *((void *)v14 + 1) = v48;
        *((_WORD *)v14 + 18) = 67;
        *((void *)v14 + 5) = *(void *)v7;
        char v19 = byte_20701E;
        if ((byte_20701E & 1) != 0) {
          breakpoint_break((uint64_t)&v49, (volatile int *)&stru_1A8.segname[14], 1LL, *(unsigned int *)(v7 + 3404), v7);
        }
        uint64_t v20 = (uint64_t)[(id)DYGetGLGuestAppClient(v18) overrideFlags];
        if (!(v20 & 0x10 | v19 & 4))
        {
          uint64_t v21 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1640LL))(a1);
          uint64_t v20 = mach_absolute_time();
          uint64_t v22 = v20 - v21;
          unint64_t v23 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v24 = v49;
            *((void *)v49 + 2) = v21;
            v24[3] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v46 = __udivti3(g_DYTimebaseInfo * v22, (g_DYTimebaseInfo * (unsigned __int128)v22) >> 64);
            int v47 = v49;
            *((void *)v49 + 3) = v46;
            uint64_t v20 = __udivti3(v23 * v21, (v23 * (unsigned __int128)v21) >> 64);
            v47[2] = v20;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v20 = check_errors(v7);
        }

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  unsigned int v16;
  uint64_t v17;
  id v18;
  unsigned int v19;
  dispatch_queue_s *v20;
  uint64_t v21;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v17 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v18 = [(id)DYGetGLGuestAppClient(v17) waitOnGraphicsSemaphoreAssertions];
    if ((int)v18 >= 1)
    {
      do
LABEL_34:
        char v19 = __ldaxr(v8);
      while (__stlxr(v19 - 1, v8));
      uint64_t v20 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v18) graphicsLockWaitQueue];
      dispatch_sync_f(v20, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1640LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v18) state] == (char *)&dword_0 + 1)
  {
    id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        unsigned int v16 = __ldaxr(v8);
      while (__stlxr(v16 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1640LL))(a1);
  ++*(void *)(v7 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      uint64_t v21 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v21) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v21, v7);
      }
    }
  }

  do
  {
    unsigned int v13 = __ldaxr(v8);
    signed int v14 = v13 - 1;
  }

  while (__stlxr(v14, v8));
  if (gCheckGLErrors) {
    int64_t v15 = v14 < 1;
  }
  else {
    int64_t v15 = 1;
  }
  if (!v15) {
    handle_opengl_thread_conflict((const void **)v7);
  }
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  uint64_t v13;
  uint64_t v14;
  int64x2_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_34:
        uint64_t v22 = __ldaxr(v8);
      while (__stlxr(v22 - 1, v8));
      unint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1640LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        char v19 = __ldaxr(v8);
      while (__stlxr(v19 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unsigned int v13 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1640LL))(a1);
  signed int v14 = mach_absolute_time();
  int64_t v15 = vdupq_n_s64(1uLL);
  v15.i64[0] = v14 - v13;
  *(int64x2_t *)(v7 + 3696) = vaddq_s64(v15, *(int64x2_t *)(v7 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v7);
      }
    }
  }

  do
  {
    unsigned int v16 = __ldaxr(v8);
    unint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v8));
  if (gCheckGLErrors) {
    uint64_t v18 = v17 < 1;
  }
  else {
    uint64_t v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v7);
  }
}

void sub_34388( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void push_matrix(__GLIContextRec *a1)
{
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v40 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v39 = handle_opengl_thread_conflict((const void **)v7);
    id v40 = [(id)DYGetGLGuestAppClient(v39) waitOnGraphicsSemaphoreAssertions];
    if ((int)v40 >= 1)
    {
      do
LABEL_57:
        unsigned int v41 = __ldaxr(v8);
      while (__stlxr(v41 - 1, v8));
      unsigned int v42 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v40) graphicsLockWaitQueue];
      dispatch_sync_f(v42, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1680LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  uint64_t v49 = 0LL;
  uint64_t v50 = 0LL;
  unsigned int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v40) state] != (char *)&dword_0 + 1
    || (id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v12))
  {
    signed int v14 = (char *)v49;
    unsigned int v13 = v50;
    int64_t v15 = v50 - (_BYTE *)v49;
    unsigned int v16 = v51;
    unint64_t v17 = v51 - (v50 - (_BYTE *)v49);
    if (v17 > 0x2F) {
      goto LABEL_24;
    }
    int v43 = (303 - v17) & 0xFFFFFF00;
    v51 += v43;
    signed int v14 = (char *)malloc(v43 + v16);
    uint64_t v49 = v14;
    if (v14)
    {
      if ((v14 & 3) == 0)
      {
        unsigned int v13 = &v14[v15];
LABEL_24:
        *((_OWORD *)v13 + 1) = 0u;
        *((_OWORD *)v13 + 2) = 0u;
        *(_OWORD *)unsigned int v13 = 0u;
        uint64_t v50 = v13 + 48;
        GPUTools::FB::Fbuf::align((char **)&v49);
        *((_DWORD *)v14 + 1) = 471;
        *((_DWORD *)v14 + 8) = 0;
        __uint64_t v48 = 0LL;
        uint64_t v18 = pthread_threadid_np(0LL, &v48);
        *((void *)v14 + 1) = v48;
        *((_WORD *)v14 + 18) = 67;
        *((void *)v14 + 5) = *(void *)v7;
        char v19 = byte_20702F;
        if ((byte_20702F & 1) != 0) {
          breakpoint_break( (uint64_t)&v49,  (volatile int *)((char *)&stru_1A8.size + 7),  1LL,  *(unsigned int *)(v7 + 3404),  v7);
        }
        uint64_t v20 = (uint64_t)[(id)DYGetGLGuestAppClient(v18) overrideFlags];
        if (!(v20 & 0x10 | v19 & 4))
        {
          uint64_t v21 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1680LL))(a1);
          uint64_t v20 = mach_absolute_time();
          uint64_t v22 = v20 - v21;
          unint64_t v23 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v24 = v49;
            *((void *)v49 + 2) = v21;
            v24[3] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v46 = __udivti3(g_DYTimebaseInfo * v22, (g_DYTimebaseInfo * (unsigned __int128)v22) >> 64);
            int v47 = v49;
            *((void *)v49 + 3) = v46;
            uint64_t v20 = __udivti3(v23 * v21, (v23 * (unsigned __int128)v21) >> 64);
            v47[2] = v20;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v20 = check_errors(v7);
        }

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  char *v13;
  char *v14;
  int64_t v15;
  unsigned int v16;
  unint64_t v17;
  uint64_t v18;
  char v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  unint64_t v23;
  void *v24;
  id v25;
  GPUTools::FB::Fbuf *v26;
  unsigned int v27;
  GPUTools::FB::Fbuf *v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  GPUTools::FB::Stream *v31;
  unsigned int *v32;
  unsigned int v33;
  unsigned int v34;
  unsigned int v35;
  signed int v36;
  BOOL v37;
  unsigned int v38;
  uint64_t v39;
  id v40;
  unsigned int v41;
  dispatch_queue_s *v42;
  int v43;
  uint64_t v44;
  uint64_t v45;
  uint64_t v46;
  void *v47;
  __uint64_t v48;
  void *v49;
  char *v50;
  unsigned int v51;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v40 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v39 = handle_opengl_thread_conflict((const void **)v7);
    id v40 = [(id)DYGetGLGuestAppClient(v39) waitOnGraphicsSemaphoreAssertions];
    if ((int)v40 >= 1)
    {
      do
LABEL_57:
        unsigned int v41 = __ldaxr(v8);
      while (__stlxr(v41 - 1, v8));
      unsigned int v42 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v40) graphicsLockWaitQueue];
      dispatch_sync_f(v42, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1680LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  uint64_t v49 = 0LL;
  uint64_t v50 = 0LL;
  unsigned int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v40) state] != (char *)&dword_0 + 1
    || (id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v12))
  {
    signed int v14 = (char *)v49;
    unsigned int v13 = v50;
    int64_t v15 = v50 - (_BYTE *)v49;
    unsigned int v16 = v51;
    unint64_t v17 = v51 - (v50 - (_BYTE *)v49);
    if (v17 > 0x2F) {
      goto LABEL_24;
    }
    int v43 = (303 - v17) & 0xFFFFFF00;
    v51 += v43;
    signed int v14 = (char *)malloc(v43 + v16);
    uint64_t v49 = v14;
    if (v14)
    {
      if ((v14 & 3) == 0)
      {
        unsigned int v13 = &v14[v15];
LABEL_24:
        *((_OWORD *)v13 + 1) = 0u;
        *((_OWORD *)v13 + 2) = 0u;
        *(_OWORD *)unsigned int v13 = 0u;
        uint64_t v50 = v13 + 48;
        GPUTools::FB::Fbuf::align((char **)&v49);
        *((_DWORD *)v14 + 1) = 471;
        *((_DWORD *)v14 + 8) = 0;
        __uint64_t v48 = 0LL;
        uint64_t v18 = pthread_threadid_np(0LL, &v48);
        *((void *)v14 + 1) = v48;
        *((_WORD *)v14 + 18) = 67;
        *((void *)v14 + 5) = *(void *)v7;
        char v19 = byte_20702F;
        if ((byte_20702F & 1) != 0) {
          breakpoint_break( (uint64_t)&v49,  (volatile int *)((char *)&stru_1A8.size + 7),  1LL,  *(unsigned int *)(v7 + 3404),  v7);
        }
        uint64_t v20 = (uint64_t)[(id)DYGetGLGuestAppClient(v18) overrideFlags];
        if (!(v20 & 0x10 | v19 & 4))
        {
          uint64_t v21 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1680LL))(a1);
          uint64_t v20 = mach_absolute_time();
          uint64_t v22 = v20 - v21;
          unint64_t v23 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v24 = v49;
            *((void *)v49 + 2) = v21;
            v24[3] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v46 = __udivti3(g_DYTimebaseInfo * v22, (g_DYTimebaseInfo * (unsigned __int128)v22) >> 64);
            int v47 = v49;
            *((void *)v49 + 3) = v46;
            uint64_t v20 = __udivti3(v23 * v21, (v23 * (unsigned __int128)v21) >> 64);
            v47[2] = v20;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v20 = check_errors(v7);
        }

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  unsigned int v16;
  uint64_t v17;
  id v18;
  unsigned int v19;
  dispatch_queue_s *v20;
  uint64_t v21;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v17 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v18 = [(id)DYGetGLGuestAppClient(v17) waitOnGraphicsSemaphoreAssertions];
    if ((int)v18 >= 1)
    {
      do
LABEL_34:
        char v19 = __ldaxr(v8);
      while (__stlxr(v19 - 1, v8));
      uint64_t v20 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v18) graphicsLockWaitQueue];
      dispatch_sync_f(v20, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1680LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v18) state] == (char *)&dword_0 + 1)
  {
    id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        unsigned int v16 = __ldaxr(v8);
      while (__stlxr(v16 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1680LL))(a1);
  ++*(void *)(v7 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      uint64_t v21 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v21) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v21, v7);
      }
    }
  }

  do
  {
    unsigned int v13 = __ldaxr(v8);
    signed int v14 = v13 - 1;
  }

  while (__stlxr(v14, v8));
  if (gCheckGLErrors) {
    int64_t v15 = v14 < 1;
  }
  else {
    int64_t v15 = 1;
  }
  if (!v15) {
    handle_opengl_thread_conflict((const void **)v7);
  }
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  uint64_t v13;
  uint64_t v14;
  int64x2_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_34:
        uint64_t v22 = __ldaxr(v8);
      while (__stlxr(v22 - 1, v8));
      unint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 1680LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        char v19 = __ldaxr(v8);
      while (__stlxr(v19 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unsigned int v13 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 1680LL))(a1);
  signed int v14 = mach_absolute_time();
  int64_t v15 = vdupq_n_s64(1uLL);
  v15.i64[0] = v14 - v13;
  *(int64x2_t *)(v7 + 3696) = vaddq_s64(v15, *(int64x2_t *)(v7 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v7);
      }
    }
  }

  do
  {
    unsigned int v16 = __ldaxr(v8);
    unint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v8));
  if (gCheckGLErrors) {
    uint64_t v18 = v17 < 1;
  }
  else {
    uint64_t v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v7);
  }
}

void sub_34838( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void read_buffer(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      uint64_t v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1888LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  unsigned int v51 = 0LL;
  __uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    unsigned int v16 = (char *)v51;
    int64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    unsigned int v16 = (char *)malloc(v45 + v18);
    unsigned int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        int64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)int64_t v15 = 0u;
        __uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 497;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_207049;
        if ((byte_207049 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_1A8.reserved2 + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1888LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            uint64_t v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      uint64_t v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1888LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  unsigned int v51 = 0LL;
  __uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    unsigned int v16 = (char *)v51;
    int64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    unsigned int v16 = (char *)malloc(v45 + v18);
    unsigned int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        int64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)int64_t v15 = 0u;
        __uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 497;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_207049;
        if ((byte_207049 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_1A8.reserved2 + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1888LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            uint64_t v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1888LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1888LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    int64_t v15 = __ldaxr(v10);
    unsigned int v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 1888LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  int64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 1888LL))(a1, a2);
  unsigned int v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_34D04( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void read_pixels( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, void *a8)
{
  BOOL v13 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v13) {
    goto LABEL_12;
  }
  uint64_t v14 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v15 = v13[4];
    BOOL v16 = v15 >= (unint64_t)a1;
    else {
      int64_t v17 = v13 + 1;
    }
    if (v16) {
      uint64_t v14 = (uint64_t)v13;
    }
    BOOL v13 = (void *)*v17;
  }

  while (*v17);
  if (v14 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v14 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v14 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v18 = *(void *)(v14 + 40);
  unint64_t v19 = (unsigned int *)(v18 + 4640);
  do
  {
    unsigned int v20 = __ldaxr(v19);
    signed int v21 = v20 + 1;
  }

  while (__stlxr(v21, v19));
  if (gCheckGLErrors) {
    BOOL v22 = v21 <= 1;
  }
  else {
    BOOL v22 = 1;
  }
  if (v22)
  {
    id v67 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v66 = handle_opengl_thread_conflict((const void **)v18);
    id v67 = [(id)DYGetGLGuestAppClient(v66) waitOnGraphicsSemaphoreAssertions];
    if ((int)v67 >= 1)
    {
      do
LABEL_70:
        unsigned int v68 = __ldaxr(v19);
      while (__stlxr(v68 - 1, v19));
      v69 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v67) graphicsLockWaitQueue];
      dispatch_sync_f(v69, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v18 + 24) + 1896LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v18 + 4838) = 1;
  v84 = 0LL;
  v85 = 0LL;
  unsigned int v86 = 0;
  if ([(id)DYGetGLGuestAppClient(v67) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    (*(void (**)(void, uint64_t, int *))(*(void *)(v18 + 32) + 832LL))( *(void *)(v18 + 16),  35739LL,  &v83);
    (*(void (**)(void, uint64_t, int *))(*(void *)(v18 + 32) + 832LL))( *(void *)(v18 + 16),  35738LL,  &v82);
    GPUTools::FB::Encode((uint64_t)&v84, 4294955024LL, 0LL, (uint64_t)"Ciee", v24, v25, v26, v27, *(void *)v18);
    unsigned int v29 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v28) defaultFbufStream];
    uint64_t v30 = (unsigned int *)((char *)v29 + 56);
    do
      unsigned int v31 = __ldaxr(v30);
    while (__stlxr(1u, v30));
    if (v31 == 1)
    {
      do
      {
        while (*v30 == 1)
          ;
        do
          unsigned int v32 = __ldaxr(v30);
        while (__stlxr(1u, v30));
      }

      while (v32 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v29, (GPUTools::FB::Fbuf *)&v84, *(unsigned int *)v84, 1);
    atomic_store(0, v30);
    GPUTools::FB::Encode((uint64_t)&v84, 498LL, 0LL, (uint64_t)"Ciiiieet", v33, v34, v35, v36, *(void *)v18);
    char v38 = byte_20704A;
    if ((byte_20704A & 1) != 0) {
      breakpoint_break( (uint64_t)&v84,  (volatile int *)((char *)&stru_1A8.reserved2 + 2),  1LL,  *(unsigned int *)(v18 + 3404),  v18);
    }
    uint64_t v39 = (uint64_t)[(id)DYGetGLGuestAppClient(v37) overrideFlags];
    if (!(v39 & 0x10 | v38 & 4))
    {
      uint64_t v40 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v18 + 32) + 1896LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      uint64_t v39 = mach_absolute_time();
      uint64_t v41 = v39 - v40;
      unint64_t v42 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v43 = v84;
        v84[3] = v41;
      }

      else
      {
        uint64_t v72 = __udivti3(g_DYTimebaseInfo * v41, (g_DYTimebaseInfo * (unsigned __int128)v41) >> 64);
        unsigned int v43 = v84;
        v84[3] = v72;
        uint64_t v39 = __udivti3(v42 * v40, (v42 * (unsigned __int128)v40) >> 64);
        uint64_t v40 = v39;
      }

      v43[2] = v40;
      if (gCheckGLErrors) {
        uint64_t v39 = check_errors(v18);
      }
    }

    if (!*(_DWORD *)(v18 + 2040))
    {
      __int128 v78 = xmmword_1F2D60;
      uint64_t v79 = 0LL;
      uint64_t v80 = 0LL;
      __int16 v81 = 0;
      uint64_t v44 = *(void *)(v18 + 32);
      v77[0] = v18;
      v77[1] = v44;
      GPUTools::GL::SavePixelStorePackState(v77, *(unsigned int *)(v18 + 3456), *(unsigned __int8 *)(v18 + 4861), &v78);
      uint64_t v39 = GPUTools::GL::ComputeReadPixelsImageSize(a4, a5, a6, a7, &v78);
      if (a8)
      {
        unsigned int v45 = v39;
        if ((_DWORD)v39)
        {
          uint64_t v46 = DYGetGLGuestAppClient(v39);
          GPUTools::Interpose::DYSavePointer(v46, v45, a8, v18 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
          unsigned int v51 = v84;
          __int128 v75 = *((_OWORD *)v84 + 1);
          v85 = v84;
          if (v86 >= 0x24)
          {
            *((_DWORD *)v84 + 8) = 0;
            _OWORD *v51 = 0u;
            v51[1] = 0u;
          }

          GPUTools::FB::Encode((uint64_t)&v84, 498LL, 256LL, (uint64_t)"CiiiieeU", v47, v48, v49, v50, *(void *)v18);
          *((_OWORD *)v84 + 1) = v75;
        }
      }
    }

    id v52 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v52) {
      id v52 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v84, v53);
    }
    unsigned int v55 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v18 + 3404);
    if ((_DWORD)v55) {
      id v52 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v84, v55, v54);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v52), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v18, (uint64_t)&v84);
    }
    unsigned int v56 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v18 + 3480),  (GPUTools::FB::Fbuf *)(v18 + 3520),  (GPUTools::FB *)&v84);
    uint64_t v57 = *(unsigned int *)(v18 + 3404);
    if ((_DWORD)v57 && gBreakOnError)
    {
      uint64_t v70 = 3LL;
      uint64_t v71 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v38 & 2) == 0) {
        goto LABEL_51;
      }
      uint64_t v70 = 2LL;
      uint64_t v71 = 498LL;
    }

    breakpoint_break((uint64_t)&v84, (volatile int *)v71, v70, v57, v18);
LABEL_51:
    uint64_t v58 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v56) defaultFbufStream];
    uint64_t v59 = (unsigned int *)((char *)v58 + 56);
    do
      unsigned int v60 = __ldaxr(v59);
    while (__stlxr(1u, v59));
    if (v60 == 1)
    {
      do
      {
        while (*v59 == 1)
          ;
        do
          unsigned int v61 = __ldaxr(v59);
        while (__stlxr(1u, v59));
      }

      while (v61 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v58, (GPUTools::FB::Fbuf *)&v84, *(unsigned int *)v84, 1);
    atomic_store(0, v59);
    do
    {
      unsigned int v62 = __ldaxr(v19);
      signed int v63 = v62 - 1;
    }

    while (__stlxr(v63, v19));
    if (gCheckGLErrors) {
      BOOL v64 = v63 < 1;
    }
    else {
      BOOL v64 = 1;
    }
    if (!v64) {
      handle_opengl_thread_conflict((const void **)v18);
    }
    goto LABEL_64;
  }

  do
    unsigned int v65 = __ldaxr(v19);
  while (__stlxr(v65 - 1, v19));
  [(id)DYGetGLGuestAppClient(v23) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v18 + 24) + 1896LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
LABEL_64:
  if (v84) {
    free(v84);
  }
}

{
  void *v15;
  uint64_t v16;
  unint64_t v17;
  BOOL v18;
  void *v19;
  uint64_t v20;
  unsigned int *v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  id v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  GPUTools::FB::Stream *v31;
  unsigned int *v32;
  unsigned int v33;
  unsigned int v34;
  uint64_t v35;
  uint64_t v36;
  uint64_t v37;
  uint64_t v38;
  uint64_t v39;
  void *v40;
  uint64_t v41;
  uint64_t v42;
  uint64_t v43;
  unint64_t v44;
  void *v45;
  id v46;
  GPUTools::FB::Fbuf *v47;
  unsigned int v48;
  GPUTools::FB::Fbuf *v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  GPUTools::FB::Stream *v52;
  unsigned int *v53;
  unsigned int v54;
  unsigned int v55;
  unsigned int v56;
  signed int v57;
  BOOL v58;
  unsigned int v59;
  uint64_t v60;
  id v61;
  unsigned int v62;
  dispatch_queue_s *v63;
  uint64_t v64;
  uint64_t v65;
  uint64_t v66;
  void *v67;
  char v68;
  int v70;
  int v71;
  void *v72[2];
  int v73;
  unint64_t v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  BOOL v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    int64_t v17 = v15[4];
    uint64_t v18 = v17 >= (unint64_t)a1;
    else {
      unint64_t v19 = v15 + 1;
    }
    if (v18) {
      BOOL v16 = (uint64_t)v15;
    }
    unint64_t v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    BOOL v16 = ContextInfo::activeCtxInfoMap + 8;
  unsigned int v20 = *(void *)(v16 + 40);
  signed int v21 = (unsigned int *)(v20 + 4640);
  do
  {
    BOOL v22 = __ldaxr(v21);
    id v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 <= 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (v24)
  {
    unsigned int v61 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v60 = handle_opengl_thread_conflict((const void **)v20);
    unsigned int v61 = [(id)DYGetGLGuestAppClient(v60) waitOnGraphicsSemaphoreAssertions];
    if ((int)v61 >= 1)
    {
      do
LABEL_62:
        unsigned int v62 = __ldaxr(v21);
      while (__stlxr(v62 - 1, v21));
      signed int v63 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v61) graphicsLockWaitQueue];
      dispatch_sync_f(v63, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v20 + 24) + 1896LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v20 + 4838) = 1;
  v72[0] = 0LL;
  v72[1] = 0LL;
  v73 = 0;
  if ([(id)DYGetGLGuestAppClient(v61) state] != (char *)&dword_0 + 1
    || (uint64_t v25 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v25))
  {
    (*(void (**)(void, uint64_t, int *))(*(void *)(v20 + 32) + 832LL))( *(void *)(v20 + 16),  35739LL,  &v71);
    (*(void (**)(void, uint64_t, int *))(*(void *)(v20 + 32) + 832LL))( *(void *)(v20 + 16),  35738LL,  &v70);
    GPUTools::FB::Encode((uint64_t)v72, 4294955024LL, 0LL, (uint64_t)"Ciee", v26, v27, v28, v29, *(void *)v20);
    unsigned int v31 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v30) defaultFbufStream];
    unsigned int v32 = (unsigned int *)((char *)v31 + 56);
    do
      uint64_t v33 = __ldaxr(v32);
    while (__stlxr(1u, v32));
    if (v33 == 1)
    {
      do
      {
        while (*v32 == 1)
          ;
        do
          uint64_t v34 = __ldaxr(v32);
        while (__stlxr(1u, v32));
      }

      while (v34 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v31, (GPUTools::FB::Fbuf *)v72, *(unsigned int *)v72[0], 1);
    atomic_store(0, v32);
    GPUTools::FB::Encode((uint64_t)v72, 498LL, 0LL, (uint64_t)"Ciiiieep", v35, v36, v37, v38, *(void *)v20);
    uint64_t v40 = a8;
    unsigned int v68 = byte_20704A;
    if ((byte_20704A & 1) != 0) {
      breakpoint_break( (uint64_t)v72,  (volatile int *)((char *)&stru_1A8.reserved2 + 2),  1LL,  *(unsigned int *)(v20 + 3404),  v20);
    }
    uint64_t v41 = (uint64_t)[(id)DYGetGLGuestAppClient(v39) overrideFlags];
    if (!(v41 & 0x10 | v68 & 4))
    {
      unint64_t v42 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v20 + 32) + 1896LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  v40);
      uint64_t v41 = mach_absolute_time();
      unsigned int v43 = v41 - v42;
      uint64_t v44 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v45 = v72[0];
        *((void *)v72[0] + 2) = v42;
        v45[3] = v43;
        if (!gCheckGLErrors) {
          goto LABEL_34;
        }
      }

      else
      {
        uint64_t v66 = __udivti3(g_DYTimebaseInfo * v43, (g_DYTimebaseInfo * (unsigned __int128)v43) >> 64);
        id v67 = v72[0];
        *((void *)v72[0] + 3) = v66;
        uint64_t v41 = __udivti3(v44 * v42, (v44 * (unsigned __int128)v42) >> 64);
        v67[2] = v41;
        if (!gCheckGLErrors) {
          goto LABEL_34;
        }
      }

      uint64_t v41 = check_errors(v20);
    }

{
  void *v15;
  uint64_t v16;
  unint64_t v17;
  BOOL v18;
  void *v19;
  uint64_t v20;
  unsigned int *v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  id v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  unint64_t v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  BOOL v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    int64_t v17 = v15[4];
    uint64_t v18 = v17 >= (unint64_t)a1;
    else {
      unint64_t v19 = v15 + 1;
    }
    if (v18) {
      BOOL v16 = (uint64_t)v15;
    }
    unint64_t v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    BOOL v16 = ContextInfo::activeCtxInfoMap + 8;
  unsigned int v20 = *(void *)(v16 + 40);
  signed int v21 = (unsigned int *)(v20 + 4640);
  do
  {
    BOOL v22 = __ldaxr(v21);
    id v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 <= 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (v24)
  {
    unsigned int v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v20);
    unsigned int v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        unsigned int v32 = __ldaxr(v21);
      while (__stlxr(v32 - 1, v21));
      uint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v20 + 24) + 1896LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v20 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v25)
    {
      do
        unsigned int v29 = __ldaxr(v21);
      while (__stlxr(v29 - 1, v21));
      [(id)DYGetGLGuestAppClient(v25) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v20 + 32) + 1896LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
  ++*(void *)(v20 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v20);
    if (gBreakOnError)
    {
      uint64_t v34 = *(unsigned int *)(v20 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v20);
      }
    }
  }

  do
  {
    uint64_t v26 = __ldaxr(v21);
    uint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v21));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v20);
  }
}

void sub_35364(_Unwind_Exception *exception_object)
{
  uint64_t v3 = *(void **)(v1 - 112);
  if (v3) {
    free(v3);
  }
  _Unwind_Resume(exception_object);
}

void rotatef(__GLIContextRec *a1, float a2, float a3, float a4, float a5)
{
  signed int v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    signed int v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 24) + 1984LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    BOOL v22 = (char *)v57;
    signed int v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    BOOL v22 = (char *)malloc(v51 + v24);
    uint64_t v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        signed int v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)signed int v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 513;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Cffff");
        *(void *)(v22 + 44) = *(void *)v15;
        *((float *)v22 + 13) = a2;
        *((float *)v22 + 14) = a3;
        *((float *)v22 + 15) = a4;
        *((float *)v22 + 16) = a5;
        char v27 = byte_207059;
        if ((byte_207059 & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)&stru_1F8.sectname[9],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 32) + 1984LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unsigned int v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  signed int v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    signed int v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 24) + 1984LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    BOOL v22 = (char *)v57;
    signed int v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    BOOL v22 = (char *)malloc(v51 + v24);
    uint64_t v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        signed int v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)signed int v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 513;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Cffff");
        *(void *)(v22 + 44) = *(void *)v15;
        *((float *)v22 + 13) = a2;
        *((float *)v22 + 14) = a3;
        *((float *)v22 + 15) = a4;
        *((float *)v22 + 16) = a5;
        char v27 = byte_207059;
        if ((byte_207059 & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)&stru_1F8.sectname[9],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 32) + 1984LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unsigned int v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  signed int v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    signed int v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 24) + 1984LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        unsigned int v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 32) + 1984LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    signed int v21 = __ldaxr(v16);
    BOOL v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    int64_t v23 = v22 < 1;
  }
  else {
    int64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  signed int v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    signed int v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 24) + 1984LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  signed int v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 32) + 1984LL))( a1,  a2,  a3,  a4,  a5);
  BOOL v22 = mach_absolute_time();
  int64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unsigned int v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    unsigned int v24 = __ldaxr(v16);
    unint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_3589C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void scalef(__GLIContextRec *a1, float a2, float a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      id v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 2000LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v55 = 0LL;
  __uint64_t v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    id v20 = (char *)v55;
    BOOL v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    id v20 = (char *)malloc(v49 + v22);
    unsigned int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        BOOL v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)BOOL v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        __uint64_t v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 517;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Cfff");
        *(void *)(v20 + 44) = *(void *)v13;
        *((float *)v20 + 13) = a2;
        *((float *)v20 + 14) = a3;
        *((float *)v20 + 15) = a4;
        char v25 = byte_20705D;
        if ((byte_20705D & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)&stru_1F8.sectname[13],  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 2000LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            uint64_t v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  __uint64_t v54;
  void *v55;
  char *v56;
  unsigned int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      id v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 2000LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v55 = 0LL;
  __uint64_t v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    id v20 = (char *)v55;
    BOOL v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    id v20 = (char *)malloc(v49 + v22);
    unsigned int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        BOOL v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)BOOL v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        __uint64_t v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 517;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Cfff");
        *(void *)(v20 + 44) = *(void *)v13;
        *((float *)v20 + 13) = a2;
        *((float *)v20 + 14) = a3;
        *((float *)v20 + 15) = a4;
        char v25 = byte_20705D;
        if ((byte_20705D & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)&stru_1F8.sectname[13],  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 2000LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            uint64_t v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 2000LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        unsigned int v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 2000LL))(a1, a2, a3, a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    BOOL v19 = __ldaxr(v14);
    id v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    int64_t v21 = v20 < 1;
  }
  else {
    int64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 2000LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 2000LL))(a1, a2, a3, a4);
  id v20 = mach_absolute_time();
  int64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    unsigned int v22 = __ldaxr(v14);
    unint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_35DA4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void scissor(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2008LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    unsigned int v22 = (char *)v57;
    int64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    unsigned int v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        int64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)int64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 518;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ciiii");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_20705E;
        if ((byte_20705E & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)&stru_1F8.sectname[14],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2008LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unsigned int v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2008LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    unsigned int v22 = (char *)v57;
    int64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    unsigned int v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        int64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)int64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 518;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ciiii");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_20705E;
        if ((byte_20705E & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)&stru_1F8.sectname[14],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2008LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unsigned int v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2008LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        unsigned int v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2008LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    int64_t v21 = __ldaxr(v16);
    unsigned int v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    int64_t v23 = v22 < 1;
  }
  else {
    int64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2008LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  int64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2008LL))( a1,  a2,  a3,  a4,  a5);
  unsigned int v22 = mach_absolute_time();
  int64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unsigned int v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    unsigned int v24 = __ldaxr(v16);
    unint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_362BC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void shade_model(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2024LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v51;
    uint64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    signed int v16 = (char *)malloc(v45 + v18);
    int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 539;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_207073;
        if ((byte_207073 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_1F8.addr + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2024LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            unsigned int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2024LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v51;
    uint64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    signed int v16 = (char *)malloc(v45 + v18);
    int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 539;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_207073;
        if ((byte_207073 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_1F8.addr + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2024LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            unsigned int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2024LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2024LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    uint64_t v15 = __ldaxr(v10);
    signed int v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2024LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2024LL))(a1, a2);
  signed int v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_36788( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void stencil_func(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 2032LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v55 = 0LL;
  __uint64_t v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    unint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    unsigned int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        __uint64_t v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 541;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Ceiui");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((_DWORD *)v20 + 14) = a3;
        *((_DWORD *)v20 + 15) = a4;
        char v25 = byte_207075;
        if ((byte_207075 & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_1F8.addr + 5),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 2032LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            unsigned int v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  __uint64_t v54;
  void *v55;
  char *v56;
  unsigned int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 2032LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v55 = 0LL;
  __uint64_t v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    unint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    unsigned int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        __uint64_t v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 541;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Ceiui");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((_DWORD *)v20 + 14) = a3;
        *((_DWORD *)v20 + 15) = a4;
        char v25 = byte_207075;
        if ((byte_207075 & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_1F8.addr + 5),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 2032LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            unsigned int v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 2032LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        unsigned int v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 2032LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    int64_t v21 = v20 < 1;
  }
  else {
    int64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 2032LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 2032LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  int64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    unsigned int v22 = __ldaxr(v14);
    unint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_36C88( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void stencil_mask(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2040LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v51;
    unsigned int v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    signed int v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        unsigned int v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)unsigned int v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 544;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_207078;
        if ((byte_207078 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_1F8.size, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2040LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2040LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v51;
    unsigned int v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    signed int v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        unsigned int v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)unsigned int v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 544;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_207078;
        if ((byte_207078 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_1F8.size, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2040LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2040LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2040LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    unsigned int v15 = __ldaxr(v10);
    signed int v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2040LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unsigned int v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2040LL))(a1, a2);
  signed int v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_37154( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void stencil_op(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 2048LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v55 = 0LL;
  __uint64_t v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    unint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    unsigned int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        __uint64_t v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 546;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Ceee");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((_DWORD *)v20 + 14) = a3;
        *((_DWORD *)v20 + 15) = a4;
        char v25 = byte_20707A;
        if ((byte_20707A & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_1F8.size + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 2048LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            unsigned int v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  __uint64_t v54;
  void *v55;
  char *v56;
  unsigned int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 2048LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v55 = 0LL;
  __uint64_t v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    unint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    unsigned int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        __uint64_t v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 546;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Ceee");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((_DWORD *)v20 + 14) = a3;
        *((_DWORD *)v20 + 15) = a4;
        char v25 = byte_20707A;
        if ((byte_20707A & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_1F8.size + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 2048LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            unsigned int v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 2048LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        unsigned int v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 2048LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    int64_t v21 = v20 < 1;
  }
  else {
    int64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 2048LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 2048LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  int64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    unsigned int v22 = __ldaxr(v14);
    unint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_37650( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void tex_coord_pointer(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, const void *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v15);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_56:
        unsigned int v50 = __ldaxr(v16);
      while (__stlxr(v50 - 1, v16));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 2312LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    uint64_t v25 = v15 + 32LL * (*(_DWORD *)(v15 + 2076) - 33984);
    int v26 = *(_DWORD *)(v15 + 2032);
    *(_DWORD *)(v25 + 1312) = a2;
    *(_DWORD *)(v25 + 1308) = a3;
    *(_DWORD *)(v25 + 1316) = a4;
    *(void *)(v25 + 1296) = a5;
    *(_DWORD *)(v25 + 1304) = v26;
    GPUTools::FB::Encode( (uint64_t)v56,  582LL,  2 * (v26 == 0),  (uint64_t)"Cieit",  v20,  v21,  v22,  v23,  *(void *)v15);
    char v28 = byte_20709E;
    if ((byte_20709E & 1) != 0) {
      breakpoint_break( (uint64_t)v56,  (volatile int *)((char *)&stru_1F8.reserved3 + 2),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 2312LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        unsigned int v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v29 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  id v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  void *v56[2];
  int v57;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v15);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_56:
        unsigned int v50 = __ldaxr(v16);
      while (__stlxr(v50 - 1, v16));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 2312LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    uint64_t v25 = v15 + 32LL * (*(_DWORD *)(v15 + 2076) - 33984);
    int v26 = *(_DWORD *)(v15 + 2032);
    *(_DWORD *)(v25 + 1312) = a2;
    *(_DWORD *)(v25 + 1308) = a3;
    *(_DWORD *)(v25 + 1316) = a4;
    *(void *)(v25 + 1296) = a5;
    *(_DWORD *)(v25 + 1304) = v26;
    GPUTools::FB::Encode( (uint64_t)v56,  582LL,  2 * (v26 == 0),  (uint64_t)"Cieit",  v20,  v21,  v22,  v23,  *(void *)v15);
    char v28 = byte_20709E;
    if ((byte_20709E & 1) != 0) {
      breakpoint_break( (uint64_t)v56,  (volatile int *)((char *)&stru_1F8.reserved3 + 2),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 2312LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        unsigned int v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v29 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    int v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    int v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      char v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 2312LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        id v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 2312LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 2312LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 2312LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    id v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    int v26 = v25 < 1;
  }
  else {
    int v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_37AC8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void tex_envf(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      id v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 24) + 2320LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 110LL;
    if (!v54) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 583LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_20709F;
    if ((byte_20709F & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_1F8.reserved3 + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 32) + 2320LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  char v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      id v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 24) + 2320LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 110LL;
    if (!v54) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 583LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_20709F;
    if ((byte_20709F & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_1F8.reserved3 + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 32) + 2320LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_37F40( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void tex_envfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, const float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      id v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 24) + 2328LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 110LL;
    if (!v54[0]) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 584LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070A0;
    if ((byte_2070A0 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 32) + 2328LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  _BYTE v54[5];
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      id v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 24) + 2328LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 110LL;
    if (!v54[0]) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 584LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070A0;
    if ((byte_2070A0 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 32) + 2328LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_383B4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void tex_envi(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      id v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 24) + 2336LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 101LL;
    if (!v54) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 585LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070A1;
    if ((byte_2070A1 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.sectname[1], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 32) + 2336LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  char v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      id v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 24) + 2336LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 101LL;
    if (!v54) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 585LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070A1;
    if ((byte_2070A1 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.sectname[1], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 32) + 2336LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_38824( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void tex_enviv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, const int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      id v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 24) + 2344LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 101LL;
    if (!v54[0]) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 586LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070A2;
    if ((byte_2070A2 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.sectname[2], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 32) + 2344LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  _BYTE v54[5];
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      id v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 24) + 2344LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTexEnvParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 101LL;
    if (!v54[0]) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 586LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070A2;
    if ((byte_2070A2 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.sectname[2], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 32) + 2344LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_38C98( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void tex_image2D( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, GPUTools::GL *a8, uint64_t a9, const void *a10)
{
  unsigned int v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v17 = v15[4];
    BOOL v18 = v17 >= (unint64_t)a1;
    else {
      id v19 = v15 + 1;
    }
    if (v18) {
      uint64_t v16 = (uint64_t)v15;
    }
    unsigned int v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v20 = *(void *)(v16 + 40);
  uint64_t v21 = (unsigned int *)(v20 + 4640);
  do
  {
    unsigned int v22 = __ldaxr(v21);
    signed int v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    BOOL v24 = v23 <= 1;
  }
  else {
    BOOL v24 = 1;
  }
  if (v24)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v20);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v21);
      while (__stlxr(v54 - 1, v21));
      unsigned int v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, uint64_t, const void *))(*(void *)(v20 + 24) + 2408LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
      return;
    }
  }

  *(_BYTE *)(v20 + 4838) = 1;
  v64[0] = 0LL;
  v64[1] = 0LL;
  int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v29 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v29))
  {
    if (!a10 || *(_DWORD *)(v20 + 2044))
    {
      strcpy((char *)(v20 + 4709), "Ceieiiieet");
      unint64_t v30 = a10;
    }

    else
    {
      unint64_t v30 = (const void *)(v20 + 4644);
      save_texture(v20, (uint64_t)a1, a2, a9, a8, a5, a6, 1, 0, (uint64_t)a10, v20 + 4644, 65LL, 1u);
      strcpy((char *)(v20 + 4709), "CeieiiieeU");
      if ((a4 - 1) > 3)
      {
LABEL_29:
        unsigned int v60 = v30;
        GPUTools::FB::Encode((uint64_t)v64, 594LL, 4096LL, v20 + 4709, v25, v26, v27, v28, *(void *)v20);
        char v32 = byte_2070AA;
        if ((byte_2070AA & 1) != 0) {
          breakpoint_break( (uint64_t)v64,  (volatile int *)&stru_248.sectname[10],  1LL,  *(unsigned int *)(v20 + 3404),  v20);
        }
        uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
        if (!(v33 & 0x10 | v32 & 4))
        {
          uint64_t v34 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, _DWORD, const void *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, void, const void *))(*(void *)(v20 + 32) + 2408LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  v60);
          uint64_t v33 = mach_absolute_time();
          uint64_t v35 = v33 - v34;
          unint64_t v36 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v37 = v64[0];
            *((void *)v64[0] + 2) = v34;
            v37[3] = v35;
            if (!gCheckGLErrors) {
              goto LABEL_34;
            }
          }

          else
          {
            uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
            unsigned int v59 = v64[0];
            *((void *)v64[0] + 3) = v58;
            uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
            v59[2] = v33;
            if (!gCheckGLErrors) {
              goto LABEL_34;
            }
          }

          uint64_t v33 = check_errors(v20);
        }

void sub_39220(_Unwind_Exception *exception_object)
{
  unint64_t v4 = *(void **)(v2 - 104);
  if (v4) {
    free(v4);
  }
  _Unwind_Resume(exception_object);
}

void tex_parameterf(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      signed int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 24) + 2416LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 110LL;
    if (!v54) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 598LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070AE;
    if ((byte_2070AE & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.sectname[14], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 32) + 2416LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  char v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      signed int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 24) + 2416LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 110LL;
    if (!v54) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 598LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070AE;
    if ((byte_2070AE & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.sectname[14], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 32) + 2416LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_39698( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void tex_parameterfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, const float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      signed int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 24) + 2424LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 110LL;
    if (!v54[0]) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 599LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070AF;
    if ((byte_2070AF & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.sectname[15], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 32) + 2424LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  _BYTE v54[5];
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      signed int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 24) + 2424LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 110LL;
    if (!v54[0]) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 599LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070AF;
    if ((byte_2070AF & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.sectname[15], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 32) + 2424LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_39B0C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void tex_parameteri(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      signed int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 24) + 2432LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 101LL;
    if (!v54) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 600LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070B0;
    if ((byte_2070B0 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)stru_248.segname, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 32) + 2432LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  char v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      signed int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 24) + 2432LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 101LL;
    if (!v54) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 600LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070B0;
    if ((byte_2070B0 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)stru_248.segname, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 32) + 2432LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_39F7C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void tex_parameteriv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, const int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      signed int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 24) + 2440LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 101LL;
    if (!v54[0]) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 601LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070B1;
    if ((byte_2070B1 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.segname[1], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 32) + 2440LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  _BYTE v54[5];
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      signed int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 24) + 2440LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 101LL;
    if (!v54[0]) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 601LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2070B1;
    if ((byte_2070B1 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.segname[1], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 32) + 2440LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_3A3F0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void tex_sub_image2D( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, GPUTools::GL *a8, uint64_t a9, const void *a10)
{
  unsigned int v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v17 = v15[4];
    BOOL v18 = v17 >= (unint64_t)a1;
    else {
      id v19 = v15 + 1;
    }
    if (v18) {
      uint64_t v16 = (uint64_t)v15;
    }
    unsigned int v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v20 = *(void *)(v16 + 40);
  uint64_t v21 = (unsigned int *)(v20 + 4640);
  do
  {
    unsigned int v22 = __ldaxr(v21);
    signed int v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    BOOL v24 = v23 <= 1;
  }
  else {
    BOOL v24 = 1;
  }
  if (v24)
  {
    id v59 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v58 = handle_opengl_thread_conflict((const void **)v20);
    id v59 = [(id)DYGetGLGuestAppClient(v58) waitOnGraphicsSemaphoreAssertions];
    if ((int)v59 >= 1)
    {
      do
LABEL_60:
        unsigned int v60 = __ldaxr(v21);
      while (__stlxr(v60 - 1, v21));
      unsigned int v61 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v59) graphicsLockWaitQueue];
      dispatch_sync_f(v61, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, uint64_t, const void *))(*(void *)(v20 + 24) + 2456LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
      return;
    }
  }

  *(_BYTE *)(v20 + 4838) = 1;
  v70[0] = 0LL;
  v70[1] = 0LL;
  int v71 = 0;
  if ([(id)DYGetGLGuestAppClient(v59) state] != (char *)&dword_0 + 1
    || (id v29 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v29))
  {
    if (!a10 || *(_DWORD *)(v20 + 2044))
    {
      strcpy((char *)(v20 + 4709), "Ceiiiiieet");
      unint64_t v30 = a10;
    }

    else
    {
      unint64_t v30 = (const void *)(v20 + 4644);
      save_texture(v20, (uint64_t)a1, a2, a9, a8, a6, a7, 1, 0, (uint64_t)a10, v20 + 4644, 65LL, 1u);
      strcpy((char *)(v20 + 4709), "CeiiiiieeU");
    }

    uint64_t v66 = v30;
    GPUTools::FB::Encode((uint64_t)v70, 603LL, 4096LL, v20 + 4709, v25, v26, v27, v28, *(void *)v20);
    char v32 = byte_2070B3;
    if ((byte_2070B3 & 1) != 0) {
      breakpoint_break((uint64_t)v70, (volatile int *)&stru_248.segname[3], 1LL, *(unsigned int *)(v20 + 3404), v20);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, _DWORD, const void *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, void, const void *))(*(void *)(v20 + 32) + 2456LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  v66);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v70[0];
        *((void *)v70[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v64 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        int v65 = v70[0];
        *((void *)v70[0] + 3) = v64;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v65[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v33 = check_errors(v20);
    }

void sub_3A950(_Unwind_Exception *exception_object)
{
  unint64_t v4 = *(void **)(v2 - 104);
  if (v4) {
    free(v4);
  }
  _Unwind_Resume(exception_object);
}

void translatef(__GLIContextRec *a1, float a2, float a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 2472LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  signed int v55 = 0LL;
  BOOL v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    id v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    signed int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        id v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)id v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        BOOL v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 608;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Cfff");
        *(void *)(v20 + 44) = *(void *)v13;
        *((float *)v20 + 13) = a2;
        *((float *)v20 + 14) = a3;
        *((float *)v20 + 15) = a4;
        char v25 = byte_2070B8;
        if ((byte_2070B8 & 1) != 0) {
          breakpoint_break((uint64_t)&v55, (volatile int *)&stru_248.segname[8], 1LL, *(unsigned int *)(v13 + 3404), v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 2472LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            uint64_t v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  __uint64_t v54;
  void *v55;
  char *v56;
  unsigned int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 2472LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  signed int v55 = 0LL;
  BOOL v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    id v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x3F) {
      goto LABEL_24;
    }
    int v49 = (319 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    signed int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        id v19 = &v20[v21];
LABEL_24:
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)id v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        BOOL v56 = v19 + 64;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 608;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Cfff");
        *(void *)(v20 + 44) = *(void *)v13;
        *((float *)v20 + 13) = a2;
        *((float *)v20 + 14) = a3;
        *((float *)v20 + 15) = a4;
        char v25 = byte_2070B8;
        if ((byte_2070B8 & 1) != 0) {
          breakpoint_break((uint64_t)&v55, (volatile int *)&stru_248.segname[8], 1LL, *(unsigned int *)(v13 + 3404), v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 2472LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            uint64_t v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 2472LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        unsigned int v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 2472LL))(a1, a2, a3, a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    id v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    int64_t v21 = v20 < 1;
  }
  else {
    int64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 24) + 2472LL))(a1, a2, a3, a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  id v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, float, float, float))(*(void *)(v13 + 32) + 2472LL))(a1, a2, a3, a4);
  uint64_t v20 = mach_absolute_time();
  int64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    unsigned int v22 = __ldaxr(v14);
    unint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_3AE54( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void vertex_pointer(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, const void *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_56:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 2672LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    int v25 = *(_DWORD *)(v15 + 2032);
    *(_DWORD *)(v15 + 1216) = a2;
    *(_DWORD *)(v15 + 1212) = a3;
    *(_DWORD *)(v15 + 1220) = a4;
    *(void *)(v15 + 1200) = a5;
    *(_DWORD *)(v15 + 1208) = v25;
    GPUTools::FB::Encode( (uint64_t)v55,  732LL,  2 * (v25 == 0),  (uint64_t)"Cieit",  v20,  v21,  v22,  v23,  *(void *)v15);
    char v27 = byte_207134;
    if ((byte_207134 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_298.reserved1, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 2672LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        char v32 = v55[0];
        *((void *)v55[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        __uint64_t v54 = v55[0];
        *((void *)v55[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v28 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  id v24;
  int v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  void *v55[2];
  int v56;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_56:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 2672LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    int v25 = *(_DWORD *)(v15 + 2032);
    *(_DWORD *)(v15 + 1216) = a2;
    *(_DWORD *)(v15 + 1212) = a3;
    *(_DWORD *)(v15 + 1220) = a4;
    *(void *)(v15 + 1200) = a5;
    *(_DWORD *)(v15 + 1208) = v25;
    GPUTools::FB::Encode( (uint64_t)v55,  732LL,  2 * (v25 == 0),  (uint64_t)"Cieit",  v20,  v21,  v22,  v23,  *(void *)v15);
    char v27 = byte_207134;
    if ((byte_207134 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_298.reserved1, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 2672LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        char v32 = v55[0];
        *((void *)v55[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        __uint64_t v54 = v55[0];
        *((void *)v55[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v28 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    int v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 2672LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        id v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 2672LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 2672LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 2672LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      char v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    id v24 = __ldaxr(v16);
    int v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_3B2BC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void viewport(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2680LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 733;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ciiii");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_207135;
        if ((byte_207135 & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_298.reserved1 + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2680LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            signed int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2680LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 733;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ciiii");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_207135;
        if ((byte_207135 & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_298.reserved1 + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2680LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            signed int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_35:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2680LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        unsigned int v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2680LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  *(_DWORD *)(v15 + 3360) = a2;
  *(_DWORD *)(v15 + 3364) = a3;
  *(_DWORD *)(v15 + 3368) = a4;
  *(_DWORD *)(v15 + 3372) = a5;
  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    int64_t v23 = v22 < 1;
  }
  else {
    int64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_35:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2680LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2680LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  int64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      char v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  *(_DWORD *)(v15 + 3360) = a2;
  *(_DWORD *)(v15 + 3364) = a3;
  *(_DWORD *)(v15 + 3368) = a4;
  *(_DWORD *)(v15 + 3372) = a5;
  do
  {
    unsigned int v24 = __ldaxr(v16);
    unint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_3B7D0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void blend_func_separate(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2688LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 27;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceeee");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_206E73;
        if ((byte_206E73 & 1) != 0) {
          breakpoint_break((uint64_t)&v57, (int *)((char *)&dword_18 + 3), 1LL, *(unsigned int *)(v15 + 3404), v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2688LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            signed int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2688LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 27;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceeee");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_206E73;
        if ((byte_206E73 & 1) != 0) {
          breakpoint_break((uint64_t)&v57, (int *)((char *)&dword_18 + 3), 1LL, *(unsigned int *)(v15 + 3404), v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2688LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            signed int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2688LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        unsigned int v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2688LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    int64_t v23 = v22 < 1;
  }
  else {
    int64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 2688LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 2688LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  int64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      char v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    unsigned int v24 = __ldaxr(v16);
    unint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_3BCE8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void blend_color(__GLIContextRec *a1, float a2, float a3, float a4, float a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 24) + 2696LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 23;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Cffff");
        *(void *)(v22 + 44) = *(void *)v15;
        *((float *)v22 + 13) = a2;
        *((float *)v22 + 14) = a3;
        *((float *)v22 + 15) = a4;
        *((float *)v22 + 16) = a5;
        char v27 = byte_206E6F;
        if ((byte_206E6F & 1) != 0) {
          breakpoint_break((uint64_t)&v57, (int *)((char *)&dword_14 + 3), 1LL, *(unsigned int *)(v15 + 3404), v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 32) + 2696LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            signed int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 24) + 2696LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 23;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Cffff");
        *(void *)(v22 + 44) = *(void *)v15;
        *((float *)v22 + 13) = a2;
        *((float *)v22 + 14) = a3;
        *((float *)v22 + 15) = a4;
        *((float *)v22 + 16) = a5;
        char v27 = byte_206E6F;
        if ((byte_206E6F & 1) != 0) {
          breakpoint_break((uint64_t)&v57, (int *)((char *)&dword_14 + 3), 1LL, *(unsigned int *)(v15 + 3404), v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 32) + 2696LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            char v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            signed int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 24) + 2696LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        unsigned int v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 32) + 2696LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    int64_t v23 = v22 < 1;
  }
  else {
    int64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 24) + 2696LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, float, float, float, float))(*(void *)(v15 + 32) + 2696LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  int64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      char v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    unsigned int v24 = __ldaxr(v16);
    unint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_3C20C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void blend_equation(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2704LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v51;
    uint64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    signed int v16 = (char *)malloc(v45 + v18);
    int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 24;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206E70;
        if ((byte_206E70 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, &dword_18, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2704LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            unsigned int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2704LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v51;
    uint64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    signed int v16 = (char *)malloc(v45 + v18);
    int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 24;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206E70;
        if ((byte_206E70 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, &dword_18, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2704LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            unsigned int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2704LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2704LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    uint64_t v15 = __ldaxr(v10);
    signed int v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2704LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2704LL))(a1, a2);
  signed int v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_3C6D8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void client_active_texture(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v41 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v40 = handle_opengl_thread_conflict((const void **)v9);
    id v41 = [(id)DYGetGLGuestAppClient(v40) waitOnGraphicsSemaphoreAssertions];
    if ((int)v41 >= 1)
    {
      do
LABEL_56:
        unsigned int v42 = __ldaxr(v10);
      while (__stlxr(v42 - 1, v10));
      unsigned int v43 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v41) graphicsLockWaitQueue];
      dispatch_sync_f(v43, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2728LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v48[0] = 0LL;
  v48[1] = 0LL;
  int v49 = 0;
  if ([(id)DYGetGLGuestAppClient(v41) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v48, 44LL, 0LL, (uint64_t)"Ce", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_206E84;
    if ((byte_206E84 & 1) != 0) {
      breakpoint_break((uint64_t)v48, (volatile int *)&stru_20.segname[4], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v21 = (uint64_t)[(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if (!(v21 & 0x10 | v20 & 4))
    {
      uint64_t v22 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2728LL))(a1, a2);
      uint64_t v21 = mach_absolute_time();
      uint64_t v23 = v21 - v22;
      unint64_t v24 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v25 = v48[0];
        *((void *)v48[0] + 2) = v22;
        v25[3] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v46 = __udivti3(g_DYTimebaseInfo * v23, (g_DYTimebaseInfo * (unsigned __int128)v23) >> 64);
        uint64_t v47 = v48[0];
        *((void *)v48[0] + 3) = v46;
        uint64_t v21 = __udivti3(v24 * v22, (v24 * (unsigned __int128)v22) >> 64);
        v47[2] = v21;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v21 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  id v18;
  uint64_t v19;
  char v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  unint64_t v24;
  void *v25;
  id v26;
  GPUTools::FB::Fbuf *v27;
  unsigned int v28;
  GPUTools::FB::Fbuf *v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  GPUTools::FB::Stream *v32;
  unsigned int *v33;
  unsigned int v34;
  unsigned int v35;
  unsigned int v36;
  signed int v37;
  BOOL v38;
  unsigned int v39;
  uint64_t v40;
  id v41;
  unsigned int v42;
  dispatch_queue_s *v43;
  uint64_t v44;
  uint64_t v45;
  uint64_t v46;
  void *v47;
  void *v48[2];
  int v49;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v41 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v40 = handle_opengl_thread_conflict((const void **)v9);
    id v41 = [(id)DYGetGLGuestAppClient(v40) waitOnGraphicsSemaphoreAssertions];
    if ((int)v41 >= 1)
    {
      do
LABEL_56:
        unsigned int v42 = __ldaxr(v10);
      while (__stlxr(v42 - 1, v10));
      unsigned int v43 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v41) graphicsLockWaitQueue];
      dispatch_sync_f(v43, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2728LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v48[0] = 0LL;
  v48[1] = 0LL;
  int v49 = 0;
  if ([(id)DYGetGLGuestAppClient(v41) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v48, 44LL, 0LL, (uint64_t)"Ce", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_206E84;
    if ((byte_206E84 & 1) != 0) {
      breakpoint_break((uint64_t)v48, (volatile int *)&stru_20.segname[4], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v21 = (uint64_t)[(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if (!(v21 & 0x10 | v20 & 4))
    {
      uint64_t v22 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2728LL))(a1, a2);
      uint64_t v21 = mach_absolute_time();
      uint64_t v23 = v21 - v22;
      unint64_t v24 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v25 = v48[0];
        *((void *)v48[0] + 2) = v22;
        v25[3] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v46 = __udivti3(g_DYTimebaseInfo * v23, (g_DYTimebaseInfo * (unsigned __int128)v23) >> 64);
        uint64_t v47 = v48[0];
        *((void *)v48[0] + 3) = v46;
        uint64_t v21 = __udivti3(v24 * v22, (v24 * (unsigned __int128)v22) >> 64);
        v47[2] = v21;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v21 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    char v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_35:
        uint64_t v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2728LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        id v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2728LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  *(_DWORD *)(v9 + 2076) = a2;
  do
  {
    uint64_t v15 = __ldaxr(v10);
    uint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 < 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_35:
        unint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2728LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2728LL))(a1, a2);
  uint64_t v16 = mach_absolute_time();
  uint64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      id v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  *(_DWORD *)(v9 + 2076) = a2;
  do
  {
    id v18 = __ldaxr(v10);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    char v20 = v19 < 1;
  }
  else {
    char v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_3CAEC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void active_texture(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v41 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v40 = handle_opengl_thread_conflict((const void **)v9);
    id v41 = [(id)DYGetGLGuestAppClient(v40) waitOnGraphicsSemaphoreAssertions];
    if ((int)v41 >= 1)
    {
      do
LABEL_56:
        unsigned int v42 = __ldaxr(v10);
      while (__stlxr(v42 - 1, v10));
      unsigned int v43 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v41) graphicsLockWaitQueue];
      dispatch_sync_f(v43, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2736LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v48[0] = 0LL;
  v48[1] = 0LL;
  int v49 = 0;
  if ([(id)DYGetGLGuestAppClient(v41) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v48, 2LL, 0LL, (uint64_t)"Ce", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_206E5A;
    if ((byte_206E5A & 1) != 0) {
      breakpoint_break((uint64_t)v48, (int *)((char *)&dword_0 + 2), 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v21 = (uint64_t)[(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if (!(v21 & 0x10 | v20 & 4))
    {
      uint64_t v22 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2736LL))(a1, a2);
      uint64_t v21 = mach_absolute_time();
      uint64_t v23 = v21 - v22;
      unint64_t v24 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v25 = v48[0];
        *((void *)v48[0] + 2) = v22;
        v25[3] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v46 = __udivti3(g_DYTimebaseInfo * v23, (g_DYTimebaseInfo * (unsigned __int128)v23) >> 64);
        uint64_t v47 = v48[0];
        *((void *)v48[0] + 3) = v46;
        uint64_t v21 = __udivti3(v24 * v22, (v24 * (unsigned __int128)v22) >> 64);
        v47[2] = v21;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v21 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  id v18;
  uint64_t v19;
  char v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  unint64_t v24;
  void *v25;
  id v26;
  GPUTools::FB::Fbuf *v27;
  unsigned int v28;
  GPUTools::FB::Fbuf *v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  GPUTools::FB::Stream *v32;
  unsigned int *v33;
  unsigned int v34;
  unsigned int v35;
  unsigned int v36;
  signed int v37;
  BOOL v38;
  unsigned int v39;
  uint64_t v40;
  id v41;
  unsigned int v42;
  dispatch_queue_s *v43;
  uint64_t v44;
  uint64_t v45;
  uint64_t v46;
  void *v47;
  void *v48[2];
  int v49;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v41 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v40 = handle_opengl_thread_conflict((const void **)v9);
    id v41 = [(id)DYGetGLGuestAppClient(v40) waitOnGraphicsSemaphoreAssertions];
    if ((int)v41 >= 1)
    {
      do
LABEL_56:
        unsigned int v42 = __ldaxr(v10);
      while (__stlxr(v42 - 1, v10));
      unsigned int v43 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v41) graphicsLockWaitQueue];
      dispatch_sync_f(v43, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2736LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v48[0] = 0LL;
  v48[1] = 0LL;
  int v49 = 0;
  if ([(id)DYGetGLGuestAppClient(v41) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v48, 2LL, 0LL, (uint64_t)"Ce", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_206E5A;
    if ((byte_206E5A & 1) != 0) {
      breakpoint_break((uint64_t)v48, (int *)((char *)&dword_0 + 2), 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v21 = (uint64_t)[(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if (!(v21 & 0x10 | v20 & 4))
    {
      uint64_t v22 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2736LL))(a1, a2);
      uint64_t v21 = mach_absolute_time();
      uint64_t v23 = v21 - v22;
      unint64_t v24 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v25 = v48[0];
        *((void *)v48[0] + 2) = v22;
        v25[3] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v46 = __udivti3(g_DYTimebaseInfo * v23, (g_DYTimebaseInfo * (unsigned __int128)v23) >> 64);
        uint64_t v47 = v48[0];
        *((void *)v48[0] + 3) = v46;
        uint64_t v21 = __udivti3(v24 * v22, (v24 * (unsigned __int128)v22) >> 64);
        v47[2] = v21;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v21 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    char v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_35:
        uint64_t v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2736LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        id v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2736LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  *(_DWORD *)(v9 + 2072) = a2;
  do
  {
    uint64_t v15 = __ldaxr(v10);
    uint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 < 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_35:
        unint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 2736LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 2736LL))(a1, a2);
  uint64_t v16 = mach_absolute_time();
  uint64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      id v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  *(_DWORD *)(v9 + 2072) = a2;
  do
  {
    id v18 = __ldaxr(v10);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    char v20 = v19 < 1;
  }
  else {
    char v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_3CEF8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void multi_tex_coord4f(__GLIContextRec *a1, uint64_t a2, float a3, float a4, float a5, float a6)
{
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  id v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 24) + 2952LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    unint64_t v24 = (char *)v59;
    uint64_t v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x47) {
      goto LABEL_24;
    }
    int v53 = (327 - v27) & 0xFFFFFF00;
    v61 += v53;
    unint64_t v24 = (char *)malloc(v53 + v26);
    unsigned int v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        uint64_t v23 = &v24[v25];
LABEL_24:
        *((void *)v23 + 8) = 0LL;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)uint64_t v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        unsigned int v60 = v23 + 72;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 412;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        strcpy(v24 + 36, "Ceffff");
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((float *)v24 + 14) = a3;
        *((float *)v24 + 15) = a4;
        *((float *)v24 + 16) = a5;
        *((float *)v24 + 17) = a6;
        char v29 = byte_206FF4;
        if ((byte_206FF4 & 1) != 0) {
          breakpoint_break((uint64_t)&v59, (volatile int *)&stru_158.reserved1, 1LL, *(unsigned int *)(v17 + 3404), v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 32) + 2952LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unsigned int v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            unsigned int v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  char *v23;
  char *v24;
  int64_t v25;
  unsigned int v26;
  unint64_t v27;
  uint64_t v28;
  char v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  unint64_t v33;
  void *v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  int v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  __uint64_t v58;
  void *v59;
  char *v60;
  unsigned int v61;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  id v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 24) + 2952LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    unint64_t v24 = (char *)v59;
    uint64_t v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x47) {
      goto LABEL_24;
    }
    int v53 = (327 - v27) & 0xFFFFFF00;
    v61 += v53;
    unint64_t v24 = (char *)malloc(v53 + v26);
    unsigned int v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        uint64_t v23 = &v24[v25];
LABEL_24:
        *((void *)v23 + 8) = 0LL;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)uint64_t v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        unsigned int v60 = v23 + 72;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 412;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        strcpy(v24 + 36, "Ceffff");
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((float *)v24 + 14) = a3;
        *((float *)v24 + 15) = a4;
        *((float *)v24 + 16) = a5;
        *((float *)v24 + 17) = a6;
        char v29 = byte_206FF4;
        if ((byte_206FF4 & 1) != 0) {
          breakpoint_break((uint64_t)&v59, (volatile int *)&stru_158.reserved1, 1LL, *(unsigned int *)(v17 + 3404), v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 32) + 2952LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unsigned int v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            unsigned int v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  id v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 24) + 2952LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        unsigned int v26 = __ldaxr(v18);
      while (__stlxr(v26 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 32) + 2952LL))( a1,  a2,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v17);
      }
    }
  }

  do
  {
    uint64_t v23 = __ldaxr(v18);
    unint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v18));
  if (gCheckGLErrors) {
    int64_t v25 = v24 < 1;
  }
  else {
    int64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  int64x2_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  id v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        uint64_t v32 = __ldaxr(v18);
      while (__stlxr(v32 - 1, v18));
      unint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 24) + 2952LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 32) + 2952LL))( a1,  a2,  a3,  a4,  a5,  a6);
  unint64_t v24 = mach_absolute_time();
  int64_t v25 = vdupq_n_s64(1uLL);
  v25.i64[0] = v24 - v23;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v25, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      unsigned int v34 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v17);
      }
    }
  }

  do
  {
    unsigned int v26 = __ldaxr(v18);
    unint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v18));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_3D42C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void compressed_tex_image3D( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, const void *a10)
{
  BOOL v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v17 = v15[4];
    BOOL v18 = v17 >= (unint64_t)a1;
    else {
      unsigned int v19 = v15 + 1;
    }
    if (v18) {
      uint64_t v16 = (uint64_t)v15;
    }
    BOOL v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v20 = *(void *)(v16 + 40);
  BOOL v21 = (unsigned int *)(v20 + 4640);
  do
  {
    unsigned int v22 = __ldaxr(v21);
    signed int v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    BOOL v24 = v23 <= 1;
  }
  else {
    BOOL v24 = 1;
  }
  if (v24)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v20);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_60:
        unsigned int v55 = __ldaxr(v21);
      while (__stlxr(v55 - 1, v21));
      uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v20 + 24) + 3032LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
      return;
    }
  }

  *(_BYTE *)(v20 + 4838) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  int64_t v25 = (char *)[(id)DYGetGLGuestAppClient(v54) state];
  if (v25 != (_BYTE *)&dword_0 + 1
    || (int64_t v25 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v25))
  {
    if (!a10 || *(_DWORD *)(v20 + 2044))
    {
      strcpy((char *)(v20 + 4709), "Ceieiiiiit");
      uint64_t v31 = a10;
    }

    else
    {
      uint64_t v30 = DYGetGLGuestAppClient(v25);
      uint64_t v31 = (const void *)(v20 + 4644);
      GPUTools::Interpose::DYSavePointer(v30, (int)a9, a10, v20 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      strcpy((char *)(v20 + 4709), "CeieiiiiiU");
    }

    unsigned int v61 = v31;
    GPUTools::FB::Encode((uint64_t)v65, 96LL, 4096LL, v20 + 4709, v26, v27, v28, v29, *(void *)v20);
    char v33 = byte_206EB8;
    if ((byte_206EB8 & 1) != 0) {
      breakpoint_break((uint64_t)v65, (volatile int *)&stru_20.nsects, 1LL, *(unsigned int *)(v20 + 3404), v20);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (!(v34 & 0x10 | v33 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, _DWORD, const void *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void, const void *))(*(void *)(v20 + 32) + 3032LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  v61);
      uint64_t v34 = mach_absolute_time();
      uint64_t v36 = v34 - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        BOOL v38 = v65[0];
        *((void *)v65[0] + 2) = v35;
        v38[3] = v36;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        unsigned int v60 = v65[0];
        *((void *)v65[0] + 3) = v59;
        uint64_t v34 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
        v60[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v34 = check_errors(v20);
    }

void sub_3D980(_Unwind_Exception *exception_object)
{
  unint64_t v4 = *(void **)(v2 - 104);
  if (v4) {
    free(v4);
  }
  _Unwind_Resume(exception_object);
}

void compressed_tex_image2D( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, const void *a9)
{
  BOOL v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v17 = v15[4];
    BOOL v18 = v17 >= (unint64_t)a1;
    else {
      unsigned int v19 = v15 + 1;
    }
    if (v18) {
      uint64_t v16 = (uint64_t)v15;
    }
    BOOL v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v20 = *(void *)(v16 + 40);
  BOOL v21 = (unsigned int *)(v20 + 4640);
  do
  {
    unsigned int v22 = __ldaxr(v21);
    signed int v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    BOOL v24 = v23 <= 1;
  }
  else {
    BOOL v24 = 1;
  }
  if (v24)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v20);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_60:
        unsigned int v55 = __ldaxr(v21);
      while (__stlxr(v55 - 1, v21));
      uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v20 + 24) + 3040LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9);
      return;
    }
  }

  *(_BYTE *)(v20 + 4838) = 1;
  v64[0] = 0LL;
  v64[1] = 0LL;
  int v65 = 0;
  int64_t v25 = (char *)[(id)DYGetGLGuestAppClient(v54) state];
  if (v25 != (_BYTE *)&dword_0 + 1
    || (int64_t v25 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v25))
  {
    if (!a9 || *(_DWORD *)(v20 + 2044))
    {
      strcpy((char *)(v20 + 4709), "Ceieiiiit");
      uint64_t v31 = a9;
    }

    else
    {
      uint64_t v30 = DYGetGLGuestAppClient(v25);
      uint64_t v31 = (const void *)(v20 + 4644);
      GPUTools::Interpose::DYSavePointer(v30, (int)a8, a9, v20 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      strcpy((char *)(v20 + 4709), "CeieiiiiU");
    }

    unsigned int v61 = v31;
    GPUTools::FB::Encode((uint64_t)v64, 95LL, 4096LL, v20 + 4709, v26, v27, v28, v29, *(void *)v20);
    char v33 = byte_206EB7;
    if ((byte_206EB7 & 1) != 0) {
      breakpoint_break( (uint64_t)v64,  (vm_prot_t *)((char *)&stru_20.initprot + 3),  1LL,  *(unsigned int *)(v20 + 3404),  v20);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (!(v34 & 0x10 | v33 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v20 + 32) + 3040LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  v61);
      uint64_t v34 = mach_absolute_time();
      uint64_t v36 = v34 - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        BOOL v38 = v64[0];
        *((void *)v64[0] + 2) = v35;
        v38[3] = v36;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        unsigned int v60 = v64[0];
        *((void *)v64[0] + 3) = v59;
        uint64_t v34 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
        v60[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v34 = check_errors(v20);
    }

void sub_3DEC0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22)
{
  if (a22) {
    free(a22);
  }
  _Unwind_Resume(exception_object);
}

void compressed_tex_sub_image3D( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, const void *a11)
{
  unint64_t v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      BOOL v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    unint64_t v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  uint64_t v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    id v59 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v58 = handle_opengl_thread_conflict((const void **)v19);
    id v59 = [(id)DYGetGLGuestAppClient(v58) waitOnGraphicsSemaphoreAssertions];
    if ((int)v59 >= 1)
    {
      do
LABEL_60:
        unsigned int v60 = __ldaxr(v20);
      while (__stlxr(v60 - 1, v20));
      unsigned int v61 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v59) graphicsLockWaitQueue];
      dispatch_sync_f(v61, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 24) + 3056LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10,  a11);
      return;
    }
  }

  *(_BYTE *)(v19 + 4838) = 1;
  v73[0] = 0LL;
  v73[1] = 0LL;
  int v74 = 0;
  BOOL v24 = (char *)[(id)DYGetGLGuestAppClient(v59) state];
  if (v24 != (_BYTE *)&dword_0 + 1
    || (BOOL v24 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    if (!a11 || *(_DWORD *)(v19 + 2044))
    {
      strcpy((char *)(v19 + 4709), "Ceiiiiiiieit");
      uint64_t v30 = a11;
    }

    else
    {
      uint64_t v29 = DYGetGLGuestAppClient(v24);
      uint64_t v30 = (const void *)(v19 + 4644);
      GPUTools::Interpose::DYSavePointer(v29, (int)a10, a11, v19 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      strcpy((char *)(v19 + 4709), "CeiiiiiiieiU");
    }

    id v67 = v30;
    HIDWORD(v66) = HIDWORD(a2);
    GPUTools::FB::Encode((uint64_t)v73, 99LL, 4096LL, v19 + 4709, v25, v26, v27, v28, *(void *)v19);
    char v32 = byte_206EBB;
    if ((byte_206EBB & 1) != 0) {
      breakpoint_break( (uint64_t)v73,  (volatile int *)((char *)&stru_20.nsects + 3),  1LL,  *(unsigned int *)(v19 + 3404),  v19);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      LODWORD(v66) = a10;
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void, void, void, const void *))(*(void *)(v19 + 32) + 3056LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  v66,  a11,  a4,  a5,  a6,  a7,  a8,  a9,  HIDWORD(a9),  a10,  v67);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v37 = v73[0];
        *((void *)v73[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v64 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        int v65 = v73[0];
        *((void *)v73[0] + 3) = v64;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v65[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v33 = check_errors(v19);
    }

void sub_3E418(_Unwind_Exception *exception_object)
{
  unint64_t v4 = *(void **)(v2 - 112);
  if (v4) {
    free(v4);
  }
  _Unwind_Resume(exception_object);
}

void compressed_tex_sub_image2D( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, const void *a10)
{
  uint64_t v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v17 = v15[4];
    BOOL v18 = v17 >= (unint64_t)a1;
    else {
      uint64_t v19 = v15 + 1;
    }
    if (v18) {
      uint64_t v16 = (uint64_t)v15;
    }
    uint64_t v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v20 = *(void *)(v16 + 40);
  unsigned int v21 = (unsigned int *)(v20 + 4640);
  do
  {
    unsigned int v22 = __ldaxr(v21);
    signed int v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    BOOL v24 = v23 <= 1;
  }
  else {
    BOOL v24 = 1;
  }
  if (v24)
  {
    id v60 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v59 = handle_opengl_thread_conflict((const void **)v20);
    id v60 = [(id)DYGetGLGuestAppClient(v59) waitOnGraphicsSemaphoreAssertions];
    if ((int)v60 >= 1)
    {
      do
LABEL_60:
        unsigned int v61 = __ldaxr(v21);
      while (__stlxr(v61 - 1, v21));
      uint64_t v62 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v60) graphicsLockWaitQueue];
      dispatch_sync_f(v62, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v20 + 24) + 3064LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
      return;
    }
  }

  *(_BYTE *)(v20 + 4838) = 1;
  v71[0] = 0LL;
  v71[1] = 0LL;
  int v72 = 0;
  uint64_t v25 = (char *)[(id)DYGetGLGuestAppClient(v60) state];
  if (v25 != (_BYTE *)&dword_0 + 1
    || (uint64_t v25 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v25))
  {
    if (!a10 || *(_DWORD *)(v20 + 2044))
    {
      strcpy((char *)(v20 + 4709), "Ceiiiiieit");
      uint64_t v31 = a10;
    }

    else
    {
      uint64_t v30 = DYGetGLGuestAppClient(v25);
      uint64_t v31 = (const void *)(v20 + 4644);
      GPUTools::Interpose::DYSavePointer(v30, (int)a9, a10, v20 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      strcpy((char *)(v20 + 4709), "CeiiiiieiU");
    }

    id v67 = v31;
    GPUTools::FB::Encode((uint64_t)v71, 98LL, 4096LL, v20 + 4709, v26, v27, v28, v29, *(void *)v20);
    char v33 = byte_206EBA;
    if ((byte_206EBA & 1) != 0) {
      breakpoint_break( (uint64_t)v71,  (volatile int *)((char *)&stru_20.nsects + 2),  1LL,  *(unsigned int *)(v20 + 3404),  v20);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (!(v34 & 0x10 | v33 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, _DWORD, const void *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void, const void *))(*(void *)(v20 + 32) + 3064LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  v67);
      uint64_t v34 = mach_absolute_time();
      uint64_t v36 = v34 - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v38 = v71[0];
        *((void *)v71[0] + 2) = v35;
        v38[3] = v36;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v65 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        uint64_t v66 = v71[0];
        *((void *)v71[0] + 3) = v65;
        uint64_t v34 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
        v66[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v34 = check_errors(v20);
    }

void sub_3E960(_Unwind_Exception *exception_object)
{
  unint64_t v4 = *(void **)(v2 - 104);
  if (v4) {
    free(v4);
  }
  _Unwind_Resume(exception_object);
}

void get_compressed_tex_image(__GLIContextRec *a1, uint64_t a2, uint64_t a3, void *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      unsigned int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void *))(*(void *)(v13 + 24) + 3080LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v55 = 0LL;
  signed int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    uint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x43) {
      goto LABEL_24;
    }
    int v49 = (323 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    unsigned int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        uint64_t v19 = &v20[v21];
LABEL_24:
        *((_DWORD *)v19 + 16) = 0;
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)uint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        signed int v56 = v19 + 68;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 230;
        *((_DWORD *)v20 + 8) = 256;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Ceip");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((_DWORD *)v20 + 14) = a3;
        *(void *)(v20 + 60) = a4;
        char v25 = byte_206F3E;
        if ((byte_206F3E & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_B8.size + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void *))(*(void *)(v13 + 32) + 3080LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            uint64_t v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  __uint64_t v54;
  void *v55;
  char *v56;
  unsigned int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      unsigned int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void *))(*(void *)(v13 + 24) + 3080LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v55 = 0LL;
  signed int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    uint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x43) {
      goto LABEL_24;
    }
    int v49 = (323 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    unsigned int v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        uint64_t v19 = &v20[v21];
LABEL_24:
        *((_DWORD *)v19 + 16) = 0;
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)uint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        signed int v56 = v19 + 68;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 230;
        *((_DWORD *)v20 + 8) = 256;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Ceip");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((_DWORD *)v20 + 14) = a3;
        *(void *)(v20 + 60) = a4;
        char v25 = byte_206F3E;
        if ((byte_206F3E & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_B8.size + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void *))(*(void *)(v13 + 32) + 3080LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            uint64_t v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void *))(*(void *)(v13 + 24) + 3080LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        unsigned int v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void *))(*(void *)(v13 + 32) + 3080LL))(a1, a2, a3, a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    int64_t v21 = v20 < 1;
  }
  else {
    int64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void *))(*(void *)(v13 + 24) + 3080LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void *))(*(void *)(v13 + 32) + 3080LL))(a1, a2, a3, a4);
  uint64_t v20 = mach_absolute_time();
  int64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    unsigned int v22 = __ldaxr(v14);
    unint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_3EE64( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void draw_range_elements( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, GPUTools::GL *a6, const void *a7)
{
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  id v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v64 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v63 = handle_opengl_thread_conflict((const void **)v17);
    id v64 = [(id)DYGetGLGuestAppClient(v63) waitOnGraphicsSemaphoreAssertions];
    if ((int)v64 >= 1)
    {
      do
LABEL_69:
        unsigned int v65 = __ldaxr(v18);
      while (__stlxr(v65 - 1, v18));
      uint64_t v66 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v64) graphicsLockWaitQueue];
      dispatch_sync_f(v66, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, const void *))(*(void *)(v17 + 24) + 3240LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_WORD *)(v17 + 4838) = 257;
  v83[0] = 0LL;
  v83[1] = 0LL;
  int v84 = 0;
  if ([(id)DYGetGLGuestAppClient(v64) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    strlcpy((char *)(v17 + 4709), "Ceuiuiie", 0x40uLL);
    if ((_DWORD)a5)
    {
      uint64_t v80 = copyout_vertex_arrays2((ContextInfo *)v17, (int)a3, (int)a4 - (int)a3 + 1, 1LL);
      if (*(_DWORD *)(v17 + 2036))
      {
        strlcat((char *)(v17 + 4709), "t", 0x40uLL);
      }

      else
      {
        strlcat((char *)(v17 + 4709), "U", 0x40uLL);
        uint64_t v29 = GPUTools::GL::dy_type_size(a6, v28);
        int v30 = v29;
        uint64_t v31 = DYGetGLGuestAppClient(v29);
        GPUTools::Interpose::DYSavePointer(v31, (v30 * a5), a7, v17 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      }
    }

    else
    {
      strlcat((char *)(v17 + 4709), "t", 0x40uLL);
      uint64_t v80 = 0LL;
    }

    GPUTools::FB::Encode((uint64_t)v83, 146LL, v17 + 4709, v23, v24, v25, v26, v27, *(void *)v17);
    char v33 = byte_206EEA;
    if ((byte_206EEA & 1) != 0) {
      breakpoint_break( (uint64_t)v83,  (volatile int *)((char *)&stru_68.size + 2),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (v34 & 0x10 | v33 & 4) {
      goto LABEL_34;
    }
    id v35 = [(id)DYGetGLGuestAppClient(v34) overrideFlags];
    if (!(_DWORD)v35)
    {
      uint64_t v36 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, const void *))(*(void *)(v17 + 32) + 3240LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      uint64_t v34 = mach_absolute_time();
      uint64_t v37 = v34 - v36;
      unint64_t v38 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v39 = v83[0];
        *((void *)v83[0] + 2) = v36;
        v39[3] = v37;
        if (!gCheckGLErrors) {
          goto LABEL_34;
        }
      }

      else
      {
        uint64_t v76 = __udivti3(g_DYTimebaseInfo * v37, (g_DYTimebaseInfo * (unsigned __int128)v37) >> 64);
        v77 = v83[0];
        *((void *)v83[0] + 3) = v76;
        uint64_t v34 = __udivti3(v38 * v36, (v38 * (unsigned __int128)v36) >> 64);
        void v77[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_34;
        }
      }

      uint64_t v34 = check_errors(v17);
LABEL_34:
      id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v40) {
        id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v83, v41);
      }
      BOOL v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v17 + 3404);
      if ((_DWORD)v43) {
        id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v83, v43, v42);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v17, (uint64_t)v83);
      }
      unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v17 + 3480),  (GPUTools::FB::Fbuf *)(v17 + 3520),  (GPUTools::FB *)v83);
      uint64_t v45 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v45 && gBreakOnError)
      {
        uint64_t v67 = 3LL;
        uint64_t v68 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v33 & 2) == 0) {
          goto LABEL_43;
        }
        uint64_t v67 = 2LL;
        uint64_t v68 = 146LL;
      }

      breakpoint_break((uint64_t)v83, (volatile int *)v68, v67, v45, v17);
LABEL_43:
      id v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
      unsigned int v47 = (unsigned int *)((char *)v46 + 56);
      do
        unsigned int v48 = __ldaxr(v47);
      while (__stlxr(1u, v47));
      if (v48 == 1)
      {
        do
        {
          while (*v47 == 1)
            ;
          do
            unsigned int v49 = __ldaxr(v47);
          while (__stlxr(1u, v47));
        }

        while (v49 == 1);
      }

      GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)v83, *(unsigned int *)v83[0], 1);
      atomic_store(0, v47);
      if (v80)
      {
        GPUTools::FB::Encode((uint64_t)v83, 4294955021LL, 4LL, (uint64_t)"C", v50, v51, v52, v53, *(void *)v17);
        unsigned int v55 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v54) defaultFbufStream];
        signed int v56 = (unsigned int *)((char *)v55 + 56);
        do
          unsigned int v57 = __ldaxr(v56);
        while (__stlxr(1u, v56));
        if (v57 == 1)
        {
          do
          {
            while (*v56 == 1)
              ;
            do
              unsigned int v58 = __ldaxr(v56);
            while (__stlxr(1u, v56));
          }

          while (v58 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v55, (GPUTools::FB::Fbuf *)v83, *(unsigned int *)v83[0], 1);
        atomic_store(0, v56);
      }

      do
      {
        unsigned int v59 = __ldaxr(v18);
        signed int v60 = v59 - 1;
      }

      while (__stlxr(v60, v18));
      if (gCheckGLErrors) {
        BOOL v61 = v60 < 1;
      }
      else {
        BOOL v61 = 1;
      }
      if (!v61) {
        handle_opengl_thread_conflict((const void **)v17);
      }
      goto LABEL_63;
    }

    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v35) overrideFlags];
    if ((v34 & 8) != 0) {
      goto LABEL_34;
    }
    v69 = (volatile int *)[(id)DYGetGLGuestAppClient(v34) overrideFlags];
    apply_draw_overrides(v17, v69);
    uint64_t v70 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, const void *))(*(void *)(v17 + 32) + 3240LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
    uint64_t v71 = mach_absolute_time();
    uint64_t v72 = v71 - v70;
    unint64_t v73 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      int v74 = v83[0];
      *((void *)v83[0] + 2) = v70;
      v74[3] = v72;
      if (!gCheckGLErrors)
      {
LABEL_75:
        int v75 = [(id)DYGetGLGuestAppClient(v71) overrideFlags];
        unapply_draw_overrides(v17, v75);
        goto LABEL_34;
      }
    }

    else
    {
      uint64_t v78 = __udivti3(g_DYTimebaseInfo * v72, (g_DYTimebaseInfo * (unsigned __int128)v72) >> 64);
      uint64_t v79 = v83[0];
      *((void *)v83[0] + 3) = v78;
      uint64_t v71 = __udivti3(v73 * v70, (v73 * (unsigned __int128)v70) >> 64);
      v79[2] = v71;
      if (!gCheckGLErrors) {
        goto LABEL_75;
      }
    }

    uint64_t v71 = check_errors(v17);
    goto LABEL_75;
  }

  do
    unsigned int v62 = __ldaxr(v18);
  while (__stlxr(v62 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, GPUTools::GL *, const void *))(*(void *)(v17 + 24) + 3240LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
LABEL_63:
  if (v83[0]) {
    free(v83[0]);
  }
}

void sub_3F53C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(exception_object);
}

void tex_image3D( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, const void *a10)
{
  unint64_t v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      id v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    unint64_t v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  signed int v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v19);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v20);
      while (__stlxr(v53 - 1, v20));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 24) + 3504LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
      return;
    }
  }

  *(_BYTE *)(v19 + 4838) = 1;
  v64[0] = 0LL;
  v64[1] = 0LL;
  int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v28 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v28))
  {
    if (!a10 || *(_DWORD *)(v19 + 2044))
    {
      strcpy((char *)(v19 + 4709), "Ceieiiiieet");
      uint64_t v29 = a10;
    }

    else
    {
      uint64_t v29 = (const void *)(v19 + 4644);
      save_texture( v19,  (uint64_t)a1,  a2,  HIDWORD(a9),  (GPUTools::GL *)a9,  a5,  a6,  a7,  1,  (uint64_t)a10,  v19 + 4644,  65LL,  1u);
      strcpy((char *)(v19 + 4709), "CeieiiiieeU");
      if ((a4 - 1) > 3)
      {
LABEL_29:
        unsigned int v59 = v29;
        GPUTools::FB::Encode((uint64_t)v64, 595LL, 4096LL, v19 + 4709, v24, v25, v26, v27, *(void *)v19);
        char v31 = byte_2070AB;
        if ((byte_2070AB & 1) != 0) {
          breakpoint_break( (uint64_t)v64,  (volatile int *)&stru_248.sectname[11],  1LL,  *(unsigned int *)(v19 + 3404),  v19);
        }
        uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
        if (!(v32 & 0x10 | v31 & 4))
        {
          uint64_t v33 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void, void, const void *))(*(void *)(v19 + 32) + 3504LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  HIDWORD(a9),  v59);
          uint64_t v32 = mach_absolute_time();
          uint64_t v34 = v32 - v33;
          unint64_t v35 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v36 = v64[0];
            *((void *)v64[0] + 2) = v33;
            v36[3] = v34;
            if (!gCheckGLErrors) {
              goto LABEL_34;
            }
          }

          else
          {
            uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
            unsigned int v58 = v64[0];
            *((void *)v64[0] + 3) = v57;
            uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
            v58[2] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_34;
            }
          }

          uint64_t v32 = check_errors(v19);
        }

void sub_3FADC(_Unwind_Exception *exception_object)
{
  unint64_t v4 = *(void **)(v2 - 112);
  if (v4) {
    free(v4);
  }
  _Unwind_Resume(exception_object);
}

void tex_sub_image3D( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, const void *a11)
{
  unint64_t v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      id v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    unint64_t v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  signed int v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    id v57 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v56 = handle_opengl_thread_conflict((const void **)v19);
    id v57 = [(id)DYGetGLGuestAppClient(v56) waitOnGraphicsSemaphoreAssertions];
    if ((int)v57 >= 1)
    {
      do
LABEL_60:
        unsigned int v58 = __ldaxr(v20);
      while (__stlxr(v58 - 1, v20));
      unsigned int v59 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v57) graphicsLockWaitQueue];
      dispatch_sync_f(v59, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 24) + 3512LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10,  a11);
      return;
    }
  }

  *(_BYTE *)(v19 + 4838) = 1;
  v71[0] = 0LL;
  v71[1] = 0LL;
  int v72 = 0;
  if ([(id)DYGetGLGuestAppClient(v57) state] != (char *)&dword_0 + 1
    || (id v28 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v28))
  {
    if (!a11 || *(_DWORD *)(v19 + 2044))
    {
      strcpy((char *)(v19 + 4709), "Ceiiiiiiieet");
      uint64_t v29 = a11;
    }

    else
    {
      uint64_t v29 = (const void *)(v19 + 4644);
      save_texture( v19,  (uint64_t)a1,  a2,  a10,  (GPUTools::GL *)HIDWORD(a9),  a7,  a8,  a9,  1,  (uint64_t)a11,  v19 + 4644,  65LL,  1u);
      strcpy((char *)(v19 + 4709), "CeiiiiiiieeU");
    }

    HIDWORD(v64) = HIDWORD(a2);
    GPUTools::FB::Encode((uint64_t)v71, 604LL, 4096LL, v19 + 4709, v24, v25, v26, v27, *(void *)v19);
    char v65 = byte_2070B4;
    if ((byte_2070B4 & 1) != 0) {
      breakpoint_break((uint64_t)v71, (volatile int *)&stru_248.segname[4], 1LL, *(unsigned int *)(v19 + 3404), v19);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v31 & 0x10 | v65 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      LODWORD(v64) = a10;
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, void, void, void, const void *))(*(void *)(v19 + 32) + 3512LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  v64,  a11,  a4,  a5,  a6,  a7,  a8,  a9,  HIDWORD(a9),  a10,  v29);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      unint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v35 = v71[0];
        *((void *)v71[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v62 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v63 = v71[0];
        *((void *)v71[0] + 3) = v62;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v63[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v31 = check_errors(v19);
    }

void sub_40048(_Unwind_Exception *exception_object)
{
  unint64_t v4 = *(void **)(v2 - 112);
  if (v4) {
    free(v4);
  }
  _Unwind_Resume(exception_object);
}

void copy_tex_sub_image3D( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, unsigned int a5, unsigned int a6, unsigned int a7, unsigned int a8, uint64_t a9)
{
  uint64_t v13 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v13) {
    goto LABEL_12;
  }
  uint64_t v14 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v15 = v13[4];
    BOOL v16 = v15 >= (unint64_t)a1;
    else {
      BOOL v17 = v13 + 1;
    }
    if (v16) {
      uint64_t v14 = (uint64_t)v13;
    }
    uint64_t v13 = (void *)*v17;
  }

  while (*v17);
  if (v14 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v14 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v14 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v18 = *(void *)(v14 + 40);
  uint64_t v19 = (unsigned int *)(v18 + 4640);
  do
  {
    unsigned int v20 = __ldaxr(v19);
    signed int v21 = v20 + 1;
  }

  while (__stlxr(v21, v19));
  if (gCheckGLErrors) {
    BOOL v22 = v21 <= 1;
  }
  else {
    BOOL v22 = 1;
  }
  if (v22)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v18);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_57:
        unsigned int v52 = __ldaxr(v19);
      while (__stlxr(v52 - 1, v19));
      signed int v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, void, void, void, void, uint64_t))(*(void *)(v18 + 24) + 3520LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9);
      return;
    }
  }

  *(_BYTE *)(v18 + 4838) = 1;
  uint64_t v64 = 0LL;
  char v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    uint64_t v25 = (char *)v64;
    uint64_t v24 = v65;
    int64_t v26 = v65 - (_BYTE *)v64;
    unsigned int v27 = v66;
    unint64_t v28 = v66 - (v65 - (_BYTE *)v64);
    if (v28 > 0x5B) {
      goto LABEL_24;
    }
    int v54 = (347 - v28) & 0xFFFFFF00;
    v66 += v54;
    uint64_t v25 = (char *)malloc(v54 + v27);
    uint64_t v64 = v25;
    if (v25)
    {
      if ((v25 & 3) == 0)
      {
        uint64_t v24 = &v25[v26];
LABEL_24:
        *(_OWORD *)(v24 + 76) = 0u;
        *((_OWORD *)v24 + 3) = 0u;
        *((_OWORD *)v24 + 4) = 0u;
        *((_OWORD *)v24 + 1) = 0u;
        *((_OWORD *)v24 + 2) = 0u;
        *(_OWORD *)uint64_t v24 = 0u;
        char v65 = v24 + 92;
        GPUTools::FB::Fbuf::align((char **)&v64);
        *((_DWORD *)v25 + 1) = 115;
        *((_DWORD *)v25 + 8) = 0;
        __uint64_t v63 = 0LL;
        uint64_t v29 = pthread_threadid_np(0LL, &v63);
        *((void *)v25 + 1) = v63;
        strcpy(v25 + 36, "Ceiiiiiiii");
        *((void *)v25 + 6) = *(void *)v18;
        *((_DWORD *)v25 + 14) = a2;
        *((_DWORD *)v25 + 15) = a3;
        *((_DWORD *)v25 + 16) = a4;
        *((_DWORD *)v25 + 17) = a5;
        *((_DWORD *)v25 + 18) = a6;
        *((_DWORD *)v25 + 19) = a7;
        *((_DWORD *)v25 + 20) = a8;
        *(void *)(v25 + 84) = a9;
        char v30 = byte_206ECB;
        if ((byte_206ECB & 1) != 0) {
          breakpoint_break( (uint64_t)&v64,  (volatile int *)&stru_68.sectname[11],  1LL,  *(unsigned int *)(v18 + 3404),  v18);
        }
        uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
        if (!(v31 & 0x10 | v30 & 4))
        {
          uint64_t v32 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, void, void, void, void, uint64_t))(*(void *)(v18 + 32) + 3520LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9);
          uint64_t v31 = mach_absolute_time();
          uint64_t v33 = v31 - v32;
          unint64_t v34 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v35 = v64;
            *((void *)v64 + 2) = v32;
            v35[3] = v33;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v57 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
            unsigned int v58 = v64;
            *((void *)v64 + 3) = v57;
            uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
            v58[2] = v31;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v31 = check_errors(v18);
        }

{
  void *v13;
  uint64_t v14;
  unint64_t v15;
  BOOL v16;
  void *v17;
  uint64_t v18;
  unsigned int *v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  id v23;
  char *v24;
  char *v25;
  int64_t v26;
  unsigned int v27;
  unint64_t v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  int v54;
  uint64_t v55;
  uint64_t v56;
  uint64_t v57;
  void *v58;
  __uint64_t v63;
  void *v64;
  char *v65;
  unsigned int v66;
  uint64_t v13 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v13) {
    goto LABEL_12;
  }
  uint64_t v14 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v15 = v13[4];
    BOOL v16 = v15 >= (unint64_t)a1;
    else {
      BOOL v17 = v13 + 1;
    }
    if (v16) {
      uint64_t v14 = (uint64_t)v13;
    }
    uint64_t v13 = (void *)*v17;
  }

  while (*v17);
  if (v14 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v14 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v14 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v18 = *(void *)(v14 + 40);
  uint64_t v19 = (unsigned int *)(v18 + 4640);
  do
  {
    unsigned int v20 = __ldaxr(v19);
    signed int v21 = v20 + 1;
  }

  while (__stlxr(v21, v19));
  if (gCheckGLErrors) {
    BOOL v22 = v21 <= 1;
  }
  else {
    BOOL v22 = 1;
  }
  if (v22)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v18);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_57:
        unsigned int v52 = __ldaxr(v19);
      while (__stlxr(v52 - 1, v19));
      signed int v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, void, void, void, void, uint64_t))(*(void *)(v18 + 24) + 3520LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9);
      return;
    }
  }

  *(_BYTE *)(v18 + 4838) = 1;
  uint64_t v64 = 0LL;
  char v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    uint64_t v25 = (char *)v64;
    uint64_t v24 = v65;
    int64_t v26 = v65 - (_BYTE *)v64;
    unsigned int v27 = v66;
    unint64_t v28 = v66 - (v65 - (_BYTE *)v64);
    if (v28 > 0x5B) {
      goto LABEL_24;
    }
    int v54 = (347 - v28) & 0xFFFFFF00;
    v66 += v54;
    uint64_t v25 = (char *)malloc(v54 + v27);
    uint64_t v64 = v25;
    if (v25)
    {
      if ((v25 & 3) == 0)
      {
        uint64_t v24 = &v25[v26];
LABEL_24:
        *(_OWORD *)(v24 + 76) = 0u;
        *((_OWORD *)v24 + 3) = 0u;
        *((_OWORD *)v24 + 4) = 0u;
        *((_OWORD *)v24 + 1) = 0u;
        *((_OWORD *)v24 + 2) = 0u;
        *(_OWORD *)uint64_t v24 = 0u;
        char v65 = v24 + 92;
        GPUTools::FB::Fbuf::align((char **)&v64);
        *((_DWORD *)v25 + 1) = 115;
        *((_DWORD *)v25 + 8) = 0;
        __uint64_t v63 = 0LL;
        uint64_t v29 = pthread_threadid_np(0LL, &v63);
        *((void *)v25 + 1) = v63;
        strcpy(v25 + 36, "Ceiiiiiiii");
        *((void *)v25 + 6) = *(void *)v18;
        *((_DWORD *)v25 + 14) = a2;
        *((_DWORD *)v25 + 15) = a3;
        *((_DWORD *)v25 + 16) = a4;
        *((_DWORD *)v25 + 17) = a5;
        *((_DWORD *)v25 + 18) = a6;
        *((_DWORD *)v25 + 19) = a7;
        *((_DWORD *)v25 + 20) = a8;
        *(void *)(v25 + 84) = a9;
        char v30 = byte_206ECB;
        if ((byte_206ECB & 1) != 0) {
          breakpoint_break( (uint64_t)&v64,  (volatile int *)&stru_68.sectname[11],  1LL,  *(unsigned int *)(v18 + 3404),  v18);
        }
        uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
        if (!(v31 & 0x10 | v30 & 4))
        {
          uint64_t v32 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, void, void, void, void, uint64_t))(*(void *)(v18 + 32) + 3520LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9);
          uint64_t v31 = mach_absolute_time();
          uint64_t v33 = v31 - v32;
          unint64_t v34 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v35 = v64;
            *((void *)v64 + 2) = v32;
            v35[3] = v33;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v57 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
            unsigned int v58 = v64;
            *((void *)v64 + 3) = v57;
            uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
            v58[2] = v31;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v31 = check_errors(v18);
        }

void sub_405B4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void get_uniform_indices( __GLIContextRec *a1, uint64_t a2, uint64_t a3, const char *const *a4, unsigned int *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_66:
        unsigned int v55 = __ldaxr(v16);
      while (__stlxr(v55 - 1, v16));
      uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, unsigned int *))(*(void *)(v15 + 24) + 3528LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  uint64_t v61 = 0LL;
  uint64_t v62 = 0LL;
  unsigned int v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    strcpy((char *)(v15 + 4709), "Cuii");
    if (a4)
    {
      signed int v21 = __str;
      snprintf(__str, 0x10uLL, "@%dS", a3);
    }

    else
    {
      signed int v21 = "t";
    }

    strlcat((char *)(v15 + 4709), v21, 0x40uLL);
    if (a5)
    {
      BOOL v22 = __str;
      snprintf(__str, 0x10uLL, "@%dui", a3);
    }

    else
    {
      BOOL v22 = "t";
    }

    strlcat((char *)(v15 + 4709), v22, 0x40uLL);
    GPUTools::FB::Encode((uint64_t)&v61, 831LL, 256LL, v15 + 4709, v23, v24, v25, v26, *(void *)v15);
    char v28 = byte_207197;
    if ((byte_207197 & 1) != 0) {
      breakpoint_break((uint64_t)&v61, (volatile int *)&stru_338.sectname[7], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    if (!([(id)DYGetGLGuestAppClient(v27) overrideFlags] & 0x10 | v28 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, unsigned int *))(*(void *)(v15 + 32) + 3528LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v34 = mach_absolute_time() - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v36 = v61;
        *((void *)v61 + 3) = v34;
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        id v36 = v61;
        *((void *)v61 + 3) = v59;
        uint64_t v33 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
      }

      v36[2] = v33;
      if (gCheckGLErrors) {
        check_errors(v15);
      }
    }

    id v37 = v61;
    __int128 v60 = *((_OWORD *)v61 + 1);
    uint64_t v62 = v61;
    if (v63 >= 0x24)
    {
      *((_DWORD *)v61 + 8) = 0;
      _OWORD *v37 = 0u;
      v37[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v61, 831LL, 256LL, v15 + 4709, v29, v30, v31, v32, *(void *)v15);
    *((_OWORD *)v61 + 1) = v60;
    id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v61, v40);
    }
    uint64_t v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v61, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)&v61);
    }
    BOOL v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v61);
    uint64_t v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      uint64_t v57 = 3LL;
      uint64_t v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_47;
      }
      uint64_t v57 = 2LL;
      uint64_t v58 = 831LL;
    }

    breakpoint_break((uint64_t)&v61, (volatile int *)v58, v57, v44, v15);
LABEL_47:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      unsigned int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v61, *(unsigned int *)v61, 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v16);
      signed int v50 = v49 - 1;
    }

    while (__stlxr(v50, v16));
    if (gCheckGLErrors) {
      BOOL v51 = v50 < 1;
    }
    else {
      BOOL v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_60;
  }

  do
    unsigned int v52 = __ldaxr(v16);
  while (__stlxr(v52 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, unsigned int *))(*(void *)(v15 + 24) + 3528LL))( a1,  a2,  a3,  a4,  a5);
LABEL_60:
  if (v61) {
    free(v61);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  id v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  void *v54[2];
  int v55;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    unsigned int v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v46 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v16);
      while (__stlxr(v48 - 1, v16));
      unsigned int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, unsigned int *))(*(void *)(v15 + 24) + 3528LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (uint64_t v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    GPUTools::FB::Encode((uint64_t)v54, 831LL, 2LL, (uint64_t)"Cuiipp", v20, v21, v22, v23, *(void *)v15);
    uint64_t v26 = byte_207197;
    if ((byte_207197 & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)&stru_338.sectname[7], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      char v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, unsigned int *))(*(void *)(v15 + 32) + 3528LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      uint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        unsigned int v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      char v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, unsigned int *))(*(void *)(v15 + 24) + 3528LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, unsigned int *))(*(void *)(v15 + 32) + 3528LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    signed int v21 = __ldaxr(v16);
    BOOL v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, unsigned int *))(*(void *)(v15 + 24) + 3528LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  signed int v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, unsigned int *))(*(void *)(v15 + 32) + 3528LL))( a1,  a2,  a3,  a4,  a5);
  BOOL v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_40B54( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, void *a19)
{
  if (a19) {
    free(a19);
  }
  _Unwind_Resume(exception_object);
}

void get_active_uniformsiv( __GLIContextRec *a1, uint64_t a2, uint64_t a3, const unsigned int *a4, uint64_t a5, int *a6)
{
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      BOOL v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v56 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v55 = handle_opengl_thread_conflict((const void **)v17);
    id v56 = [(id)DYGetGLGuestAppClient(v55) waitOnGraphicsSemaphoreAssertions];
    if ((int)v56 >= 1)
    {
      do
LABEL_66:
        unsigned int v57 = __ldaxr(v18);
      while (__stlxr(v57 - 1, v18));
      uint64_t v58 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v56) graphicsLockWaitQueue];
      dispatch_sync_f(v58, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *, uint64_t, int *))(*(void *)(v17 + 24) + 3536LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  char v65 = 0LL;
  unsigned int v66 = 0LL;
  unsigned int v67 = 0;
  if ([(id)DYGetGLGuestAppClient(v56) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v23 = (char *)(v17 + 4709);
    strcpy((char *)(v17 + 4709), "Cuii");
    __dst = (char *)(v17 + 4709);
    if (a4)
    {
      uint64_t v24 = __str;
      snprintf(__str, 0x10uLL, "@%dui", a3);
      uint64_t v23 = (char *)(v17 + 4709);
    }

    else
    {
      uint64_t v24 = "t";
    }

    strlcat(v23, v24, 0x40uLL);
    strlcat(v23, "e", 0x40uLL);
    if (a6)
    {
      uint64_t v25 = __str;
      snprintf(__str, 0x10uLL, "@%d%c", a3, 105LL);
    }

    else
    {
      uint64_t v25 = "t";
    }

    strlcat(__dst, v25, 0x40uLL);
    GPUTools::FB::Encode((uint64_t)&v65, 829LL, 256LL, (uint64_t)__dst, v26, v27, v28, v29, *(void *)v17);
    char v63 = byte_207195;
    if ((byte_207195 & 1) != 0) {
      breakpoint_break((uint64_t)&v65, (volatile int *)&stru_338.sectname[5], 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    if (!([(id)DYGetGLGuestAppClient(v30) overrideFlags] & 0x10 | v63 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *, uint64_t, int *))(*(void *)(v17 + 32) + 3536LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v36 = mach_absolute_time() - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v38 = v65;
        *((void *)v65 + 3) = v36;
      }

      else
      {
        uint64_t v61 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        uint64_t v38 = v65;
        *((void *)v65 + 3) = v61;
        uint64_t v35 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
      }

      v38[2] = v35;
      if (gCheckGLErrors) {
        check_errors(v17);
      }
    }

    id v39 = v65;
    __int128 v62 = *((_OWORD *)v65 + 1);
    unsigned int v66 = v65;
    if (v67 >= 0x24)
    {
      *((_DWORD *)v65 + 8) = 0;
      *id v39 = 0u;
      v39[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v65, 829LL, 256LL, (uint64_t)__dst, v31, v32, v33, v34, *(void *)v17);
    *((_OWORD *)v65 + 1) = v62;
    id v41 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v41) {
      id v41 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v65, v42);
    }
    uint64_t v44 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v17 + 3404);
    if ((_DWORD)v44) {
      id v41 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v65, v44, v43);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v41), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v17, (uint64_t)&v65);
    }
    unsigned int v45 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v17 + 3480),  (GPUTools::FB::Fbuf *)(v17 + 3520),  (GPUTools::FB *)&v65);
    uint64_t v46 = *(unsigned int *)(v17 + 3404);
    if ((_DWORD)v46 && gBreakOnError)
    {
      uint64_t v59 = 3LL;
      uint64_t v60 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v63 & 2) == 0) {
        goto LABEL_47;
      }
      uint64_t v59 = 2LL;
      uint64_t v60 = 829LL;
    }

    breakpoint_break((uint64_t)&v65, (volatile int *)v60, v59, v46, v17);
LABEL_47:
    unsigned int v47 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v45) defaultFbufStream];
    unsigned int v48 = (unsigned int *)((char *)v47 + 56);
    do
      unsigned int v49 = __ldaxr(v48);
    while (__stlxr(1u, v48));
    if (v49 == 1)
    {
      do
      {
        while (*v48 == 1)
          ;
        do
          unsigned int v50 = __ldaxr(v48);
        while (__stlxr(1u, v48));
      }

      while (v50 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v47, (GPUTools::FB::Fbuf *)&v65, *(unsigned int *)v65, 1);
    atomic_store(0, v48);
    do
    {
      unsigned int v51 = __ldaxr(v18);
      signed int v52 = v51 - 1;
    }

    while (__stlxr(v52, v18));
    if (gCheckGLErrors) {
      BOOL v53 = v52 < 1;
    }
    else {
      BOOL v53 = 1;
    }
    if (!v53) {
      handle_opengl_thread_conflict((const void **)v17);
    }
    goto LABEL_60;
  }

  do
    unsigned int v54 = __ldaxr(v18);
  while (__stlxr(v54 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *, uint64_t, int *))(*(void *)(v17 + 24) + 3536LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_60:
  if (v65) {
    free(v65);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  id v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  void *v56[2];
  int v57;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      BOOL v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    unsigned int v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v48 = handle_opengl_thread_conflict((const void **)v17);
    unsigned int v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_56:
        unsigned int v50 = __ldaxr(v18);
      while (__stlxr(v50 - 1, v18));
      unsigned int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *, uint64_t, int *))(*(void *)(v17 + 24) + 3536LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (uint64_t v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v56, 829LL, 2LL, (uint64_t)"Cuiipep", v22, v23, v24, v25, *(void *)v17);
    uint64_t v28 = byte_207195;
    if ((byte_207195 & 1) != 0) {
      breakpoint_break((uint64_t)v56, (volatile int *)&stru_338.sectname[5], 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *, uint64_t, int *))(*(void *)(v17 + 32) + 3536LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        unsigned int v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v29 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      BOOL v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v27 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        uint64_t v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *, uint64_t, int *))(*(void *)(v17 + 24) + 3536LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        uint64_t v26 = __ldaxr(v18);
      while (__stlxr(v26 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *, uint64_t, int *))(*(void *)(v17 + 32) + 3536LL))( a1,  a2,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v17);
      }
    }
  }

  do
  {
    uint64_t v23 = __ldaxr(v18);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v18));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  int64x2_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      BOOL v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        uint64_t v32 = __ldaxr(v18);
      while (__stlxr(v32 - 1, v18));
      uint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *, uint64_t, int *))(*(void *)(v17 + 24) + 3536LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        uint64_t v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *, uint64_t, int *))(*(void *)(v17 + 32) + 3536LL))( a1,  a2,  a3,  a4,  a5,  a6);
  uint64_t v24 = mach_absolute_time();
  uint64_t v25 = vdupq_n_s64(1uLL);
  v25.i64[0] = v24 - v23;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v25, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v34 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v17);
      }
    }
  }

  do
  {
    uint64_t v26 = __ldaxr(v18);
    uint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v18));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_41130( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, void *a19)
{
  if (a19) {
    free(a19);
  }
  _Unwind_Resume(exception_object);
}

uint64_t get_uniform_block_index(__GLIContextRec *a1, uint64_t a2, const char *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v11);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_58:
        unsigned int v56 = __ldaxr(v12);
      while (__stlxr(v56 - 1, v12));
      unsigned int v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 3552LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  int v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v62, 830LL, 0LL, (uint64_t)"CuiS", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_207196;
    if ((byte_207196 & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_338.sectname[6], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if ([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4)
    {
      uint64_t v24 = 0LL;
      goto LABEL_29;
    }

    uint64_t v23 = mach_absolute_time();
    uint64_t v24 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 32) + 3552LL))( a1,  a2,  a3);
    uint64_t v30 = mach_absolute_time() - v23;
    unint64_t v31 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v32 = v62[0];
      *((void *)v62[0] + 2) = v23;
      v32[3] = v30;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v60 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
      uint64_t v61 = v62[0];
      *((void *)v62[0] + 3) = v60;
      v61[2] = __udivti3(v31 * v23, (v31 * (unsigned __int128)v23) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v11);
LABEL_28:
    if ((_DWORD)v24 == -1)
    {
      uint64_t v24 = 0xFFFFFFFFLL;
      GPUTools::FB::Encode((uint64_t)v62, 4294955008LL, (uint64_t)"ui", v25, v26, v27, v28, v29, -1);
LABEL_30:
      id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v39) {
        id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v40);
      }
      uint64_t v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
      if ((_DWORD)v42) {
        id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v42, v41);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v11, (uint64_t)v62);
      }
      unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v62);
      uint64_t v44 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v44 && gBreakOnError)
      {
        uint64_t v58 = 3LL;
        uint64_t v59 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v22 & 2) == 0) {
          goto LABEL_39;
        }
        uint64_t v58 = 2LL;
        uint64_t v59 = 830LL;
      }

      breakpoint_break((uint64_t)v62, (volatile int *)v59, v58, v44, v11);
LABEL_39:
      unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
      uint64_t v46 = (unsigned int *)((char *)v45 + 56);
      do
        unsigned int v47 = __ldaxr(v46);
      while (__stlxr(1u, v46));
      if (v47 == 1)
      {
        do
        {
          while (*v46 == 1)
            ;
          do
            unsigned int v48 = __ldaxr(v46);
          while (__stlxr(1u, v46));
        }

        while (v48 == 1);
      }

      GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
      atomic_store(0, v46);
      do
      {
        unsigned int v49 = __ldaxr(v12);
        signed int v50 = v49 - 1;
      }

      while (__stlxr(v50, v12));
      if (gCheckGLErrors) {
        BOOL v51 = v50 < 1;
      }
      else {
        BOOL v51 = 1;
      }
      if (!v51) {
        handle_opengl_thread_conflict((const void **)v11);
      }
      goto LABEL_52;
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  void *v57[2];
  int v58;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    signed int v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v49 = handle_opengl_thread_conflict((const void **)v11);
    signed int v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_56:
        BOOL v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      signed int v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 3552LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  uint64_t v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v57, 830LL, 0LL, (uint64_t)"CuiS", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_207196;
    if ((byte_207196 & 1) != 0) {
      breakpoint_break((uint64_t)v57, (volatile int *)&stru_338.sectname[6], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if ([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4)
    {
      uint64_t v29 = 0LL;
      goto LABEL_28;
    }

    uint64_t v28 = mach_absolute_time();
    uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 32) + 3552LL))( a1,  a2,  a3);
    uint64_t v30 = mach_absolute_time() - v28;
    unint64_t v31 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v32 = v57[0];
      *((void *)v57[0] + 2) = v28;
      v32[3] = v30;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      id v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
      unsigned int v56 = v57[0];
      *((void *)v57[0] + 3) = v55;
      v56[2] = __udivti3(v31 * v28, (v31 * (unsigned __int128)v28) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v11);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v57, 4294955008LL, (uint64_t)"ui", v23, v24, v25, v26, v27, v29);
    uint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      uint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v57, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v37) {
      uint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v57, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v57);
    }
    uint64_t v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v57);
    id v39 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v22 & 2) == 0) {
        goto LABEL_37;
      }
      unsigned int v53 = 2LL;
      uint64_t v54 = 830LL;
    }

    breakpoint_break((uint64_t)v57, (volatile int *)v54, v53, v39, v11);
LABEL_37:
    uint64_t v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    unsigned int v41 = (unsigned int *)((char *)v40 + 56);
    do
      uint64_t v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          unsigned int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v57, *(unsigned int *)v57[0], 1);
    atomic_store(0, v41);
    do
    {
      uint64_t v44 = __ldaxr(v12);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v12));
    if (gCheckGLErrors) {
      uint64_t v46 = v45 < 1;
    }
    else {
      uint64_t v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_50;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 3552LL))( a1,  a2,  a3);
LABEL_50:
  if (v57[0]) {
    free(v57[0]);
  }
  return v29;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v22 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_35:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 3552LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 3552LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 32) + 3552LL))( a1,  a2,  a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    id v20 = v19 < 1;
  }
  else {
    id v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v17;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v12);
      while (__stlxr(v28 - 1, v12));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 3552LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v25 = __ldaxr(v12);
      while (__stlxr(v25 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 3552LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = mach_absolute_time();
  uint64_t v18 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 32) + 3552LL))( a1,  a2,  a3);
  uint64_t v19 = mach_absolute_time();
  id v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v11);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v12);
    char v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v18;
}

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  id v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v22;
  dispatch_queue_s *v23;
  unsigned int v24;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  uint64_t v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      char v22 = __ldaxr(v12);
    while (__stlxr(v22 - 1, v12));
    uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 3552LL))( v5,  a2,  a3);
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v16) state] == (char *)&dword_0 + 1)
  {
    uint64_t v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v17 & 1) != 0)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 3552LL))( v5,  a2,  a3);
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    id v20 = v19 < 1;
  }
  else {
    id v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return 0LL;
}

void sub_41614( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_active_uniform_blockiv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, GPUTools::GL *a4, int *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  uint64_t v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v15);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_69:
        unsigned int v56 = __ldaxr(v16);
      while (__stlxr(v56 - 1, v16));
      unsigned int v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, GPUTools::GL *, int *))(*(void *)(v15 + 24) + 3560LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  *(void *)&v65[1] = 0LL;
  uint64_t v66 = 0LL;
  unsigned int v67 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    if ((_DWORD)a3 == -1)
    {
      strcpy((char *)(v15 + 4709), "Cuiuie");
      if (a5) {
        goto LABEL_25;
      }
    }

    else
    {
      strcpy((char *)(v15 + 4709), "CuiV<ui>e");
      if (a5)
      {
LABEL_25:
        int v64 = 0;
        GPUTools::GL::DYGetActiveUniformBlockParameterInfo(a4, &v64, (unsigned int *)v65, v20);
        uint64_t v22 = 101LL;
        if (!v65[0]) {
          uint64_t v22 = 105LL;
        }
        snprintf(__str, 0x10uLL, "@%u%c", v64, v22);
        strlcat((char *)(v15 + 4709), __str, 0x40uLL);
LABEL_30:
        int v27 = a3;
        __int128 v62 = a4;
        int v63 = a5;
        if ((_DWORD)a3 != -1) {
          snprintf(__str, 0x28uLL, "ub_%016lx_%u_%u", **(void **)(v15 + 40), a2, a3);
        }
        GPUTools::FB::Encode((uint64_t)&v65[1], 827LL, 256LL, v15 + 4709, v23, v24, v25, v26, *(void *)v15);
        uint64_t v29 = a2;
        char v30 = byte_207193;
        if ((byte_207193 & 1) != 0) {
          breakpoint_break( (uint64_t)&v65[1],  (volatile int *)&stru_338.sectname[3],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v31 & 0x10 | v30 & 4))
        {
          uint64_t v36 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, GPUTools::GL *, int *))(*(void *)(v15 + 32)
                                                                                             + 3560LL))( a1,  v29,  a3,  v62,  v63);
          uint64_t v31 = mach_absolute_time();
          uint64_t v37 = v31 - v36;
          unint64_t v38 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            a3 = *(void *)&v65[1];
            *(void *)(*(void *)&v65[1] + 16LL) = v36;
            *(void *)(a3 + 24) = v37;
            LODWORD(a3) = v27;
            if (!gCheckGLErrors) {
              goto LABEL_37;
            }
          }

          else
          {
            uint64_t v60 = __udivti3(g_DYTimebaseInfo * v37, (g_DYTimebaseInfo * (unsigned __int128)v37) >> 64);
            a3 = *(void *)&v65[1];
            *(void *)(*(void *)&v65[1] + 24LL) = v60;
            uint64_t v31 = __udivti3(v38 * v36, (v38 * (unsigned __int128)v36) >> 64);
            *(void *)(a3 + 16) = v31;
            LODWORD(a3) = v27;
            if (!gCheckGLErrors) {
              goto LABEL_37;
            }
          }

          uint64_t v31 = check_errors(v15);
        }

LABEL_37:
        if ((_DWORD)a3 != -1)
        {
          id v39 = *(_OWORD **)&v65[1];
          __int128 v61 = *(_OWORD *)(*(void *)&v65[1] + 16LL);
          uint64_t v66 = *(void *)&v65[1];
          if (v67 >= 0x24)
          {
            *(_DWORD *)(*(void *)&v65[1] + 32LL) = 0;
            *id v39 = 0u;
            v39[1] = 0u;
          }

          GPUTools::FB::Encode((uint64_t)&v65[1], 827LL, 256LL, v15 + 4709, v32, v33, v34, v35, *(void *)v15);
          *(_OWORD *)(*(void *)&v65[1] + 16LL) = v61;
        }

        id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v40) {
          id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v65[1], v41);
        }
        unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
        if ((_DWORD)v43) {
          id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v65[1], v43, v42);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v15, (uint64_t)&v65[1]);
        }
        uint64_t v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v65[1]);
        uint64_t v45 = *(unsigned int *)(v15 + 3404);
        if ((_DWORD)v45 && gBreakOnError)
        {
          uint64_t v58 = 3LL;
          uint64_t v59 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v30 & 2) == 0) {
            goto LABEL_50;
          }
          uint64_t v58 = 2LL;
          uint64_t v59 = 827LL;
        }

        breakpoint_break((uint64_t)&v65[1], (volatile int *)v59, v58, v45, v15);
LABEL_50:
        uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
        unsigned int v47 = (unsigned int *)((char *)v46 + 56);
        do
          unsigned int v48 = __ldaxr(v47);
        while (__stlxr(1u, v47));
        if (v48 == 1)
        {
          do
          {
            while (*v47 == 1)
              ;
            do
              unsigned int v49 = __ldaxr(v47);
            while (__stlxr(1u, v47));
          }

          while (v49 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v65[1], **(_DWORD **)&v65[1], 1);
        atomic_store(0, v47);
        do
        {
          unsigned int v50 = __ldaxr(v16);
          signed int v51 = v50 - 1;
        }

        while (__stlxr(v51, v16));
        if (gCheckGLErrors) {
          BOOL v52 = v51 < 1;
        }
        else {
          BOOL v52 = 1;
        }
        if (!v52) {
          handle_opengl_thread_conflict((const void **)v15);
        }
        goto LABEL_63;
      }
    }

    strlcat((char *)(v15 + 4709), "t", 0x40uLL);
    goto LABEL_30;
  }

  do
    unsigned int v53 = __ldaxr(v16);
  while (__stlxr(v53 - 1, v16));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, GPUTools::GL *, int *))(*(void *)(v15 + 24) + 3560LL))( a1,  a2,  a3,  a4,  a5);
LABEL_63:
  if (*(void *)&v65[1]) {
    free(*(void **)&v65[1]);
  }
}

    GPUTools::FB::Encode((uint64_t)v62, 644LL, 0LL, (uint64_t)"Ce", v15, v16, v17, v18, *(void *)v9);
    uint64_t v23 = byte_2070DC;
    if ((byte_2070DC & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_248.nreloc, 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    if ([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4)
    {
      char v30 = 0LL;
      goto LABEL_42;
    }

    uint64_t v29 = mach_absolute_time();
    char v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5200LL))(a1, a2);
    uint64_t v31 = mach_absolute_time() - v29;
    uint64_t v32 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v33 = v62[0];
      *((void *)v62[0] + 2) = v29;
      v33[3] = v31;
      if (!gCheckGLErrors) {
        goto LABEL_42;
      }
    }

    else
    {
      unsigned int v56 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
      unsigned int v57 = v62[0];
      *((void *)v62[0] + 3) = v56;
      v57[2] = __udivti3(v32 * v29, (v32 * (unsigned __int128)v29) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_42;
      }
    }

    check_errors(v9);
LABEL_42:
    GPUTools::FB::Encode((uint64_t)v62, 4294955008LL, (uint64_t)"ub", v24, v25, v26, v27, v28, v30);
    uint64_t v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v35) {
      uint64_t v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v36);
    }
    unint64_t v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
    if ((_DWORD)v38) {
      uint64_t v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v38, v37);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v9, (uint64_t)v62);
    }
    id v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)v62);
    id v40 = *(unsigned int *)(v9 + 3404);
    if ((_DWORD)v40 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      id v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v23 & 2) == 0) {
        goto LABEL_51;
      }
      uint64_t v54 = 2LL;
      id v55 = 644LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v40, v9);
LABEL_51:
    unsigned int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
    unsigned int v42 = (unsigned int *)((char *)v41 + 56);
    do
      unsigned int v43 = __ldaxr(v42);
    while (__stlxr(1u, v42));
    if (v43 == 1)
    {
      do
      {
        while (*v42 == 1)
          ;
        do
          uint64_t v44 = __ldaxr(v42);
        while (__stlxr(1u, v42));
      }

      while (v44 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v42);
    if ((_DWORD)v30 && *(void *)(v9 + 80) != *(void *)(v9 + 72)) {
      wrapper_copyout_harvest_list_buffer((char **)v9, a2);
    }
    do
    {
      uint64_t v45 = __ldaxr(v10);
      uint64_t v46 = v45 - 1;
    }

    while (__stlxr(v46, v10));
    if (gCheckGLErrors) {
      unsigned int v47 = v46 < 1;
    }
    else {
      unsigned int v47 = 1;
    }
    if (!v47) {
      handle_opengl_thread_conflict((const void **)v9);
    }
    goto LABEL_66;
  }

  do
    unsigned int v49 = __ldaxr(v10);
  while (__stlxr(v49 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  char v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5200LL))(a1, a2);
LABEL_66:
  if (v62[0]) {
    free(v62[0]);
  }
  return v30;
}

    uint64_t v37 = *v23;
    if ((int)v37 >= 1)
    {
      unint64_t v38 = DYGetGLGuestAppClient(v32);
      GPUTools::Interpose::DYSavePointer(v38, v37, v67, v17 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      *(_BYTE *)(strlen((const char *)(v17 + 4709)) + v17 + 4708) = 85;
      unsigned int v43 = v70;
      uint64_t v68 = *((_OWORD *)v70 + 1);
      uint64_t v71 = v70;
      if (v72 >= 0x24)
      {
        *((_DWORD *)v70 + 8) = 0;
        *unsigned int v43 = 0u;
        v43[1] = 0u;
      }

      GPUTools::FB::Encode((uint64_t)&v70, 934LL, 256LL, v17 + 4709, v39, v40, v41, v42, *(void *)v17);
      *((_OWORD *)v70 + 1) = v68;
    }

    uint64_t v44 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v44) {
      uint64_t v44 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v70, v45);
    }
    unsigned int v47 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v17 + 3404);
    if ((_DWORD)v47) {
      uint64_t v44 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v70, v47, v46);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v44), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v17, (uint64_t)&v70);
    }
    unsigned int v48 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v17 + 3480),  (GPUTools::FB::Fbuf *)(v17 + 3520),  (GPUTools::FB *)&v70);
    unsigned int v49 = *(unsigned int *)(v17 + 3404);
    if ((_DWORD)v49 && gBreakOnError)
    {
      __int128 v62 = 3LL;
      int v63 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_50;
      }
      __int128 v62 = 2LL;
      int v63 = 934LL;
    }

    breakpoint_break((uint64_t)&v70, (volatile int *)v63, v62, v49, v17);
LABEL_50:
    unsigned int v50 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v48) defaultFbufStream];
    signed int v51 = (unsigned int *)((char *)v50 + 56);
    do
      BOOL v52 = __ldaxr(v51);
    while (__stlxr(1u, v51));
    if (v52 == 1)
    {
      do
      {
        while (*v51 == 1)
          ;
        do
          unsigned int v53 = __ldaxr(v51);
        while (__stlxr(1u, v51));
      }

      while (v53 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v50, (GPUTools::FB::Fbuf *)&v70, *(unsigned int *)v70, 1);
    atomic_store(0, v51);
    do
    {
      uint64_t v54 = __ldaxr(v18);
      id v55 = v54 - 1;
    }

    while (__stlxr(v55, v18));
    if (gCheckGLErrors) {
      unsigned int v56 = v55 < 1;
    }
    else {
      unsigned int v56 = 1;
    }
    if (!v56) {
      handle_opengl_thread_conflict((const void **)v17);
    }
    goto LABEL_63;
  }

  do
    unsigned int v57 = __ldaxr(v18);
  while (__stlxr(v57 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, unsigned int *, void *))(*(void *)(v17 + 24)
                                                                                             + 7096LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_63:
  if (v70) {
    free(v70);
  }
}

void sub_41C44( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, void *a21)
{
  if (a21) {
    free(a21);
  }
  _Unwind_Resume(exception_object);
}

void get_active_uniform_block_name( __GLIContextRec *a1, uint64_t a2, unint64_t a3, uint64_t a4, int *a5, char *a6)
{
  uint64_t v11 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v11) {
    goto LABEL_12;
  }
  uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v13 = v11[4];
    BOOL v14 = v13 >= (unint64_t)a1;
    else {
      uint64_t v15 = v11 + 1;
    }
    if (v14) {
      uint64_t v12 = (uint64_t)v11;
    }
    uint64_t v11 = (void *)*v15;
  }

  while (*v15);
  if (v12 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v12 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v16 = *(void *)(v12 + 40);
  unsigned int v17 = (unsigned int *)(v16 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v16);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_72:
        unsigned int v55 = __ldaxr(v17);
      while (__stlxr(v55 - 1, v17));
      unsigned int v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unint64_t, uint64_t, int *, char *))(*(void *)(v16 + 24) + 3568LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v16 + 4838) = 1;
  uint64_t v66 = 0LL;
  unsigned int v67 = 0LL;
  unsigned int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    int v65 = 0;
    if (a5) {
      uint64_t v22 = a5;
    }
    else {
      uint64_t v22 = &v65;
    }
    *uint64_t v22 = 0;
    if ((_DWORD)a3 == -1) {
      strcpy((char *)(v16 + 4709), "Cuiuii");
    }
    else {
      strcpy((char *)(v16 + 4709), "CuiV<ui>i");
    }
    if (a5) {
      uint64_t v23 = "@1i";
    }
    else {
      uint64_t v23 = "t";
    }
    strlcat((char *)(v16 + 4709), v23, 0x40uLL);
    strlcat((char *)(v16 + 4709), "t", 0x40uLL);
    int v62 = a3;
    if ((_DWORD)a3 != -1) {
      snprintf(__str, 0x28uLL, "ub_%016lx_%u_%u", **(void **)(v16 + 40), a2, a3);
    }
    GPUTools::FB::Encode((uint64_t)&v66, 826LL, 256LL, v16 + 4709, v24, v25, v26, v27, *(void *)v16);
    uint64_t v61 = a2;
    char v29 = byte_207192;
    if ((byte_207192 & 1) != 0) {
      breakpoint_break((uint64_t)&v66, (volatile int *)&stru_338.sectname[2], 1LL, *(unsigned int *)(v16 + 3404), v16);
    }
    uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
    if (!(v30 & 0x10 | v29 & 4))
    {
      uint64_t v31 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unint64_t, uint64_t, int *, char *))(*(void *)(v16 + 32) + 3568LL))( a1,  v61,  a3,  a4,  v22,  a6);
      uint64_t v30 = mach_absolute_time();
      uint64_t v32 = v30 - v31;
      a3 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v66;
        *((void *)v66 + 2) = v31;
        v33[3] = v32;
        LODWORD(a3) = v62;
        if (!gCheckGLErrors) {
          goto LABEL_39;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
        uint64_t v60 = v66;
        *((void *)v66 + 3) = v59;
        uint64_t v30 = __udivti3(a3 * v31, (a3 * (unsigned __int128)v31) >> 64);
        v60[2] = v30;
        LODWORD(a3) = v62;
        if (!gCheckGLErrors) {
          goto LABEL_39;
        }
      }

      uint64_t v30 = check_errors(v16);
    }

void sub_422A4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, void *a23)
{
  if (a23) {
    free(a23);
  }
  _Unwind_Resume(exception_object);
}

void uniform_block_binding(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_56:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      unsigned int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 3576LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    snprintf(__str, 0x28uLL, "ub_%016lx_%u_%u", **(void **)(v13 + 40), a2, a3);
    GPUTools::FB::Encode((uint64_t)v53, 832LL, (uint64_t)"CuiV<ui>ui", v19, v20, v21, v22, v23, *(void *)v13);
    char v25 = byte_207198;
    if ((byte_207198 & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_338.sectname[8], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 3576LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v53[0];
        *((void *)v53[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        unsigned int v52 = v53[0];
        *((void *)v53[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v26 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  id v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  void *v53[2];
  int v54;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_56:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      unsigned int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 3576LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (uint64_t v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    GPUTools::FB::Encode((uint64_t)v53, 832LL, (uint64_t)"Cuiuiui", v18, v19, v20, v21, v22, *(void *)v13);
    char v25 = byte_207198;
    if ((byte_207198 & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_338.sectname[8], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 3576LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v53[0];
        *((void *)v53[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        unsigned int v52 = v53[0];
        *((void *)v53[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v26 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 3576LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 3576LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 3576LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 3576LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  uint64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    uint64_t v22 = __ldaxr(v14);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_42744( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void blend_equation_separate(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      id v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3664LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  int v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    id v18 = (char *)v53;
    BOOL v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v47 = (311 - v21) & 0xFFFFFF00;
    v55 += v47;
    id v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        int v54 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 25;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        *((_DWORD *)v18 + 9) = 6645059;
        *((void *)v18 + 5) = *(void *)v11;
        *((_DWORD *)v18 + 12) = a2;
        *((_DWORD *)v18 + 13) = a3;
        char v23 = byte_206E71;
        if ((byte_206E71 & 1) != 0) {
          breakpoint_break((uint64_t)&v53, (int *)((char *)&dword_18 + 1), 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3664LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            uint64_t v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      id v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3664LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  int v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    id v18 = (char *)v53;
    BOOL v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v47 = (311 - v21) & 0xFFFFFF00;
    v55 += v47;
    id v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        int v54 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 25;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        *((_DWORD *)v18 + 9) = 6645059;
        *((void *)v18 + 5) = *(void *)v11;
        *((_DWORD *)v18 + 12) = a2;
        *((_DWORD *)v18 + 13) = a3;
        char v23 = byte_206E71;
        if ((byte_206E71 & 1) != 0) {
          breakpoint_break((uint64_t)&v53, (int *)((char *)&dword_18 + 1), 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3664LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            uint64_t v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3664LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3664LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    BOOL v17 = __ldaxr(v12);
    id v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3664LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3664LL))(a1, a2, a3);
  id v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_42C1C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void sample_coverage(__GLIContextRec *a1, float a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      id v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 3672LL))(a1, a3, a2);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  int v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    id v18 = (char *)v53;
    BOOL v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    id v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        int v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 514;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Cfub");
        *(void *)(v18 + 44) = *(void *)v11;
        *((float *)v18 + 13) = a2;
        v18[56] = a3;
        char v23 = byte_20705A;
        if ((byte_20705A & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)&stru_1F8.sectname[10],  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 3672LL))(a1, a3, a2);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            uint64_t v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      id v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 3672LL))(a1, a3, a2);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  int v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    id v18 = (char *)v53;
    BOOL v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    id v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        int v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 514;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Cfub");
        *(void *)(v18 + 44) = *(void *)v11;
        *((float *)v18 + 13) = a2;
        v18[56] = a3;
        char v23 = byte_20705A;
        if ((byte_20705A & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)&stru_1F8.sectname[10],  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 3672LL))(a1, a3, a2);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            uint64_t v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 3672LL))(a1, a3, a2);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 3672LL))(a1, a3, a2);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    BOOL v17 = __ldaxr(v12);
    id v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 3672LL))(a1, a3, a2);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 3672LL))(a1, a3, a2);
  id v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_4310C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void gen_fences_APPLE(__GLIContextRec *a1, uint64_t a2, unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 3704LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 202LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_206F22;
    if ((byte_206F22 & 1) != 0) {
      breakpoint_break((uint64_t)&v57, (volatile int *)&stru_B8.segname[2], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 3704LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  _OWORD *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __int128 v56;
  void *v57;
  void *v58;
  unsigned int v59;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 3704LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 202LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_206F22;
    if ((byte_206F22 & 1) != 0) {
      breakpoint_break((uint64_t)&v57, (volatile int *)&stru_B8.segname[2], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 3704LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 3704LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 3704LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 3704LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 3704LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_435AC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void delete_fences_APPLE(__GLIContextRec *a1, uint64_t a2, const unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 3712LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)v50, 120LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206ED0;
    if ((byte_206ED0 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)stru_68.segname, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 3712LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 3712LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)v50, 120LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206ED0;
    if ((byte_206ED0 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)stru_68.segname, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 3712LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    char v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 3712LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 3712LL))( a1,  a2,  a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        unint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 3712LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 3712LL))( a1,  a2,  a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      id v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    char v22 = v21 < 1;
  }
  else {
    char v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_439DC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void set_fence_APPLE(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3720LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 538;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_207072;
        if ((byte_207072 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_1F8.addr + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3720LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            id v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3720LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v51 = 0LL;
  uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 538;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_207072;
        if ((byte_207072 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_1F8.addr + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3720LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            id v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3720LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3720LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    BOOL v15 = __ldaxr(v10);
    id v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3720LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3720LL))(a1, a2);
  id v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      unint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_43EA0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_fence_APPLE(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3728LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 328;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA0;
        if ((byte_206FA0 & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_108.flags, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3728LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 328LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        BOOL v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        unsigned int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3728LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3728LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 328;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA0;
        if ((byte_206FA0 & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_108.flags, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3728LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 328LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        BOOL v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        unsigned int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3728LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3728LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3728LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3728LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3728LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3728LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3728LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  uint64_t v3 = a1;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3728LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3728LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_443AC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t test_fence_APPLE(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3736LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 548;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_20707C;
        if ((byte_20707C & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (_DWORD *)&stru_1F8.size + 1, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3736LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 548LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        BOOL v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        unsigned int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3736LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3736LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 548;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_20707C;
        if ((byte_20707C & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (_DWORD *)&stru_1F8.size + 1, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3736LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 548LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        BOOL v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        unsigned int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3736LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3736LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3736LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3736LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3736LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3736LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3736LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  uint64_t v3 = a1;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3736LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3736LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_448B4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void finish_fence_APPLE(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3744LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v51 = 0LL;
  int v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        int v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 176;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206F08;
        if ((byte_206F08 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_68.reserved2, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3744LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            id v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3744LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v51 = 0LL;
  int v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        int v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 176;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206F08;
        if ((byte_206F08 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_68.reserved2, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3744LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            id v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3744LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3744LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    BOOL v15 = __ldaxr(v10);
    id v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 3744LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 3744LL))(a1, a2);
  id v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_44D80( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t test_object_APPLE(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v11);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_57:
        unsigned int v52 = __ldaxr(v12);
      while (__stlxr(v52 - 1, v12));
      unsigned int v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3752LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v60 = 0LL;
  uint64_t v61 = 0LL;
  unsigned int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v60;
    int64_t v17 = v61;
    int64_t v19 = v61 - (_BYTE *)v60;
    unsigned int v20 = v62;
    unint64_t v21 = v62 - (v61 - (_BYTE *)v60);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v54 = (315 - v21) & 0xFFFFFF00;
    v62 += v54;
    unsigned int v18 = (char *)malloc(v54 + v20);
    unsigned int v60 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        uint64_t v61 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v60);
        *((_DWORD *)v18 + 1) = 549;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v59 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v59);
        *((void *)v18 + 1) = v59;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_20707D;
        if ((byte_20707D & 1) != 0) {
          breakpoint_break( (uint64_t)&v60,  (volatile int *)((char *)&stru_1F8.size + 5),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        if ([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4)
        {
          uint64_t v30 = 0LL;
          goto LABEL_29;
        }

        uint64_t v29 = mach_absolute_time();
        uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3752LL))( a1,  a2,  a3);
        uint64_t v31 = mach_absolute_time() - v29;
        unint64_t v32 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          id v33 = v60;
          *((void *)v60 + 2) = v29;
          v33[3] = v31;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v57 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
          uint64_t v58 = v60;
          *((void *)v60 + 3) = v57;
          v58[2] = __udivti3(v32 * v29, (v32 * (unsigned __int128)v29) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v11);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v60, 4294955008LL, (uint64_t)"ub", v24, v25, v26, v27, v28, v30);
        id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v35) {
          id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v60, v36);
        }
        signed int v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
        if ((_DWORD)v38) {
          id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v60, v38, v37);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v11, (uint64_t)&v60);
        }
        BOOL v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v60);
        uint64_t v40 = *(unsigned int *)(v11 + 3404);
        if ((_DWORD)v40 && gBreakOnError)
        {
          uint64_t v55 = 3LL;
          uint64_t v56 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v23 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v55 = 2LL;
          uint64_t v56 = 549LL;
        }

        breakpoint_break((uint64_t)&v60, (volatile int *)v56, v55, v40, v11);
LABEL_38:
        uint64_t v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
        id v42 = (unsigned int *)((char *)v41 + 56);
        do
          unsigned int v43 = __ldaxr(v42);
        while (__stlxr(1u, v42));
        if (v43 == 1)
        {
          do
          {
            while (*v42 == 1)
              ;
            do
              unsigned int v44 = __ldaxr(v42);
            while (__stlxr(1u, v42));
          }

          while (v44 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v60, *(unsigned int *)v60, 1);
        atomic_store(0, v42);
        do
        {
          unsigned int v45 = __ldaxr(v12);
          signed int v46 = v45 - 1;
        }

        while (__stlxr(v46, v12));
        if (gCheckGLErrors) {
          BOOL v47 = v46 < 1;
        }
        else {
          BOOL v47 = 1;
        }
        if (!v47) {
          handle_opengl_thread_conflict((const void **)v11);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v18, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v49 = __ldaxr(v12);
  while (__stlxr(v49 - 1, v12));
  [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
  uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3752LL))(a1, a2, a3);
LABEL_51:
  if (v60) {
    free(v60);
  }
  return v30;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  uint64_t v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  uint64_t result;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  int v54;
  uint64_t v55;
  uint64_t v56;
  uint64_t v57;
  void *v58;
  __uint64_t v59;
  void *v60;
  char *v61;
  unsigned int v62;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v11);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_57:
        unsigned int v52 = __ldaxr(v12);
      while (__stlxr(v52 - 1, v12));
      unsigned int v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3752LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v60 = 0LL;
  uint64_t v61 = 0LL;
  unsigned int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v60;
    int64_t v17 = v61;
    int64_t v19 = v61 - (_BYTE *)v60;
    unsigned int v20 = v62;
    unint64_t v21 = v62 - (v61 - (_BYTE *)v60);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v54 = (315 - v21) & 0xFFFFFF00;
    v62 += v54;
    unsigned int v18 = (char *)malloc(v54 + v20);
    unsigned int v60 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        uint64_t v61 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v60);
        *((_DWORD *)v18 + 1) = 549;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v59 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v59);
        *((void *)v18 + 1) = v59;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_20707D;
        if ((byte_20707D & 1) != 0) {
          breakpoint_break( (uint64_t)&v60,  (volatile int *)((char *)&stru_1F8.size + 5),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        if ([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4)
        {
          uint64_t v30 = 0LL;
          goto LABEL_29;
        }

        uint64_t v29 = mach_absolute_time();
        uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3752LL))( a1,  a2,  a3);
        uint64_t v31 = mach_absolute_time() - v29;
        unint64_t v32 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          id v33 = v60;
          *((void *)v60 + 2) = v29;
          v33[3] = v31;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v57 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
          uint64_t v58 = v60;
          *((void *)v60 + 3) = v57;
          v58[2] = __udivti3(v32 * v29, (v32 * (unsigned __int128)v29) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v11);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v60, 4294955008LL, (uint64_t)"ub", v24, v25, v26, v27, v28, v30);
        id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v35) {
          id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v60, v36);
        }
        signed int v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
        if ((_DWORD)v38) {
          id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v60, v38, v37);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v11, (uint64_t)&v60);
        }
        BOOL v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v60);
        uint64_t v40 = *(unsigned int *)(v11 + 3404);
        if ((_DWORD)v40 && gBreakOnError)
        {
          uint64_t v55 = 3LL;
          uint64_t v56 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v23 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v55 = 2LL;
          uint64_t v56 = 549LL;
        }

        breakpoint_break((uint64_t)&v60, (volatile int *)v56, v55, v40, v11);
LABEL_38:
        uint64_t v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
        id v42 = (unsigned int *)((char *)v41 + 56);
        do
          unsigned int v43 = __ldaxr(v42);
        while (__stlxr(1u, v42));
        if (v43 == 1)
        {
          do
          {
            while (*v42 == 1)
              ;
            do
              unsigned int v44 = __ldaxr(v42);
            while (__stlxr(1u, v42));
          }

          while (v44 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v60, *(unsigned int *)v60, 1);
        atomic_store(0, v42);
        do
        {
          unsigned int v45 = __ldaxr(v12);
          signed int v46 = v45 - 1;
        }

        while (__stlxr(v46, v12));
        if (gCheckGLErrors) {
          BOOL v47 = v46 < 1;
        }
        else {
          BOOL v47 = 1;
        }
        if (!v47) {
          handle_opengl_thread_conflict((const void **)v11);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v18, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v49 = __ldaxr(v12);
  while (__stlxr(v49 - 1, v12));
  [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
  uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3752LL))(a1, a2, a3);
LABEL_51:
  if (v60) {
    free(v60);
  }
  return v30;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v11);
    char v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_35:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3752LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unint64_t v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3752LL))( a1,  a2,  a3);
    }
  }

  int64_t v17 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3752LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v12);
    int64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    unsigned int v20 = v19 < 1;
  }
  else {
    unsigned int v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v17;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v12);
      while (__stlxr(v28 - 1, v12));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3752LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v25 = __ldaxr(v12);
      while (__stlxr(v25 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3752LL))( a1,  a2,  a3);
    }
  }

  int64_t v17 = mach_absolute_time();
  unsigned int v18 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3752LL))(a1, a2, a3);
  int64_t v19 = mach_absolute_time();
  unsigned int v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v11);
      }
    }
  }

  do
  {
    unint64_t v21 = __ldaxr(v12);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    char v23 = v22 < 1;
  }
  else {
    char v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v18;
}

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  id v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v22;
  dispatch_queue_s *v23;
  unsigned int v24;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  id v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      uint64_t v22 = __ldaxr(v12);
    while (__stlxr(v22 - 1, v12));
    char v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3752LL))(v5, a2, a3);
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v16) state] == (char *)&dword_0 + 1)
  {
    int64_t v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v17 & 1) != 0)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3752LL))( v5,  a2,  a3);
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v12);
    int64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    unsigned int v20 = v19 < 1;
  }
  else {
    unsigned int v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return 0LL;
}

void sub_4529C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void finish_object_APPLE(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      signed int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3760LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v53 = 0LL;
  int v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    unsigned int v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        int v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 177;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_206F09;
        if ((byte_206F09 & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)((char *)&stru_68.reserved2 + 1),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3760LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            id v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      signed int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3760LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v53 = 0LL;
  int v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    unsigned int v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        int v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 177;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_206F09;
        if ((byte_206F09 & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)((char *)&stru_68.reserved2 + 1),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3760LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            id v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3760LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3760LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    int64_t v17 = __ldaxr(v12);
    unsigned int v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 3760LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  int64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 3760LL))(a1, a2, a3);
  unsigned int v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_4577C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attrib1f(__GLIContextRec *a1, uint64_t a2, float a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      unsigned int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 3808LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 675LL, 0LL, (uint64_t)"Cuif", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_2070FB;
    if ((byte_2070FB & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_298.sectname[11], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 3808LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        uint64_t v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      unsigned int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 3808LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 675LL, 0LL, (uint64_t)"Cuif", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_2070FB;
    if ((byte_2070FB & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_298.sectname[11], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 3808LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        uint64_t v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

void sub_45BD0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attrib2f(__GLIContextRec *a1, uint64_t a2, float a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v13);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_56:
        unsigned int v46 = __ldaxr(v14);
      while (__stlxr(v46 - 1, v14));
      uint64_t v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 24) + 3832LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v52[0] = 0LL;
  v52[1] = 0LL;
  int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)v52, 681LL, 0LL, (uint64_t)"Cuiff", v18, v19, v20, v21, *(void *)v13);
    char v24 = byte_207101;
    if ((byte_207101 & 1) != 0) {
      breakpoint_break((uint64_t)v52, (volatile int *)&stru_298.segname[1], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 32) + 3832LL))( a1,  a2,  a3,  a4);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      unint64_t v28 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v29 = v52[0];
        *((void *)v52[0] + 2) = v26;
        v29[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v50 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        int v51 = v52[0];
        *((void *)v52[0] + 3) = v50;
        uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
        v51[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v25 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  id v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  unint64_t v28;
  void *v29;
  id v30;
  GPUTools::FB::Fbuf *v31;
  unsigned int v32;
  GPUTools::FB::Fbuf *v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  GPUTools::FB::Stream *v36;
  unsigned int *v37;
  unsigned int v38;
  unsigned int v39;
  unsigned int v40;
  signed int v41;
  BOOL v42;
  unsigned int v43;
  uint64_t v44;
  id v45;
  unsigned int v46;
  dispatch_queue_s *v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  void *v52[2];
  int v53;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v13);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_56:
        unsigned int v46 = __ldaxr(v14);
      while (__stlxr(v46 - 1, v14));
      uint64_t v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 24) + 3832LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v52[0] = 0LL;
  v52[1] = 0LL;
  int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)v52, 681LL, 0LL, (uint64_t)"Cuiff", v18, v19, v20, v21, *(void *)v13);
    char v24 = byte_207101;
    if ((byte_207101 & 1) != 0) {
      breakpoint_break((uint64_t)v52, (volatile int *)&stru_298.segname[1], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 32) + 3832LL))( a1,  a2,  a3,  a4);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      unint64_t v28 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v29 = v52[0];
        *((void *)v52[0] + 2) = v26;
        v29[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v50 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        int v51 = v52[0];
        *((void *)v52[0] + 3) = v50;
        uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
        v51[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v25 = check_errors(v13);
    }

void sub_4603C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attrib3f(__GLIContextRec *a1, uint64_t a2, float a3, float a4, float a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v15);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v16);
      while (__stlxr(v48 - 1, v16));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 24) + 3856LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    GPUTools::FB::Encode((uint64_t)v54, 687LL, 0LL, (uint64_t)"Cuifff", v20, v21, v22, v23, *(void *)v15);
    char v26 = byte_207107;
    if ((byte_207107 & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)&stru_298.segname[7], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 32) + 3856LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        int v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  id v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  void *v54[2];
  int v55;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v15);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v16);
      while (__stlxr(v48 - 1, v16));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 24) + 3856LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    GPUTools::FB::Encode((uint64_t)v54, 687LL, 0LL, (uint64_t)"Cuifff", v20, v21, v22, v23, *(void *)v15);
    char v26 = byte_207107;
    if ((byte_207107 & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)&stru_298.segname[7], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 32) + 3856LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        int v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v15);
    }

void sub_464CC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attrib4f(__GLIContextRec *a1, uint64_t a2, float a3, float a4, float a5, float a6)
{
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v17);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_56:
        unsigned int v50 = __ldaxr(v18);
      while (__stlxr(v50 - 1, v18));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 24) + 3880LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v56, 701LL, 0LL, (uint64_t)"Cuiffff", v22, v23, v24, v25, *(void *)v17);
    char v28 = byte_207115;
    if ((byte_207115 & 1) != 0) {
      breakpoint_break( (uint64_t)v56,  (volatile int *)((char *)&stru_298.addr + 5),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 32) + 3880LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        int v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v29 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  id v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  void *v56[2];
  int v57;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v17);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_56:
        unsigned int v50 = __ldaxr(v18);
      while (__stlxr(v50 - 1, v18));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 24) + 3880LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v56, 701LL, 0LL, (uint64_t)"Cuiffff", v22, v23, v24, v25, *(void *)v17);
    char v28 = byte_207115;
    if ((byte_207115 & 1) != 0) {
      breakpoint_break( (uint64_t)v56,  (volatile int *)((char *)&stru_298.addr + 5),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 32) + 3880LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        int v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v29 = check_errors(v17);
    }

void sub_4697C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attrib1fv(__GLIContextRec *a1, uint64_t a2, const float *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 24) + 3912LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 676LL, 0LL, (uint64_t)"Cui@1f", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_2070FC;
    if ((byte_2070FC & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_298.sectname[12], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 32) + 3912LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 24) + 3912LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 676LL, 0LL, (uint64_t)"Cuip", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_2070FC;
    if ((byte_2070FC & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_298.sectname[12], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 32) + 3912LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

void sub_46DBC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attrib2fv(__GLIContextRec *a1, uint64_t a2, const float *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 24) + 3936LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 682LL, 0LL, (uint64_t)"Cui@2f", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_207102;
    if ((byte_207102 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_298.segname[2], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 32) + 3936LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 24) + 3936LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 682LL, 0LL, (uint64_t)"Cuip", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_207102;
    if ((byte_207102 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_298.segname[2], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 32) + 3936LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

void sub_471FC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attrib3fv(__GLIContextRec *a1, uint64_t a2, const float *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 24) + 3960LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 688LL, 0LL, (uint64_t)"Cui@3f", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_207108;
    if ((byte_207108 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_298.segname[8], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 32) + 3960LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 24) + 3960LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 688LL, 0LL, (uint64_t)"Cuip", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_207108;
    if ((byte_207108 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_298.segname[8], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 32) + 3960LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

void sub_47640( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attrib4fv(__GLIContextRec *a1, uint64_t a2, const float *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 24) + 4024LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 702LL, 0LL, (uint64_t)"Cui@4f", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_207116;
    if ((byte_207116 & 1) != 0) {
      breakpoint_break( (uint64_t)v50,  (volatile int *)((char *)&stru_298.addr + 6),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 32) + 4024LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 24) + 4024LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 702LL, 0LL, (uint64_t)"Cuip", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_207116;
    if ((byte_207116 & 1) != 0) {
      breakpoint_break( (uint64_t)v50,  (volatile int *)((char *)&stru_298.addr + 6),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 32) + 4024LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

void sub_47A84( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attrib_pointer( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, const void *a7)
{
  signed int v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      uint64_t v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    signed int v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  id v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v19);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_58:
        unsigned int v53 = __ldaxr(v20);
      while (__stlxr(v53 - 1, v20));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 24) + 4088LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v19 + 4838) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v28 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v28))
  {
    int v29 = *(_DWORD *)(v19 + 2032);
    if (a2 <= 0x1F)
    {
      uint64_t v30 = v19 + 32LL * a2;
      *(_DWORD *)(v30 + 192) = a3;
      *(_DWORD *)(v30 + 196) = a6;
      *(void *)(v30 + 176) = a7;
      *(_BYTE *)(v30 + 204) = (_DWORD)a5 != 0;
      *(_BYTE *)(v30 + 205) = 0;
      *(_DWORD *)(v30 + 184) = v29;
      *(_DWORD *)(v30 + 188) = a4;
    }

    GPUTools::FB::Encode( (uint64_t)v60,  730LL,  2 * (v29 == 0),  (uint64_t)"Cuiieubit",  v24,  v25,  v26,  v27,  *(void *)v19);
    char v59 = byte_207132;
    if ((byte_207132 & 1) != 0) {
      breakpoint_break( (uint64_t)v60,  (volatile int *)((char *)&stru_298.flags + 2),  1LL,  *(unsigned int *)(v19 + 3404),  v19);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v32 & 0x10 | v59 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 32) + 4088LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v36 = v60[0];
        *((void *)v60[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        uint64_t v58 = v60[0];
        *((void *)v60[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v32 = check_errors(v19);
    }

{
  void *v14;
  uint64_t v15;
  unint64_t v16;
  BOOL v17;
  void *v18;
  uint64_t v19;
  unsigned int *v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  id v28;
  int v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  uint64_t v34;
  unint64_t v35;
  void *v36;
  id v37;
  GPUTools::FB::Fbuf *v38;
  unsigned int v39;
  GPUTools::FB::Fbuf *v40;
  dispatch_queue_s *v41;
  uint64_t v42;
  GPUTools::FB::Stream *v43;
  unsigned int *v44;
  unsigned int v45;
  unsigned int v46;
  unsigned int v47;
  signed int v48;
  BOOL v49;
  unsigned int v50;
  uint64_t v51;
  id v52;
  unsigned int v53;
  dispatch_queue_s *v54;
  uint64_t v55;
  uint64_t v56;
  uint64_t v57;
  void *v58;
  char v59;
  void *v60[2];
  int v61;
  signed int v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      uint64_t v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    signed int v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  id v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v19);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_58:
        unsigned int v53 = __ldaxr(v20);
      while (__stlxr(v53 - 1, v20));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 24) + 4088LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v19 + 4838) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v28 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v28))
  {
    int v29 = *(_DWORD *)(v19 + 2032);
    if (a2 <= 0x1F)
    {
      uint64_t v30 = v19 + 32LL * a2;
      *(_DWORD *)(v30 + 192) = a3;
      *(_DWORD *)(v30 + 196) = a6;
      *(void *)(v30 + 176) = a7;
      *(_BYTE *)(v30 + 204) = (_DWORD)a5 != 0;
      *(_BYTE *)(v30 + 205) = 0;
      *(_DWORD *)(v30 + 184) = v29;
      *(_DWORD *)(v30 + 188) = a4;
    }

    GPUTools::FB::Encode( (uint64_t)v60,  730LL,  2 * (v29 == 0),  (uint64_t)"Cuiieubit",  v24,  v25,  v26,  v27,  *(void *)v19);
    char v59 = byte_207132;
    if ((byte_207132 & 1) != 0) {
      breakpoint_break( (uint64_t)v60,  (volatile int *)((char *)&stru_298.flags + 2),  1LL,  *(unsigned int *)(v19 + 3404),  v19);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v32 & 0x10 | v59 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 32) + 4088LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v36 = v60[0];
        *((void *)v60[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        uint64_t v58 = v60[0];
        *((void *)v60[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v32 = check_errors(v19);
    }

{
  void *v14;
  uint64_t v15;
  unint64_t v16;
  BOOL v17;
  void *v18;
  uint64_t v19;
  unsigned int *v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  id v24;
  unsigned int v25;
  signed int v26;
  BOOL v27;
  unsigned int v28;
  uint64_t v29;
  id v30;
  unsigned int v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  signed int v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      uint64_t v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    signed int v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  id v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    uint64_t v30 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    int v29 = handle_opengl_thread_conflict((const void **)v19);
    uint64_t v30 = [(id)DYGetGLGuestAppClient(v29) waitOnGraphicsSemaphoreAssertions];
    if ((int)v30 >= 1)
    {
      do
LABEL_34:
        uint64_t v31 = __ldaxr(v20);
      while (__stlxr(v31 - 1, v20));
      uint64_t v32 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v30) graphicsLockWaitQueue];
      dispatch_sync_f(v32, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 24) + 4088LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v19 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v30) state] == (char *)&dword_0 + 1)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v24)
    {
      do
        id v28 = __ldaxr(v20);
      while (__stlxr(v28 - 1, v20));
      [(id)DYGetGLGuestAppClient(v24) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 32) + 4088LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
  ++*(void *)(v19 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v19);
    if (gBreakOnError)
    {
      uint64_t v33 = *(unsigned int *)(v19 + 3404);
      if ((_DWORD)v33) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v33, v19);
      }
    }
  }

  do
  {
    uint64_t v25 = __ldaxr(v20);
    uint64_t v26 = v25 - 1;
  }

  while (__stlxr(v26, v20));
  if (gCheckGLErrors) {
    uint64_t v27 = v26 < 1;
  }
  else {
    uint64_t v27 = 1;
  }
  if (!v27) {
    handle_opengl_thread_conflict((const void **)v19);
  }
}

{
  void *v14;
  uint64_t v15;
  unint64_t v16;
  BOOL v17;
  void *v18;
  uint64_t v19;
  unsigned int *v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  id v24;
  uint64_t v25;
  const void *v26;
  uint64_t v27;
  uint64_t v28;
  int64x2_t v29;
  unsigned int v30;
  signed int v31;
  BOOL v32;
  unsigned int v33;
  uint64_t v34;
  id v35;
  unsigned int v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  signed int v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      uint64_t v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    signed int v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  id v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    unint64_t v35 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v34 = handle_opengl_thread_conflict((const void **)v19);
    unint64_t v35 = [(id)DYGetGLGuestAppClient(v34) waitOnGraphicsSemaphoreAssertions];
    if ((int)v35 >= 1)
    {
      do
LABEL_34:
        unsigned int v36 = __ldaxr(v20);
      while (__stlxr(v36 - 1, v20));
      id v37 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v35) graphicsLockWaitQueue];
      dispatch_sync_f(v37, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 24) + 4088LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v19 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v35) state] == (char *)&dword_0 + 1)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v24)
    {
      do
        uint64_t v33 = __ldaxr(v20);
      while (__stlxr(v33 - 1, v20));
      [(id)DYGetGLGuestAppClient(v24) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v25 = mach_absolute_time();
  uint64_t v26 = a7;
  uint64_t v27 = v25;
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v19 + 32) + 4088LL))( a1,  a2,  a3,  a4,  a5,  a6,  v26);
  id v28 = mach_absolute_time();
  int v29 = vdupq_n_s64(1uLL);
  v29.i64[0] = v28 - v27;
  *(int64x2_t *)(v19 + 3696) = vaddq_s64(v29, *(int64x2_t *)(v19 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v19);
    if (gBreakOnError)
    {
      unsigned int v38 = *(unsigned int *)(v19 + 3404);
      if ((_DWORD)v38) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v38, v19);
      }
    }
  }

  do
  {
    uint64_t v30 = __ldaxr(v20);
    uint64_t v31 = v30 - 1;
  }

  while (__stlxr(v31, v20));
  if (gCheckGLErrors) {
    uint64_t v32 = v31 < 1;
  }
  else {
    uint64_t v32 = 1;
  }
  if (!v32) {
    handle_opengl_thread_conflict((const void **)v19);
  }
}

void sub_47F48( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, void *a18)
{
  if (a18) {
    free(a18);
  }
  _Unwind_Resume(exception_object);
}

void enable_vertex_attrib_array(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4096LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  id v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    unint64_t v16 = (char *)v51;
    uint64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    unint64_t v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        id v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 155;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206EF3;
        if ((byte_206EF3 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_68.offset + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4096LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            BOOL v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4096LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  id v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    unint64_t v16 = (char *)v51;
    uint64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    unint64_t v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        id v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 155;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206EF3;
        if ((byte_206EF3 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_68.offset + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4096LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            BOOL v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4096LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4096LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    uint64_t v15 = __ldaxr(v10);
    unint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4096LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4096LL))(a1, a2);
  unint64_t v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_48410( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void disable_vertex_attrib_array(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4104LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  id v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    unint64_t v16 = (char *)v51;
    uint64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    unint64_t v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        id v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 138;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206EE2;
        if ((byte_206EE2 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_68.addr + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4104LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            BOOL v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4104LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v51 = 0LL;
  id v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    unint64_t v16 = (char *)v51;
    uint64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    unint64_t v16 = (char *)malloc(v45 + v18);
    uint64_t v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        id v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 138;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206EE2;
        if ((byte_206EE2 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_68.addr + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4104LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            BOOL v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4104LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4104LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    uint64_t v15 = __ldaxr(v10);
    unint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4104LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4104LL))(a1, a2);
  unint64_t v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_488DC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_vertex_attribfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 4120LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  __int128 v64 = 0LL;
  int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetVertexAttribParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 110LL;
    if (!v63[0]) {
      uint64_t v21 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 307LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F8B;
    if ((byte_206F8B & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_108.size + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 4120LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    signed int v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *signed int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 307LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 307LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 4120LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 4120LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  __int128 v64 = 0LL;
  int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetVertexAttribParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 110LL;
    if (!v63[0]) {
      uint64_t v21 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 307LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F8B;
    if ((byte_206F8B & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_108.size + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 4120LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    signed int v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *signed int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 307LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 307LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 4120LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_48DCC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_vertex_attribiv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 4128LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  __int128 v64 = 0LL;
  int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetVertexAttribParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 308LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F8C;
    if ((byte_206F8C & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (_DWORD *)&stru_108.size + 1, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 4128LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    signed int v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *signed int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 308LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 308LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 4128LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 4128LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  __int128 v64 = 0LL;
  int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetVertexAttribParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 308LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F8C;
    if ((byte_206F8C & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (_DWORD *)&stru_108.size + 1, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 4128LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    signed int v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *signed int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 308LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 308LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 4128LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_492BC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_vertex_attrib_pointerv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, void **a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v13);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_58:
        unsigned int v51 = __ldaxr(v14);
      while (__stlxr(v51 - 1, v14));
      BOOL v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 24) + 4136LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)&v58, 305LL, 256LL, (uint64_t)"Cuie@1t", v18, v19, v20, v21, *(void *)v13);
    char v24 = byte_206F89;
    if ((byte_206F89 & 1) != 0) {
      breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.size + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v23) overrideFlags] & 0x10 | v24 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 32) + 4136LL))( a1,  a2,  a3,  a4);
      uint64_t v30 = mach_absolute_time() - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v58;
        *((void *)v58 + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        unsigned int v56 = v58;
        *((void *)v58 + 3) = v55;
        v56[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  id v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  _OWORD *v33;
  uint64_t v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __int128 v57;
  void *v58;
  void *v59;
  unsigned int v60;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v13);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_58:
        unsigned int v51 = __ldaxr(v14);
      while (__stlxr(v51 - 1, v14));
      BOOL v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 24) + 4136LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)&v58, 305LL, 256LL, (uint64_t)"Cuie@1t", v18, v19, v20, v21, *(void *)v13);
    char v24 = byte_206F89;
    if ((byte_206F89 & 1) != 0) {
      breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.size + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v23) overrideFlags] & 0x10 | v24 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 32) + 4136LL))( a1,  a2,  a3,  a4);
      uint64_t v30 = mach_absolute_time() - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v58;
        *((void *)v58 + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        unsigned int v56 = v58;
        *((void *)v58 + 3) = v55;
        v56[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    char v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    char v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        uint64_t v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 24) + 4136LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        id v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 32) + 4136LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 24) + 4136LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 32) + 4136LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  uint64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    id v22 = __ldaxr(v14);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    char v24 = v23 < 1;
  }
  else {
    char v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_49758( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void point_parameterf(__GLIContextRec *a1, uint64_t a2, float a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      signed int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 4320LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v18 = (char *)v53;
    BOOL v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v47 = (311 - v21) & 0xFFFFFF00;
    v55 += v47;
    uint64_t v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        uint64_t v54 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 444;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        *((_DWORD *)v18 + 9) = 6710595;
        *((void *)v18 + 5) = *(void *)v11;
        *((_DWORD *)v18 + 12) = a2;
        *((float *)v18 + 13) = a3;
        char v23 = byte_207014;
        if ((byte_207014 & 1) != 0) {
          breakpoint_break((uint64_t)&v53, (volatile int *)&stru_1A8.segname[4], 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 4320LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            unsigned int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      signed int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 4320LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v18 = (char *)v53;
    BOOL v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v47 = (311 - v21) & 0xFFFFFF00;
    v55 += v47;
    uint64_t v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        uint64_t v54 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 444;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        *((_DWORD *)v18 + 9) = 6710595;
        *((void *)v18 + 5) = *(void *)v11;
        *((_DWORD *)v18 + 12) = a2;
        *((float *)v18 + 13) = a3;
        char v23 = byte_207014;
        if ((byte_207014 & 1) != 0) {
          breakpoint_break((uint64_t)&v53, (volatile int *)&stru_1A8.segname[4], 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 4320LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            unsigned int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 4320LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 4320LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    BOOL v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 4320LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 4320LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_49C40( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void point_parameterfv(__GLIContextRec *a1, uint64_t a2, const float *a3)
{
  if ((_DWORD)a2 == 33065) {
    unint64_t v6 = "Ce@3f";
  }
  else {
    unint64_t v6 = "Ce@1f";
  }
  uint64_t v7 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v7) {
    goto LABEL_15;
  }
  uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v9 = v7[4];
    BOOL v10 = v9 >= (unint64_t)a1;
    else {
      uint64_t v11 = v7 + 1;
    }
    if (v10) {
      uint64_t v8 = (uint64_t)v7;
    }
    uint64_t v7 = (void *)*v11;
  }

  while (*v11);
  if (v8 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v8 + 32) > (unint64_t)a1) {
LABEL_15:
  }
    uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v12 = *(void *)(v8 + 40);
  unsigned int v13 = (unsigned int *)(v12 + 4640);
  do
  {
    unsigned int v14 = __ldaxr(v13);
    signed int v15 = v14 + 1;
  }

  while (__stlxr(v15, v13));
  if (gCheckGLErrors) {
    BOOL v16 = v15 <= 1;
  }
  else {
    BOOL v16 = 1;
  }
  if (v16)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v12);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v13);
      while (__stlxr(v45 - 1, v13));
      signed int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v12 + 24) + 4328LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v12 + 4838) = 1;
  v51[0] = 0LL;
  v51[1] = 0LL;
  int v52 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::FB::Encode((uint64_t)v51, 445LL, 0LL, (uint64_t)v6, v17, v18, v19, v20, *(void *)v12);
    char v23 = byte_207015;
    if ((byte_207015 & 1) != 0) {
      breakpoint_break((uint64_t)v51, (volatile int *)&stru_1A8.segname[5], 1LL, *(unsigned int *)(v12 + 3404), v12);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v12 + 32) + 4328LL))(a1, a2, a3);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v51[0];
        *((void *)v51[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        uint64_t v50 = v51[0];
        *((void *)v51[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      uint64_t v24 = check_errors(v12);
    }

{
  const char *v6;
  void *v7;
  uint64_t v8;
  unint64_t v9;
  BOOL v10;
  void *v11;
  uint64_t v12;
  unsigned int *v13;
  unsigned int v14;
  signed int v15;
  BOOL v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  id v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  void *v51[2];
  int v52;
  if ((_DWORD)a2 == 33065) {
    unint64_t v6 = "Ce@3f";
  }
  else {
    unint64_t v6 = "Ce@1f";
  }
  uint64_t v7 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v7) {
    goto LABEL_15;
  }
  uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v9 = v7[4];
    BOOL v10 = v9 >= (unint64_t)a1;
    else {
      uint64_t v11 = v7 + 1;
    }
    if (v10) {
      uint64_t v8 = (uint64_t)v7;
    }
    uint64_t v7 = (void *)*v11;
  }

  while (*v11);
  if (v8 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v8 + 32) > (unint64_t)a1) {
LABEL_15:
  }
    uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v12 = *(void *)(v8 + 40);
  unsigned int v13 = (unsigned int *)(v12 + 4640);
  do
  {
    unsigned int v14 = __ldaxr(v13);
    signed int v15 = v14 + 1;
  }

  while (__stlxr(v15, v13));
  if (gCheckGLErrors) {
    BOOL v16 = v15 <= 1;
  }
  else {
    BOOL v16 = 1;
  }
  if (v16)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v12);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v13);
      while (__stlxr(v45 - 1, v13));
      signed int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v12 + 24) + 4328LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v12 + 4838) = 1;
  v51[0] = 0LL;
  v51[1] = 0LL;
  int v52 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::FB::Encode((uint64_t)v51, 445LL, 0LL, (uint64_t)v6, v17, v18, v19, v20, *(void *)v12);
    char v23 = byte_207015;
    if ((byte_207015 & 1) != 0) {
      breakpoint_break((uint64_t)v51, (volatile int *)&stru_1A8.segname[5], 1LL, *(unsigned int *)(v12 + 3404), v12);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v12 + 32) + 4328LL))(a1, a2, a3);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v51[0];
        *((void *)v51[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        uint64_t v50 = v51[0];
        *((void *)v51[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      uint64_t v24 = check_errors(v12);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v8 = v6[4];
    unint64_t v9 = v8 >= (unint64_t)a1;
    else {
      BOOL v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    unsigned int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    signed int v15 = v14 <= 1;
  }
  else {
    signed int v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 24) + 4328LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    BOOL v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 32) + 4328LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v8 = v6[4];
    unint64_t v9 = v8 >= (unint64_t)a1;
    else {
      BOOL v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    unsigned int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    signed int v15 = v14 <= 1;
  }
  else {
    signed int v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 24) + 4328LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    BOOL v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, const float *))(*(void *)(v11 + 32) + 4328LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    id v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_4A070( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void stencil_op_separate(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  BOOL v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unsigned int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    BOOL v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 4688LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __int128 v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    id v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    __int128 v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        id v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)id v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 547;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceeee");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_20707B;
        if ((byte_20707B & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_1F8.size + 3),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 4688LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  BOOL v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unsigned int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    BOOL v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 4688LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __int128 v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    id v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    __int128 v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        id v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)id v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 547;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceeee");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_20707B;
        if ((byte_20707B & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_1F8.size + 3),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 4688LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  BOOL v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unsigned int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    BOOL v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 4688LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        unsigned int v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 4688LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    id v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    int64_t v23 = v22 < 1;
  }
  else {
    int64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  BOOL v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unsigned int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    BOOL v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  BOOL v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 4688LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  id v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 4688LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  int64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    unsigned int v24 = __ldaxr(v16);
    unint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_4A580( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void delete_object_ARB(__GLIContextRec *a1, volatile int *a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      uint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  BOOL v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_56:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *))(*(void *)(v9 + 24) + 4728LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::FB::Encode((uint64_t)v49, 123LL, (uint64_t)"Cul", v14, v15, v16, v17, v18, *(void *)v9);
    wrapper_cache_shader_delete((ContextInfo *)v9, a2);
    uint64_t v20 = wrapper_cache_program_delete((ContextInfo *)v9, a2);
    char v21 = byte_206ED3;
    if ((byte_206ED3 & 1) != 0) {
      breakpoint_break((uint64_t)v49, (volatile int *)&stru_68.segname[3], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *))(*(void *)(v9 + 32) + 4728LL))(a1, a2);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v49[0];
        *((void *)v49[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        id v48 = v49[0];
        *((void *)v49[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v22 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  id v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  uint64_t v46;
  uint64_t v47;
  void *v48;
  void *v49[2];
  int v50;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      uint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  BOOL v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_56:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *))(*(void *)(v9 + 24) + 4728LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::FB::Encode((uint64_t)v49, 123LL, (uint64_t)"Cul", v14, v15, v16, v17, v18, *(void *)v9);
    wrapper_cache_shader_delete((ContextInfo *)v9, a2);
    uint64_t v20 = wrapper_cache_program_delete((ContextInfo *)v9, a2);
    char v21 = byte_206ED3;
    if ((byte_206ED3 & 1) != 0) {
      breakpoint_break((uint64_t)v49, (volatile int *)&stru_68.segname[3], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *))(*(void *)(v9 + 32) + 4728LL))(a1, a2);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v49[0];
        *((void *)v49[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        id v48 = v49[0];
        *((void *)v49[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v22 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      uint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  BOOL v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *))(*(void *)(v9 + 24) + 4728LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  wrapper_cache_shader_delete((ContextInfo *)v9, a2);
  wrapper_cache_program_delete((ContextInfo *)v9, a2);
  (*(void (**)(__GLIContextRec *, volatile int *))(*(void *)(v9 + 32) + 4728LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    uint64_t v15 = __ldaxr(v10);
    uint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 < 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      uint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  BOOL v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *))(*(void *)(v9 + 24) + 4728LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  wrapper_cache_shader_delete((ContextInfo *)v9, a2);
  wrapper_cache_program_delete((ContextInfo *)v9, a2);
  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *))(*(void *)(v9 + 32) + 4728LL))(a1, a2);
  uint64_t v16 = mach_absolute_time();
  uint64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v10);
    id v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_4A998( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void detach_object_ARB(__GLIContextRec *a1, volatile int *a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      BOOL v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_56:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t))(*(void *)(v11 + 24) + 4744LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v51[0] = 0LL;
  v51[1] = 0LL;
  int v52 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::FB::Encode((uint64_t)v51, 133LL, (uint64_t)"Culul", v16, v17, v18, v19, v20, *(void *)v11);
    uint64_t v22 = wrapper_cache_shader_pre_detach((ContextInfo *)v11, a2, a3);
    char v23 = byte_206EDD;
    if ((byte_206EDD & 1) != 0) {
      breakpoint_break((uint64_t)v51, (volatile int *)&stru_68.segname[13], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t))(*(void *)(v11 + 32) + 4744LL))(a1, a2, a3);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v51[0];
        *((void *)v51[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        int v50 = v51[0];
        *((void *)v51[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v24 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  id v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  void *v51[2];
  int v52;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      BOOL v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_56:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t))(*(void *)(v11 + 24) + 4744LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v51[0] = 0LL;
  v51[1] = 0LL;
  int v52 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::FB::Encode((uint64_t)v51, 133LL, (uint64_t)"Culul", v16, v17, v18, v19, v20, *(void *)v11);
    uint64_t v22 = wrapper_cache_shader_pre_detach((ContextInfo *)v11, a2, a3);
    char v23 = byte_206EDD;
    if ((byte_206EDD & 1) != 0) {
      breakpoint_break((uint64_t)v51, (volatile int *)&stru_68.segname[13], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t))(*(void *)(v11 + 32) + 4744LL))(a1, a2, a3);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v51[0];
        *((void *)v51[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        int v50 = v51[0];
        *((void *)v51[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v24 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      BOOL v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t))(*(void *)(v11 + 24) + 4744LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  wrapper_cache_shader_pre_detach((ContextInfo *)v11, a2, a3);
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t))(*(void *)(v11 + 32) + 4744LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      BOOL v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t))(*(void *)(v11 + 24) + 4744LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  wrapper_cache_shader_pre_detach((ContextInfo *)v11, a2, a3);
  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t))(*(void *)(v11 + 32) + 4744LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    id v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_4ADBC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t create_shader_object_ARB(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  BOOL v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v9);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_56:
        unsigned int v49 = __ldaxr(v10);
      while (__stlxr(v49 - 1, v10));
      int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4752LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v55, 117LL, 0LL, (uint64_t)"Ce", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_206ECD;
    if ((byte_206ECD & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_68.sectname[13], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    if ([(id)DYGetGLGuestAppClient(v19) overrideFlags] & 0x10 | v20 & 4)
    {
      uint64_t v27 = 0LL;
      goto LABEL_28;
    }

    uint64_t v26 = mach_absolute_time();
    uint64_t v27 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4752LL))(a1, a2);
    uint64_t v28 = mach_absolute_time() - v26;
    unint64_t v29 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v30 = v55[0];
      *((void *)v55[0] + 2) = v26;
      v30[3] = v28;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v53 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
      uint64_t v54 = v55[0];
      *((void *)v55[0] + 3) = v53;
      v54[2] = __udivti3(v29 * v26, (v29 * (unsigned __int128)v26) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v9);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v55, 4294955008LL, (uint64_t)"ul", v21, v22, v23, v24, v25, v27);
    id v32 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v32) {
      id v32 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v55, v33);
    }
    unsigned int v35 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
    if ((_DWORD)v35) {
      id v32 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v55, v35, v34);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v9, (uint64_t)v55);
    }
    unsigned int v36 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)v55);
    uint64_t v37 = *(unsigned int *)(v9 + 3404);
    if ((_DWORD)v37 && gBreakOnError)
    {
      uint64_t v51 = 3LL;
      uint64_t v52 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v20 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v51 = 2LL;
      uint64_t v52 = 117LL;
    }

    breakpoint_break((uint64_t)v55, (volatile int *)v52, v51, v37, v9);
LABEL_37:
    unsigned int v38 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v36) defaultFbufStream];
    unsigned int v39 = (unsigned int *)((char *)v38 + 56);
    do
      unsigned int v40 = __ldaxr(v39);
    while (__stlxr(1u, v39));
    if (v40 == 1)
    {
      do
      {
        while (*v39 == 1)
          ;
        do
          unsigned int v41 = __ldaxr(v39);
        while (__stlxr(1u, v39));
      }

      while (v41 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v38, (GPUTools::FB::Fbuf *)v55, *(unsigned int *)v55[0], 1);
    atomic_store(0, v39);
    do
    {
      unsigned int v42 = __ldaxr(v10);
      signed int v43 = v42 - 1;
    }

    while (__stlxr(v43, v10));
    if (gCheckGLErrors) {
      BOOL v44 = v43 < 1;
    }
    else {
      BOOL v44 = 1;
    }
    if (!v44) {
      handle_opengl_thread_conflict((const void **)v9);
    }
    goto LABEL_50;
  }

  do
    unsigned int v46 = __ldaxr(v10);
  while (__stlxr(v46 - 1, v10));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  uint64_t v27 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4752LL))(a1, a2);
LABEL_50:
  if (v55[0]) {
    free(v55[0]);
  }
  return v27;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  id v18;
  uint64_t v19;
  char v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  uint64_t v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  void *v55[2];
  int v56;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  BOOL v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v9);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_56:
        unsigned int v49 = __ldaxr(v10);
      while (__stlxr(v49 - 1, v10));
      int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4752LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v55, 117LL, 0LL, (uint64_t)"Ce", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_206ECD;
    if ((byte_206ECD & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_68.sectname[13], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    if ([(id)DYGetGLGuestAppClient(v19) overrideFlags] & 0x10 | v20 & 4)
    {
      uint64_t v27 = 0LL;
      goto LABEL_28;
    }

    uint64_t v26 = mach_absolute_time();
    uint64_t v27 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4752LL))(a1, a2);
    uint64_t v28 = mach_absolute_time() - v26;
    unint64_t v29 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v30 = v55[0];
      *((void *)v55[0] + 2) = v26;
      v30[3] = v28;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v53 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
      uint64_t v54 = v55[0];
      *((void *)v55[0] + 3) = v53;
      v54[2] = __udivti3(v29 * v26, (v29 * (unsigned __int128)v26) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v9);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v55, 4294955008LL, (uint64_t)"ul", v21, v22, v23, v24, v25, v27);
    id v32 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v32) {
      id v32 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v55, v33);
    }
    unsigned int v35 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
    if ((_DWORD)v35) {
      id v32 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v55, v35, v34);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v9, (uint64_t)v55);
    }
    unsigned int v36 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)v55);
    uint64_t v37 = *(unsigned int *)(v9 + 3404);
    if ((_DWORD)v37 && gBreakOnError)
    {
      uint64_t v51 = 3LL;
      uint64_t v52 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v20 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v51 = 2LL;
      uint64_t v52 = 117LL;
    }

    breakpoint_break((uint64_t)v55, (volatile int *)v52, v51, v37, v9);
LABEL_37:
    unsigned int v38 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v36) defaultFbufStream];
    unsigned int v39 = (unsigned int *)((char *)v38 + 56);
    do
      unsigned int v40 = __ldaxr(v39);
    while (__stlxr(1u, v39));
    if (v40 == 1)
    {
      do
      {
        while (*v39 == 1)
          ;
        do
          unsigned int v41 = __ldaxr(v39);
        while (__stlxr(1u, v39));
      }

      while (v41 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v38, (GPUTools::FB::Fbuf *)v55, *(unsigned int *)v55[0], 1);
    atomic_store(0, v39);
    do
    {
      unsigned int v42 = __ldaxr(v10);
      signed int v43 = v42 - 1;
    }

    while (__stlxr(v43, v10));
    if (gCheckGLErrors) {
      BOOL v44 = v43 < 1;
    }
    else {
      BOOL v44 = 1;
    }
    if (!v44) {
      handle_opengl_thread_conflict((const void **)v9);
    }
    goto LABEL_50;
  }

  do
    unsigned int v46 = __ldaxr(v10);
  while (__stlxr(v46 - 1, v10));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  uint64_t v27 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4752LL))(a1, a2);
LABEL_50:
  if (v55[0]) {
    free(v55[0]);
  }
  return v27;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  BOOL v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v20 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4752LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4752LL))(a1, a2);
    }
  }

  uint64_t v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4752LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    uint64_t v16 = __ldaxr(v10);
    uint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    id v18 = v17 < 1;
  }
  else {
    id v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  BOOL v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4752LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4752LL))(a1, a2);
    }
  }

  uint64_t v15 = mach_absolute_time();
  uint64_t v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4752LL))(a1, a2);
  uint64_t v17 = mach_absolute_time();
  id v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v10);
    char v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  uint64_t v3 = a1;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  BOOL v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  uint64_t v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      char v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    uint64_t v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4752LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    uint64_t v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4752LL))(v3, a2);
    }
  }

  do
  {
    uint64_t v16 = __ldaxr(v10);
    uint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    id v18 = v17 < 1;
  }
  else {
    id v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_4B1F4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void shader_source_ARB(__GLIContextRec *a1, uint64_t a2, uint64_t a3, const char *const *a4, const int *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      BOOL v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v69 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v68 = handle_opengl_thread_conflict((const void **)v14);
    id v69 = [(id)DYGetGLGuestAppClient(v68) waitOnGraphicsSemaphoreAssertions];
    if ((int)v69 >= 1)
    {
      do
LABEL_70:
        unsigned int v70 = __ldaxr(v15);
      while (__stlxr(v70 - 1, v15));
      uint64_t v71 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v69) graphicsLockWaitQueue];
      dispatch_sync_f(v71, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, const int *))(*(void *)(v14 + 24) + 4760LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 4838) = 1;
  v81[0] = 0LL;
  v81[1] = 0LL;
  int v82 = 0;
  if ([(id)DYGetGLGuestAppClient(v69) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    if (!a2)
    {
      GPUTools::FB::Encode((uint64_t)v81, 540LL, (uint64_t)"Culipp", v19, v20, v21, v22, v23, *(void *)v14);
LABEL_37:
      uint64_t v47 = wrapper_cache_shader_source((ContextInfo *)v14, a2);
      char v48 = byte_207074;
      if ((byte_207074 & 1) != 0) {
        breakpoint_break((uint64_t)v81, (_DWORD *)&stru_1F8.addr + 1, 1LL, *(unsigned int *)(v14 + 3404), v14);
      }
      uint64_t v49 = (uint64_t)[(id)DYGetGLGuestAppClient(v47) overrideFlags];
      if (!(v49 & 0x10 | v48 & 4))
      {
        uint64_t v50 = mach_absolute_time();
        (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, const int *))(*(void *)(v14 + 32) + 4760LL))( a1,  a2,  a3,  a4,  a5);
        uint64_t v49 = mach_absolute_time();
        uint64_t v51 = v49 - v50;
        unint64_t v52 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v53 = v81[0];
          *((void *)v81[0] + 2) = v50;
          v53[3] = v51;
          if (!gCheckGLErrors) {
            goto LABEL_42;
          }
        }

        else
        {
          uint64_t v74 = __udivti3(g_DYTimebaseInfo * v51, (g_DYTimebaseInfo * (unsigned __int128)v51) >> 64);
          int v75 = v81[0];
          *((void *)v81[0] + 3) = v74;
          uint64_t v49 = __udivti3(v52 * v50, (v52 * (unsigned __int128)v50) >> 64);
          v75[2] = v49;
          if (!gCheckGLErrors) {
            goto LABEL_42;
          }
        }

        uint64_t v49 = check_errors(v14);
      }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  id v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  void *v55[2];
  int v56;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v17 = __ldaxr(v16);
    BOOL v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 <= 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (v19)
  {
    char v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    char v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_56:
        uint64_t v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, const int *))(*(void *)(v15 + 24) + 4760LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  unsigned int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (uint64_t v25 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v25))
  {
    GPUTools::FB::Encode((uint64_t)v55, 540LL, (uint64_t)"Culipp", v20, v21, v22, v23, v24, *(void *)v15);
    uint64_t v26 = wrapper_cache_shader_source((ContextInfo *)v15, a2);
    uint64_t v27 = byte_207074;
    if ((byte_207074 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (_DWORD *)&stru_1F8.addr + 1, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      unint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, const int *))(*(void *)(v15 + 32) + 4760LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      uint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        int v32 = v55[0];
        *((void *)v55[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        id v54 = v55[0];
        *((void *)v55[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v28 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v17 = __ldaxr(v16);
    BOOL v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 <= 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, const int *))(*(void *)(v15 + 24) + 4760LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        id v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  wrapper_cache_shader_source((ContextInfo *)v15, a2);
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, const int *))(*(void *)(v15 + 32)
                                                                                                + 4760LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v17 = __ldaxr(v16);
    BOOL v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 <= 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (v19)
  {
    unint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    unint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, const int *))(*(void *)(v15 + 24) + 4760LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  wrapper_cache_shader_source((ContextInfo *)v15, a2);
  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, const int *))(*(void *)(v15 + 32)
                                                                                                + 4760LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      int v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    id v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_4B7D4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(exception_object);
}

void compile_shader_ARB(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  uint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v57 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v56 = handle_opengl_thread_conflict((const void **)v9);
    id v57 = [(id)DYGetGLGuestAppClient(v56) waitOnGraphicsSemaphoreAssertions];
    if ((int)v57 >= 1)
    {
      do
LABEL_70:
        unsigned int v58 = __ldaxr(v10);
      while (__stlxr(v58 - 1, v10));
      uint64_t v59 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v57) graphicsLockWaitQueue];
      dispatch_sync_f(v59, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4768LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v67[0] = 0LL;
  v67[1] = 0LL;
  int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v57) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::FB::Encode((uint64_t)v67, 93LL, (uint64_t)"Cul", v14, v15, v16, v17, v18, *(void *)v9);
    wrapper_cache_shader_pre_compile((ContextInfo *)v9, a2);
    BOOL v20 = check_errors(v9);
    char v21 = byte_206EB5;
    if ((byte_206EB5 & 1) != 0) {
      breakpoint_break( (uint64_t)v67,  (vm_prot_t *)((char *)&stru_20.initprot + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4768LL))(a1, a2);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v67[0];
        *((void *)v67[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v62 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        unsigned int v63 = v67[0];
        *((void *)v67[0] + 3) = v62;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v63[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v22 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  id v19;
  BOOL v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  char *info_log;
  void *v38;
  uint64_t v39;
  uint64_t v40;
  uint64_t v41;
  uint64_t v42;
  uint64_t v43;
  uint64_t v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  void *v61;
  int v62;
  int v63;
  unsigned int v64;
  void *v65[2];
  int v66;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  uint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    unsigned int v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v54 = handle_opengl_thread_conflict((const void **)v9);
    unsigned int v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_70:
        uint64_t v56 = __ldaxr(v10);
      while (__stlxr(v56 - 1, v10));
      id v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4768LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::FB::Encode((uint64_t)v65, 93LL, (uint64_t)"Cul", v14, v15, v16, v17, v18, *(void *)v9);
    wrapper_cache_shader_pre_compile((ContextInfo *)v9, a2);
    BOOL v20 = check_errors(v9);
    char v21 = byte_206EB5;
    if ((byte_206EB5 & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (vm_prot_t *)((char *)&stru_20.initprot + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4768LL))(a1, a2);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v65[0];
        *((void *)v65[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        uint64_t v61 = v65[0];
        *((void *)v65[0] + 3) = v60;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v61[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v22 = check_errors(v9);
    }

void sub_4BD88( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, void *a18)
{
  if (a18) {
    free(a18);
  }
  _Unwind_Resume(exception_object);
}

uint64_t create_program_object_ARB(__GLIContextRec *a1)
{
  uint64_t v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    uint64_t v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v7);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_56:
        unsigned int v47 = __ldaxr(v8);
      while (__stlxr(v47 - 1, v8));
      char v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 4776LL))(a1);
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    GPUTools::FB::Encode((uint64_t)v53, 116LL, 0LL, (uint64_t)"C", v12, v13, v14, v15, *(void *)v7);
    char v18 = byte_206ECC;
    if ((byte_206ECC & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_68.sectname[12], 1LL, *(unsigned int *)(v7 + 3404), v7);
    }
    if ([(id)DYGetGLGuestAppClient(v17) overrideFlags] & 0x10 | v18 & 4)
    {
      uint64_t v25 = 0LL;
      goto LABEL_28;
    }

    uint64_t v24 = mach_absolute_time();
    uint64_t v25 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 4776LL))(a1);
    uint64_t v26 = mach_absolute_time() - v24;
    unint64_t v27 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v28 = v53[0];
      *((void *)v53[0] + 2) = v24;
      v28[3] = v26;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v51 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
      unsigned int v52 = v53[0];
      *((void *)v53[0] + 3) = v51;
      v52[2] = __udivti3(v27 * v24, (v27 * (unsigned __int128)v24) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v7);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v53, 4294955008LL, (uint64_t)"ul", v19, v20, v21, v22, v23, v25);
    id v30 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v30) {
      id v30 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v53, v31);
    }
    int v33 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v7 + 3404);
    if ((_DWORD)v33) {
      id v30 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v53, v33, v32);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v30), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v7, (uint64_t)v53);
    }
    unsigned int v34 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v7 + 3480),  (GPUTools::FB::Fbuf *)(v7 + 3520),  (GPUTools::FB *)v53);
    uint64_t v35 = *(unsigned int *)(v7 + 3404);
    if ((_DWORD)v35 && gBreakOnError)
    {
      uint64_t v49 = 3LL;
      uint64_t v50 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v18 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v49 = 2LL;
      uint64_t v50 = 116LL;
    }

    breakpoint_break((uint64_t)v53, (volatile int *)v50, v49, v35, v7);
LABEL_37:
    unsigned int v36 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v34) defaultFbufStream];
    uint64_t v37 = (unsigned int *)((char *)v36 + 56);
    do
      unsigned int v38 = __ldaxr(v37);
    while (__stlxr(1u, v37));
    if (v38 == 1)
    {
      do
      {
        while (*v37 == 1)
          ;
        do
          unsigned int v39 = __ldaxr(v37);
        while (__stlxr(1u, v37));
      }

      while (v39 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v36, (GPUTools::FB::Fbuf *)v53, *(unsigned int *)v53[0], 1);
    atomic_store(0, v37);
    do
    {
      unsigned int v40 = __ldaxr(v8);
      signed int v41 = v40 - 1;
    }

    while (__stlxr(v41, v8));
    if (gCheckGLErrors) {
      BOOL v42 = v41 < 1;
    }
    else {
      BOOL v42 = 1;
    }
    if (!v42) {
      handle_opengl_thread_conflict((const void **)v7);
    }
    goto LABEL_50;
  }

  do
    unsigned int v44 = __ldaxr(v8);
  while (__stlxr(v44 - 1, v8));
  [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
  uint64_t v25 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 4776LL))(a1);
LABEL_50:
  if (v53[0]) {
    free(v53[0]);
  }
  return v25;
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  uint64_t v12;
  uint64_t v13;
  uint64_t v14;
  uint64_t v15;
  id v16;
  uint64_t v17;
  char v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  uint64_t v29;
  id v30;
  GPUTools::FB::Fbuf *v31;
  unsigned int v32;
  GPUTools::FB::Fbuf *v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  GPUTools::FB::Stream *v36;
  unsigned int *v37;
  unsigned int v38;
  unsigned int v39;
  unsigned int v40;
  signed int v41;
  BOOL v42;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  void *v53[2];
  int v54;
  uint64_t v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    uint64_t v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v7);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_56:
        unsigned int v47 = __ldaxr(v8);
      while (__stlxr(v47 - 1, v8));
      char v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 4776LL))(a1);
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    GPUTools::FB::Encode((uint64_t)v53, 116LL, 0LL, (uint64_t)"C", v12, v13, v14, v15, *(void *)v7);
    char v18 = byte_206ECC;
    if ((byte_206ECC & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_68.sectname[12], 1LL, *(unsigned int *)(v7 + 3404), v7);
    }
    if ([(id)DYGetGLGuestAppClient(v17) overrideFlags] & 0x10 | v18 & 4)
    {
      uint64_t v25 = 0LL;
      goto LABEL_28;
    }

    uint64_t v24 = mach_absolute_time();
    uint64_t v25 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 4776LL))(a1);
    uint64_t v26 = mach_absolute_time() - v24;
    unint64_t v27 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v28 = v53[0];
      *((void *)v53[0] + 2) = v24;
      v28[3] = v26;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v51 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
      unsigned int v52 = v53[0];
      *((void *)v53[0] + 3) = v51;
      v52[2] = __udivti3(v27 * v24, (v27 * (unsigned __int128)v24) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v7);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v53, 4294955008LL, (uint64_t)"ul", v19, v20, v21, v22, v23, v25);
    id v30 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v30) {
      id v30 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v53, v31);
    }
    int v33 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v7 + 3404);
    if ((_DWORD)v33) {
      id v30 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v53, v33, v32);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v30), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v7, (uint64_t)v53);
    }
    unsigned int v34 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v7 + 3480),  (GPUTools::FB::Fbuf *)(v7 + 3520),  (GPUTools::FB *)v53);
    uint64_t v35 = *(unsigned int *)(v7 + 3404);
    if ((_DWORD)v35 && gBreakOnError)
    {
      uint64_t v49 = 3LL;
      uint64_t v50 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v18 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v49 = 2LL;
      uint64_t v50 = 116LL;
    }

    breakpoint_break((uint64_t)v53, (volatile int *)v50, v49, v35, v7);
LABEL_37:
    unsigned int v36 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v34) defaultFbufStream];
    uint64_t v37 = (unsigned int *)((char *)v36 + 56);
    do
      unsigned int v38 = __ldaxr(v37);
    while (__stlxr(1u, v37));
    if (v38 == 1)
    {
      do
      {
        while (*v37 == 1)
          ;
        do
          unsigned int v39 = __ldaxr(v37);
        while (__stlxr(1u, v37));
      }

      while (v39 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v36, (GPUTools::FB::Fbuf *)v53, *(unsigned int *)v53[0], 1);
    atomic_store(0, v37);
    do
    {
      unsigned int v40 = __ldaxr(v8);
      signed int v41 = v40 - 1;
    }

    while (__stlxr(v41, v8));
    if (gCheckGLErrors) {
      BOOL v42 = v41 < 1;
    }
    else {
      BOOL v42 = 1;
    }
    if (!v42) {
      handle_opengl_thread_conflict((const void **)v7);
    }
    goto LABEL_50;
  }

  do
    unsigned int v44 = __ldaxr(v8);
  while (__stlxr(v44 - 1, v8));
  [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
  uint64_t v25 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 4776LL))(a1);
LABEL_50:
  if (v53[0]) {
    free(v53[0]);
  }
  return v25;
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  uint64_t v13;
  unsigned int v14;
  signed int v15;
  BOOL v16;
  unsigned int v17;
  uint64_t v18;
  id v19;
  unsigned int v20;
  dispatch_queue_s *v21;
  uint64_t v22;
  uint64_t v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    uint64_t v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v19 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v18 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v19 = [(id)DYGetGLGuestAppClient(v18) waitOnGraphicsSemaphoreAssertions];
    if ((int)v19 >= 1)
    {
      do
LABEL_35:
        uint64_t v20 = __ldaxr(v8);
      while (__stlxr(v20 - 1, v8));
      uint64_t v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v19) graphicsLockWaitQueue];
      dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 4776LL))(a1);
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v19) state] == (char *)&dword_0 + 1)
  {
    uint64_t v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        uint64_t v17 = __ldaxr(v8);
      while (__stlxr(v17 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 4776LL))(a1);
    }
  }

  uint64_t v13 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 4776LL))(a1);
  ++*(void *)(v7 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      uint64_t v22 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v22) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v22, v7);
      }
    }
  }

  do
  {
    uint64_t v14 = __ldaxr(v8);
    uint64_t v15 = v14 - 1;
  }

  while (__stlxr(v15, v8));
  if (gCheckGLErrors) {
    id v16 = v15 < 1;
  }
  else {
    id v16 = 1;
  }
  if (!v16) {
    handle_opengl_thread_conflict((const void **)v7);
  }
  return v13;
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  uint64_t v13;
  uint64_t v14;
  uint64_t v15;
  int64x2_t v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  uint64_t v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    uint64_t v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_35:
        uint64_t v23 = __ldaxr(v8);
      while (__stlxr(v23 - 1, v8));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 4776LL))(a1);
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    uint64_t v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        uint64_t v20 = __ldaxr(v8);
      while (__stlxr(v20 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 4776LL))(a1);
    }
  }

  uint64_t v13 = mach_absolute_time();
  uint64_t v14 = (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 4776LL))(a1);
  uint64_t v15 = mach_absolute_time();
  id v16 = vdupq_n_s64(1uLL);
  v16.i64[0] = v15 - v13;
  *(int64x2_t *)(v7 + 3696) = vaddq_s64(v16, *(int64x2_t *)(v7 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v7);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v8);
    char v18 = v17 - 1;
  }

  while (__stlxr(v18, v8));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v7);
  }
  return v14;
}

{
  __GLIContextRec *v1;
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  id v13;
  unsigned int v14;
  signed int v15;
  BOOL v16;
  unsigned int v18;
  dispatch_queue_s *v19;
  unsigned int v20;
  uint64_t v1 = a1;
  uint64_t v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    uint64_t v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (!v11) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v7);
  }
  uint64_t v12 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v12 >= 1)
  {
    do
      char v18 = __ldaxr(v8);
    while (__stlxr(v18 - 1, v8));
    uint64_t v19 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v12) graphicsLockWaitQueue];
    dispatch_sync_f(v19, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 4776LL))(v1);
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v12) state] == (char *)&dword_0 + 1)
  {
    uint64_t v13 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v13 & 1) != 0)
    {
      do
        uint64_t v20 = __ldaxr(v8);
      while (__stlxr(v20 - 1, v8));
      [(id)DYGetGLGuestAppClient(v13) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 4776LL))(v1);
    }
  }

  do
  {
    uint64_t v14 = __ldaxr(v8);
    uint64_t v15 = v14 - 1;
  }

  while (__stlxr(v15, v8));
  if (gCheckGLErrors) {
    id v16 = v15 < 1;
  }
  else {
    id v16 = 1;
  }
  if (!v16) {
    handle_opengl_thread_conflict((const void **)v7);
  }
  return 0LL;
}

void sub_4C1CC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *a10)
{
  if (a10) {
    free(a10);
  }
  _Unwind_Resume(exception_object);
}

void attach_object_ARB(__GLIContextRec *a1, void *a2, void *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      id v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, void *))(*(void *)(v11 + 24) + 4784LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v51[0] = 0LL;
  v51[1] = 0LL;
  int v52 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::FB::Encode((uint64_t)v51, 6LL, (uint64_t)"Culul", v16, v17, v18, v19, v20, *(void *)v11);
    BOOL v22 = check_errors(v11);
    char v23 = byte_206E5E;
    if ((byte_206E5E & 1) != 0) {
      breakpoint_break((uint64_t)v51, (int *)((char *)&dword_4 + 2), 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, void *))(*(void *)(v11 + 32) + 4784LL))(a1, a2, a3);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v51[0];
        *((void *)v51[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        uint64_t v50 = v51[0];
        *((void *)v51[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v24 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  id v21;
  BOOL v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  void *v51[2];
  int v52;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      id v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, void *))(*(void *)(v11 + 24) + 4784LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v51[0] = 0LL;
  v51[1] = 0LL;
  int v52 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::FB::Encode((uint64_t)v51, 6LL, (uint64_t)"Culul", v16, v17, v18, v19, v20, *(void *)v11);
    BOOL v22 = check_errors(v11);
    char v23 = byte_206E5E;
    if ((byte_206E5E & 1) != 0) {
      breakpoint_break((uint64_t)v51, (int *)((char *)&dword_4 + 2), 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, void *))(*(void *)(v11 + 32) + 4784LL))(a1, a2, a3);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v51[0];
        *((void *)v51[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        uint64_t v50 = v51[0];
        *((void *)v51[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v24 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    BOOL v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v21 = handle_opengl_thread_conflict((const void **)v11);
    BOOL v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_37:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, void *, void *))(*(void *)(v11 + 24) + 4784LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  check_errors(v11);
  (*(void (**)(__GLIContextRec *, void *, void *))(*(void *)(v11 + 32) + 4784LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError && (uint64_t v25 = *(unsigned int *)(v11 + 3404), (_DWORD)v25))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v11);
LABEL_25:
  if (!*(_DWORD *)(v11 + 3404)) {
    wrapper_cache_shader_post_attach((ContextInfo *)v11, a2, a3);
  }
  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_37:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, void *, void *))(*(void *)(v11 + 24) + 4784LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  check_errors(v11);
  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, void *, void *))(*(void *)(v11 + 32) + 4784LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError && (uint64_t v28 = *(unsigned int *)(v11 + 3404), (_DWORD)v28))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v11);
LABEL_25:
  if (!*(_DWORD *)(v11 + 3404)) {
    wrapper_cache_shader_post_attach((ContextInfo *)v11, a2, a3);
  }
  do
  {
    uint64_t v20 = __ldaxr(v12);
    id v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    BOOL v22 = v21 < 1;
  }
  else {
    BOOL v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_4C630( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void link_program_ARB(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v76 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v75 = handle_opengl_thread_conflict((const void **)v9);
    id v76 = [(id)DYGetGLGuestAppClient(v75) waitOnGraphicsSemaphoreAssertions];
    if ((int)v76 >= 1)
    {
      do
LABEL_82:
        unsigned int v77 = __ldaxr(v10);
      while (__stlxr(v77 - 1, v10));
      uint64_t v78 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v76) graphicsLockWaitQueue];
      dispatch_sync_f(v78, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4792LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v101 = 0LL;
  v102 = &v101;
  uint64_t v103 = 0x4812000000LL;
  v104 = __Block_byref_object_copy_;
  v105 = __Block_byref_object_dispose_;
  v107 = 0LL;
  uint64_t v108 = 0LL;
  v106 = &unk_1F3D63;
  int v109 = 0;
  if ([(id)DYGetGLGuestAppClient(v76) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::FB::Encode((uint64_t)(v102 + 6), 349LL, (uint64_t)"Cul", v14, v15, v16, v17, v18, *(void *)v9);
    wrapper_cache_program_pre_link((ContextInfo *)v9, a2);
    BOOL v20 = check_errors(v9);
    char v21 = byte_206FB5;
    if ((byte_206FB5 & 1) != 0) {
      breakpoint_break( (uint64_t)(v102 + 6),  (volatile int *)&stru_158.sectname[5],  1LL,  *(unsigned int *)(v9 + 3404),  v9);
    }
    if (!([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4792LL))(a1, a2);
      uint64_t v28 = mach_absolute_time() - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v30 = v102 + 6;
        *(void *)(v102[6] + 24) = v28;
        *(void *)(*v30 + 16LL) = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v81 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        int v82 = v102;
        *(void *)(v102[6] + 24) = v81;
        *(void *)(v82[6] + 16) = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v9);
    }

    if (gCheckGLErrors)
    {
LABEL_29:
      unsigned int v31 = v102;
      unsigned int v32 = (__int128 *)v102[6];
      __int128 v33 = v32[1];
      __int128 v98 = *v32;
      __int128 v99 = v33;
      int v100 = *((_DWORD *)v32 + 8);
      v102[7] = (uint64_t)v32;
      if (*((_DWORD *)v31 + 16) >= 0x24u)
      {
        *((_DWORD *)v32 + 8) = 0;
        __int128 *v32 = 0u;
        v32[1] = 0u;
      }

      int v97 = 0;
      if (!*(_DWORD *)(v9 + 3404))
      {
        (*(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v9 + 32) + 5264LL))( *(void *)(v9 + 16),  a2,  35714LL,  &v97);
        wrapper_cache_program_link((int8x8_t **)v9, a2, v97 == 1);
        if (a2)
        {
          if (v97 == 1)
          {
            uint64_t v34 = *(void *)(v9 + 32);
            uint64_t v95 = v9;
            uint64_t v96 = v34;
            v94[0] = _NSConcreteStackBlock;
            v94[1] = 3221225472LL;
            v94[2] = ___ZL16link_program_ARBP15__GLIContextRecPv_block_invoke;
            v94[3] = &unk_1F90F8;
            v94[4] = &v101;
            v94[5] = v9;
            v94[6] = a2;
            GPUTools::GL::EnumerateProgramActiveAttributes(&v95, a2, 1LL, v94);
          }
        }
      }

      GPUTools::FB::Encode((uint64_t)(v102 + 6), 349LL, (uint64_t)"Cul", v22, v23, v24, v25, v26, *(void *)v9);
      uint64_t v35 = v102[6];
      __int128 v36 = v99;
      *(_OWORD *)uint64_t v35 = v98;
      *(_OWORD *)(v35 + 16) = v36;
      *(_DWORD *)(v35 + 32) = v100;
      id v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v38) {
        id v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)(v102 + 6), v39);
      }
      BOOL v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
      if ((_DWORD)v41) {
        id v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)(v102 + 6), v41, v40);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v9, (uint64_t)(v102 + 6));
      }
      unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)(v102 + 6));
      uint64_t v43 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v43 && gBreakOnError)
      {
        uint64_t v79 = 3LL;
        uint64_t v80 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v21 & 2) == 0)
        {
LABEL_44:
          id v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
          unsigned int v45 = (GPUTools::FB::Fbuf *)(v102 + 6);
          id v46 = (unsigned int *)((char *)v44 + 56);
          do
            unsigned int v47 = __ldaxr(v46);
          while (__stlxr(1u, v46));
          if (v47 == 1)
          {
            do
            {
              while (*v46 == 1)
                ;
              do
                unsigned int v48 = __ldaxr(v46);
              while (__stlxr(1u, v46));
            }

            while (v48 == 1);
          }

          __n128 v49 = GPUTools::FB::Stream::Write_nolock(v44, v45, **(unsigned int **)v45, 1);
          atomic_store(0, v46);
          if (*(_DWORD *)(v9 + 3404)) {
            goto LABEL_70;
          }
          (*(void (**)(void, uint64_t, uint64_t, int *, __n128))(*(void *)(v9 + 32) + 5264LL))( *(void *)(v9 + 16),  a2,  35712LL,  &v93,  v49);
          int v92 = 35980;
          if (*(int *)(v9 + 3460) >= 3) {
            (*(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v9 + 32) + 5264LL))( *(void *)(v9 + 16),  a2,  35967LL,  &v92);
          }
          info_log = (char *)query_info_log( v9,  a2,  *(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v9 + 32) + 5264LL),  *(void (**)(void, uint64_t, size_t, void, void *))(*(void *)(v9 + 32)
                                                                                              + 5280LL),
                               (int *)&v91);
          uint64_t v56 = info_log;
          uint64_t v57 = (int)v91;
          if (v91 < 0x401)
          {
            if (v91) {
              info_log[v91 - 1] = 0;
            }
            uint64_t v59 = "CiuiiSiieui";
            if (v97 != 1) {
              goto LABEL_60;
            }
          }

          else
          {
            uint64_t v58 = DYGetGLGuestAppClient(info_log);
            GPUTools::Interpose::DYSavePointer(v58, v57, v56, v9 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
            uint64_t v59 = "CiuiiU<cb>iieui";
            if (v97 != 1)
            {
LABEL_60:
              GPUTools::FB::Encode( (uint64_t)(v102 + 6),  4294955024LL,  (uint64_t)v59,  v51,  v52,  v53,  v54,  v55,  *(void *)v9);
              uint64_t v61 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v60) defaultFbufStream];
              uint64_t v62 = (GPUTools::FB::Fbuf *)(v102 + 6);
              unsigned int v63 = (unsigned int *)((char *)v61 + 56);
              do
                unsigned int v64 = __ldaxr(v63);
              while (__stlxr(1u, v63));
              if (v64 == 1)
              {
                do
                {
                  while (*v63 == 1)
                    ;
                  do
                    unsigned int v65 = __ldaxr(v63);
                  while (__stlxr(1u, v63));
                }

                while (v65 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v61, v62, **(unsigned int **)v62, 1);
              atomic_store(0, v63);
              free(v56);
              if (v97 == 1)
              {
                uint64_t v66 = *(void *)(v9 + 32);
                uint64_t v95 = v9;
                uint64_t v96 = v66;
                v89[0] = _NSConcreteStackBlock;
                v89[1] = 3221225472LL;
                v89[2] = ___ZL16link_program_ARBP15__GLIContextRecPv_block_invoke_2;
                v89[3] = &unk_1F9120;
                v89[4] = &v101;
                v89[5] = v9;
                int v90 = a2;
                GPUTools::GL::EnumerateProgramActiveAttributes(&v95, a2, 1LL, v89);
                if (*(int *)(v9 + 3460) >= 3)
                {
                  uint64_t v67 = *(void *)(v9 + 32);
                  uint64_t v95 = v9;
                  uint64_t v96 = v67;
                  v87[0] = _NSConcreteStackBlock;
                  v87[1] = 3221225472LL;
                  v87[2] = ___ZL16link_program_ARBP15__GLIContextRecPv_block_invoke_3;
                  v87[3] = &unk_1F9148;
                  v87[4] = &v101;
                  v87[5] = v9;
                  int v88 = a2;
                  GPUTools::GL::EnumerateProgramTransformFeedbackVaryings(&v95, a2, v87);
                  uint64_t v68 = *(void *)(v9 + 32);
                  uint64_t v95 = v9;
                  uint64_t v96 = v68;
                  v85[0] = _NSConcreteStackBlock;
                  v85[1] = 3221225472LL;
                  v85[2] = ___ZL16link_program_ARBP15__GLIContextRecPv_block_invoke_4;
                  v85[3] = &unk_1F9170;
                  v85[4] = &v101;
                  v85[5] = v9;
                  int v86 = a2;
                  GPUTools::GL::EnumerateProgramActiveUniformBlocks(&v95, a2, v85);
                }

                uint64_t v69 = *(void *)(v9 + 32);
                uint64_t v95 = v9;
                uint64_t v96 = v69;
                uint64_t v70 = *(unsigned int *)(v9 + 3456);
                v83[0] = _NSConcreteStackBlock;
                v83[1] = 3221225472LL;
                v83[2] = ___ZL16link_program_ARBP15__GLIContextRecPv_block_invoke_5;
                v83[3] = &unk_1F9198;
                v83[4] = &v101;
                v83[5] = v9;
                int v84 = a2;
                GPUTools::GL::EnumerateProgramActiveUniforms(&v95, v70, a2, 1LL, v83);
              }

              do
              {
LABEL_70:
                unsigned int v71 = __ldaxr(v10);
                signed int v72 = v71 - 1;
              }

              while (__stlxr(v72, v10));
              if (gCheckGLErrors) {
                BOOL v73 = v72 < 1;
              }
              else {
                BOOL v73 = 1;
              }
              if (!v73) {
                handle_opengl_thread_conflict((const void **)v9);
              }
              goto LABEL_76;
            }
          }

          LODWORD(v95) = a2;
          [*(id *)v9 getParameter:611 to:&v95];
          goto LABEL_60;
        }

        uint64_t v79 = 2LL;
        uint64_t v80 = 349LL;
      }

      breakpoint_break((uint64_t)(v102 + 6), (volatile int *)v80, v79, v43, v9);
      goto LABEL_44;
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  id v19;
  BOOL v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  uint64_t *v31;
  __int128 *v32;
  __int128 v33;
  uint64_t v34;
  __int128 v35;
  uint64_t v36;
  id v37;
  GPUTools::FB::Fbuf *v38;
  unsigned int v39;
  GPUTools::FB::Fbuf *v40;
  dispatch_queue_s *v41;
  uint64_t v42;
  GPUTools::FB::Stream *v43;
  GPUTools::FB::Fbuf *v44;
  unsigned int *v45;
  unsigned int v46;
  unsigned int v47;
  __n128 v48;
  char *info_log;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  uint64_t v56;
  uint64_t v57;
  GPUTools::FB::Stream *v58;
  GPUTools::FB::Fbuf *v59;
  unsigned int *v60;
  unsigned int v61;
  unsigned int v62;
  uint64_t v63;
  uint64_t v64;
  uint64_t v65;
  uint64_t v66;
  uint64_t v67;
  unsigned int v68;
  signed int v69;
  BOOL v70;
  unsigned int v71;
  uint64_t v72;
  id v73;
  unsigned int v74;
  dispatch_queue_s *v75;
  uint64_t v76;
  uint64_t v77;
  uint64_t v78;
  uint64_t *v79;
  void v80[6];
  int v81;
  void v82[6];
  int v83;
  void v84[6];
  int v85;
  void v86[6];
  int v87;
  uint64_t v88;
  uint64_t v89;
  unsigned int v90;
  int v91;
  int v92;
  int v93;
  __int128 v94;
  __int128 v95;
  int v96;
  uint64_t v97;
  uint64_t *v98;
  uint64_t v99;
  void (*v100)(uint64_t, uint64_t);
  void (*v101)(uint64_t);
  void *v102;
  void *v103;
  uint64_t v104;
  int v105;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    BOOL v73 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    signed int v72 = handle_opengl_thread_conflict((const void **)v9);
    BOOL v73 = [(id)DYGetGLGuestAppClient(v72) waitOnGraphicsSemaphoreAssertions];
    if ((int)v73 >= 1)
    {
      do
LABEL_80:
        unsigned int v74 = __ldaxr(v10);
      while (__stlxr(v74 - 1, v10));
      uint64_t v75 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v73) graphicsLockWaitQueue];
      dispatch_sync_f(v75, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4792LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v97 = 0LL;
  __int128 v98 = &v97;
  __int128 v99 = 0x4812000000LL;
  int v100 = __Block_byref_object_copy__0;
  uint64_t v101 = __Block_byref_object_dispose__0;
  uint64_t v103 = 0LL;
  v104 = 0LL;
  v102 = &unk_1F3D63;
  v105 = 0;
  if ([(id)DYGetGLGuestAppClient(v73) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::FB::Encode((uint64_t)(v98 + 6), 349LL, (uint64_t)"Cul", v14, v15, v16, v17, v18, *(void *)v9);
    wrapper_cache_program_pre_link((ContextInfo *)v9, a2);
    BOOL v20 = check_errors(v9);
    char v21 = byte_206FB5;
    if ((byte_206FB5 & 1) != 0) {
      breakpoint_break((uint64_t)(v98 + 6), (volatile int *)&stru_158.sectname[5], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    if (!([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4792LL))(a1, a2);
      uint64_t v28 = mach_absolute_time() - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v30 = v98 + 6;
        *(void *)(v98[6] + 24) = v28;
        *(void *)(*v30 + 16LL) = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v78 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        uint64_t v79 = v98;
        *(void *)(v98[6] + 24) = v78;
        *(void *)(v79[6] + 16) = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v9);
    }

    if (gCheckGLErrors)
    {
LABEL_29:
      unsigned int v31 = v98;
      unsigned int v32 = (__int128 *)v98[6];
      __int128 v33 = v32[1];
      v94 = *v32;
      uint64_t v95 = v33;
      uint64_t v96 = *((_DWORD *)v32 + 8);
      v98[7] = (uint64_t)v32;
      if (*((_DWORD *)v31 + 16) >= 0x24u)
      {
        *((_DWORD *)v32 + 8) = 0;
        __int128 *v32 = 0u;
        v32[1] = 0u;
      }

      int v93 = 0;
      if (!*(_DWORD *)(v9 + 3404))
      {
        (*(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v9 + 32) + 5264LL))( *(void *)(v9 + 16),  a2,  35714LL,  &v93);
        wrapper_cache_program_link((int8x8_t **)v9, a2, v93 == 1);
      }

      GPUTools::FB::Encode((uint64_t)(v98 + 6), 349LL, (uint64_t)"Cul", v22, v23, v24, v25, v26, *(void *)v9);
      uint64_t v34 = v98[6];
      uint64_t v35 = v95;
      *(_OWORD *)uint64_t v34 = v94;
      *(_OWORD *)(v34 + 16) = v35;
      *(_DWORD *)(v34 + 32) = v96;
      uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v37) {
        uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)(v98 + 6), v38);
      }
      unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
      if ((_DWORD)v40) {
        uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)(v98 + 6), v40, v39);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v9, (uint64_t)(v98 + 6));
      }
      BOOL v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)(v98 + 6));
      unsigned int v42 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v42 && gBreakOnError)
      {
        id v76 = 3LL;
        unsigned int v77 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v21 & 2) == 0) {
          goto LABEL_42;
        }
        id v76 = 2LL;
        unsigned int v77 = 349LL;
      }

      breakpoint_break((uint64_t)(v98 + 6), (volatile int *)v77, v76, v42, v9);
LABEL_42:
      uint64_t v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
      id v44 = (GPUTools::FB::Fbuf *)(v98 + 6);
      unsigned int v45 = (unsigned int *)((char *)v43 + 56);
      do
        id v46 = __ldaxr(v45);
      while (__stlxr(1u, v45));
      if (v46 == 1)
      {
        do
        {
          while (*v45 == 1)
            ;
          do
            unsigned int v47 = __ldaxr(v45);
          while (__stlxr(1u, v45));
        }

        while (v47 == 1);
      }

      unsigned int v48 = GPUTools::FB::Stream::Write_nolock(v43, v44, **(unsigned int **)v44, 1);
      atomic_store(0, v45);
      if (!*(_DWORD *)(v9 + 3404))
      {
        (*(void (**)(void, uint64_t, uint64_t, int *, __n128))(*(void *)(v9 + 32) + 5264LL))( *(void *)(v9 + 16),  a2,  35712LL,  &v92,  v48);
        unsigned int v91 = 35980;
        if (*(int *)(v9 + 3460) >= 3) {
          (*(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v9 + 32) + 5264LL))( *(void *)(v9 + 16),  a2,  35967LL,  &v91);
        }
        info_log = (char *)query_info_log( v9,  a2,  *(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v9 + 32) + 5264LL),  *(void (**)(void, uint64_t, size_t, void, void *))(*(void *)(v9 + 32)
                                                                                            + 5280LL),
                             (int *)&v90);
        uint64_t v55 = info_log;
        if (v90)
        {
          if (v90 >= 0x400) {
            uint64_t v56 = 1024LL;
          }
          else {
            uint64_t v56 = v90;
          }
          info_log[v56 - 1] = 0;
        }

        if (v93 == 1)
        {
          LODWORD(v88) = a2;
          [*(id *)v9 getParameter:611 to:&v88];
        }

        GPUTools::FB::Encode( (uint64_t)(v98 + 6),  4294955024LL,  (uint64_t)"CiuiiSiieui",  v50,  v51,  v52,  v53,  v54,  *(void *)v9);
        uint64_t v58 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v57) defaultFbufStream];
        uint64_t v59 = (GPUTools::FB::Fbuf *)(v98 + 6);
        uint64_t v60 = (unsigned int *)((char *)v58 + 56);
        do
          uint64_t v61 = __ldaxr(v60);
        while (__stlxr(1u, v60));
        if (v61 == 1)
        {
          do
          {
            while (*v60 == 1)
              ;
            do
              uint64_t v62 = __ldaxr(v60);
            while (__stlxr(1u, v60));
          }

          while (v62 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v58, v59, **(unsigned int **)v59, 1);
        atomic_store(0, v60);
        free(v55);
        if (v93 == 1)
        {
          unsigned int v63 = *(void *)(v9 + 32);
          int v88 = v9;
          v89 = v63;
          v86[0] = _NSConcreteStackBlock;
          v86[1] = 3221225472LL;
          v86[2] = ___ZL16link_program_ARBP15__GLIContextRecPv_block_invoke_0;
          v86[3] = &unk_1F9120;
          v86[4] = &v97;
          v86[5] = v9;
          v87 = a2;
          GPUTools::GL::EnumerateProgramActiveAttributes(&v88, a2, 1LL, v86);
          if (*(int *)(v9 + 3460) >= 3)
          {
            unsigned int v64 = *(void *)(v9 + 32);
            int v88 = v9;
            v89 = v64;
            v84[0] = _NSConcreteStackBlock;
            v84[1] = 3221225472LL;
            v84[2] = ___ZL16link_program_ARBP15__GLIContextRecPv_block_invoke_2_0;
            v84[3] = &unk_1F9148;
            v84[4] = &v97;
            v84[5] = v9;
            v85 = a2;
            GPUTools::GL::EnumerateProgramTransformFeedbackVaryings(&v88, a2, v84);
            unsigned int v65 = *(void *)(v9 + 32);
            int v88 = v9;
            v89 = v65;
            v82[0] = _NSConcreteStackBlock;
            v82[1] = 3221225472LL;
            v82[2] = ___ZL16link_program_ARBP15__GLIContextRecPv_block_invoke_3_0;
            v82[3] = &unk_1F9170;
            v82[4] = &v97;
            v82[5] = v9;
            int v83 = a2;
            GPUTools::GL::EnumerateProgramActiveUniformBlocks(&v88, a2, v82);
          }

          uint64_t v66 = *(void *)(v9 + 32);
          int v88 = v9;
          v89 = v66;
          uint64_t v67 = *(unsigned int *)(v9 + 3456);
          v80[0] = _NSConcreteStackBlock;
          v80[1] = 3221225472LL;
          v80[2] = ___ZL16link_program_ARBP15__GLIContextRecPv_block_invoke_4_0;
          v80[3] = &unk_1F9198;
          v80[4] = &v97;
          v80[5] = v9;
          uint64_t v81 = a2;
          GPUTools::GL::EnumerateProgramActiveUniforms(&v88, v67, a2, 1LL, v80);
        }
      }

      do
      {
        uint64_t v68 = __ldaxr(v10);
        uint64_t v69 = v68 - 1;
      }

      while (__stlxr(v69, v10));
      if (gCheckGLErrors) {
        uint64_t v70 = v69 < 1;
      }
      else {
        uint64_t v70 = 1;
      }
      if (!v70) {
        handle_opengl_thread_conflict((const void **)v9);
      }
      goto LABEL_74;
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  int v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    BOOL v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v19 = handle_opengl_thread_conflict((const void **)v9);
    BOOL v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_37:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4792LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  wrapper_cache_program_pre_link((ContextInfo *)v9, a2);
  check_errors(v9);
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4792LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError && (uint64_t v23 = *(unsigned int *)(v9 + 3404), (_DWORD)v23))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v9);
LABEL_25:
  if (!*(_DWORD *)(v9 + 3404))
  {
    (*(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v9 + 32) + 5264LL))( *(void *)(v9 + 16),  a2,  35714LL,  &v24);
    wrapper_cache_program_link((int8x8_t **)v9, a2, v24 == 1);
  }

  do
  {
    uint64_t v15 = __ldaxr(v10);
    uint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 < 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  int v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_37:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 4792LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  wrapper_cache_program_pre_link((ContextInfo *)v9, a2);
  check_errors(v9);
  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 4792LL))(a1, a2);
  uint64_t v16 = mach_absolute_time();
  uint64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError && (uint64_t v26 = *(unsigned int *)(v9 + 3404), (_DWORD)v26))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v9);
LABEL_25:
  if (!*(_DWORD *)(v9 + 3404))
  {
    (*(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v9 + 32) + 5264LL))( *(void *)(v9 + 16),  a2,  35714LL,  &v27);
    wrapper_cache_program_link((int8x8_t **)v9, a2, v27 == 1);
  }

  do
  {
    uint64_t v18 = __ldaxr(v10);
    id v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    BOOL v20 = v19 < 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_4CEE0(_Unwind_Exception *a1)
{
  uint64_t v3 = *(void **)(v1 - 136);
  if (v3) {
    free(v3);
  }
  _Unwind_Resume(a1);
}

void use_program_object_ARB(__GLIContextRec *a1, void *a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_59:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      id v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 24) + 4800LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::FB::Encode((uint64_t)v49, 645LL, (uint64_t)"Cul", v14, v15, v16, v17, v18, *(void *)v9);
    BOOL v20 = check_errors(v9);
    char v21 = byte_2070DD;
    if ((byte_2070DD & 1) != 0) {
      breakpoint_break( (uint64_t)v49,  (volatile int *)((char *)&stru_248.nreloc + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 32) + 4800LL))(a1, a2);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v49[0];
        *((void *)v49[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        unsigned int v48 = v49[0];
        *((void *)v49[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v22 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  id v19;
  BOOL v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  uint64_t v46;
  uint64_t v47;
  void *v48;
  void *v49[2];
  int v50;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_59:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      id v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 24) + 4800LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::FB::Encode((uint64_t)v49, 645LL, (uint64_t)"Cul", v14, v15, v16, v17, v18, *(void *)v9);
    BOOL v20 = check_errors(v9);
    char v21 = byte_2070DD;
    if ((byte_2070DD & 1) != 0) {
      breakpoint_break( (uint64_t)v49,  (volatile int *)((char *)&stru_248.nreloc + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 32) + 4800LL))(a1, a2);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v49[0];
        *((void *)v49[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        unsigned int v48 = v49[0];
        *((void *)v49[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v22 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    BOOL v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v19 = handle_opengl_thread_conflict((const void **)v9);
    BOOL v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_37:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 24) + 4800LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  check_errors(v9);
  (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 32) + 4800LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError && (uint64_t v23 = *(unsigned int *)(v9 + 3404), (_DWORD)v23))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v9);
LABEL_25:
  if (!*(_DWORD *)(v9 + 3404)) {
    wrapper_cache_program_use((ContextInfo *)v9, a2);
  }
  do
  {
    uint64_t v15 = __ldaxr(v10);
    uint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 < 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_37:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 24) + 4800LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  check_errors(v9);
  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 32) + 4800LL))(a1, a2);
  uint64_t v16 = mach_absolute_time();
  uint64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError && (uint64_t v26 = *(unsigned int *)(v9 + 3404), (_DWORD)v26))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v9);
LABEL_25:
  if (!*(_DWORD *)(v9 + 3404)) {
    wrapper_cache_program_use((ContextInfo *)v9, a2);
  }
  do
  {
    uint64_t v18 = __ldaxr(v10);
    id v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    BOOL v20 = v19 < 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_4D370( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void validate_program_ARB(__GLIContextRec *a1, void *a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_56:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      id v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 24) + 4808LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::FB::Encode((uint64_t)v49, 646LL, (uint64_t)"Cul", v14, v15, v16, v17, v18, *(void *)v9);
    char v21 = byte_2070DE;
    if ((byte_2070DE & 1) != 0) {
      breakpoint_break( (uint64_t)v49,  (volatile int *)((char *)&stru_248.nreloc + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 32) + 4808LL))(a1, a2);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v49[0];
        *((void *)v49[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        unsigned int v48 = v49[0];
        *((void *)v49[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v22 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  id v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  uint64_t v46;
  uint64_t v47;
  void *v48;
  void *v49[2];
  int v50;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_56:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      id v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 24) + 4808LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::FB::Encode((uint64_t)v49, 646LL, (uint64_t)"Cul", v14, v15, v16, v17, v18, *(void *)v9);
    char v21 = byte_2070DE;
    if ((byte_2070DE & 1) != 0) {
      breakpoint_break( (uint64_t)v49,  (volatile int *)((char *)&stru_248.nreloc + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 32) + 4808LL))(a1, a2);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v49[0];
        *((void *)v49[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        unsigned int v48 = v49[0];
        *((void *)v49[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v22 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 24) + 4808LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 32) + 4808LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    uint64_t v15 = __ldaxr(v10);
    uint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 < 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  signed int v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 24) + 4808LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, void *))(*(void *)(v9 + 32) + 4808LL))(a1, a2);
  uint64_t v16 = mach_absolute_time();
  uint64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v10);
    id v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_4D76C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void uniform1f(__GLIContextRec *a1, uint64_t a2, float a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v11);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_59:
        unsigned int v43 = __ldaxr(v12);
      while (__stlxr(v43 - 1, v12));
      id v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 4816LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
    __int128 v50 = 0u;
    __int128 v51 = 0u;
    __int128 v52 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, *(void **)v11);
    *(_BYTE *)(v11 + 4709) = 67;
    uint64_t v18 = (_BYTE *)(v11 + 4710);
    if ((_DWORD)v17 == -1)
    {
      *uint64_t v18 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, -1);
      uint64_t v19 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v18 = 1047084118;
      snprintf((char *)(v11 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v11 + 40), *(_DWORD *)(v11 + 2068), v17);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, (void *)(v11 + 4773));
      uint64_t v19 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, a3);
    *(_WORD *)&v18[v19] = 102;
    uint64_t v20 = GPUTools::FB::Encode(v53, 609LL, 0LL, v11 + 4709, &v49);
    char v21 = byte_2070B9;
    if ((byte_2070B9 & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_248.segname[9], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 4816LL))(a1, v17, a3);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v53[0];
        *((void *)v53[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        unsigned int v48 = v53[0];
        *((void *)v53[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v22 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  _BYTE *v18;
  uint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  uint64_t v46;
  uint64_t v47;
  void *v48;
  char *v49;
  __int128 v50;
  __int128 v51;
  __int128 v52;
  void *v53[2];
  int v54;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v11);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_59:
        unsigned int v43 = __ldaxr(v12);
      while (__stlxr(v43 - 1, v12));
      id v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 4816LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
    __int128 v50 = 0u;
    __int128 v51 = 0u;
    __int128 v52 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, *(void **)v11);
    *(_BYTE *)(v11 + 4709) = 67;
    uint64_t v18 = (_BYTE *)(v11 + 4710);
    if ((_DWORD)v17 == -1)
    {
      *uint64_t v18 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, -1);
      uint64_t v19 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v18 = 1047084118;
      snprintf((char *)(v11 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v11 + 40), *(_DWORD *)(v11 + 2068), v17);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, (void *)(v11 + 4773));
      uint64_t v19 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, a3);
    *(_WORD *)&v18[v19] = 102;
    uint64_t v20 = GPUTools::FB::Encode(v53, 609LL, 0LL, v11 + 4709, &v49);
    char v21 = byte_2070B9;
    if ((byte_2070B9 & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_248.segname[9], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 4816LL))(a1, v17, a3);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v53[0];
        *((void *)v53[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        unsigned int v48 = v53[0];
        *((void *)v53[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v22 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 4816LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
  (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 4816LL))(a1, v17, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      signed int v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        id v27 = __ldaxr(v12);
      while (__stlxr(v27 - 1, v12));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 24) + 4816LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
  uint64_t v18 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, float))(*(void *)(v11 + 32) + 4816LL))(a1, v17, a3);
  uint64_t v19 = mach_absolute_time();
  uint64_t v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v18;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      unsigned int v29 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v11);
      }
    }
  }

  do
  {
    char v21 = __ldaxr(v12);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_4DC58( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform2f(__GLIContextRec *a1, uint64_t a2, float a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 24) + 4824LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    *(_BYTE *)(v13 + 4709) = 67;
    uint64_t v20 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v19 == -1)
    {
      *uint64_t v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v20 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    strcpy(&v20[v21], "ff");
    uint64_t v22 = GPUTools::FB::Encode(v55, 615LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_2070BF;
    if ((byte_2070BF & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.segname[15], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 32) + 4824LL))( a1,  v19,  a3,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        __int128 v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  _BYTE *v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  char *v51;
  __int128 v52;
  __int128 v53;
  __int128 v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 24) + 4824LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    *(_BYTE *)(v13 + 4709) = 67;
    uint64_t v20 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v19 == -1)
    {
      *uint64_t v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v20 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    strcpy(&v20[v21], "ff");
    uint64_t v22 = GPUTools::FB::Encode(v55, 615LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_2070BF;
    if ((byte_2070BF & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.segname[15], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 32) + 4824LL))( a1,  v19,  a3,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        __int128 v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 24) + 4824LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v23 = __ldaxr(v14);
      while (__stlxr(v23 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
  (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 32) + 4824LL))(a1, v19, a3, a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v13);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v14);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        id v29 = __ldaxr(v14);
      while (__stlxr(v29 - 1, v14));
      id v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 24) + 4824LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
  uint64_t v20 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, float, float))(*(void *)(v13 + 32) + 4824LL))(a1, v19, a3, a4);
  uint64_t v21 = mach_absolute_time();
  uint64_t v22 = vdupq_n_s64(1uLL);
  v22.i64[0] = v21 - v20;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unsigned int v31 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v13);
      }
    }
  }

  do
  {
    char v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_4E178( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform3f(__GLIContextRec *a1, uint64_t a2, float a3, float a4, float a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 24) + 4832LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    *(_BYTE *)(v15 + 4709) = 67;
    uint64_t v22 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v22 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    *(_DWORD *)&v22[v23] = 6710886;
    uint64_t v24 = GPUTools::FB::Encode(v57, 621LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_2070C5;
    if ((byte_2070C5 & 1) != 0) {
      breakpoint_break( (uint64_t)v57,  (volatile int *)((char *)&stru_248.addr + 5),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 32) + 4832LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  _BYTE *v22;
  uint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  char *v53;
  __int128 v54;
  __int128 v55;
  __int128 v56;
  void *v57[2];
  int v58;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 24) + 4832LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    *(_BYTE *)(v15 + 4709) = 67;
    uint64_t v22 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v22 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    *(_DWORD *)&v22[v23] = 6710886;
    uint64_t v24 = GPUTools::FB::Encode(v57, 621LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_2070C5;
    if ((byte_2070C5 & 1) != 0) {
      breakpoint_break( (uint64_t)v57,  (volatile int *)((char *)&stru_248.addr + 5),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 32) + 4832LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 24) + 4832LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v25 = __ldaxr(v16);
      while (__stlxr(v25 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
  (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 32) + 4832LL))( a1,  v21,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      id v30 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v15);
      }
    }
  }

  do
  {
    uint64_t v22 = __ldaxr(v16);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v16));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  int64x2_t v24;
  unsigned int v25;
  signed int v26;
  BOOL v27;
  unsigned int v28;
  uint64_t v29;
  id v30;
  unsigned int v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v30 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v29 = handle_opengl_thread_conflict((const void **)v15);
    id v30 = [(id)DYGetGLGuestAppClient(v29) waitOnGraphicsSemaphoreAssertions];
    if ((int)v30 >= 1)
    {
      do
LABEL_34:
        id v31 = __ldaxr(v16);
      while (__stlxr(v31 - 1, v16));
      uint64_t v32 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v30) graphicsLockWaitQueue];
      dispatch_sync_f(v32, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 24) + 4832LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v30) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
  uint64_t v22 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, float, float, float))(*(void *)(v15 + 32) + 4832LL))( a1,  v21,  a3,  a4,  a5);
  uint64_t v23 = mach_absolute_time();
  uint64_t v24 = vdupq_n_s64(1uLL);
  v24.i64[0] = v23 - v22;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v24, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unsigned int v33 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v33) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v33, v15);
      }
    }
  }

  do
  {
    char v25 = __ldaxr(v16);
    uint64_t v26 = v25 - 1;
  }

  while (__stlxr(v26, v16));
  if (gCheckGLErrors) {
    uint64_t v27 = v26 < 1;
  }
  else {
    uint64_t v27 = 1;
  }
  if (!v27) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_4E6BC( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform4f(__GLIContextRec *a1, uint64_t a2, float a3, float a4, float a5, float a6)
{
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v17);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_59:
        unsigned int v49 = __ldaxr(v18);
      while (__stlxr(v49 - 1, v18));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 24) + 4840LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, (volatile int *)*(unsigned int *)(v17 + 2068), a2);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v17);
    *(_BYTE *)(v17 + 4709) = 67;
    uint64_t v24 = (_BYTE *)(v17 + 4710);
    if ((_DWORD)v23 == -1)
    {
      *uint64_t v24 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v25 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v24 = 1047084118;
      snprintf((char *)(v17 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v17 + 40), *(_DWORD *)(v17 + 2068), v23);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v17 + 4773));
      uint64_t v25 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    strcpy(&v24[v25], "ffff");
    uint64_t v26 = GPUTools::FB::Encode(v59, 627LL, 0LL, v17 + 4709, &v55);
    char v27 = byte_2070CB;
    if ((byte_2070CB & 1) != 0) {
      breakpoint_break( (uint64_t)v59,  (volatile int *)((char *)&stru_248.size + 3),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 32) + 4840LL))( a1,  v23,  a3,  a4,  a5,  a6);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v59[0];
        *((void *)v59[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        __int128 v54 = v59[0];
        *((void *)v59[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v28 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  _BYTE *v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  char *v55;
  __int128 v56;
  __int128 v57;
  __int128 v58;
  void *v59[2];
  int v60;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v17);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_59:
        unsigned int v49 = __ldaxr(v18);
      while (__stlxr(v49 - 1, v18));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 24) + 4840LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, (volatile int *)*(unsigned int *)(v17 + 2068), a2);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v17);
    *(_BYTE *)(v17 + 4709) = 67;
    uint64_t v24 = (_BYTE *)(v17 + 4710);
    if ((_DWORD)v23 == -1)
    {
      *uint64_t v24 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v25 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v24 = 1047084118;
      snprintf((char *)(v17 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v17 + 40), *(_DWORD *)(v17 + 2068), v23);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v17 + 4773));
      uint64_t v25 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    strcpy(&v24[v25], "ffff");
    uint64_t v26 = GPUTools::FB::Encode(v59, 627LL, 0LL, v17 + 4709, &v55);
    char v27 = byte_2070CB;
    if ((byte_2070CB & 1) != 0) {
      breakpoint_break( (uint64_t)v59,  (volatile int *)((char *)&stru_248.size + 3),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 32) + 4840LL))( a1,  v23,  a3,  a4,  a5,  a6);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v59[0];
        *((void *)v59[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        __int128 v54 = v59[0];
        *((void *)v59[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v28 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v18);
      while (__stlxr(v30 - 1, v18));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 24) + 4840LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        char v27 = __ldaxr(v18);
      while (__stlxr(v27 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, (volatile int *)*(unsigned int *)(v17 + 2068), a2);
  (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 32) + 4840LL))( a1,  v23,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v32 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v17);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v18);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v18));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  int64x2_t v26;
  unsigned int v27;
  signed int v28;
  BOOL v29;
  unsigned int v30;
  uint64_t v31;
  id v32;
  unsigned int v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v32 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v31 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v32 = [(id)DYGetGLGuestAppClient(v31) waitOnGraphicsSemaphoreAssertions];
    if ((int)v32 >= 1)
    {
      do
LABEL_34:
        id v33 = __ldaxr(v18);
      while (__stlxr(v33 - 1, v18));
      uint64_t v34 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v32) graphicsLockWaitQueue];
      dispatch_sync_f(v34, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 24) + 4840LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v32) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        uint64_t v30 = __ldaxr(v18);
      while (__stlxr(v30 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, (volatile int *)*(unsigned int *)(v17 + 2068), a2);
  uint64_t v24 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, float, float, float, float))(*(void *)(v17 + 32) + 4840LL))( a1,  v23,  a3,  a4,  a5,  a6);
  uint64_t v25 = mach_absolute_time();
  uint64_t v26 = vdupq_n_s64(1uLL);
  v26.i64[0] = v25 - v24;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v26, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      unsigned int v35 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v35) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v35, v17);
      }
    }
  }

  do
  {
    char v27 = __ldaxr(v18);
    uint64_t v28 = v27 - 1;
  }

  while (__stlxr(v28, v18));
  if (gCheckGLErrors) {
    uint64_t v29 = v28 < 1;
  }
  else {
    uint64_t v29 = 1;
  }
  if (!v29) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_4EC20( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform1i(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v11);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_59:
        unsigned int v43 = __ldaxr(v12);
      while (__stlxr(v43 - 1, v12));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 4848LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
    __int128 v50 = 0u;
    __int128 v51 = 0u;
    __int128 v52 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, *(void **)v11);
    *(_BYTE *)(v11 + 4709) = 67;
    signed int v18 = (_BYTE *)(v11 + 4710);
    if ((_DWORD)v17 == -1)
    {
      *signed int v18 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, -1);
      uint64_t v19 = 1LL;
    }

    else
    {
      *(_DWORD *)signed int v18 = 1047084118;
      snprintf((char *)(v11 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v11 + 40), *(_DWORD *)(v11 + 2068), v17);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, (void *)(v11 + 4773));
      uint64_t v19 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, a3);
    *(_WORD *)&v18[v19] = 105;
    uint64_t v20 = GPUTools::FB::Encode(v53, 611LL, 0LL, v11 + 4709, &v49);
    char v21 = byte_2070BB;
    if ((byte_2070BB & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_248.segname[11], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 4848LL))(a1, v17, a3);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v53[0];
        *((void *)v53[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        id v48 = v53[0];
        *((void *)v53[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v22 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  _BYTE *v18;
  uint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  uint64_t v46;
  uint64_t v47;
  void *v48;
  char *v49;
  __int128 v50;
  __int128 v51;
  __int128 v52;
  void *v53[2];
  int v54;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v11);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_59:
        unsigned int v43 = __ldaxr(v12);
      while (__stlxr(v43 - 1, v12));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 4848LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
    __int128 v50 = 0u;
    __int128 v51 = 0u;
    __int128 v52 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, *(void **)v11);
    *(_BYTE *)(v11 + 4709) = 67;
    signed int v18 = (_BYTE *)(v11 + 4710);
    if ((_DWORD)v17 == -1)
    {
      *signed int v18 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, -1);
      uint64_t v19 = 1LL;
    }

    else
    {
      *(_DWORD *)signed int v18 = 1047084118;
      snprintf((char *)(v11 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v11 + 40), *(_DWORD *)(v11 + 2068), v17);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, (void *)(v11 + 4773));
      uint64_t v19 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, a3);
    *(_WORD *)&v18[v19] = 105;
    uint64_t v20 = GPUTools::FB::Encode(v53, 611LL, 0LL, v11 + 4709, &v49);
    char v21 = byte_2070BB;
    if ((byte_2070BB & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_248.segname[11], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 4848LL))(a1, v17, a3);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v53[0];
        *((void *)v53[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        id v48 = v53[0];
        *((void *)v53[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v22 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 4848LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 4848LL))(a1, v17, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    signed int v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        id v27 = __ldaxr(v12);
      while (__stlxr(v27 - 1, v12));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 4848LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
  signed int v18 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 4848LL))(a1, v17, a3);
  uint64_t v19 = mach_absolute_time();
  uint64_t v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v18;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      unsigned int v29 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v11);
      }
    }
  }

  do
  {
    char v21 = __ldaxr(v12);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_4F11C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform2i(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 4856LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    *(_BYTE *)(v13 + 4709) = 67;
    uint64_t v20 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v19 == -1)
    {
      *uint64_t v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v20 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    strcpy(&v20[v21], "ii");
    uint64_t v22 = GPUTools::FB::Encode(v55, 617LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_2070C1;
    if ((byte_2070C1 & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_248.addr + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 4856LL))( a1,  v19,  a3,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        __int128 v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  _BYTE *v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  char *v51;
  __int128 v52;
  __int128 v53;
  __int128 v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 4856LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    *(_BYTE *)(v13 + 4709) = 67;
    uint64_t v20 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v19 == -1)
    {
      *uint64_t v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v20 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    strcpy(&v20[v21], "ii");
    uint64_t v22 = GPUTools::FB::Encode(v55, 617LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_2070C1;
    if ((byte_2070C1 & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_248.addr + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 4856LL))( a1,  v19,  a3,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        __int128 v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 4856LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v23 = __ldaxr(v14);
      while (__stlxr(v23 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 4856LL))( a1,  v19,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v13);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v14);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        id v29 = __ldaxr(v14);
      while (__stlxr(v29 - 1, v14));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 4856LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
  uint64_t v20 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 4856LL))( a1,  v19,  a3,  a4);
  uint64_t v21 = mach_absolute_time();
  uint64_t v22 = vdupq_n_s64(1uLL);
  v22.i64[0] = v21 - v20;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unsigned int v31 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v13);
      }
    }
  }

  do
  {
    char v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_4F63C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform3i(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 4864LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    *(_BYTE *)(v15 + 4709) = 67;
    uint64_t v22 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v22 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    *(_DWORD *)&v22[v23] = 6908265;
    uint64_t v24 = GPUTools::FB::Encode(v57, 623LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_2070C7;
    if ((byte_2070C7 & 1) != 0) {
      breakpoint_break( (uint64_t)v57,  (volatile int *)((char *)&stru_248.addr + 7),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 4864LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  _BYTE *v22;
  uint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  char *v53;
  __int128 v54;
  __int128 v55;
  __int128 v56;
  void *v57[2];
  int v58;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 4864LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    *(_BYTE *)(v15 + 4709) = 67;
    uint64_t v22 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v22 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    *(_DWORD *)&v22[v23] = 6908265;
    uint64_t v24 = GPUTools::FB::Encode(v57, 623LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_2070C7;
    if ((byte_2070C7 & 1) != 0) {
      breakpoint_break( (uint64_t)v57,  (volatile int *)((char *)&stru_248.addr + 7),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 4864LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 4864LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v25 = __ldaxr(v16);
      while (__stlxr(v25 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 4864LL))( a1,  v21,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v15);
      }
    }
  }

  do
  {
    uint64_t v22 = __ldaxr(v16);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v16));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  int64x2_t v24;
  unsigned int v25;
  signed int v26;
  BOOL v27;
  unsigned int v28;
  uint64_t v29;
  id v30;
  unsigned int v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v30 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v29 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v30 = [(id)DYGetGLGuestAppClient(v29) waitOnGraphicsSemaphoreAssertions];
    if ((int)v30 >= 1)
    {
      do
LABEL_34:
        id v31 = __ldaxr(v16);
      while (__stlxr(v31 - 1, v16));
      uint64_t v32 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v30) graphicsLockWaitQueue];
      dispatch_sync_f(v32, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 4864LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v30) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
  uint64_t v22 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 4864LL))( a1,  v21,  a3,  a4,  a5);
  uint64_t v23 = mach_absolute_time();
  uint64_t v24 = vdupq_n_s64(1uLL);
  v24.i64[0] = v23 - v22;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v24, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unsigned int v33 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v33) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v33, v15);
      }
    }
  }

  do
  {
    char v25 = __ldaxr(v16);
    uint64_t v26 = v25 - 1;
  }

  while (__stlxr(v26, v16));
  if (gCheckGLErrors) {
    uint64_t v27 = v26 < 1;
  }
  else {
    uint64_t v27 = 1;
  }
  if (!v27) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_4FB8C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform4i(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, unsigned int a6)
{
  uint64_t v11 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v11) {
    goto LABEL_12;
  }
  uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v13 = v11[4];
    BOOL v14 = v13 >= (unint64_t)a1;
    else {
      uint64_t v15 = v11 + 1;
    }
    if (v14) {
      uint64_t v12 = (uint64_t)v11;
    }
    uint64_t v11 = (void *)*v15;
  }

  while (*v15);
  if (v12 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v12 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v16 = *(void *)(v12 + 40);
  unsigned int v17 = (unsigned int *)(v16 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v16);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_59:
        unsigned int v48 = __ldaxr(v17);
      while (__stlxr(v48 - 1, v17));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 24)
                                                                                            + 4872LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v16 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v16, (volatile int *)*(unsigned int *)(v16 + 2068), a2);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v16);
    *(_BYTE *)(v16 + 4709) = 67;
    uint64_t v23 = (_BYTE *)(v16 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v16 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v16 + 40), *(_DWORD *)(v16 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v16 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    strcpy(&v23[v24], "iiii");
    uint64_t v25 = GPUTools::FB::Encode(v59, 629LL, 0LL, v16 + 4709, &v55);
    char v26 = byte_2070CD;
    if ((byte_2070CD & 1) != 0) {
      breakpoint_break( (uint64_t)v59,  (volatile int *)((char *)&stru_248.size + 5),  1LL,  *(unsigned int *)(v16 + 3404),  v16);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 32)
                                                                                            + 4872LL))( a1,  v22,  a3,  a4,  a5,  a6);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v59[0];
        *((void *)v59[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        __int128 v53 = v59[0];
        *((void *)v59[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v16);
    }

{
  void *v11;
  uint64_t v12;
  unint64_t v13;
  BOOL v14;
  void *v15;
  uint64_t v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  char *v55;
  __int128 v56;
  __int128 v57;
  __int128 v58;
  void *v59[2];
  int v60;
  uint64_t v11 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v11) {
    goto LABEL_12;
  }
  uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v13 = v11[4];
    BOOL v14 = v13 >= (unint64_t)a1;
    else {
      uint64_t v15 = v11 + 1;
    }
    if (v14) {
      uint64_t v12 = (uint64_t)v11;
    }
    uint64_t v11 = (void *)*v15;
  }

  while (*v15);
  if (v12 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v12 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v16 = *(void *)(v12 + 40);
  unsigned int v17 = (unsigned int *)(v16 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v16);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_59:
        unsigned int v48 = __ldaxr(v17);
      while (__stlxr(v48 - 1, v17));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 24)
                                                                                            + 4872LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v16 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v16, (volatile int *)*(unsigned int *)(v16 + 2068), a2);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v16);
    *(_BYTE *)(v16 + 4709) = 67;
    uint64_t v23 = (_BYTE *)(v16 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v16 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v16 + 40), *(_DWORD *)(v16 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v16 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    strcpy(&v23[v24], "iiii");
    uint64_t v25 = GPUTools::FB::Encode(v59, 629LL, 0LL, v16 + 4709, &v55);
    char v26 = byte_2070CD;
    if ((byte_2070CD & 1) != 0) {
      breakpoint_break( (uint64_t)v59,  (volatile int *)((char *)&stru_248.size + 5),  1LL,  *(unsigned int *)(v16 + 3404),  v16);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 32)
                                                                                            + 4872LL))( a1,  v22,  a3,  a4,  a5,  a6);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v59[0];
        *((void *)v59[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        __int128 v53 = v59[0];
        *((void *)v59[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v16);
    }

void sub_50100( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform1fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v13);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        unsigned int v52 = __ldaxr(v15);
      while (__stlxr(v52 - 1, v15));
      __int128 v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4880LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  int v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    if ((unint64_t)(4LL * (int)a3) < 0x41)
    {
      int v28 = snprintf(v25, v14 - v25 + 64, "@%df", a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
      uint64_t v27 = v28;
    }

    else
    {
      uint64_t v26 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v26, 4LL * (int)a3, a4, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v13 + 4644));
      *(_DWORD *)uint64_t v25 = 1046887509;
      uint64_t v27 = 4LL;
    }

    v25[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 610LL, 0LL, v13 + 4709, &v58);
    char v30 = byte_2070BA;
    if ((byte_2070BA & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_248.segname[10], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 32) + 4880LL))( a1,  v20,  a3,  a4);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      unint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        __int128 v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    unsigned int v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v48 = handle_opengl_thread_conflict((const void **)v13);
    unsigned int v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        uint64_t v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      id v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4880LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(4LL * (int)a3) < 0x41)
    {
      uint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%df", a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 610LL, 0LL, v13 + 4709, &v56);
    int v28 = byte_2070BA;
    if ((byte_2070BA & 1) != 0) {
      breakpoint_break((uint64_t)v60, (volatile int *)&stru_248.segname[10], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      char v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 32) + 4880LL))( a1,  v20,  a3,  a4);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v13);
    }

LABEL_33:
    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 610LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v13);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v15);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v15));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v15);
  while (__stlxr(v49 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4880LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v63);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
    unsigned int v42 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 616LL;
    }

    breakpoint_break((uint64_t)v63, (volatile int *)v56, v55, v42, v13);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v15);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v15));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v59);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v15);
  while (__stlxr(v50 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4888LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v63[0]) {
    free(v63[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v63);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
    unsigned int v42 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 622LL;
    }

    breakpoint_break((uint64_t)v63, (volatile int *)v56, v55, v42, v13);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v15);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v15));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v59);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v15);
  while (__stlxr(v50 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4896LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v63[0]) {
    free(v63[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v63);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
    unsigned int v42 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 628LL;
    }

    breakpoint_break((uint64_t)v63, (volatile int *)v56, v55, v42, v13);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v15);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v15));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v59);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v15);
  while (__stlxr(v50 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4904LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v63[0]) {
    free(v63[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 612LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v13);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v15);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v15));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v15);
  while (__stlxr(v49 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4912LL))(a1, a2, a3, a4);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v63);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
    unsigned int v42 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 618LL;
    }

    breakpoint_break((uint64_t)v63, (volatile int *)v56, v55, v42, v13);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v15);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v15));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v59);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v15);
  while (__stlxr(v50 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4920LL))(a1, a2, a3, a4);
LABEL_56:
  if (v63[0]) {
    free(v63[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v63);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
    unsigned int v42 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 624LL;
    }

    breakpoint_break((uint64_t)v63, (volatile int *)v56, v55, v42, v13);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v15);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v15));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v59);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v15);
  while (__stlxr(v50 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4928LL))(a1, a2, a3, a4);
LABEL_56:
  if (v63[0]) {
    free(v63[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v63);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
    unsigned int v42 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 630LL;
    }

    breakpoint_break((uint64_t)v63, (volatile int *)v56, v55, v42, v13);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v15);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v15));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v59);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v15);
  while (__stlxr(v50 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4936LL))(a1, a2, a3, a4);
LABEL_56:
  if (v63[0]) {
    free(v63[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 634LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 4944LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 637LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 4952LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 640LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 4960LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unint64_t v34 = *v21;
    if ((int)v34 >= 1)
    {
      unsigned int v35 = DYGetGLGuestAppClient(v29);
      GPUTools::Interpose::DYSavePointer(v35, v34 + 1, v28, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      *(_BYTE *)(strlen((const char *)(v15 + 4709)) + v15 + 470_Block_object_dispose((const void *)(v1 - 184), 8) = 0;
      strlcat((char *)(v15 + 4709), "U<cb>", 0x40uLL);
      unsigned int v40 = v66;
      int v63 = *((_OWORD *)v66 + 1);
      uint64_t v67 = v66;
      if (v68 >= 0x24)
      {
        *((_DWORD *)v66 + _Block_object_dispose((const void *)(v1 - 184), 8) = 0;
        *unsigned int v40 = 0u;
        v40[1] = 0u;
      }

      GPUTools::FB::Encode((uint64_t)&v66, 280LL, 256LL, v15 + 4709, v36, v37, v38, v39, *(void *)v15);
      *((_OWORD *)v66 + 1) = v63;
    }

    uint64_t v41 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v41) {
      uint64_t v41 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v66, v42);
    }
    unsigned int v44 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44) {
      uint64_t v41 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v66, v44, v43);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v41), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)&v66);
    }
    unsigned int v45 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v66);
    unsigned int v46 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v46 && gBreakOnError)
    {
      __int128 v59 = 3LL;
      __int128 v60 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v64 & 2) == 0) {
        goto LABEL_46;
      }
      __int128 v59 = 2LL;
      __int128 v60 = 280LL;
    }

    breakpoint_break((uint64_t)&v66, (volatile int *)v60, v59, v46, v15);
LABEL_46:
    signed int v47 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v45) defaultFbufStream];
    BOOL v48 = (unsigned int *)((char *)v47 + 56);
    do
      unsigned int v49 = __ldaxr(v48);
    while (__stlxr(1u, v48));
    if (v49 == 1)
    {
      do
      {
        while (*v48 == 1)
          ;
        do
          uint64_t v50 = __ldaxr(v48);
        while (__stlxr(1u, v48));
      }

      while (v50 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v47, (GPUTools::FB::Fbuf *)&v66, *(unsigned int *)v66, 1);
    atomic_store(0, v48);
    do
    {
      id v51 = __ldaxr(v16);
      unsigned int v52 = v51 - 1;
    }

    while (__stlxr(v52, v16));
    if (gCheckGLErrors) {
      __int128 v53 = v52 < 1;
    }
    else {
      __int128 v53 = 1;
    }
    if (!v53) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_59;
  }

  do
    uint64_t v54 = __ldaxr(v16);
  while (__stlxr(v54 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, void *, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5032LL))( a1,  a2,  a3,  a4,  a5);
LABEL_59:
  if (v66) {
    free(v66);
  }
}

    unint64_t v34 = *v21;
    if ((int)v34 >= 1)
    {
      unsigned int v35 = DYGetGLGuestAppClient(v29);
      GPUTools::Interpose::DYSavePointer(v35, v34 + 1, v28, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      *(_BYTE *)(strlen((const char *)(v15 + 4709)) + v15 + 470_Block_object_dispose((const void *)(v1 - 184), 8) = 0;
      strlcat((char *)(v15 + 4709), "U<cb>", 0x40uLL);
      unsigned int v40 = v66;
      int v63 = *((_OWORD *)v66 + 1);
      uint64_t v67 = v66;
      if (v68 >= 0x24)
      {
        *((_DWORD *)v66 + _Block_object_dispose((const void *)(v1 - 184), 8) = 0;
        *unsigned int v40 = 0u;
        v40[1] = 0u;
      }

      GPUTools::FB::Encode((uint64_t)&v66, 279LL, 256LL, v15 + 4709, v36, v37, v38, v39, *(void *)v15);
      *((_OWORD *)v66 + 1) = v63;
    }

    uint64_t v41 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v41) {
      uint64_t v41 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v66, v42);
    }
    unsigned int v44 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44) {
      uint64_t v41 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v66, v44, v43);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v41), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)&v66);
    }
    unsigned int v45 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v66);
    unsigned int v46 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v46 && gBreakOnError)
    {
      __int128 v59 = 3LL;
      __int128 v60 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v64 & 2) == 0) {
        goto LABEL_46;
      }
      __int128 v59 = 2LL;
      __int128 v60 = 279LL;
    }

    breakpoint_break((uint64_t)&v66, (volatile int *)v60, v59, v46, v15);
LABEL_46:
    signed int v47 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v45) defaultFbufStream];
    BOOL v48 = (unsigned int *)((char *)v47 + 56);
    do
      unsigned int v49 = __ldaxr(v48);
    while (__stlxr(1u, v48));
    if (v49 == 1)
    {
      do
      {
        while (*v48 == 1)
          ;
        do
          uint64_t v50 = __ldaxr(v48);
        while (__stlxr(1u, v48));
      }

      while (v50 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v47, (GPUTools::FB::Fbuf *)&v66, *(unsigned int *)v66, 1);
    atomic_store(0, v48);
    do
    {
      id v51 = __ldaxr(v16);
      unsigned int v52 = v51 - 1;
    }

    while (__stlxr(v52, v16));
    if (gCheckGLErrors) {
      __int128 v53 = v52 < 1;
    }
    else {
      __int128 v53 = 1;
    }
    if (!v53) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_59;
  }

  do
    uint64_t v54 = __ldaxr(v16);
  while (__stlxr(v54 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5272LL))( a1,  a2,  a3,  a4,  a5);
LABEL_59:
  if (v66) {
    free(v66);
  }
}

    unint64_t v34 = *v21;
    if ((int)v34 >= 1)
    {
      unsigned int v35 = DYGetGLGuestAppClient(v29);
      GPUTools::Interpose::DYSavePointer(v35, v34 + 1, v28, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      *(_BYTE *)(strlen((const char *)(v15 + 4709)) + v15 + 470_Block_object_dispose((const void *)(v1 - 184), 8) = 0;
      strlcat((char *)(v15 + 4709), "U<cb>", 0x40uLL);
      unsigned int v40 = v66;
      int v63 = *((_OWORD *)v66 + 1);
      uint64_t v67 = v66;
      if (v68 >= 0x24)
      {
        *((_DWORD *)v66 + _Block_object_dispose((const void *)(v1 - 184), 8) = 0;
        *unsigned int v40 = 0u;
        v40[1] = 0u;
      }

      GPUTools::FB::Encode((uint64_t)&v66, 268LL, 256LL, v15 + 4709, v36, v37, v38, v39, *(void *)v15);
      *((_OWORD *)v66 + 1) = v63;
    }

    uint64_t v41 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v41) {
      uint64_t v41 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v66, v42);
    }
    unsigned int v44 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44) {
      uint64_t v41 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v66, v44, v43);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v41), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)&v66);
    }
    unsigned int v45 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v66);
    unsigned int v46 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v46 && gBreakOnError)
    {
      __int128 v59 = 3LL;
      __int128 v60 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v64 & 2) == 0) {
        goto LABEL_46;
      }
      __int128 v59 = 2LL;
      __int128 v60 = 268LL;
    }

    breakpoint_break((uint64_t)&v66, (volatile int *)v60, v59, v46, v15);
LABEL_46:
    signed int v47 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v45) defaultFbufStream];
    BOOL v48 = (unsigned int *)((char *)v47 + 56);
    do
      unsigned int v49 = __ldaxr(v48);
    while (__stlxr(1u, v48));
    if (v49 == 1)
    {
      do
      {
        while (*v48 == 1)
          ;
        do
          uint64_t v50 = __ldaxr(v48);
        while (__stlxr(1u, v48));
      }

      while (v50 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v47, (GPUTools::FB::Fbuf *)&v66, *(unsigned int *)v66, 1);
    atomic_store(0, v48);
    do
    {
      id v51 = __ldaxr(v16);
      unsigned int v52 = v51 - 1;
    }

    while (__stlxr(v52, v16));
    if (gCheckGLErrors) {
      __int128 v53 = v52 < 1;
    }
    else {
      __int128 v53 = 1;
    }
    if (!v53) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_59;
  }

  do
    uint64_t v54 = __ldaxr(v16);
  while (__stlxr(v54 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5280LL))( a1,  a2,  a3,  a4,  a5);
LABEL_59:
  if (v66) {
    free(v66);
  }
}

    unsigned int v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v30), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v35) {
      unsigned int v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v36);
    }
    unsigned int v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v38) {
      unsigned int v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v38, v37);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v62);
    }
    unsigned int v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v62);
    unsigned int v40 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v40 && gBreakOnError)
    {
      __int128 v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v29 & 2) == 0) {
        goto LABEL_42;
      }
      __int128 v53 = 2LL;
      uint64_t v54 = 614LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v54, v53, v40, v12);
LABEL_42:
    uint64_t v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
    unsigned int v42 = (unsigned int *)((char *)v41 + 56);
    do
      signed int v43 = __ldaxr(v42);
    while (__stlxr(1u, v42));
    if (v43 == 1)
    {
      do
      {
        while (*v42 == 1)
          ;
        do
          unsigned int v44 = __ldaxr(v42);
        while (__stlxr(1u, v42));
      }

      while (v44 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v42);
    do
    {
      unsigned int v45 = __ldaxr(v14);
      unsigned int v46 = v45 - 1;
    }

    while (__stlxr(v46, v14));
    if (gCheckGLErrors) {
      signed int v47 = v46 < 1;
    }
    else {
      signed int v47 = 1;
    }
    if (!v47) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    BOOL v48 = __ldaxr(v14);
  while (__stlxr(v48 - 1, v14));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 24) + 5904LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v63);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v63);
    uint64_t v41 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 620LL;
    }

    breakpoint_break((uint64_t)v63, (volatile int *)v55, v54, v41, v12);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v14);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v14));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v59);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v14);
  while (__stlxr(v49 - 1, v14));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 24) + 5912LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v63[0]) {
    free(v63[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v63);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v63);
    uint64_t v41 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 626LL;
    }

    breakpoint_break((uint64_t)v63, (volatile int *)v55, v54, v41, v12);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v14);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v14));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v59);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v14);
  while (__stlxr(v49 - 1, v14));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 24) + 5920LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v63[0]) {
    free(v63[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v12 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v12, (uint64_t)v63);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v12 + 3480),  (GPUTools::FB::Fbuf *)(v12 + 3520),  (GPUTools::FB *)v63);
    uint64_t v41 = *(unsigned int *)(v12 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 632LL;
    }

    breakpoint_break((uint64_t)v63, (volatile int *)v55, v54, v41, v12);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v14);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v14));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v12);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v59);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v14);
  while (__stlxr(v49 - 1, v14));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 24) + 5928LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v63[0]) {
    free(v63[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 635LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 5992LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 638LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6000LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 636LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6008LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 641LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6016LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 639LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6024LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 642LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6032LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    uint64_t v37 = v64;
    __int128 v61 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + _Block_object_dispose((const void *)(v1 - 184), 8) = 0;
      GPUTools::FB::Fbuf *v37 = 0u;
      v37[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 214LL, 256LL, v15 + 4709, v29, v30, v31, v32, *(void *)v15);
    *((_OWORD *)v64 + 1) = v61;
    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)&v64);
    }
    signed int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v64);
    unsigned int v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      __int128 v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v62 & 2) == 0) {
        goto LABEL_44;
      }
      __int128 v57 = 2LL;
      __int128 v58 = 214LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v58, v57, v44, v15);
LABEL_44:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      signed int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          BOOL v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v16);
      uint64_t v50 = v49 - 1;
    }

    while (__stlxr(v50, v16));
    if (gCheckGLErrors) {
      id v51 = v50 < 1;
    }
    else {
      id v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_57;
  }

  do
    unsigned int v52 = __ldaxr(v16);
  while (__stlxr(v52 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, unsigned int *))(*(void *)(v15 + 24) + 6072LL))( a1,  a2,  a3,  a4,  a5);
LABEL_57:
  if (v64) {
    free(v64);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v56, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v56, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v56);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v56);
    unsigned int v39 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 897LL;
    }

    breakpoint_break((uint64_t)v56, (volatile int *)v53, v52, v39, v15);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v56, *(unsigned int *)v56[0], 1);
    atomic_store(0, v41);
    ReleaseStringToEncode(StringToEncode, a5);
    do
    {
      unsigned int v44 = __ldaxr(v16);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v16));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_55;
  }

  do
    signed int v47 = __ldaxr(v16);
  while (__stlxr(v47 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const char *))(*(void *)(v15 + 24) + 6512LL))( a1,  a2,  a3,  a4,  a5);
LABEL_55:
  if (v56[0]) {
    free(v56[0]);
  }
}

    unint64_t v34 = *v21;
    if ((int)v34 >= 1)
    {
      unsigned int v35 = DYGetGLGuestAppClient(v29);
      GPUTools::Interpose::DYSavePointer(v35, v34 + 1, v28, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      *(_BYTE *)(strlen((const char *)(v15 + 4709)) + v15 + 470_Block_object_dispose((const void *)(v1 - 184), 8) = 0;
      strlcat((char *)(v15 + 4709), "U<cb>", 0x40uLL);
      unsigned int v40 = v66;
      int v63 = *((_OWORD *)v66 + 1);
      uint64_t v67 = v66;
      if (v68 >= 0x24)
      {
        *((_DWORD *)v66 + _Block_object_dispose((const void *)(v1 - 184), 8) = 0;
        *unsigned int v40 = 0u;
        v40[1] = 0u;
      }

      GPUTools::FB::Encode((uint64_t)&v66, 893LL, 256LL, v15 + 4709, v36, v37, v38, v39, *(void *)v15);
      *((_OWORD *)v66 + 1) = v63;
    }

    uint64_t v41 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v41) {
      uint64_t v41 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v66, v42);
    }
    unsigned int v44 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44) {
      uint64_t v41 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v66, v44, v43);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v41), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)&v66);
    }
    unsigned int v45 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v66);
    unsigned int v46 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v46 && gBreakOnError)
    {
      __int128 v59 = 3LL;
      __int128 v60 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v64 & 2) == 0) {
        goto LABEL_46;
      }
      __int128 v59 = 2LL;
      __int128 v60 = 893LL;
    }

    breakpoint_break((uint64_t)&v66, (volatile int *)v60, v59, v46, v15);
LABEL_46:
    signed int v47 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v45) defaultFbufStream];
    BOOL v48 = (unsigned int *)((char *)v47 + 56);
    do
      unsigned int v49 = __ldaxr(v48);
    while (__stlxr(1u, v48));
    if (v49 == 1)
    {
      do
      {
        while (*v48 == 1)
          ;
        do
          uint64_t v50 = __ldaxr(v48);
        while (__stlxr(1u, v48));
      }

      while (v50 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v47, (GPUTools::FB::Fbuf *)&v66, *(unsigned int *)v66, 1);
    atomic_store(0, v48);
    do
    {
      id v51 = __ldaxr(v16);
      unsigned int v52 = v51 - 1;
    }

    while (__stlxr(v52, v16));
    if (gCheckGLErrors) {
      __int128 v53 = v52 < 1;
    }
    else {
      __int128 v53 = 1;
    }
    if (!v53) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_59;
  }

  do
    uint64_t v54 = __ldaxr(v16);
  while (__stlxr(v54 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 6624LL))( a1,  a2,  a3,  a4,  a5);
LABEL_59:
  if (v66) {
    free(v66);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 903LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v14);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v16);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v16));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v16);
  while (__stlxr(v50 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 24) + 6696LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 907LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 24) + 6704LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 911LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 24) + 6712LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 915LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 24) + 6720LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 901LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v14);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v16);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v16));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v16);
  while (__stlxr(v50 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6728LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 905LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6736LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 909LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6744LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      unsigned int v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v14 + 3404);
    if ((_DWORD)v41) {
      unsigned int v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v14, (uint64_t)v65);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v14 + 3480),  (GPUTools::FB::Fbuf *)(v14 + 3520),  (GPUTools::FB *)v65);
    signed int v43 = *(unsigned int *)(v14 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      __int128 v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v32 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v56 = 2LL;
      __int128 v57 = 913LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v57, v56, v43, v14);
LABEL_42:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          signed int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v45);
    do
    {
      BOOL v48 = __ldaxr(v16);
      unsigned int v49 = v48 - 1;
    }

    while (__stlxr(v49, v16));
    if (gCheckGLErrors) {
      uint64_t v50 = v49 < 1;
    }
    else {
      uint64_t v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v14);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    id v51 = __ldaxr(v16);
  while (__stlxr(v51 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6752LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v67, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v67, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v67);
    }
    signed int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v67);
    unsigned int v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      __int128 v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_42;
      }
      __int128 v57 = 2LL;
      __int128 v58 = 916LL;
    }

    breakpoint_break((uint64_t)v67, (volatile int *)v58, v57, v44, v15);
LABEL_42:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      signed int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          BOOL v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v67, *(unsigned int *)v67[0], 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v17);
      uint64_t v50 = v49 - 1;
    }

    while (__stlxr(v50, v17));
    if (gCheckGLErrors) {
      id v51 = v50 < 1;
    }
    else {
      id v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v63);
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v17);
  while (__stlxr(v52 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24)
                                                                                               + 6760LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v67[0]) {
    free(v67[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v67, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v67, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v67);
    }
    signed int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v67);
    unsigned int v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      __int128 v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_42;
      }
      __int128 v57 = 2LL;
      __int128 v58 = 917LL;
    }

    breakpoint_break((uint64_t)v67, (volatile int *)v58, v57, v44, v15);
LABEL_42:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      signed int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          BOOL v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v67, *(unsigned int *)v67[0], 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v17);
      uint64_t v50 = v49 - 1;
    }

    while (__stlxr(v50, v17));
    if (gCheckGLErrors) {
      id v51 = v50 < 1;
    }
    else {
      id v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v63);
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v17);
  while (__stlxr(v52 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24)
                                                                                               + 6768LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v67[0]) {
    free(v67[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v67, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v67, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v67);
    }
    signed int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v67);
    unsigned int v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      __int128 v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_42;
      }
      __int128 v57 = 2LL;
      __int128 v58 = 918LL;
    }

    breakpoint_break((uint64_t)v67, (volatile int *)v58, v57, v44, v15);
LABEL_42:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      signed int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          BOOL v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v67, *(unsigned int *)v67[0], 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v17);
      uint64_t v50 = v49 - 1;
    }

    while (__stlxr(v50, v17));
    if (gCheckGLErrors) {
      id v51 = v50 < 1;
    }
    else {
      id v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v63);
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v17);
  while (__stlxr(v52 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24)
                                                                                               + 6776LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v67[0]) {
    free(v67[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v64);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v64);
    uint64_t v41 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 941LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v55, v54, v41, v13);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v15);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v15));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v15);
  while (__stlxr(v49 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 24)
                                                                                              + 6816LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v65);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v65);
    unsigned int v42 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 945LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v56, v55, v42, v13);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v15);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v15));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v15);
  while (__stlxr(v50 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, void, unsigned int *))(*(void *)(v13 + 24)
                                                                                             + 6824LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v65);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v65);
    unsigned int v42 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 949LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v56, v55, v42, v13);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v15);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v15));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v15);
  while (__stlxr(v50 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, void, unsigned int *))(*(void *)(v13 + 24)
                                                                                             + 6832LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v65, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v65, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v65);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v65);
    unsigned int v42 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 953LL;
    }

    breakpoint_break((uint64_t)v65, (volatile int *)v56, v55, v42, v13);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v65, *(unsigned int *)v65[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v15);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v15));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v61);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v15);
  while (__stlxr(v50 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, void, unsigned int *))(*(void *)(v13 + 24)
                                                                                             + 6840LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v65[0]) {
    free(v65[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v67, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v67, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v67);
    }
    signed int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v67);
    unsigned int v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      __int128 v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_42;
      }
      __int128 v57 = 2LL;
      __int128 v58 = 956LL;
    }

    breakpoint_break((uint64_t)v67, (volatile int *)v58, v57, v44, v15);
LABEL_42:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      signed int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          BOOL v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v67, *(unsigned int *)v67[0], 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v17);
      uint64_t v50 = v49 - 1;
    }

    while (__stlxr(v50, v17));
    if (gCheckGLErrors) {
      id v51 = v50 < 1;
    }
    else {
      id v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v63);
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v17);
  while (__stlxr(v52 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24)
                                                                                               + 6848LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v67[0]) {
    free(v67[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v67, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v67, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v67);
    }
    signed int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v67);
    unsigned int v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      __int128 v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_42;
      }
      __int128 v57 = 2LL;
      __int128 v58 = 961LL;
    }

    breakpoint_break((uint64_t)v67, (volatile int *)v58, v57, v44, v15);
LABEL_42:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      signed int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          BOOL v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v67, *(unsigned int *)v67[0], 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v17);
      uint64_t v50 = v49 - 1;
    }

    while (__stlxr(v50, v17));
    if (gCheckGLErrors) {
      id v51 = v50 < 1;
    }
    else {
      id v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v63);
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v17);
  while (__stlxr(v52 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24)
                                                                                               + 6856LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v67[0]) {
    free(v67[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v67, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v67, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v67);
    }
    signed int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v67);
    unsigned int v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      __int128 v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_42;
      }
      __int128 v57 = 2LL;
      __int128 v58 = 958LL;
    }

    breakpoint_break((uint64_t)v67, (volatile int *)v58, v57, v44, v15);
LABEL_42:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      signed int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          BOOL v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v67, *(unsigned int *)v67[0], 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v17);
      uint64_t v50 = v49 - 1;
    }

    while (__stlxr(v50, v17));
    if (gCheckGLErrors) {
      id v51 = v50 < 1;
    }
    else {
      id v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v63);
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v17);
  while (__stlxr(v52 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24)
                                                                                               + 6864LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v67[0]) {
    free(v67[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v67, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v67, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v67);
    }
    signed int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v67);
    unsigned int v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      __int128 v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_42;
      }
      __int128 v57 = 2LL;
      __int128 v58 = 966LL;
    }

    breakpoint_break((uint64_t)v67, (volatile int *)v58, v57, v44, v15);
LABEL_42:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      signed int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          BOOL v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v67, *(unsigned int *)v67[0], 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v17);
      uint64_t v50 = v49 - 1;
    }

    while (__stlxr(v50, v17));
    if (gCheckGLErrors) {
      id v51 = v50 < 1;
    }
    else {
      id v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v63);
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v17);
  while (__stlxr(v52 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24)
                                                                                               + 6872LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v67[0]) {
    free(v67[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v67, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v67, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v67);
    }
    signed int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v67);
    unsigned int v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      __int128 v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_42;
      }
      __int128 v57 = 2LL;
      __int128 v58 = 963LL;
    }

    breakpoint_break((uint64_t)v67, (volatile int *)v58, v57, v44, v15);
LABEL_42:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      signed int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          BOOL v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v67, *(unsigned int *)v67[0], 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v17);
      uint64_t v50 = v49 - 1;
    }

    while (__stlxr(v50, v17));
    if (gCheckGLErrors) {
      id v51 = v50 < 1;
    }
    else {
      id v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v63);
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v17);
  while (__stlxr(v52 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24)
                                                                                               + 6880LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v67[0]) {
    free(v67[0]);
  }
}

    unsigned int v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      unsigned int v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v67, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      unsigned int v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v67, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v67);
    }
    signed int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v67);
    unsigned int v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      __int128 v57 = 3LL;
      __int128 v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v33 & 2) == 0) {
        goto LABEL_42;
      }
      __int128 v57 = 2LL;
      __int128 v58 = 968LL;
    }

    breakpoint_break((uint64_t)v67, (volatile int *)v58, v57, v44, v15);
LABEL_42:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      signed int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          BOOL v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)v67, *(unsigned int *)v67[0], 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v17);
      uint64_t v50 = v49 - 1;
    }

    while (__stlxr(v50, v17));
    if (gCheckGLErrors) {
      id v51 = v50 < 1;
    }
    else {
      id v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v63);
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v17);
  while (__stlxr(v52 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24)
                                                                                               + 6888LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v67[0]) {
    free(v67[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 610LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4880LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 616LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4888LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 622LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4896LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 628LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4904LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 612LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4912LL))(a1, a2, a3, a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 618LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4920LL))(a1, a2, a3, a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 624LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4928LL))(a1, a2, a3, a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 630LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4936LL))(a1, a2, a3, a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 634LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 4944LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 637LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 4952LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 640LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 4960LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 614LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5904LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 620LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5912LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 626LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5920LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v60, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v60, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)v60);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v60);
    unsigned int v39 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 632LL;
    }

    breakpoint_break((uint64_t)v60, (volatile int *)v53, v52, v39, v13);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v60, *(unsigned int *)v60[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v15);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v15));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v56);
    goto LABEL_56;
  }

  do
    signed int v47 = __ldaxr(v15);
  while (__stlxr(v47 - 1, v15));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5928LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v60[0]) {
    free(v60[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 635LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 5992LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 638LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6000LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 636LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6008LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 641LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6016LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 639LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6024LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 642LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6032LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    unint64_t v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      unint64_t v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v56, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v37) {
      unint64_t v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v56, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v56);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v56);
    unsigned int v39 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      unsigned int v52 = 3LL;
      __int128 v53 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_42;
      }
      unsigned int v52 = 2LL;
      __int128 v53 = 897LL;
    }

    breakpoint_break((uint64_t)v56, (volatile int *)v53, v52, v39, v15);
LABEL_42:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          signed int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v56, *(unsigned int *)v56[0], 1);
    atomic_store(0, v41);
    ReleaseStringToEncode(StringToEncode, a5);
    do
    {
      unsigned int v44 = __ldaxr(v16);
      unsigned int v45 = v44 - 1;
    }

    while (__stlxr(v45, v16));
    if (gCheckGLErrors) {
      unsigned int v46 = v45 < 1;
    }
    else {
      unsigned int v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_55;
  }

  do
    signed int v47 = __ldaxr(v16);
  while (__stlxr(v47 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const char *))(*(void *)(v15 + 24) + 6512LL))( a1,  a2,  a3,  a4,  a5);
LABEL_55:
  if (v56[0]) {
    free(v56[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 903LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 6696LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 907LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 6704LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 911LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 6712LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 915LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 6720LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 901LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6728LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 905LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6736LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 909LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6744LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 913LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6752LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v16 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v16, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v16 + 3480),  (GPUTools::FB::Fbuf *)(v16 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v16 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 916LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v16);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v18);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v18));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v16);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v18);
  while (__stlxr(v50 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v16 + 24)
                                                                                                + 6760LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v16 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v16, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v16 + 3480),  (GPUTools::FB::Fbuf *)(v16 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v16 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 917LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v16);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v18);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v18));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v16);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v18);
  while (__stlxr(v50 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v16 + 24)
                                                                                                + 6768LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v16 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v16, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v16 + 3480),  (GPUTools::FB::Fbuf *)(v16 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v16 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 918LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v16);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v18);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v18));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v16);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v18);
  while (__stlxr(v50 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v16 + 24)
                                                                                                + 6776LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 941LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, unsigned int *))(*(void *)(v15 + 24)
                                                                                              + 6816LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 945LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, unsigned int *))(*(void *)(v15 + 24)
                                                                                              + 6824LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 949LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, unsigned int *))(*(void *)(v15 + 24)
                                                                                              + 6832LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    id v36 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v36) {
      id v36 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v62, v37);
    }
    unsigned int v39 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v39) {
      id v36 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v62, v39, v38);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)v62);
    }
    unsigned int v40 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)v62);
    uint64_t v41 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v41 && gBreakOnError)
    {
      uint64_t v54 = 3LL;
      uint64_t v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v54 = 2LL;
      uint64_t v55 = 953LL;
    }

    breakpoint_break((uint64_t)v62, (volatile int *)v55, v54, v41, v15);
LABEL_42:
    unsigned int v42 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v40) defaultFbufStream];
    signed int v43 = (unsigned int *)((char *)v42 + 56);
    do
      unsigned int v44 = __ldaxr(v43);
    while (__stlxr(1u, v43));
    if (v44 == 1)
    {
      do
      {
        while (*v43 == 1)
          ;
        do
          unsigned int v45 = __ldaxr(v43);
        while (__stlxr(1u, v43));
      }

      while (v45 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v42, (GPUTools::FB::Fbuf *)v62, *(unsigned int *)v62[0], 1);
    atomic_store(0, v43);
    do
    {
      unsigned int v46 = __ldaxr(v17);
      signed int v47 = v46 - 1;
    }

    while (__stlxr(v47, v17));
    if (gCheckGLErrors) {
      BOOL v48 = v47 < 1;
    }
    else {
      BOOL v48 = 1;
    }
    if (!v48) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v58);
    goto LABEL_56;
  }

  do
    unsigned int v49 = __ldaxr(v17);
  while (__stlxr(v49 - 1, v17));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, unsigned int *))(*(void *)(v15 + 24)
                                                                                              + 6840LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62[0]) {
    free(v62[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v16 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v16, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v16 + 3480),  (GPUTools::FB::Fbuf *)(v16 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v16 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 956LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v16);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v18);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v18));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v16);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v18);
  while (__stlxr(v50 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v16 + 24)
                                                                                                + 6848LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v16 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v16, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v16 + 3480),  (GPUTools::FB::Fbuf *)(v16 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v16 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 961LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v16);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v18);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v18));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v16);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v18);
  while (__stlxr(v50 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v16 + 24)
                                                                                                + 6856LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v16 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v16, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v16 + 3480),  (GPUTools::FB::Fbuf *)(v16 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v16 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 958LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v16);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v18);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v18));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v16);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v18);
  while (__stlxr(v50 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v16 + 24)
                                                                                                + 6864LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v16 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v16, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v16 + 3480),  (GPUTools::FB::Fbuf *)(v16 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v16 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 966LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v16);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v18);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v18));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v16);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v18);
  while (__stlxr(v50 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v16 + 24)
                                                                                                + 6872LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v16 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v16, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v16 + 3480),  (GPUTools::FB::Fbuf *)(v16 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v16 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 963LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v16);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v18);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v18));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v16);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v18);
  while (__stlxr(v50 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v16 + 24)
                                                                                                + 6880LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

    uint64_t v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v37) {
      uint64_t v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v64, v38);
    }
    unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v16 + 3404);
    if ((_DWORD)v40) {
      uint64_t v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v64, v40, v39);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v16, (uint64_t)v64);
    }
    uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v16 + 3480),  (GPUTools::FB::Fbuf *)(v16 + 3520),  (GPUTools::FB *)v64);
    unsigned int v42 = *(unsigned int *)(v16 + 3404);
    if ((_DWORD)v42 && gBreakOnError)
    {
      uint64_t v55 = 3LL;
      uint64_t v56 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v31 & 2) == 0) {
        goto LABEL_42;
      }
      uint64_t v55 = 2LL;
      uint64_t v56 = 968LL;
    }

    breakpoint_break((uint64_t)v64, (volatile int *)v56, v55, v42, v16);
LABEL_42:
    signed int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
    unsigned int v44 = (unsigned int *)((char *)v43 + 56);
    do
      unsigned int v45 = __ldaxr(v44);
    while (__stlxr(1u, v44));
    if (v45 == 1)
    {
      do
      {
        while (*v44 == 1)
          ;
        do
          unsigned int v46 = __ldaxr(v44);
        while (__stlxr(1u, v44));
      }

      while (v46 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)v64, *(unsigned int *)v64[0], 1);
    atomic_store(0, v44);
    do
    {
      signed int v47 = __ldaxr(v18);
      BOOL v48 = v47 - 1;
    }

    while (__stlxr(v48, v18));
    if (gCheckGLErrors) {
      unsigned int v49 = v48 < 1;
    }
    else {
      unsigned int v49 = 1;
    }
    if (!v49) {
      handle_opengl_thread_conflict((const void **)v16);
    }
    GPUTools::FB::FIFOArgumentProvider::~FIFOArgumentProvider((GPUTools::FB::FIFOArgumentProvider *)&v60);
    goto LABEL_56;
  }

  do
    uint64_t v50 = __ldaxr(v18);
  while (__stlxr(v50 - 1, v18));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v16 + 24)
                                                                                                + 6888LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_56:
  if (v64[0]) {
    free(v64[0]);
  }
}

  if (v12) {
    operator delete(v12);
  }
  return v11;
}

void sub_506B8( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform2fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v13);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v15);
      while (__stlxr(v53 - 1, v15));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4888LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a3);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    unint64_t v26 = 8LL * (_DWORD)a3;
    if (v26 < 0x41)
    {
      int v29 = snprintf(v25, v14 - v25 + 64, "@%df", 2 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a4);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v27, v26, a4, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4644));
      *(_DWORD *)uint64_t v25 = 1046887509;
      uint64_t v28 = 4LL;
    }

    v25[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v63, 616LL, 0LL, v13 + 4709, &v59);
    char v31 = byte_2070C0;
    if ((byte_2070C0 & 1) != 0) {
      breakpoint_break((uint64_t)v63, (volatile int *)&stru_248.addr, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 32) + 4888LL))( a1,  v20,  a3,  a4);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v36 = v63[0];
        *((void *)v63[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        __int128 v58 = v63[0];
        *((void *)v63[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    BOOL v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    signed int v48 = handle_opengl_thread_conflict((const void **)v13);
    BOOL v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        unsigned int v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4888LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    uint64_t v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(8LL * (_DWORD)a3) < 0x41)
    {
      unint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%df", 2 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 616LL, 0LL, v13 + 4709, &v56);
    uint64_t v28 = byte_2070C0;
    if ((byte_2070C0 & 1) != 0) {
      breakpoint_break((uint64_t)v60, (volatile int *)&stru_248.addr, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    int v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 32) + 4888LL))( a1,  v20,  a3,  a4);
      int v29 = mach_absolute_time();
      char v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        int v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      int v29 = check_errors(v13);
    }

void sub_50C74( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform3fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v13);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v15);
      while (__stlxr(v53 - 1, v15));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4896LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a3);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    unint64_t v26 = 12LL * (_DWORD)a3;
    if (v26 < 0x41)
    {
      int v29 = snprintf(v25, v14 - v25 + 64, "@%df", 3 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a4);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v27, v26, a4, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4644));
      *(_DWORD *)uint64_t v25 = 1046887509;
      uint64_t v28 = 4LL;
    }

    v25[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v63, 622LL, 0LL, v13 + 4709, &v59);
    char v31 = byte_2070C6;
    if ((byte_2070C6 & 1) != 0) {
      breakpoint_break( (uint64_t)v63,  (volatile int *)((char *)&stru_248.addr + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 32) + 4896LL))( a1,  v20,  a3,  a4);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v36 = v63[0];
        *((void *)v63[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        __int128 v58 = v63[0];
        *((void *)v63[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    BOOL v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    signed int v48 = handle_opengl_thread_conflict((const void **)v13);
    BOOL v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        unsigned int v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4896LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    uint64_t v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(12LL * (_DWORD)a3) < 0x41)
    {
      unint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%df", 3 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 622LL, 0LL, v13 + 4709, &v56);
    uint64_t v28 = byte_2070C6;
    if ((byte_2070C6 & 1) != 0) {
      breakpoint_break( (uint64_t)v60,  (volatile int *)((char *)&stru_248.addr + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    int v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 32) + 4896LL))( a1,  v20,  a3,  a4);
      int v29 = mach_absolute_time();
      char v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        int v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      int v29 = check_errors(v13);
    }

void sub_51230( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform4fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v13);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v15);
      while (__stlxr(v53 - 1, v15));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4904LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a3);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    unint64_t v26 = 16LL * (_DWORD)a3;
    if (v26 < 0x41)
    {
      int v29 = snprintf(v25, v14 - v25 + 64, "@%df", 4 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a4);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v27, v26, a4, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4644));
      *(_DWORD *)uint64_t v25 = 1046887509;
      uint64_t v28 = 4LL;
    }

    v25[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v63, 628LL, 0LL, v13 + 4709, &v59);
    char v31 = byte_2070CC;
    if ((byte_2070CC & 1) != 0) {
      breakpoint_break((uint64_t)v63, (_DWORD *)&stru_248.size + 1, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 32) + 4904LL))( a1,  v20,  a3,  a4);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v36 = v63[0];
        *((void *)v63[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        __int128 v58 = v63[0];
        *((void *)v63[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    BOOL v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    signed int v48 = handle_opengl_thread_conflict((const void **)v13);
    BOOL v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        unsigned int v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 24) + 4904LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    uint64_t v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(16LL * (_DWORD)a3) < 0x41)
    {
      unint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%df", 4 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 628LL, 0LL, v13 + 4709, &v56);
    uint64_t v28 = byte_2070CC;
    if ((byte_2070CC & 1) != 0) {
      breakpoint_break((uint64_t)v60, (_DWORD *)&stru_248.size + 1, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    int v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, float *))(*(void *)(v13 + 32) + 4904LL))( a1,  v20,  a3,  a4);
      int v29 = mach_absolute_time();
      char v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        int v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      int v29 = check_errors(v13);
    }

void sub_517EC( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform1iv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v13);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        unsigned int v52 = __ldaxr(v15);
      while (__stlxr(v52 - 1, v15));
      unsigned int v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4912LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  int v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    if ((unint64_t)(4LL * (int)a3) < 0x41)
    {
      int v28 = snprintf(v25, v14 - v25 + 64, "@%di", a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
      uint64_t v27 = v28;
    }

    else
    {
      uint64_t v26 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v26, 4LL * (int)a3, a4, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v13 + 4644));
      *(_DWORD *)uint64_t v25 = 1047084117;
      uint64_t v27 = 4LL;
    }

    v25[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 612LL, 0LL, v13 + 4709, &v58);
    char v30 = byte_2070BC;
    if ((byte_2070BC & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_248.segname[12], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 32) + 4912LL))( a1,  v20,  a3,  a4);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      unint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    unsigned int v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v48 = handle_opengl_thread_conflict((const void **)v13);
    unsigned int v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        uint64_t v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      id v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4912LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    uint64_t v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(4LL * (int)a3) < 0x41)
    {
      uint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%di", a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 612LL, 0LL, v13 + 4709, &v56);
    int v28 = byte_2070BC;
    if ((byte_2070BC & 1) != 0) {
      breakpoint_break((uint64_t)v60, (volatile int *)&stru_248.segname[12], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      char v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 32) + 4912LL))( a1,  v20,  a3,  a4);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v13);
    }

void sub_51DA4( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform2iv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v13);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v15);
      while (__stlxr(v53 - 1, v15));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4920LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a3);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    unint64_t v26 = 8LL * (_DWORD)a3;
    if (v26 < 0x41)
    {
      int v29 = snprintf(v25, v14 - v25 + 64, "@%di", 2 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a4);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v27, v26, a4, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4644));
      *(_DWORD *)uint64_t v25 = 1047084117;
      uint64_t v28 = 4LL;
    }

    v25[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v63, 618LL, 0LL, v13 + 4709, &v59);
    char v31 = byte_2070C2;
    if ((byte_2070C2 & 1) != 0) {
      breakpoint_break( (uint64_t)v63,  (volatile int *)((char *)&stru_248.addr + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 32) + 4920LL))( a1,  v20,  a3,  a4);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v36 = v63[0];
        *((void *)v63[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        __int128 v58 = v63[0];
        *((void *)v63[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    BOOL v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    signed int v48 = handle_opengl_thread_conflict((const void **)v13);
    BOOL v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        unsigned int v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4920LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    uint64_t v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(8LL * (_DWORD)a3) < 0x41)
    {
      unint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%di", 2 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 618LL, 0LL, v13 + 4709, &v56);
    uint64_t v28 = byte_2070C2;
    if ((byte_2070C2 & 1) != 0) {
      breakpoint_break( (uint64_t)v60,  (volatile int *)((char *)&stru_248.addr + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    int v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 32) + 4920LL))( a1,  v20,  a3,  a4);
      int v29 = mach_absolute_time();
      char v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        int v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      int v29 = check_errors(v13);
    }

void sub_52360( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform3iv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v13);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v15);
      while (__stlxr(v53 - 1, v15));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4928LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a3);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    unint64_t v26 = 12LL * (_DWORD)a3;
    if (v26 < 0x41)
    {
      int v29 = snprintf(v25, v14 - v25 + 64, "@%di", 3 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a4);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v27, v26, a4, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4644));
      *(_DWORD *)uint64_t v25 = 1047084117;
      uint64_t v28 = 4LL;
    }

    v25[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v63, 624LL, 0LL, v13 + 4709, &v59);
    char v31 = byte_2070C8;
    if ((byte_2070C8 & 1) != 0) {
      breakpoint_break((uint64_t)v63, (volatile int *)&stru_248.size, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 32) + 4928LL))( a1,  v20,  a3,  a4);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v36 = v63[0];
        *((void *)v63[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        __int128 v58 = v63[0];
        *((void *)v63[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    BOOL v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    signed int v48 = handle_opengl_thread_conflict((const void **)v13);
    BOOL v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        unsigned int v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4928LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    uint64_t v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(12LL * (_DWORD)a3) < 0x41)
    {
      unint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%di", 3 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 624LL, 0LL, v13 + 4709, &v56);
    uint64_t v28 = byte_2070C8;
    if ((byte_2070C8 & 1) != 0) {
      breakpoint_break((uint64_t)v60, (volatile int *)&stru_248.size, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    int v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 32) + 4928LL))( a1,  v20,  a3,  a4);
      int v29 = mach_absolute_time();
      char v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        int v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      int v29 = check_errors(v13);
    }

void sub_5291C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform4iv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v13);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v15);
      while (__stlxr(v53 - 1, v15));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4936LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a3);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    unint64_t v26 = 16LL * (_DWORD)a3;
    if (v26 < 0x41)
    {
      int v29 = snprintf(v25, v14 - v25 + 64, "@%di", 4 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a4);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v27, v26, a4, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v13 + 4644));
      *(_DWORD *)uint64_t v25 = 1047084117;
      uint64_t v28 = 4LL;
    }

    v25[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v63, 630LL, 0LL, v13 + 4709, &v59);
    char v31 = byte_2070CE;
    if ((byte_2070CE & 1) != 0) {
      breakpoint_break( (uint64_t)v63,  (volatile int *)((char *)&stru_248.size + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 32) + 4936LL))( a1,  v20,  a3,  a4);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v36 = v63[0];
        *((void *)v63[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        __int128 v58 = v63[0];
        *((void *)v63[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  uint64_t v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    BOOL v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    signed int v48 = handle_opengl_thread_conflict((const void **)v13);
    BOOL v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        unsigned int v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 24) + 4936LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    uint64_t v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    _BYTE *v14 = 67;
    id v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *id v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)id v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(16LL * (_DWORD)a3) < 0x41)
    {
      unint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%di", 4 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 630LL, 0LL, v13 + 4709, &v56);
    uint64_t v28 = byte_2070CE;
    if ((byte_2070CE & 1) != 0) {
      breakpoint_break( (uint64_t)v60,  (volatile int *)((char *)&stru_248.size + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    int v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *))(*(void *)(v13 + 32) + 4936LL))( a1,  v20,  a3,  a4);
      int v29 = mach_absolute_time();
      char v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        int v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      int v29 = check_errors(v13);
    }

void sub_52ED8( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform_matrix2fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, float *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (_BYTE *)(v14 + 4709);
  unsigned int v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 4944LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, (volatile int *)*(unsigned int *)(v14 + 2068), a2);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    *uint64_t v15 = 67;
    uint64_t v22 = (_BYTE *)(v14 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v22 = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), *(_DWORD *)(v14 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a3);
    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    unint64_t v26 = &v22[v23 + 3];
    unint64_t v27 = 16LL * (_DWORD)a3;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 4 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)unint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 634LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2070D2;
    if ((byte_2070D2 & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (volatile int *)((char *)&stru_248.offset + 2),  1LL,  *(unsigned int *)(v14 + 3404),  v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 32) + 4944LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  _BYTE *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (_BYTE *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 4944LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    *unsigned int v16 = 67;
    uint64_t v23 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    unint64_t v26 = &v23[v24 + 3];
    if ((unint64_t)(16LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 4 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *unint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 634LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2070D2;
    if ((byte_2070D2 & 1) != 0) {
      breakpoint_break( (uint64_t)v62,  (volatile int *)((char *)&stru_248.offset + 2),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 32) + 4944LL))( a1,  v22,  a3,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_534BC( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform_matrix3fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, float *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (_BYTE *)(v14 + 4709);
  unsigned int v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 4952LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, (volatile int *)*(unsigned int *)(v14 + 2068), a2);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    *uint64_t v15 = 67;
    uint64_t v22 = (_BYTE *)(v14 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v22 = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), *(_DWORD *)(v14 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a3);
    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    unint64_t v26 = &v22[v23 + 3];
    unint64_t v27 = 36LL * (_DWORD)a3;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 9 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)unint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 637LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2070D5;
    if ((byte_2070D5 & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (volatile int *)((char *)&stru_248.align + 1),  1LL,  *(unsigned int *)(v14 + 3404),  v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 32) + 4952LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  _BYTE *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (_BYTE *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 4952LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    *unsigned int v16 = 67;
    uint64_t v23 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    unint64_t v26 = &v23[v24 + 3];
    if ((unint64_t)(36LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 9 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *unint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 637LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2070D5;
    if ((byte_2070D5 & 1) != 0) {
      breakpoint_break( (uint64_t)v62,  (volatile int *)((char *)&stru_248.align + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 32) + 4952LL))( a1,  v22,  a3,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_53AA0( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform_matrix4fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, float *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (_BYTE *)(v14 + 4709);
  unsigned int v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 4960LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, (volatile int *)*(unsigned int *)(v14 + 2068), a2);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    *uint64_t v15 = 67;
    uint64_t v22 = (_BYTE *)(v14 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v22 = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), *(_DWORD *)(v14 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a3);
    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    unint64_t v26 = &v22[v23 + 3];
    unint64_t v27 = 64LL * (_DWORD)a3;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 16 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)unint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 640LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2070D8;
    if ((byte_2070D8 & 1) != 0) {
      breakpoint_break((uint64_t)v65, (volatile int *)&stru_248.reloff, 1LL, *(unsigned int *)(v14 + 3404), v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 32) + 4960LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  _BYTE *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (_BYTE *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 4960LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    *unsigned int v16 = 67;
    uint64_t v23 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    unint64_t v26 = &v23[v24 + 3];
    if ((unint64_t)(64LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 16 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *unint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 640LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2070D8;
    if ((byte_2070D8 & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_248.reloff, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 32) + 4960LL))( a1,  v22,  a3,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_54084( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

uint64_t get_uniform_location_ARB(__GLIContextRec *a1, void *a2, const char *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      uint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  BOOL v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v57 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v56 = handle_opengl_thread_conflict((const void **)v11);
    id v57 = [(id)DYGetGLGuestAppClient(v56) waitOnGraphicsSemaphoreAssertions];
    if ((int)v57 >= 1)
    {
      do
LABEL_58:
        unsigned int v58 = __ldaxr(v12);
      while (__stlxr(v58 - 1, v12));
      __int128 v59 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v57) graphicsLockWaitQueue];
      dispatch_sync_f(v59, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5000LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v64[0] = 0LL;
  v64[1] = 0LL;
  int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v57) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::FB::Encode((uint64_t)v64, 299LL, (uint64_t)"CulcS", v16, v17, v18, v19, v20, *(void *)v11);
    char v23 = byte_206F83;
    if ((byte_206F83 & 1) != 0) {
      breakpoint_break( (uint64_t)v64,  (volatile int *)((char *)&stru_108.addr + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v29 = mach_absolute_time();
    uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 32) + 5000LL))( a1,  a2,  a3);
    uint64_t v31 = mach_absolute_time() - v29;
    unint64_t v32 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v33 = v64[0];
      *((void *)v64[0] + 2) = v29;
      v33[3] = v31;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v62 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
      __int128 v63 = v64[0];
      *((void *)v64[0] + 3) = v62;
      v63[2] = __udivti3(v32 * v29, (v32 * (unsigned __int128)v29) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v11);
LABEL_28:
    if ((_DWORD)v30 != -1)
    {
      snprintf(__str, 0x28uLL, "u_%016lx_%u_%u", **(void **)(v11 + 40), (_DWORD)a2, v30);
      GPUTools::FB::Encode((uint64_t)v64, 4294955008LL, (uint64_t)"V<i>", v34, v35, v36, v37, v38, (char)__str);
      uint64_t v40 = v30;
      goto LABEL_30;
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  id v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  uint64_t v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  void *v58[2];
  int v59;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      uint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  BOOL v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v50 = handle_opengl_thread_conflict((const void **)v11);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_56:
        signed int v52 = __ldaxr(v12);
      while (__stlxr(v52 - 1, v12));
      BOOL v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5000LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v58[0] = 0LL;
  v58[1] = 0LL;
  __int128 v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::FB::Encode((uint64_t)v58, 299LL, (uint64_t)"CulcS", v16, v17, v18, v19, v20, *(void *)v11);
    char v23 = byte_206F83;
    if ((byte_206F83 & 1) != 0) {
      breakpoint_break( (uint64_t)v58,  (volatile int *)((char *)&stru_108.addr + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if ([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4)
    {
      uint64_t v30 = 0xFFFFFFFFLL;
      goto LABEL_28;
    }

    uint64_t v29 = mach_absolute_time();
    uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 32) + 5000LL))( a1,  a2,  a3);
    uint64_t v31 = mach_absolute_time() - v29;
    unint64_t v32 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v33 = v58[0];
      *((void *)v58[0] + 2) = v29;
      v33[3] = v31;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v56 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
      id v57 = v58[0];
      *((void *)v58[0] + 3) = v56;
      v57[2] = __udivti3(v32 * v29, (v32 * (unsigned __int128)v29) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v11);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v58, 4294955008LL, (uint64_t)"i", v24, v25, v26, v27, v28, v30);
    uint64_t v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v35) {
      uint64_t v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v58, v36);
    }
    uint64_t v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v38) {
      uint64_t v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v58, v38, v37);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v58);
    }
    uint64_t v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v58);
    uint64_t v40 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v40 && gBreakOnError)
    {
      unsigned int v54 = 3LL;
      unsigned int v55 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v23 & 2) == 0) {
        goto LABEL_37;
      }
      unsigned int v54 = 2LL;
      unsigned int v55 = 299LL;
    }

    breakpoint_break((uint64_t)v58, (volatile int *)v55, v54, v40, v11);
LABEL_37:
    id v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
    uint64_t v42 = (unsigned int *)((char *)v41 + 56);
    do
      unsigned int v43 = __ldaxr(v42);
    while (__stlxr(1u, v42));
    if (v43 == 1)
    {
      do
      {
        while (*v42 == 1)
          ;
        do
          unsigned int v44 = __ldaxr(v42);
        while (__stlxr(1u, v42));
      }

      while (v44 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)v58, *(unsigned int *)v58[0], 1);
    atomic_store(0, v42);
    do
    {
      unsigned int v45 = __ldaxr(v12);
      uint64_t v46 = v45 - 1;
    }

    while (__stlxr(v46, v12));
    if (gCheckGLErrors) {
      unsigned int v47 = v46 < 1;
    }
    else {
      unsigned int v47 = 1;
    }
    if (!v47) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_50;
  }

  do
    unsigned int v49 = __ldaxr(v12);
  while (__stlxr(v49 - 1, v12));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5000LL))( a1,  a2,  a3);
LABEL_50:
  if (v58[0]) {
    free(v58[0]);
  }
  return v30;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      uint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  BOOL v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v11);
    char v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_35:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5000LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        id v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5000LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 32) + 5000LL))( a1,  a2,  a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v17;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      uint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  BOOL v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v12);
      while (__stlxr(v28 - 1, v12));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5000LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v25 = __ldaxr(v12);
      while (__stlxr(v25 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5000LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = mach_absolute_time();
  uint64_t v18 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 32) + 5000LL))( a1,  a2,  a3);
  uint64_t v19 = mach_absolute_time();
  uint64_t v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v11);
      }
    }
  }

  do
  {
    id v21 = __ldaxr(v12);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    char v23 = v22 < 1;
  }
  else {
    char v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v18;
}

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  id v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v22;
  dispatch_queue_s *v23;
  unsigned int v24;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      uint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  BOOL v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  uint64_t v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      uint64_t v22 = __ldaxr(v12);
    while (__stlxr(v22 - 1, v12));
    char v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5000LL))( v5,  a2,  a3);
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v16) state] == (char *)&dword_0 + 1)
  {
    uint64_t v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v17 & 1) != 0)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5000LL))( v5,  a2,  a3);
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return 0LL;
}

void sub_54568( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_active_uniform_ARB( __GLIContextRec *a1, void *a2, uint64_t a3, uint64_t a4, int *a5, int *a6, unsigned int *a7, char *a8)
{
  BOOL v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    BOOL v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v58 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v57 = handle_opengl_thread_conflict((const void **)v17);
    id v58 = [(id)DYGetGLGuestAppClient(v57) waitOnGraphicsSemaphoreAssertions];
    if ((int)v58 >= 1)
    {
      do
LABEL_71:
        unsigned int v59 = __ldaxr(v18);
      while (__stlxr(v59 - 1, v18));
      uint64_t v60 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v58) graphicsLockWaitQueue];
      dispatch_sync_f(v60, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v17 + 24) + 5008LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  signed int v72 = 0LL;
  BOOL v73 = 0LL;
  unsigned int v74 = 0;
  if ([(id)DYGetGLGuestAppClient(v58) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    int v71 = 0;
    BOOL v23 = a5 == 0LL;
    if (!a5) {
      a5 = &v71;
    }
    *a5 = 0;
    strcpy((char *)(v17 + 4709), "Culuii");
    if (v23) {
      uint64_t v24 = "t";
    }
    else {
      uint64_t v24 = "@1i";
    }
    strlcat((char *)(v17 + 4709), v24, 0x40uLL);
    if (a6) {
      uint64_t v25 = "@1i";
    }
    else {
      uint64_t v25 = "t";
    }
    strlcat((char *)(v17 + 4709), v25, 0x40uLL);
    if (a7) {
      uint64_t v26 = "@1e";
    }
    else {
      uint64_t v26 = "t";
    }
    strlcat((char *)(v17 + 4709), v26, 0x40uLL);
    strlcat((char *)(v17 + 4709), "t", 0x40uLL);
    GPUTools::FB::Encode((uint64_t)&v72, 212LL, 256LL, v17 + 4709, v27, v28, v29, v30, *(void *)v17);
    int v65 = a7;
    char v32 = byte_206F2C;
    if ((byte_206F2C & 1) != 0) {
      breakpoint_break((uint64_t)&v72, (volatile int *)&stru_B8.segname[12], 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v17 + 32) + 5008LL))( a1,  a2,  a3,  a4,  a5,  a6,  v65,  a8);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v72;
        v72[2] = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_39;
        }
      }

      else
      {
        uint64_t v63 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v64 = v72;
        v72[3] = v63;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v64[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_39;
        }
      }

      uint64_t v33 = check_errors(v17);
    }

{
  void *v16;
  uint64_t v17;
  unint64_t v18;
  BOOL v19;
  void *v20;
  uint64_t v21;
  unsigned int *v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  id v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  uint64_t v34;
  unint64_t v35;
  void *v36;
  id v37;
  GPUTools::FB::Fbuf *v38;
  unsigned int v39;
  GPUTools::FB::Fbuf *v40;
  dispatch_queue_s *v41;
  uint64_t v42;
  GPUTools::FB::Stream *v43;
  unsigned int *v44;
  unsigned int v45;
  unsigned int v46;
  unsigned int v47;
  signed int v48;
  BOOL v49;
  unsigned int v50;
  uint64_t v51;
  id v52;
  unsigned int v53;
  dispatch_queue_s *v54;
  uint64_t v55;
  uint64_t v56;
  uint64_t v57;
  void *v58;
  char v59;
  uint64_t v60;
  void *v61[2];
  int v62;
  uint64_t v16 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v16) {
    goto LABEL_12;
  }
  uint64_t v17 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v18 = v16[4];
    unsigned int v19 = v18 >= (unint64_t)a1;
    else {
      signed int v20 = v16 + 1;
    }
    if (v19) {
      uint64_t v17 = (uint64_t)v16;
    }
    uint64_t v16 = (void *)*v20;
  }

  while (*v20);
  if (v17 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v17 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v17 = ContextInfo::activeCtxInfoMap + 8;
  BOOL v21 = *(void *)(v17 + 40);
  id v22 = (unsigned int *)(v21 + 4640);
  do
  {
    BOOL v23 = __ldaxr(v22);
    uint64_t v24 = v23 + 1;
  }

  while (__stlxr(v24, v22));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 <= 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (v25)
  {
    unsigned int v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v51 = handle_opengl_thread_conflict((const void **)v21);
    unsigned int v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_56:
        unsigned int v53 = __ldaxr(v22);
      while (__stlxr(v53 - 1, v22));
      signed int v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v21 + 24) + 5008LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v21 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  uint64_t v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (uint64_t v30 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v30))
  {
    GPUTools::FB::Encode((uint64_t)v61, 212LL, 2LL, (uint64_t)"Culuiipppp", v26, v27, v28, v29, *(void *)v21);
    unsigned int v59 = byte_206F2C;
    if ((byte_206F2C & 1) != 0) {
      breakpoint_break((uint64_t)v61, (volatile int *)&stru_B8.segname[12], 1LL, *(unsigned int *)(v21 + 3404), v21);
    }
    char v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    uint64_t v60 = v21;
    if (!(v32 & 0x10 | v59 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v60 + 32) + 5008LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      char v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      uint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v36 = v61[0];
        *((void *)v61[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        id v58 = v61[0];
        *((void *)v61[0] + 3) = v57;
        char v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      char v32 = check_errors(v60);
    }

{
  void *v15;
  uint64_t v16;
  unint64_t v17;
  BOOL v18;
  void *v19;
  uint64_t v20;
  unsigned int *v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  id v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  BOOL v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v17 = v15[4];
    uint64_t v18 = v17 >= (unint64_t)a1;
    else {
      unsigned int v19 = v15 + 1;
    }
    if (v18) {
      uint64_t v16 = (uint64_t)v15;
    }
    BOOL v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  signed int v20 = *(void *)(v16 + 40);
  BOOL v21 = (unsigned int *)(v20 + 4640);
  do
  {
    id v22 = __ldaxr(v21);
    BOOL v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 <= 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (v24)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v20);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        char v32 = __ldaxr(v21);
      while (__stlxr(v32 - 1, v21));
      uint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 24) + 5008LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v20 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v25)
    {
      do
        uint64_t v29 = __ldaxr(v21);
      while (__stlxr(v29 - 1, v21));
      [(id)DYGetGLGuestAppClient(v25) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 32) + 5008LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
  ++*(void *)(v20 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v20);
    if (gBreakOnError)
    {
      uint64_t v34 = *(unsigned int *)(v20 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v20);
      }
    }
  }

  do
  {
    uint64_t v26 = __ldaxr(v21);
    uint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v21));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v20);
  }
}

{
  void *v15;
  uint64_t v16;
  unint64_t v17;
  BOOL v18;
  void *v19;
  uint64_t v20;
  unsigned int *v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  id v25;
  uint64_t v26;
  char *v27;
  uint64_t v28;
  uint64_t v29;
  int64x2_t v30;
  unsigned int v31;
  signed int v32;
  BOOL v33;
  unsigned int v34;
  uint64_t v35;
  id v36;
  unsigned int v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  BOOL v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v17 = v15[4];
    uint64_t v18 = v17 >= (unint64_t)a1;
    else {
      unsigned int v19 = v15 + 1;
    }
    if (v18) {
      uint64_t v16 = (uint64_t)v15;
    }
    BOOL v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v16 = ContextInfo::activeCtxInfoMap + 8;
  signed int v20 = *(void *)(v16 + 40);
  BOOL v21 = (unsigned int *)(v20 + 4640);
  do
  {
    id v22 = __ldaxr(v21);
    BOOL v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 <= 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (v24)
  {
    unint64_t v36 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v35 = handle_opengl_thread_conflict((const void **)v20);
    unint64_t v36 = [(id)DYGetGLGuestAppClient(v35) waitOnGraphicsSemaphoreAssertions];
    if ((int)v36 >= 1)
    {
      do
LABEL_34:
        uint64_t v37 = __ldaxr(v21);
      while (__stlxr(v37 - 1, v21));
      uint64_t v38 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v36) graphicsLockWaitQueue];
      dispatch_sync_f(v38, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 24) + 5008LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v20 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v36) state] == (char *)&dword_0 + 1)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v25)
    {
      do
        uint64_t v34 = __ldaxr(v21);
      while (__stlxr(v34 - 1, v21));
      [(id)DYGetGLGuestAppClient(v25) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v26 = mach_absolute_time();
  uint64_t v27 = a8;
  uint64_t v28 = v26;
  (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 32) + 5008LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  v27);
  uint64_t v29 = mach_absolute_time();
  uint64_t v30 = vdupq_n_s64(1uLL);
  v30.i64[0] = v29 - v28;
  *(int64x2_t *)(v20 + 3696) = vaddq_s64(v30, *(int64x2_t *)(v20 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v20);
    if (gBreakOnError)
    {
      uint64_t v39 = *(unsigned int *)(v20 + 3404);
      if ((_DWORD)v39) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v39, v20);
      }
    }
  }

  do
  {
    uint64_t v31 = __ldaxr(v21);
    char v32 = v31 - 1;
  }

  while (__stlxr(v32, v21));
  if (gCheckGLErrors) {
    uint64_t v33 = v32 < 1;
  }
  else {
    uint64_t v33 = 1;
  }
  if (!v33) {
    handle_opengl_thread_conflict((const void **)v20);
  }
}

void sub_54B30(_Unwind_Exception *exception_object)
{
  unint64_t v4 = *(void **)(v2 - 112);
  if (v4) {
    free(v4);
  }
  _Unwind_Resume(exception_object);
}

void get_uniformfv_ARB(__GLIContextRec *a1, void *a2, uint64_t a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      BOOL v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v13);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_59:
        unsigned int v55 = __ldaxr(v14);
      while (__stlxr(v55 - 1, v14));
      unsigned int v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, float *))(*(void *)(v13 + 24) + 5016LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  uint64_t v80 = 0LL;
  uint64_t v81 = 0LL;
  unsigned int v82 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    if ((a3 & 0x80000000) == 0)
    {
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, a3);
      GPUTools::FB::Encode((uint64_t)&v80, 300LL, 256LL, (uint64_t)"CulV<i>p", v23, v24, v25, v26, *(void *)v13);
      char v28 = byte_206F84;
      if ((byte_206F84 & 1) != 0) {
        breakpoint_break((uint64_t)&v80, (_DWORD *)&stru_108.addr + 1, 1LL, *(unsigned int *)(v13 + 3404), v13);
      }
      if (!([(id)DYGetGLGuestAppClient(v27) overrideFlags] & 0x10 | v28 & 4))
      {
        uint64_t v29 = mach_absolute_time();
        (*(void (**)(__GLIContextRec *, void *, uint64_t, float *))(*(void *)(v13 + 32) + 5016LL))( a1,  a2,  a3,  a4);
        uint64_t v30 = mach_absolute_time() - v29;
        unint64_t v31 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          char v32 = v80;
          *((void *)v80 + 2) = v29;
          v32[3] = v30;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v73 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
          unsigned int v74 = v80;
          *((void *)v80 + 3) = v73;
          v74[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v13);
      }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  id v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  unint64_t v28;
  void *v29;
  id v30;
  GPUTools::FB::Fbuf *v31;
  unsigned int v32;
  GPUTools::FB::Fbuf *v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  GPUTools::FB::Stream *v36;
  unsigned int *v37;
  unsigned int v38;
  unsigned int v39;
  unsigned int v40;
  signed int v41;
  BOOL v42;
  unsigned int v43;
  uint64_t v44;
  id v45;
  unsigned int v46;
  dispatch_queue_s *v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  void *v52[2];
  int v53;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      BOOL v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    unsigned int v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v13);
    unsigned int v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_56:
        uint64_t v46 = __ldaxr(v14);
      while (__stlxr(v46 - 1, v14));
      unsigned int v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, float *))(*(void *)(v13 + 24) + 5016LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v52[0] = 0LL;
  v52[1] = 0LL;
  uint64_t v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)v52, 300LL, 2LL, (uint64_t)"Culip", v18, v19, v20, v21, *(void *)v13);
    uint64_t v24 = byte_206F84;
    if ((byte_206F84 & 1) != 0) {
      breakpoint_break((uint64_t)v52, (_DWORD *)&stru_108.addr + 1, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, uint64_t, float *))(*(void *)(v13 + 32) + 5016LL))( a1,  a2,  a3,  a4);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      char v28 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v29 = v52[0];
        *((void *)v52[0] + 2) = v26;
        v29[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        signed int v50 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        BOOL v51 = v52[0];
        *((void *)v52[0] + 3) = v50;
        uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
        v51[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v25 = check_errors(v13);
    }

LABEL_66:
    id v64 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v59), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v64) {
      id v64 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v80, v65);
    }
    __int128 v67 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v67) {
      id v64 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v80, v67, v66);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v64), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v80);
    }
    uint64_t v68 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v80);
    uint64_t v69 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v69 && gBreakOnError)
    {
      uint64_t v77 = 3LL;
      uint64_t v78 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v58 & 2) == 0)
      {
LABEL_75:
        uint64_t v70 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v68) defaultFbufStream];
        GPUTools::FB::Stream::Write(v70, (GPUTools::FB::Fbuf *)&v80, 1);
        do
        {
LABEL_47:
          unsigned int v49 = __ldaxr(v14);
          signed int v50 = v49 - 1;
        }

        while (__stlxr(v50, v14));
        if (gCheckGLErrors) {
          BOOL v51 = v50 < 1;
        }
        else {
          BOOL v51 = 1;
        }
        if (!v51) {
          handle_opengl_thread_conflict((const void **)v13);
        }
        goto LABEL_53;
      }

      uint64_t v77 = 2LL;
      uint64_t v78 = 300LL;
    }

    breakpoint_break((uint64_t)&v80, (volatile int *)v78, v77, v69, v13);
    goto LABEL_75;
  }

  do
    unsigned int v52 = __ldaxr(v14);
  while (__stlxr(v52 - 1, v14));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, void *, uint64_t, float *))(*(void *)(v13 + 24) + 5016LL))(a1, a2, a3, a4);
LABEL_53:
  if (v80) {
    free(v80);
  }
}

    id v64 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v59), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v64) {
      id v64 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v80, v65);
    }
    __int128 v67 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v67) {
      id v64 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v80, v67, v66);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v64), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v80);
    }
    uint64_t v68 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v80);
    uint64_t v69 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v69 && gBreakOnError)
    {
      uint64_t v77 = 3LL;
      uint64_t v78 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v58 & 2) == 0)
      {
LABEL_75:
        uint64_t v70 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v68) defaultFbufStream];
        GPUTools::FB::Stream::Write(v70, (GPUTools::FB::Fbuf *)&v80, 1);
        do
        {
LABEL_47:
          unsigned int v49 = __ldaxr(v14);
          signed int v50 = v49 - 1;
        }

        while (__stlxr(v50, v14));
        if (gCheckGLErrors) {
          BOOL v51 = v50 < 1;
        }
        else {
          BOOL v51 = 1;
        }
        if (!v51) {
          handle_opengl_thread_conflict((const void **)v13);
        }
        goto LABEL_53;
      }

      uint64_t v77 = 2LL;
      uint64_t v78 = 301LL;
    }

    breakpoint_break((uint64_t)&v80, (volatile int *)v78, v77, v69, v13);
    goto LABEL_75;
  }

  do
    unsigned int v52 = __ldaxr(v14);
  while (__stlxr(v52 - 1, v14));
  [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, void *, uint64_t, int *))(*(void *)(v13 + 24) + 5024LL))(a1, a2, a3, a4);
LABEL_53:
  if (v80) {
    free(v80);
  }
}

void sub_5522C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_uniformiv_ARB(__GLIContextRec *a1, void *a2, uint64_t a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      BOOL v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v13);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_59:
        unsigned int v55 = __ldaxr(v14);
      while (__stlxr(v55 - 1, v14));
      unsigned int v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, int *))(*(void *)(v13 + 24) + 5024LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  uint64_t v80 = 0LL;
  uint64_t v81 = 0LL;
  unsigned int v82 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    if ((a3 & 0x80000000) == 0)
    {
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, a3);
      GPUTools::FB::Encode((uint64_t)&v80, 301LL, 256LL, (uint64_t)"CulV<i>p", v23, v24, v25, v26, *(void *)v13);
      char v28 = byte_206F85;
      if ((byte_206F85 & 1) != 0) {
        breakpoint_break( (uint64_t)&v80,  (volatile int *)((char *)&stru_108.addr + 5),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
      }
      if (!([(id)DYGetGLGuestAppClient(v27) overrideFlags] & 0x10 | v28 & 4))
      {
        uint64_t v29 = mach_absolute_time();
        (*(void (**)(__GLIContextRec *, void *, uint64_t, int *))(*(void *)(v13 + 32) + 5024LL))( a1,  a2,  a3,  a4);
        uint64_t v30 = mach_absolute_time() - v29;
        unint64_t v31 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          char v32 = v80;
          *((void *)v80 + 2) = v29;
          v32[3] = v30;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v73 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
          unsigned int v74 = v80;
          *((void *)v80 + 3) = v73;
          v74[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v13);
      }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  id v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  unint64_t v28;
  void *v29;
  id v30;
  GPUTools::FB::Fbuf *v31;
  unsigned int v32;
  GPUTools::FB::Fbuf *v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  GPUTools::FB::Stream *v36;
  unsigned int *v37;
  unsigned int v38;
  unsigned int v39;
  unsigned int v40;
  signed int v41;
  BOOL v42;
  unsigned int v43;
  uint64_t v44;
  id v45;
  unsigned int v46;
  dispatch_queue_s *v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  void *v52[2];
  int v53;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      BOOL v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    unsigned int v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v13);
    unsigned int v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_56:
        uint64_t v46 = __ldaxr(v14);
      while (__stlxr(v46 - 1, v14));
      unsigned int v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, int *))(*(void *)(v13 + 24) + 5024LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v52[0] = 0LL;
  v52[1] = 0LL;
  uint64_t v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)v52, 301LL, 2LL, (uint64_t)"Culip", v18, v19, v20, v21, *(void *)v13);
    uint64_t v24 = byte_206F85;
    if ((byte_206F85 & 1) != 0) {
      breakpoint_break( (uint64_t)v52,  (volatile int *)((char *)&stru_108.addr + 5),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, uint64_t, int *))(*(void *)(v13 + 32) + 5024LL))( a1,  a2,  a3,  a4);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      char v28 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v29 = v52[0];
        *((void *)v52[0] + 2) = v26;
        v29[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        signed int v50 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        BOOL v51 = v52[0];
        *((void *)v52[0] + 3) = v50;
        uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
        v51[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v25 = check_errors(v13);
    }

void sub_55928( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, void *a15)
{
  if (a15) {
    free(a15);
  }
  _Unwind_Resume(exception_object);
}

void get_shader_source_ARB(__GLIContextRec *a1, void *a2, uint64_t a3, int *a4, char *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v56 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v55 = handle_opengl_thread_conflict((const void **)v15);
    id v56 = [(id)DYGetGLGuestAppClient(v55) waitOnGraphicsSemaphoreAssertions];
    if ((int)v56 >= 1)
    {
      do
LABEL_65:
        unsigned int v57 = __ldaxr(v16);
      while (__stlxr(v57 - 1, v16));
      char v58 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v56) graphicsLockWaitQueue];
      dispatch_sync_f(v58, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5032LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  unsigned int v66 = 0LL;
  __int128 v67 = 0LL;
  unsigned int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v56) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    if (a4) {
      uint64_t v21 = a4;
    }
    else {
      uint64_t v21 = (int *)&v65;
    }
    *uint64_t v21 = 0;
    id v22 = "t";
    if (v21 == a4) {
      id v22 = "@1i";
    }
    snprintf((char *)(v15 + 4709), 0x40uLL, "Culi%st", v22);
    GPUTools::FB::Encode((uint64_t)&v66, 280LL, 256LL, v15 + 4709, v23, v24, v25, v26, *(void *)v15);
    char v28 = a5;
    char v64 = byte_206F70;
    if ((byte_206F70 & 1) != 0) {
      breakpoint_break((uint64_t)&v66, (volatile int *)stru_108.segname, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v64 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5032LL))( a1,  a2,  a3,  v21,  a5);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v66;
        *((void *)v66 + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v61 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        unint64_t v62 = v66;
        *((void *)v66 + 3) = v61;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v62[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  id v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  void *v54[2];
  int v55;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    unsigned int v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v16);
      while (__stlxr(v48 - 1, v16));
      unsigned int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5032LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  uint64_t v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (uint64_t v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    GPUTools::FB::Encode((uint64_t)v54, 280LL, 2LL, (uint64_t)"Culipp", v20, v21, v22, v23, *(void *)v15);
    uint64_t v26 = byte_206F70;
    if ((byte_206F70 & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)stru_108.segname, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      char v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5032LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      uint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        signed int v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        BOOL v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      char v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, void *, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5032LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, void *, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5032LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    id v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, void *, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5032LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, void *, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5032LL))( a1,  a2,  a3,  a4,  a5);
  id v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_55EB0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(exception_object);
}

void bind_attrib_location_ARB(__GLIContextRec *a1, void *a2, uint64_t a3, const char *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_56:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      unsigned int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, const char *))(*(void *)(v13 + 24) + 5040LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    GPUTools::FB::Encode((uint64_t)v53, 11LL, (uint64_t)"CuluicS", v18, v19, v20, v21, v22, *(void *)v13);
    char v25 = byte_206E63;
    if ((byte_206E63 & 1) != 0) {
      breakpoint_break((uint64_t)v53, (int *)((char *)&dword_8 + 3), 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, uint64_t, const char *))(*(void *)(v13 + 32) + 5040LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v53[0];
        *((void *)v53[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        signed int v52 = v53[0];
        *((void *)v53[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v26 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  id v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  void *v53[2];
  int v54;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_56:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      unsigned int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, const char *))(*(void *)(v13 + 24) + 5040LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    GPUTools::FB::Encode((uint64_t)v53, 11LL, (uint64_t)"CuluicS", v18, v19, v20, v21, v22, *(void *)v13);
    char v25 = byte_206E63;
    if ((byte_206E63 & 1) != 0) {
      breakpoint_break((uint64_t)v53, (int *)((char *)&dword_8 + 3), 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, uint64_t, const char *))(*(void *)(v13 + 32) + 5040LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v53[0];
        *((void *)v53[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        signed int v52 = v53[0];
        *((void *)v53[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v26 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, void *, uint64_t, const char *))(*(void *)(v13 + 24) + 5040LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, void *, uint64_t, const char *))(*(void *)(v13 + 32) + 5040LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, void *, uint64_t, const char *))(*(void *)(v13 + 24) + 5040LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, void *, uint64_t, const char *))(*(void *)(v13 + 32) + 5040LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  uint64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    uint64_t v22 = __ldaxr(v14);
    id v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_562E0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void get_active_attrib_ARB( __GLIContextRec *a1, void *a2, uint64_t a3, uint64_t a4, int *a5, int *a6, unsigned int *a7, char *a8)
{
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v58 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v57 = handle_opengl_thread_conflict((const void **)v17);
    id v58 = [(id)DYGetGLGuestAppClient(v57) waitOnGraphicsSemaphoreAssertions];
    if ((int)v58 >= 1)
    {
      do
LABEL_71:
        unsigned int v59 = __ldaxr(v18);
      while (__stlxr(v59 - 1, v18));
      uint64_t v60 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v58) graphicsLockWaitQueue];
      dispatch_sync_f(v60, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v17 + 24) + 5048LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  uint64_t v72 = 0LL;
  uint64_t v73 = 0LL;
  unsigned int v74 = 0;
  if ([(id)DYGetGLGuestAppClient(v58) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    int v71 = 0;
    BOOL v23 = a5 == 0LL;
    if (!a5) {
      a5 = &v71;
    }
    *a5 = 0;
    strcpy((char *)(v17 + 4709), "Culuii");
    if (v23) {
      uint64_t v24 = "t";
    }
    else {
      uint64_t v24 = "@1i";
    }
    strlcat((char *)(v17 + 4709), v24, 0x40uLL);
    if (a6) {
      char v25 = "@1i";
    }
    else {
      char v25 = "t";
    }
    strlcat((char *)(v17 + 4709), v25, 0x40uLL);
    if (a7) {
      uint64_t v26 = "@1e";
    }
    else {
      uint64_t v26 = "t";
    }
    strlcat((char *)(v17 + 4709), v26, 0x40uLL);
    strlcat((char *)(v17 + 4709), "t", 0x40uLL);
    GPUTools::FB::Encode((uint64_t)&v72, 211LL, 256LL, v17 + 4709, v27, v28, v29, v30, *(void *)v17);
    char v65 = a7;
    char v32 = byte_206F2B;
    if ((byte_206F2B & 1) != 0) {
      breakpoint_break((uint64_t)&v72, (volatile int *)&stru_B8.segname[11], 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v17 + 32) + 5048LL))( a1,  a2,  a3,  a4,  a5,  a6,  v65,  a8);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v72;
        v72[2] = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_39;
        }
      }

      else
      {
        uint64_t v63 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        char v64 = v72;
        v72[3] = v63;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v64[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_39;
        }
      }

      uint64_t v33 = check_errors(v17);
    }

{
  void *v16;
  uint64_t v17;
  unint64_t v18;
  BOOL v19;
  void *v20;
  uint64_t v21;
  unsigned int *v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  id v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  uint64_t v34;
  unint64_t v35;
  void *v36;
  id v37;
  GPUTools::FB::Fbuf *v38;
  unsigned int v39;
  GPUTools::FB::Fbuf *v40;
  dispatch_queue_s *v41;
  uint64_t v42;
  GPUTools::FB::Stream *v43;
  unsigned int *v44;
  unsigned int v45;
  unsigned int v46;
  unsigned int v47;
  signed int v48;
  BOOL v49;
  unsigned int v50;
  uint64_t v51;
  id v52;
  unsigned int v53;
  dispatch_queue_s *v54;
  uint64_t v55;
  uint64_t v56;
  uint64_t v57;
  void *v58;
  char v59;
  uint64_t v60;
  void *v61[2];
  int v62;
  signed int v16 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v16) {
    goto LABEL_12;
  }
  uint64_t v17 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v18 = v16[4];
    unsigned int v19 = v18 >= (unint64_t)a1;
    else {
      signed int v20 = v16 + 1;
    }
    if (v19) {
      uint64_t v17 = (uint64_t)v16;
    }
    signed int v16 = (void *)*v20;
  }

  while (*v20);
  if (v17 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v17 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v17 = ContextInfo::activeCtxInfoMap + 8;
  BOOL v21 = *(void *)(v17 + 40);
  id v22 = (unsigned int *)(v21 + 4640);
  do
  {
    BOOL v23 = __ldaxr(v22);
    uint64_t v24 = v23 + 1;
  }

  while (__stlxr(v24, v22));
  if (gCheckGLErrors) {
    char v25 = v24 <= 1;
  }
  else {
    char v25 = 1;
  }
  if (v25)
  {
    unsigned int v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v51 = handle_opengl_thread_conflict((const void **)v21);
    unsigned int v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_56:
        unsigned int v53 = __ldaxr(v22);
      while (__stlxr(v53 - 1, v22));
      signed int v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v21 + 24) + 5048LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v21 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  uint64_t v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (uint64_t v30 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v30))
  {
    GPUTools::FB::Encode((uint64_t)v61, 211LL, 2LL, (uint64_t)"Culuiipppp", v26, v27, v28, v29, *(void *)v21);
    unsigned int v59 = byte_206F2B;
    if ((byte_206F2B & 1) != 0) {
      breakpoint_break((uint64_t)v61, (volatile int *)&stru_B8.segname[11], 1LL, *(unsigned int *)(v21 + 3404), v21);
    }
    char v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    uint64_t v60 = v21;
    if (!(v32 & 0x10 | v59 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v60 + 32) + 5048LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      char v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      uint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v36 = v61[0];
        *((void *)v61[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        id v58 = v61[0];
        *((void *)v61[0] + 3) = v57;
        char v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      char v32 = check_errors(v60);
    }

{
  void *v15;
  uint64_t v16;
  unint64_t v17;
  BOOL v18;
  void *v19;
  uint64_t v20;
  unsigned int *v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  id v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  BOOL v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  signed int v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v17 = v15[4];
    uint64_t v18 = v17 >= (unint64_t)a1;
    else {
      unsigned int v19 = v15 + 1;
    }
    if (v18) {
      signed int v16 = (uint64_t)v15;
    }
    BOOL v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    signed int v16 = ContextInfo::activeCtxInfoMap + 8;
  signed int v20 = *(void *)(v16 + 40);
  BOOL v21 = (unsigned int *)(v20 + 4640);
  do
  {
    id v22 = __ldaxr(v21);
    BOOL v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 <= 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (v24)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v20);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        char v32 = __ldaxr(v21);
      while (__stlxr(v32 - 1, v21));
      uint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 24) + 5048LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v20 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    char v25 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v25)
    {
      do
        uint64_t v29 = __ldaxr(v21);
      while (__stlxr(v29 - 1, v21));
      [(id)DYGetGLGuestAppClient(v25) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 32) + 5048LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
  ++*(void *)(v20 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v20);
    if (gBreakOnError)
    {
      uint64_t v34 = *(unsigned int *)(v20 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v20);
      }
    }
  }

  do
  {
    uint64_t v26 = __ldaxr(v21);
    uint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v21));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v20);
  }
}

{
  void *v15;
  uint64_t v16;
  unint64_t v17;
  BOOL v18;
  void *v19;
  uint64_t v20;
  unsigned int *v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  id v25;
  uint64_t v26;
  char *v27;
  uint64_t v28;
  uint64_t v29;
  int64x2_t v30;
  unsigned int v31;
  signed int v32;
  BOOL v33;
  unsigned int v34;
  uint64_t v35;
  id v36;
  unsigned int v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  BOOL v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  signed int v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v17 = v15[4];
    uint64_t v18 = v17 >= (unint64_t)a1;
    else {
      unsigned int v19 = v15 + 1;
    }
    if (v18) {
      signed int v16 = (uint64_t)v15;
    }
    BOOL v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    signed int v16 = ContextInfo::activeCtxInfoMap + 8;
  signed int v20 = *(void *)(v16 + 40);
  BOOL v21 = (unsigned int *)(v20 + 4640);
  do
  {
    id v22 = __ldaxr(v21);
    BOOL v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 <= 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (v24)
  {
    unint64_t v36 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v35 = handle_opengl_thread_conflict((const void **)v20);
    unint64_t v36 = [(id)DYGetGLGuestAppClient(v35) waitOnGraphicsSemaphoreAssertions];
    if ((int)v36 >= 1)
    {
      do
LABEL_34:
        uint64_t v37 = __ldaxr(v21);
      while (__stlxr(v37 - 1, v21));
      uint64_t v38 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v36) graphicsLockWaitQueue];
      dispatch_sync_f(v38, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 24) + 5048LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v20 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v36) state] == (char *)&dword_0 + 1)
  {
    char v25 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v25)
    {
      do
        uint64_t v34 = __ldaxr(v21);
      while (__stlxr(v34 - 1, v21));
      [(id)DYGetGLGuestAppClient(v25) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v26 = mach_absolute_time();
  uint64_t v27 = a8;
  uint64_t v28 = v26;
  (*(void (**)(__GLIContextRec *, void *, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 32) + 5048LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  v27);
  uint64_t v29 = mach_absolute_time();
  uint64_t v30 = vdupq_n_s64(1uLL);
  v30.i64[0] = v29 - v28;
  *(int64x2_t *)(v20 + 3696) = vaddq_s64(v30, *(int64x2_t *)(v20 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v20);
    if (gBreakOnError)
    {
      uint64_t v39 = *(unsigned int *)(v20 + 3404);
      if ((_DWORD)v39) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v39, v20);
      }
    }
  }

  do
  {
    uint64_t v31 = __ldaxr(v21);
    char v32 = v31 - 1;
  }

  while (__stlxr(v32, v21));
  if (gCheckGLErrors) {
    uint64_t v33 = v32 < 1;
  }
  else {
    uint64_t v33 = 1;
  }
  if (!v33) {
    handle_opengl_thread_conflict((const void **)v20);
  }
}

void sub_568A4(_Unwind_Exception *exception_object)
{
  unint64_t v4 = *(void **)(v2 - 112);
  if (v4) {
    free(v4);
  }
  _Unwind_Resume(exception_object);
}

uint64_t get_attrib_location_ARB(__GLIContextRec *a1, void *a2, const char *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_56:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      unsigned int v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5056LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v57, 215LL, 256LL, (uint64_t)"CulcS", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_206F2F;
    if ((byte_206F2F & 1) != 0) {
      breakpoint_break((uint64_t)v57, (volatile int *)&stru_B8.segname[15], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if ([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4)
    {
      uint64_t v29 = 0xFFFFFFFFLL;
      goto LABEL_28;
    }

    uint64_t v28 = mach_absolute_time();
    uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 32) + 5056LL))( a1,  a2,  a3);
    uint64_t v30 = mach_absolute_time() - v28;
    unint64_t v31 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      char v32 = v57[0];
      *((void *)v57[0] + 2) = v28;
      v32[3] = v30;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
      unsigned int v56 = v57[0];
      *((void *)v57[0] + 3) = v55;
      v56[2] = __udivti3(v31 * v28, (v31 * (unsigned __int128)v28) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v11);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v57, 4294955008LL, (uint64_t)"i", v23, v24, v25, v26, v27, v29);
    id v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      id v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v57, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v37) {
      id v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v57, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v57);
    }
    uint64_t v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v57);
    uint64_t v39 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v22 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 215LL;
    }

    breakpoint_break((uint64_t)v57, (volatile int *)v54, v53, v39, v11);
LABEL_37:
    uint64_t v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          unsigned int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v57, *(unsigned int *)v57[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v12);
      signed int v45 = v44 - 1;
    }

    while (__stlxr(v45, v12));
    if (gCheckGLErrors) {
      BOOL v46 = v45 < 1;
    }
    else {
      BOOL v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_50;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5056LL))( a1,  a2,  a3);
LABEL_50:
  if (v57[0]) {
    free(v57[0]);
  }
  return v29;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  void *v57[2];
  int v58;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_56:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      unsigned int v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5056LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v57, 215LL, 256LL, (uint64_t)"CulcS", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_206F2F;
    if ((byte_206F2F & 1) != 0) {
      breakpoint_break((uint64_t)v57, (volatile int *)&stru_B8.segname[15], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if ([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4)
    {
      uint64_t v29 = 0xFFFFFFFFLL;
      goto LABEL_28;
    }

    uint64_t v28 = mach_absolute_time();
    uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 32) + 5056LL))( a1,  a2,  a3);
    uint64_t v30 = mach_absolute_time() - v28;
    unint64_t v31 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      char v32 = v57[0];
      *((void *)v57[0] + 2) = v28;
      v32[3] = v30;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
      unsigned int v56 = v57[0];
      *((void *)v57[0] + 3) = v55;
      v56[2] = __udivti3(v31 * v28, (v31 * (unsigned __int128)v28) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v11);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v57, 4294955008LL, (uint64_t)"i", v23, v24, v25, v26, v27, v29);
    id v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      id v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v57, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v37) {
      id v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v57, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v57);
    }
    uint64_t v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v57);
    uint64_t v39 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v22 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 215LL;
    }

    breakpoint_break((uint64_t)v57, (volatile int *)v54, v53, v39, v11);
LABEL_37:
    uint64_t v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    uint64_t v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          unsigned int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v57, *(unsigned int *)v57[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v12);
      signed int v45 = v44 - 1;
    }

    while (__stlxr(v45, v12));
    if (gCheckGLErrors) {
      BOOL v46 = v45 < 1;
    }
    else {
      BOOL v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_50;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5056LL))( a1,  a2,  a3);
LABEL_50:
  if (v57[0]) {
    free(v57[0]);
  }
  return v29;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v22 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_35:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5056LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5056LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 32) + 5056LL))( a1,  a2,  a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    id v20 = v19 < 1;
  }
  else {
    id v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v17;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v12);
      while (__stlxr(v28 - 1, v12));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5056LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v25 = __ldaxr(v12);
      while (__stlxr(v25 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5056LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = mach_absolute_time();
  uint64_t v18 = (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 32) + 5056LL))( a1,  a2,  a3);
  uint64_t v19 = mach_absolute_time();
  id v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v11);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v12);
    char v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v18;
}

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  id v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v22;
  dispatch_queue_s *v23;
  unsigned int v24;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  uint64_t v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      char v22 = __ldaxr(v12);
    while (__stlxr(v22 - 1, v12));
    uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5056LL))( v5,  a2,  a3);
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v16) state] == (char *)&dword_0 + 1)
  {
    uint64_t v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v17 & 1) != 0)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, void *, const char *))(*(void *)(v11 + 24) + 5056LL))( v5,  a2,  a3);
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    id v20 = v19 < 1;
  }
  else {
    id v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return 0LL;
}

void sub_56CF4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void gen_queries(__GLIContextRec *a1, uint64_t a2, unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v11);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_58:
        unsigned int v49 = __ldaxr(v12);
      while (__stlxr(v49 - 1, v12));
      id v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5072LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  unsigned int v56 = 0LL;
  uint64_t v57 = 0LL;
  unsigned int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v56, 206LL, 256LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206F26;
    if ((byte_206F26 & 1) != 0) {
      breakpoint_break((uint64_t)&v56, (volatile int *)&stru_B8.segname[6], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5072LL))(a1, a2, a3);
      uint64_t v28 = mach_absolute_time() - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v56;
        *((void *)v56 + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        uint64_t v54 = v56;
        *((void *)v56 + 3) = v53;
        v54[2] = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  _OWORD *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  __int128 v55;
  void *v56;
  void *v57;
  unsigned int v58;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v11);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_58:
        unsigned int v49 = __ldaxr(v12);
      while (__stlxr(v49 - 1, v12));
      id v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5072LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  unsigned int v56 = 0LL;
  uint64_t v57 = 0LL;
  unsigned int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v56, 206LL, 256LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206F26;
    if ((byte_206F26 & 1) != 0) {
      breakpoint_break((uint64_t)&v56, (volatile int *)&stru_B8.segname[6], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5072LL))(a1, a2, a3);
      uint64_t v28 = mach_absolute_time() - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v56;
        *((void *)v56 + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        uint64_t v54 = v56;
        *((void *)v56 + 3) = v53;
        v54[2] = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    char v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5072LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5072LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5072LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5072LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    char v22 = v21 < 1;
  }
  else {
    char v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_57194( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void delete_queries(__GLIContextRec *a1, uint64_t a2, const unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      BOOL v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5080LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%di", a2);
    GPUTools::FB::Encode((uint64_t)v50, 125LL, 256LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206ED5;
    if ((byte_206ED5 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_68.segname[5], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5080LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        unsigned int v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      BOOL v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5080LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%di", a2);
    GPUTools::FB::Encode((uint64_t)v50, 125LL, 256LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206ED5;
    if ((byte_206ED5 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_68.segname[5], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5080LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        unsigned int v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    char v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5080LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5080LL))( a1,  a2,  a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        unint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5080LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 184), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5080LL))( a1,  a2,  a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      id v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    char v22 = v21 < 1;
  }
  else {
    char v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}
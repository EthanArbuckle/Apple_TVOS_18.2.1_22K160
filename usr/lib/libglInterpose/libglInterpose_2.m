void sub_575C4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  unsigned int *v12;
  atomic_store(0, v12);
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_query(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5088LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v58 = 0LL;
  v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    v16 = (char *)v58;
    v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    v16 = (char *)malloc(v52 + v18);
    v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)v15 = 0u;
        v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 333;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA5;
        if ((byte_206FA5 & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.reserved1 + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5088LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 333LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5088LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5088LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v58 = 0LL;
  v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    v16 = (char *)v58;
    v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    v16 = (char *)malloc(v52 + v18);
    v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)v15 = 0u;
        v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 333;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA5;
        if ((byte_206FA5 & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.reserved1 + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5088LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 333LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5088LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5088LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5088LL))(a1, a2);
    }
  }

  v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5088LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5088LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5088LL))(a1, a2);
    }
  }

  v15 = mach_absolute_time();
  v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5088LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  v3 = a1;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5088LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5088LL))(v3, a2);
    }
  }

  do
  {
    v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_57AC8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void begin_query(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5096LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        uint64_t v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 9;
        *((_DWORD *)v18 + 8) = 256;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_206E61;
        if ((byte_206E61 & 1) != 0) {
          breakpoint_break((uint64_t)&v53, (int *)((char *)&dword_8 + 1), 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5096LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5096LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        uint64_t v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 9;
        *((_DWORD *)v18 + 8) = 256;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_206E61;
        if ((byte_206E61 & 1) != 0) {
          breakpoint_break((uint64_t)&v53, (int *)((char *)&dword_8 + 1), 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5096LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5096LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5096LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    int64_t v17 = __ldaxr(v12);
    unsigned int v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5096LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  int64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5096LL))(a1, a2, a3);
  unsigned int v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_57FAC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void end_query(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      id v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5104LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v51 = 0LL;
  __uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        __uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 159;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206EF7;
        if ((byte_206EF7 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_68.align + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5104LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            uint64_t v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      id v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5104LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v51 = 0LL;
  __uint64_t v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        __uint64_t v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 159;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206EF7;
        if ((byte_206EF7 & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_68.align + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5104LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            uint64_t v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5104LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5104LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    BOOL v15 = __ldaxr(v10);
    id v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5104LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5104LL))(a1, a2);
  id v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_5847C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_queryiv(__GLIContextRec *a1, GPUTools::GL *a2, uint64_t a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v13);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v14);
      while (__stlxr(v55 - 1, v14));
      v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 24) + 5112LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v63 = 0LL;
  v64 = 0LL;
  unsigned int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetQueryParameterInfo(a2, a3, &v62[1], (unsigned int *)v62, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v62[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v62[1], v21);
    GPUTools::FB::Encode((uint64_t)&v63, 276LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F6C;
    if ((byte_206F6C & 1) != 0) {
      breakpoint_break((uint64_t)&v63, (volatile int *)&stru_108.sectname[12], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 32) + 5112LL))( a1,  a2,  a3,  a4);
      uint64_t v60 = v13;
      uint64_t v33 = v13 + 4709;
      uint64_t v34 = mach_absolute_time() - v32;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v36 = v63;
        *((void *)v63 + 3) = v34;
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        unsigned int v36 = v63;
        *((void *)v63 + 3) = v59;
        uint64_t v32 = __udivti3(v35 * v32, (v35 * (unsigned __int128)v32) >> 64);
      }

      v36[2] = v32;
      uint64_t v20 = v33;
      uint64_t v13 = v60;
      if (gCheckGLErrors) {
        check_errors(v60);
      }
    }

    unsigned int v37 = v63;
    __int128 v61 = *((_OWORD *)v63 + 1);
    v64 = v63;
    if (v65 >= 0x24)
    {
      *((_DWORD *)v63 + 8) = 0;
      _OWORD *v37 = 0u;
      v37[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v63, 276LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v63 + 1) = v61;
    id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v63, v40);
    }
    id v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42) {
      id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v63, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v63);
    }
    unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v63);
    uint64_t v44 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      uint64_t v57 = 3LL;
      uint64_t v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v57 = 2LL;
      uint64_t v58 = 276LL;
    }

    breakpoint_break((uint64_t)&v63, (volatile int *)v58, v57, v44, v13);
LABEL_43:
    int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    uint64_t v46 = (unsigned int *)((char *)v45 + 56);
    do
      unsigned int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v63, *(unsigned int *)v63, 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v14);
      signed int v50 = v49 - 1;
    }

    while (__stlxr(v50, v14));
    if (gCheckGLErrors) {
      BOOL v51 = v50 < 1;
    }
    else {
      BOOL v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v14);
  while (__stlxr(v52 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 24) + 5112LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v63) {
    free(v63);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  uint64_t v34;
  unint64_t v35;
  void *v36;
  _OWORD *v37;
  uint64_t v38;
  id v39;
  GPUTools::FB::Fbuf *v40;
  unsigned int v41;
  GPUTools::FB::Fbuf *v42;
  dispatch_queue_s *v43;
  uint64_t v44;
  GPUTools::FB::Stream *v45;
  unsigned int *v46;
  unsigned int v47;
  unsigned int v48;
  unsigned int v49;
  signed int v50;
  BOOL v51;
  unsigned int v52;
  uint64_t v53;
  id v54;
  unsigned int v55;
  dispatch_queue_s *v56;
  uint64_t v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  __int128 v61;
  _BYTE v62[5];
  void *v63;
  void *v64;
  unsigned int v65;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v13);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v14);
      while (__stlxr(v55 - 1, v14));
      v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 24) + 5112LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v63 = 0LL;
  v64 = 0LL;
  unsigned int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetQueryParameterInfo(a2, a3, &v62[1], (unsigned int *)v62, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v62[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v62[1], v21);
    GPUTools::FB::Encode((uint64_t)&v63, 276LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F6C;
    if ((byte_206F6C & 1) != 0) {
      breakpoint_break((uint64_t)&v63, (volatile int *)&stru_108.sectname[12], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 32) + 5112LL))( a1,  a2,  a3,  a4);
      uint64_t v60 = v13;
      uint64_t v33 = v13 + 4709;
      uint64_t v34 = mach_absolute_time() - v32;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v36 = v63;
        *((void *)v63 + 3) = v34;
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        unsigned int v36 = v63;
        *((void *)v63 + 3) = v59;
        uint64_t v32 = __udivti3(v35 * v32, (v35 * (unsigned __int128)v32) >> 64);
      }

      v36[2] = v32;
      uint64_t v20 = v33;
      uint64_t v13 = v60;
      if (gCheckGLErrors) {
        check_errors(v60);
      }
    }

    unsigned int v37 = v63;
    __int128 v61 = *((_OWORD *)v63 + 1);
    v64 = v63;
    if (v65 >= 0x24)
    {
      *((_DWORD *)v63 + 8) = 0;
      _OWORD *v37 = 0u;
      v37[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v63, 276LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v63 + 1) = v61;
    id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v63, v40);
    }
    id v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42) {
      id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v63, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v63);
    }
    unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v63);
    uint64_t v44 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      uint64_t v57 = 3LL;
      uint64_t v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v57 = 2LL;
      uint64_t v58 = 276LL;
    }

    breakpoint_break((uint64_t)&v63, (volatile int *)v58, v57, v44, v13);
LABEL_43:
    int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    uint64_t v46 = (unsigned int *)((char *)v45 + 56);
    do
      unsigned int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v63, *(unsigned int *)v63, 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v14);
      signed int v50 = v49 - 1;
    }

    while (__stlxr(v50, v14));
    if (gCheckGLErrors) {
      BOOL v51 = v50 < 1;
    }
    else {
      BOOL v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v14);
  while (__stlxr(v52 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 24) + 5112LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v63) {
    free(v63);
  }
}

void sub_58970( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_query_objectiv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5120LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetQueryObjectParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 274LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F6A;
    if ((byte_206F6A & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.sectname[10], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 5120LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 274LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    uint64_t v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 274LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    unsigned int v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5120LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5120LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetQueryObjectParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 274LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F6A;
    if ((byte_206F6A & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.sectname[10], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 5120LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 274LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    uint64_t v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 274LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    unsigned int v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5120LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_58E60( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_query_objectuiv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, unsigned int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 24) + 5128LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetQueryObjectParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = "e";
    if (!v63[0]) {
      uint64_t v21 = "ui";
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%s", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 275LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F6B;
    if ((byte_206F6B & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.sectname[11], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 32) + 5128LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 275LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    uint64_t v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 275LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    unsigned int v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 24) + 5128LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  const char *v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 24) + 5128LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetQueryObjectParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = "e";
    if (!v63[0]) {
      uint64_t v21 = "ui";
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%s", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 275LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F6B;
    if ((byte_206F6B & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.sectname[11], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 32) + 5128LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 275LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    uint64_t v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 275LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    unsigned int v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 24) + 5128LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_59358( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void bind_buffer(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_59:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      uint64_t v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5136LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 12LL, 0LL, (uint64_t)"Ceui", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_206E64;
    if ((byte_206E64 & 1) != 0) {
      breakpoint_break((uint64_t)v50, &dword_C, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5136LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        char v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        unsigned int v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_59:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      uint64_t v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5136LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 12LL, 0LL, (uint64_t)"Ceui", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_206E64;
    if ((byte_206E64 & 1) != 0) {
      breakpoint_break((uint64_t)v50, &dword_C, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5136LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        char v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        unsigned int v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    char v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_37:
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5136LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        id v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5136LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError && (uint64_t v25 = *(unsigned int *)(v11 + 3404), (_DWORD)v25))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v11);
LABEL_25:
  if (!*(_DWORD *)(v11 + 3404)) {
    wrapper_cache_buffer_binding((_DWORD *)v11, a2, a3);
  }
  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_37:
        unint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      char v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5136LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5136LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError && (id v28 = *(unsigned int *)(v11 + 3404), (_DWORD)v28))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v11);
LABEL_25:
  if (!*(_DWORD *)(v11 + 3404)) {
    wrapper_cache_buffer_binding((_DWORD *)v11, a2, a3);
  }
  do
  {
    id v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    char v22 = v21 < 1;
  }
  else {
    char v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_597B0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void delete_buffers(__GLIContextRec *a1, volatile int *a2, const unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      uint64_t v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, const unsigned int *))(*(void *)(v11 + 24) + 5144LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", (_DWORD)a2);
    GPUTools::FB::Encode((uint64_t)v50, 119LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206ECF;
    if ((byte_206ECF & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_68.sectname[15], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, const unsigned int *))(*(void *)(v11 + 32) + 5144LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        char v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        unsigned int v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      uint64_t v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, const unsigned int *))(*(void *)(v11 + 24) + 5144LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", (_DWORD)a2);
    GPUTools::FB::Encode((uint64_t)v50, 119LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206ECF;
    if ((byte_206ECF & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_68.sectname[15], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, const unsigned int *))(*(void *)(v11 + 32) + 5144LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        char v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        unsigned int v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

void sub_59BF8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void gen_buffers(__GLIContextRec *a1, uint64_t a2, unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5152LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 201LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_206F21;
    if ((byte_206F21 & 1) != 0) {
      breakpoint_break((uint64_t)&v57, (volatile int *)&stru_B8.segname[1], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5152LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  _OWORD *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __int128 v56;
  void *v57;
  void *v58;
  unsigned int v59;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5152LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 201LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_206F21;
    if ((byte_206F21 & 1) != 0) {
      breakpoint_break((uint64_t)&v57, (volatile int *)&stru_B8.segname[1], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5152LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5152LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5152LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5152LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5152LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_5A090( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_buffer(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5160LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 325;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206F9D;
        if ((byte_206F9D & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.nreloc + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5160LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 325LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        BOOL v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5160LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5160LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 325;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206F9D;
        if ((byte_206F9D & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.nreloc + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5160LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 325LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        BOOL v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5160LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5160LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5160LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5160LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5160LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5160LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5160LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  v3 = a1;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5160LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5160LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_5A598( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void buffer_data(__GLIContextRec *a1, volatile int *a2, uint64_t a3, const void *a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v16);
      while (__stlxr(v55 - 1, v16));
      __int128 v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, const void *, uint64_t))(*(void *)(v15 + 24)
                                                                                                + 5168LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  uint64_t v20 = (char *)[(id)DYGetGLGuestAppClient(v54) state];
  if (v20 != (_BYTE *)&dword_0 + 1
    || (uint64_t v20 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    if (a4)
    {
      uint64_t v26 = DYGetGLGuestAppClient(v20);
      GPUTools::Interpose::DYSavePointer(v26, a3, a4, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::Encode((uint64_t)v61, 29LL, (uint64_t)"CelUe", v27, v28, v29, v30, v31, *(void *)v15);
    }

    else
    {
      GPUTools::FB::Encode((uint64_t)v61, 29LL, (uint64_t)"Celpe", v21, v22, v23, v24, v25, *(void *)v15);
    }

    char v33 = byte_206E75;
    if ((byte_206E75 & 1) != 0) {
      breakpoint_break((uint64_t)v61, (int *)((char *)&dword_1C + 1), 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (!(v34 & 0x10 | v33 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, const void *, uint64_t))(*(void *)(v15 + 32)
                                                                                                + 5168LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v34 = mach_absolute_time();
      uint64_t v36 = v34 - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v38 = v61[0];
        *((void *)v61[0] + 2) = v35;
        v38[3] = v36;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        unsigned int v60 = v61[0];
        *((void *)v61[0] + 3) = v59;
        uint64_t v34 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
        v60[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_31;
        }
      }

      uint64_t v34 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  id v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  void *v55[2];
  int v56;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    unsigned int v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v47 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_59:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      signed int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, const void *, uint64_t))(*(void *)(v15 + 24)
                                                                                                + 5168LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  __int128 v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (uint64_t v25 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v25))
  {
    GPUTools::FB::Encode((uint64_t)v55, 29LL, (uint64_t)"Celpe", v20, v21, v22, v23, v24, *(void *)v15);
    uint64_t v27 = byte_206E75;
    if ((byte_206E75 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (int *)((char *)&dword_1C + 1), 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, const void *, uint64_t))(*(void *)(v15 + 32)
                                                                                                + 5168LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      uint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v55[0];
        *((void *)v55[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        id v54 = v55[0];
        *((void *)v55[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v28 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_37:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, const void *, uint64_t))(*(void *)(v15 + 24)
                                                                                                + 5168LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, const void *, uint64_t))(*(void *)(v15 + 32)
                                                                                            + 5168LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError && (uint64_t v29 = *(unsigned int *)(v15 + 3404), (_DWORD)v29))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v15);
LABEL_25:
  if (!*(_DWORD *)(v15 + 3404)) {
    wrapper_cache_buffer_target(v15, a2);
  }
  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_37:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, const void *, uint64_t))(*(void *)(v15 + 24)
                                                                                                + 5168LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, const void *, uint64_t))(*(void *)(v15 + 32)
                                                                                            + 5168LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError && (uint64_t v32 = *(unsigned int *)(v15 + 3404), (_DWORD)v32))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v15);
LABEL_25:
  if (!*(_DWORD *)(v15 + 3404)) {
    wrapper_cache_buffer_target(v15, a2);
  }
  do
  {
    uint64_t v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_5AA68( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void buffer_sub_data(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, const void *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v15);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_56:
        unsigned int v50 = __ldaxr(v16);
      while (__stlxr(v50 - 1, v16));
      BOOL v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 5176LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  uint64_t v20 = (char *)[(id)DYGetGLGuestAppClient(v49) state];
  if (v20 != (_BYTE *)&dword_0 + 1
    || (uint64_t v20 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = DYGetGLGuestAppClient(v20);
    GPUTools::Interpose::DYSavePointer(v21, a4, a5, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
    GPUTools::FB::Encode((uint64_t)v56, 31LL, (uint64_t)"CellU", v22, v23, v24, v25, v26, *(void *)v15);
    char v28 = byte_206E77;
    if ((byte_206E77 & 1) != 0) {
      breakpoint_break((uint64_t)v56, (int *)((char *)&dword_1C + 3), 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 5176LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        char v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        unsigned int v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v29 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v47 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        id v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      unsigned int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 5176LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  int v57 = 0LL;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    uint64_t v23 = v58 - (_BYTE *)v57;
    uint64_t v24 = v59;
    uint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x4F) {
      goto LABEL_24;
    }
    BOOL v51 = (335 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_OWORD *)v21 + 3) = 0u;
        *((_OWORD *)v21 + 4) = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        *((_OWORD *)v21 + 2) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        uint64_t v58 = v21 + 80;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 31;
        *((_DWORD *)v22 + 8) = 0;
        __int128 v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Cellp");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((void *)v22 + 7) = a3;
        *((void *)v22 + 8) = a4;
        *((void *)v22 + 9) = a5;
        uint64_t v27 = byte_206E77;
        if ((byte_206E77 & 1) != 0) {
          breakpoint_break((uint64_t)&v57, (int *)((char *)&dword_1C + 3), 1LL, *(unsigned int *)(v15 + 3404), v15);
        }
        char v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32)
                                                                                             + 5176LL))( a1,  a2,  a3,  a4,  a5);
          char v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          uint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v55 = v57;
            *((void *)v57 + 3) = v54;
            char v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          char v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      char v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 5176LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 5176LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 24) + 5176LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v15 + 32) + 5176LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_5AED4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

uint64_t map_buffer(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v11);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_57:
        unsigned int v52 = __ldaxr(v12);
      while (__stlxr(v52 - 1, v12));
      uint64_t v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5192LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v60 = 0LL;
  uint64_t v61 = 0LL;
  unsigned int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    signed int v18 = (char *)v60;
    unsigned int v17 = v61;
    int64_t v19 = v61 - (_BYTE *)v60;
    unsigned int v20 = v62;
    unint64_t v21 = v62 - (v61 - (_BYTE *)v60);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v54 = (311 - v21) & 0xFFFFFF00;
    v62 += v54;
    signed int v18 = (char *)malloc(v54 + v20);
    unsigned int v60 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        unsigned int v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)unsigned int v17 = 0u;
        uint64_t v61 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v60);
        *((_DWORD *)v18 + 1) = 363;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v59 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v59);
        *((void *)v18 + 1) = v59;
        *((_DWORD *)v18 + 9) = 6645059;
        *((void *)v18 + 5) = *(void *)v11;
        *((_DWORD *)v18 + 12) = a2;
        *((_DWORD *)v18 + 13) = a3;
        char v23 = byte_206FC3;
        if ((byte_206FC3 & 1) != 0) {
          breakpoint_break((uint64_t)&v60, (volatile int *)&stru_158.segname[3], 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        if ([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4)
        {
          uint64_t v30 = 0LL;
          goto LABEL_29;
        }

        uint64_t v29 = mach_absolute_time();
        uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5192LL))( a1,  a2,  a3);
        uint64_t v31 = mach_absolute_time() - v29;
        unint64_t v32 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          char v33 = v60;
          *((void *)v60 + 2) = v29;
          v33[3] = v31;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v57 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
          uint64_t v58 = v60;
          *((void *)v60 + 3) = v57;
          v58[2] = __udivti3(v32 * v29, (v32 * (unsigned __int128)v29) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v11);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v60, 4294955008LL, (uint64_t)"p", v24, v25, v26, v27, v28, v30);
        id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v35) {
          id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v60, v36);
        }
        uint64_t v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
        if ((_DWORD)v38) {
          id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v60, v38, v37);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v11, (uint64_t)&v60);
        }
        uint64_t v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v60);
        uint64_t v40 = *(unsigned int *)(v11 + 3404);
        if ((_DWORD)v40 && gBreakOnError)
        {
          uint64_t v55 = 3LL;
          uint64_t v56 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v23 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v55 = 2LL;
          uint64_t v56 = 363LL;
        }

        breakpoint_break((uint64_t)&v60, (volatile int *)v56, v55, v40, v11);
LABEL_38:
        unsigned int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
        unsigned int v42 = (unsigned int *)((char *)v41 + 56);
        do
          unsigned int v43 = __ldaxr(v42);
        while (__stlxr(1u, v42));
        if (v43 == 1)
        {
          do
          {
            while (*v42 == 1)
              ;
            do
              unsigned int v44 = __ldaxr(v42);
            while (__stlxr(1u, v42));
          }

          while (v44 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v60, *(unsigned int *)v60, 1);
        atomic_store(0, v42);
        do
        {
          unsigned int v45 = __ldaxr(v12);
          signed int v46 = v45 - 1;
        }

        while (__stlxr(v46, v12));
        if (gCheckGLErrors) {
          BOOL v47 = v46 < 1;
        }
        else {
          BOOL v47 = 1;
        }
        if (!v47) {
          handle_opengl_thread_conflict((const void **)v11);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v18, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v49 = __ldaxr(v12);
  while (__stlxr(v49 - 1, v12));
  [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
  uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5192LL))(a1, a2, a3);
LABEL_51:
  if (v60) {
    free(v60);
  }
  return v30;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  uint64_t v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  uint64_t result;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  int v54;
  uint64_t v55;
  uint64_t v56;
  uint64_t v57;
  void *v58;
  __uint64_t v59;
  void *v60;
  char *v61;
  unsigned int v62;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v11);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_57:
        unsigned int v52 = __ldaxr(v12);
      while (__stlxr(v52 - 1, v12));
      uint64_t v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5192LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v60 = 0LL;
  uint64_t v61 = 0LL;
  unsigned int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    signed int v18 = (char *)v60;
    unsigned int v17 = v61;
    int64_t v19 = v61 - (_BYTE *)v60;
    unsigned int v20 = v62;
    unint64_t v21 = v62 - (v61 - (_BYTE *)v60);
    if (v21 > 0x37) {
      goto LABEL_24;
    }
    int v54 = (311 - v21) & 0xFFFFFF00;
    v62 += v54;
    signed int v18 = (char *)malloc(v54 + v20);
    unsigned int v60 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        unsigned int v17 = &v18[v19];
LABEL_24:
        *((void *)v17 + 6) = 0LL;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)unsigned int v17 = 0u;
        uint64_t v61 = v17 + 56;
        GPUTools::FB::Fbuf::align((char **)&v60);
        *((_DWORD *)v18 + 1) = 363;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v59 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v59);
        *((void *)v18 + 1) = v59;
        *((_DWORD *)v18 + 9) = 6645059;
        *((void *)v18 + 5) = *(void *)v11;
        *((_DWORD *)v18 + 12) = a2;
        *((_DWORD *)v18 + 13) = a3;
        char v23 = byte_206FC3;
        if ((byte_206FC3 & 1) != 0) {
          breakpoint_break((uint64_t)&v60, (volatile int *)&stru_158.segname[3], 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        if ([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4)
        {
          uint64_t v30 = 0LL;
          goto LABEL_29;
        }

        uint64_t v29 = mach_absolute_time();
        uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5192LL))( a1,  a2,  a3);
        uint64_t v31 = mach_absolute_time() - v29;
        unint64_t v32 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          char v33 = v60;
          *((void *)v60 + 2) = v29;
          v33[3] = v31;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v57 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
          uint64_t v58 = v60;
          *((void *)v60 + 3) = v57;
          v58[2] = __udivti3(v32 * v29, (v32 * (unsigned __int128)v29) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v11);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v60, 4294955008LL, (uint64_t)"p", v24, v25, v26, v27, v28, v30);
        id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v35) {
          id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v60, v36);
        }
        uint64_t v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
        if ((_DWORD)v38) {
          id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v60, v38, v37);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v11, (uint64_t)&v60);
        }
        uint64_t v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v60);
        uint64_t v40 = *(unsigned int *)(v11 + 3404);
        if ((_DWORD)v40 && gBreakOnError)
        {
          uint64_t v55 = 3LL;
          uint64_t v56 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v23 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v55 = 2LL;
          uint64_t v56 = 363LL;
        }

        breakpoint_break((uint64_t)&v60, (volatile int *)v56, v55, v40, v11);
LABEL_38:
        unsigned int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
        unsigned int v42 = (unsigned int *)((char *)v41 + 56);
        do
          unsigned int v43 = __ldaxr(v42);
        while (__stlxr(1u, v42));
        if (v43 == 1)
        {
          do
          {
            while (*v42 == 1)
              ;
            do
              unsigned int v44 = __ldaxr(v42);
            while (__stlxr(1u, v42));
          }

          while (v44 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v60, *(unsigned int *)v60, 1);
        atomic_store(0, v42);
        do
        {
          unsigned int v45 = __ldaxr(v12);
          signed int v46 = v45 - 1;
        }

        while (__stlxr(v46, v12));
        if (gCheckGLErrors) {
          BOOL v47 = v46 < 1;
        }
        else {
          BOOL v47 = 1;
        }
        if (!v47) {
          handle_opengl_thread_conflict((const void **)v11);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v18, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v49 = __ldaxr(v12);
  while (__stlxr(v49 - 1, v12));
  [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
  uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5192LL))(a1, a2, a3);
LABEL_51:
  if (v60) {
    free(v60);
  }
  return v30;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v11);
    char v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_35:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5192LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unint64_t v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5192LL))( a1,  a2,  a3);
    }
  }

  unsigned int v17 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5192LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    signed int v18 = __ldaxr(v12);
    int64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    unsigned int v20 = v19 < 1;
  }
  else {
    unsigned int v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v17;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v12);
      while (__stlxr(v28 - 1, v12));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5192LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v25 = __ldaxr(v12);
      while (__stlxr(v25 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5192LL))( a1,  a2,  a3);
    }
  }

  unsigned int v17 = mach_absolute_time();
  signed int v18 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5192LL))(a1, a2, a3);
  int64_t v19 = mach_absolute_time();
  unsigned int v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v11);
      }
    }
  }

  do
  {
    unint64_t v21 = __ldaxr(v12);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    char v23 = v22 < 1;
  }
  else {
    char v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v18;
}

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  id v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v22;
  dispatch_queue_s *v23;
  unsigned int v24;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  id v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      uint64_t v22 = __ldaxr(v12);
    while (__stlxr(v22 - 1, v12));
    char v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5192LL))(v5, a2, a3);
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v16) state] == (char *)&dword_0 + 1)
  {
    unsigned int v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v17 & 1) != 0)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5192LL))( v5,  a2,  a3);
    }
  }

  do
  {
    signed int v18 = __ldaxr(v12);
    int64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    unsigned int v20 = v19 < 1;
  }
  else {
    unsigned int v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return 0LL;
}

void sub_5B3E0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t unmap_buffer(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v9);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_72:
        unsigned int v52 = __ldaxr(v10);
      while (__stlxr(v52 - 1, v10));
      uint64_t v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5200LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  int v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    (*(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v9 + 32) + 5208LL))( *(void *)(v9 + 16),  a2,  35003LL,  &v61);
    unsigned int v59 = 0;
    int v60 = 1;
    if (*(_BYTE *)(v9 + 4849)) {
      (*(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v9 + 32) + 5208LL))( *(void *)(v9 + 16),  a2,  35347LL,  &v60);
    }
    if (*(_BYTE *)(v9 + 4850))
    {
      (*(void (**)(void, uint64_t, uint64_t, unsigned int *))(*(void *)(v9 + 32) + 5208LL))( *(void *)(v9 + 16),  a2,  37151LL,  &v59);
      BOOL v19 = ((v59 >> 4) & 1) == 0;
      int v60 = v19;
      if (v61 == 35000) {
        goto LABEL_37;
      }
    }

    else
    {
      BOOL v19 = v60;
      if (v61 == 35000) {
        goto LABEL_37;
      }
    }

    if (v19)
    {
      if (*(_BYTE *)(v9 + 4850)) {
        uint64_t v20 = 37152LL;
      }
      else {
        uint64_t v20 = 34660LL;
      }
      if (*(int *)(v9 + 3460) < 3)
      {
        (*(void (**)(void, uint64_t, uint64_t, uint64_t *))(*(void *)(v9 + 32) + 5208LL))( *(void *)(v9 + 16),  a2,  v20,  &v58);
        uint64_t v21 = (int)v58;
      }

      else
      {
        (*(void (**)(void, uint64_t, uint64_t, uint64_t *))(*(void *)(v9 + 32) + 6392LL))( *(void *)(v9 + 16),  a2,  v20,  &v58);
        uint64_t v21 = v58;
      }

      wrapper_copyout_mapped_buffer_data((ContextInfo *)v9, a2, 0LL, v21);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    unsigned int v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    unsigned int v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        uint64_t v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      id v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5200LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    uint64_t v16 = (char *)v58;
    uint64_t v15 = v59;
    uint64_t v17 = v59 - (_BYTE *)v58;
    uint64_t v18 = v60;
    BOOL v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    unsigned int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    uint64_t v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 644;
        *((_DWORD *)v16 + 8) = 0;
        uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        uint64_t v21 = byte_2070DC;
        if ((byte_2070DC & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_248.nreloc, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5200LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        uint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          uint64_t v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        char v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          char v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          char v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 644LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        uint64_t v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          unsigned int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          unsigned int v45 = v44 < 1;
        }
        else {
          unsigned int v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    BOOL v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5200LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      char v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5200LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        BOOL v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5200LL))(a1, a2);
    }
  }

  uint64_t v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5200LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    uint64_t v16 = __ldaxr(v10);
    uint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    uint64_t v18 = v17 < 1;
  }
  else {
    uint64_t v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5200LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5200LL))(a1, a2);
    }
  }

  uint64_t v15 = mach_absolute_time();
  uint64_t v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5200LL))(a1, a2);
  uint64_t v17 = mach_absolute_time();
  uint64_t v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    BOOL v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  v3 = a1;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    uint64_t v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5200LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    uint64_t v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5200LL))(v3, a2);
    }
  }

  do
  {
    uint64_t v16 = __ldaxr(v10);
    uint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    uint64_t v18 = v17 < 1;
  }
  else {
    uint64_t v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_5B958( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void get_buffer_parameteriv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5208LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetBufferParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 218LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F32;
    if ((byte_206F32 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_B8.addr + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 5208LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 218LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 218LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    signed int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    BOOL v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5208LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5208LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetBufferParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 218LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F32;
    if ((byte_206F32 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_B8.addr + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 5208LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 218LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 218LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    signed int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    BOOL v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5208LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_5BE58( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_buffer_pointerv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, void **a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v13);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_58:
        unsigned int v51 = __ldaxr(v14);
      while (__stlxr(v51 - 1, v14));
      BOOL v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 24) + 5216LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)&v58, 219LL, 256LL, (uint64_t)"Cee@1t", v18, v19, v20, v21, *(void *)v13);
    char v24 = byte_206F33;
    if ((byte_206F33 & 1) != 0) {
      breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_B8.addr + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v23) overrideFlags] & 0x10 | v24 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 32) + 5216LL))( a1,  a2,  a3,  a4);
      uint64_t v30 = mach_absolute_time() - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v58;
        *((void *)v58 + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        unsigned int v56 = v58;
        *((void *)v58 + 3) = v55;
        v56[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  id v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  _OWORD *v33;
  uint64_t v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __int128 v57;
  void *v58;
  void *v59;
  unsigned int v60;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v13);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_58:
        unsigned int v51 = __ldaxr(v14);
      while (__stlxr(v51 - 1, v14));
      BOOL v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 24) + 5216LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)&v58, 219LL, 256LL, (uint64_t)"Cee@1t", v18, v19, v20, v21, *(void *)v13);
    char v24 = byte_206F33;
    if ((byte_206F33 & 1) != 0) {
      breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_B8.addr + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v23) overrideFlags] & 0x10 | v24 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 32) + 5216LL))( a1,  a2,  a3,  a4);
      uint64_t v30 = mach_absolute_time() - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v58;
        *((void *)v58 + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        unsigned int v56 = v58;
        *((void *)v58 + 3) = v55;
        v56[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    char v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    char v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        uint64_t v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 24) + 5216LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        id v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 32) + 5216LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 24) + 5216LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void **))(*(void *)(v13 + 32) + 5216LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  uint64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    id v22 = __ldaxr(v14);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    char v24 = v23 < 1;
  }
  else {
    char v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_5C2F4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void draw_buffers(__GLIContextRec *a1, uint64_t a2, const unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      unsigned int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5232LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%de", a2);
    GPUTools::FB::Encode((uint64_t)v50, 141LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206EE5;
    if ((byte_206EE5 & 1) != 0) {
      breakpoint_break( (uint64_t)v50,  (volatile int *)((char *)&stru_68.addr + 5),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5232LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        uint64_t v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      unsigned int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5232LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%de", a2);
    GPUTools::FB::Encode((uint64_t)v50, 141LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206EE5;
    if ((byte_206EE5 & 1) != 0) {
      breakpoint_break( (uint64_t)v50,  (volatile int *)((char *)&stru_68.addr + 5),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5232LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        uint64_t v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    char v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5232LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5232LL))( a1,  a2,  a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        unint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5232LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5232LL))( a1,  a2,  a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      id v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    char v22 = v21 < 1;
  }
  else {
    char v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_5C724( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_shader(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5240LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        uint64_t v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 335;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA7;
        if ((byte_206FA7 & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.reserved1 + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5240LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          unsigned int v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 335LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        signed int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        BOOL v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5240LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5240LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        uint64_t v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 335;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA7;
        if ((byte_206FA7 & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.reserved1 + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5240LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          unsigned int v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 335LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        signed int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        BOOL v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5240LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5240LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5240LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5240LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5240LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5240LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5240LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  v3 = a1;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5240LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5240LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_5CC28( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_program(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5248LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        uint64_t v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 331;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA3;
        if ((byte_206FA3 & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.flags + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5248LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          unsigned int v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 331LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        signed int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        BOOL v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5248LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5248LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        uint64_t v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 331;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA3;
        if ((byte_206FA3 & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.flags + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5248LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          unsigned int v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 331LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        signed int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        BOOL v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5248LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5248LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5248LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5248LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5248LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5248LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5248LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  v3 = a1;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5248LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5248LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_5D134( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_shaderiv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_60:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5256LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  int v63 = 0LL;
  v64 = 0LL;
  unsigned int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    int v20 = GPUTools::GL::DYShaderParameterComponentCount(a3, v18);
    uint64_t v21 = v13 + 4709;
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%di", v20);
    GPUTools::FB::Encode((uint64_t)&v63, 281LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F71;
    if ((byte_206F71 & 1) != 0) {
      breakpoint_break((uint64_t)&v63, (volatile int *)&stru_108.segname[1], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 5256LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v63;
        *((void *)v63 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v63;
        *((void *)v63 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v21 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v63;
    __int128 v62 = *((_OWORD *)v63 + 1);
    v64 = v63;
    if (v65 >= 0x24)
    {
      *((_DWORD *)v63 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v63, 281LL, 256LL, v21, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v63 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v63, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v63, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v63);
    }
    signed int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v63);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_41;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 281LL;
    }

    breakpoint_break((uint64_t)&v63, (volatile int *)v59, v58, v45, v13);
LABEL_41:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    unsigned int v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v63, *(unsigned int *)v63, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_54;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5256LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63) {
    free(v63);
  }
}

void sub_5D604( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_programiv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5264LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v64 = 0LL;
  unsigned int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetProgramParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 272LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F68;
    if ((byte_206F68 & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.sectname[8], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 5264LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    unsigned int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 272LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    signed int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 272LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    unsigned int v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5264LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_5DAF0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_shader_info_log(__GLIContextRec *a1, uint64_t a2, uint64_t a3, int *a4, char *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v56 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v55 = handle_opengl_thread_conflict((const void **)v15);
    id v56 = [(id)DYGetGLGuestAppClient(v55) waitOnGraphicsSemaphoreAssertions];
    if ((int)v56 >= 1)
    {
      do
LABEL_65:
        unsigned int v57 = __ldaxr(v16);
      while (__stlxr(v57 - 1, v16));
      uint64_t v58 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v56) graphicsLockWaitQueue];
      dispatch_sync_f(v58, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5272LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v66 = 0LL;
  v67 = 0LL;
  unsigned int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v56) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    int v65 = 0;
    if (a4) {
      uint64_t v21 = a4;
    }
    else {
      uint64_t v21 = &v65;
    }
    *uint64_t v21 = 0;
    uint64_t v22 = "t";
    if (v21 == a4) {
      uint64_t v22 = "@1i";
    }
    snprintf((char *)(v15 + 4709), 0x40uLL, "Cuii%st", v22);
    GPUTools::FB::Encode((uint64_t)&v66, 279LL, 256LL, v15 + 4709, v23, v24, v25, v26, *(void *)v15);
    uint64_t v28 = a5;
    char v64 = byte_206F6F;
    if ((byte_206F6F & 1) != 0) {
      breakpoint_break((uint64_t)&v66, (volatile int *)&stru_108.sectname[15], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v64 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5272LL))( a1,  a2,  a3,  v21,  a5);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v66;
        *((void *)v66 + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v61 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        __int128 v62 = v66;
        *((void *)v66 + 3) = v61;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v62[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  id v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  void *v54[2];
  int v55;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    unsigned int v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v16);
      while (__stlxr(v48 - 1, v16));
      unsigned int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5272LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  uint64_t v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (uint64_t v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    GPUTools::FB::Encode((uint64_t)v54, 279LL, 2LL, (uint64_t)"Cuiipp", v20, v21, v22, v23, *(void *)v15);
    uint64_t v26 = byte_206F6F;
    if ((byte_206F6F & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)&stru_108.sectname[15], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5272LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      uint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        signed int v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        BOOL v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5272LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5272LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5272LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5272LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_5E074( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(exception_object);
}

void get_program_info_log(__GLIContextRec *a1, uint64_t a2, uint64_t a3, int *a4, char *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v56 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v55 = handle_opengl_thread_conflict((const void **)v15);
    id v56 = [(id)DYGetGLGuestAppClient(v55) waitOnGraphicsSemaphoreAssertions];
    if ((int)v56 >= 1)
    {
      do
LABEL_65:
        unsigned int v57 = __ldaxr(v16);
      while (__stlxr(v57 - 1, v16));
      uint64_t v58 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v56) graphicsLockWaitQueue];
      dispatch_sync_f(v58, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5280LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v66 = 0LL;
  v67 = 0LL;
  unsigned int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v56) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    int v65 = 0;
    if (a4) {
      uint64_t v21 = a4;
    }
    else {
      uint64_t v21 = &v65;
    }
    *uint64_t v21 = 0;
    uint64_t v22 = "t";
    if (v21 == a4) {
      uint64_t v22 = "@1i";
    }
    snprintf((char *)(v15 + 4709), 0x40uLL, "Cuii%st", v22);
    GPUTools::FB::Encode((uint64_t)&v66, 268LL, 256LL, v15 + 4709, v23, v24, v25, v26, *(void *)v15);
    uint64_t v28 = a5;
    char v64 = byte_206F64;
    if ((byte_206F64 & 1) != 0) {
      breakpoint_break((uint64_t)&v66, (volatile int *)&stru_108.sectname[4], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v64 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5280LL))( a1,  a2,  a3,  v21,  a5);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v66;
        *((void *)v66 + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v61 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        __int128 v62 = v66;
        *((void *)v66 + 3) = v61;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v62[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  id v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  void *v54[2];
  int v55;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    unsigned int v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v16);
      while (__stlxr(v48 - 1, v16));
      unsigned int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5280LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  uint64_t v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (uint64_t v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    GPUTools::FB::Encode((uint64_t)v54, 268LL, 2LL, (uint64_t)"Cuiipp", v20, v21, v22, v23, *(void *)v15);
    uint64_t v26 = byte_206F64;
    if ((byte_206F64 & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)&stru_108.sectname[4], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5280LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      uint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        signed int v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        BOOL v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5280LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5280LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 5280LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 5280LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_5E5F8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(exception_object);
}

void stencil_func_separate(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      unsigned int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5288LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 542;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceeiui");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_207076;
        if ((byte_207076 & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_1F8.addr + 6),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5288LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            uint64_t v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      unsigned int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5288LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 542;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceeiui");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_207076;
        if ((byte_207076 & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_1F8.addr + 6),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5288LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            uint64_t v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5288LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        unsigned int v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5288LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    int64_t v23 = v22 < 1;
  }
  else {
    int64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5288LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5288LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  int64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    unsigned int v24 = __ldaxr(v16);
    unint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_5EB14( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void stencil_mask_separate(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5296LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    signed int v18 = (char *)v53;
    unsigned int v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    signed int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        unsigned int v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)unsigned int v17 = 0u;
        uint64_t v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 545;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_207079;
        if ((byte_207079 & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)((char *)&stru_1F8.size + 1),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5296LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5296LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    signed int v18 = (char *)v53;
    unsigned int v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    signed int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        unsigned int v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)unsigned int v17 = 0u;
        uint64_t v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 545;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_207079;
        if ((byte_207079 & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)((char *)&stru_1F8.size + 1),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5296LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5296LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5296LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    unsigned int v17 = __ldaxr(v12);
    signed int v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5296LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unsigned int v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5296LL))(a1, a2, a3);
  signed int v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_5EFF4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_renderbuffer(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5320LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 334;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA6;
        if ((byte_206FA6 & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.reserved1 + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5320LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __uint64_t v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        uint64_t v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 334LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        unsigned int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        signed int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5320LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5320LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 334;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA6;
        if ((byte_206FA6 & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.reserved1 + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5320LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __uint64_t v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        uint64_t v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 334LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        unsigned int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        signed int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5320LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5320LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5320LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5320LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5320LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5320LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5320LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  v3 = a1;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5320LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5320LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_5F500( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void bind_renderbuffer(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5328LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        uint64_t v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 19;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_206E6B;
        if ((byte_206E6B & 1) != 0) {
          breakpoint_break((uint64_t)&v53, (int *)((char *)&dword_10 + 3), 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5328LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5328LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        uint64_t v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 19;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_206E6B;
        if ((byte_206E6B & 1) != 0) {
          breakpoint_break((uint64_t)&v53, (int *)((char *)&dword_10 + 3), 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5328LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5328LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5328LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    int64_t v17 = __ldaxr(v12);
    unsigned int v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5328LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  int64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5328LL))(a1, a2, a3);
  unsigned int v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_5F9E0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void delete_renderbuffers(__GLIContextRec *a1, uint64_t a2, const unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      unsigned int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5336LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)v50, 126LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206ED6;
    if ((byte_206ED6 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_68.segname[6], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5336LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        uint64_t v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      unsigned int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5336LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)v50, 126LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206ED6;
    if ((byte_206ED6 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_68.segname[6], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5336LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        uint64_t v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    char v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5336LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5336LL))( a1,  a2,  a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        unint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5336LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5336LL))( a1,  a2,  a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      id v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    char v22 = v21 < 1;
  }
  else {
    char v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_5FE14( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void gen_renderbuffers(__GLIContextRec *a1, uint64_t a2, unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5344LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  __uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 207LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_206F27;
    if ((byte_206F27 & 1) != 0) {
      breakpoint_break((uint64_t)&v57, (volatile int *)&stru_B8.segname[7], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5344LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  _OWORD *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __int128 v56;
  void *v57;
  void *v58;
  unsigned int v59;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5344LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  __uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 207LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_206F27;
    if ((byte_206F27 & 1) != 0) {
      breakpoint_break((uint64_t)&v57, (volatile int *)&stru_B8.segname[7], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5344LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5344LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5344LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5344LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5344LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_602AC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void renderbuffer_storage(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      unsigned int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5352LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    __uint64_t v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 508;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceeii");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_207054;
        if ((byte_207054 & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)&stru_1F8.sectname[4],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5352LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      unsigned int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5352LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    __uint64_t v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 508;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceeii");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_207054;
        if ((byte_207054 & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)&stru_1F8.sectname[4],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5352LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5352LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        unsigned int v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5352LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    int64_t v23 = v22 < 1;
  }
  else {
    int64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5352LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5352LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  int64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    unsigned int v24 = __ldaxr(v16);
    unint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_607C0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_renderbuffer_parameteriv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5360LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  char v64 = 0LL;
  int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetRenderbufferParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 277LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F6D;
    if ((byte_206F6D & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.sectname[13], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 5360LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 277LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    signed int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 277LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5360LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5360LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  char v64 = 0LL;
  int v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetRenderbufferParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 277LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F6D;
    if ((byte_206F6D & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.sectname[13], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 5360LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    int v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 277LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    signed int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 277LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    uint64_t v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5360LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_60CB0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_framebuffer(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5368LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v58;
    unsigned int v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    signed int v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        unsigned int v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)unsigned int v15 = 0u;
        uint64_t v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 329;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA1;
        if ((byte_206FA1 & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.flags + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5368LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          unsigned int v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unint64_t v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 329LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        id v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5368LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5368LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    signed int v16 = (char *)v58;
    unsigned int v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    signed int v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        unsigned int v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)unsigned int v15 = 0u;
        uint64_t v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 329;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206FA1;
        if ((byte_206FA1 & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_108.flags + 1),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5368LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          unsigned int v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unint64_t v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 329LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        id v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5368LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5368LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5368LL))(a1, a2);
    }
  }

  unsigned int v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5368LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    signed int v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5368LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5368LL))(a1, a2);
    }
  }

  unsigned int v15 = mach_absolute_time();
  signed int v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5368LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  v3 = a1;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5368LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    unsigned int v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5368LL))(v3, a2);
    }
  }

  do
  {
    signed int v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_611BC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void bind_framebuffer(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5376LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        uint64_t v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 17;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_206E69;
        if ((byte_206E69 & 1) != 0) {
          breakpoint_break((uint64_t)&v53, (int *)((char *)&dword_10 + 1), 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5376LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            signed int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5376LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        uint64_t v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 17;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_206E69;
        if ((byte_206E69 & 1) != 0) {
          breakpoint_break((uint64_t)&v53, (int *)((char *)&dword_10 + 1), 1LL, *(unsigned int *)(v11 + 3404), v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5376LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            signed int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5376LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5376LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    int64_t v17 = __ldaxr(v12);
    unsigned int v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5376LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  int64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5376LL))(a1, a2, a3);
  unsigned int v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_6169C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void delete_framebuffers(__GLIContextRec *a1, uint64_t a2, const unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      unsigned int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5384LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)v50, 121LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206ED1;
    if ((byte_206ED1 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_68.segname[1], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5384LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        uint64_t v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      unsigned int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5384LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)v50, 121LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_206ED1;
    if ((byte_206ED1 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_68.segname[1], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5384LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        uint64_t v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    char v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5384LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5384LL))( a1,  a2,  a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        unint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 5384LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 5384LL))( a1,  a2,  a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      id v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    char v22 = v21 < 1;
  }
  else {
    char v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_61AD0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void gen_framebuffers(__GLIContextRec *a1, uint64_t a2, unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5392LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  __uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 203LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_206F23;
    if ((byte_206F23 & 1) != 0) {
      breakpoint_break((uint64_t)&v57, (volatile int *)&stru_B8.segname[3], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5392LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  _OWORD *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __int128 v56;
  void *v57;
  void *v58;
  unsigned int v59;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5392LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  __uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 203LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_206F23;
    if ((byte_206F23 & 1) != 0) {
      breakpoint_break((uint64_t)&v57, (volatile int *)&stru_B8.segname[3], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5392LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5392LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5392LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 5392LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 5392LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_61F68( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

uint64_t check_framebuffer_status(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5400LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 34;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206E7A;
        if ((byte_206E7A & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_20.cmd + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5400LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"e", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 34LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        BOOL v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5400LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5400LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 34;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206E7A;
        if ((byte_206E7A & 1) != 0) {
          breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_20.cmd + 2),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5400LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"e", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 34LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        BOOL v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5400LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5400LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5400LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5400LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5400LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5400LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5400LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  v3 = a1;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5400LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5400LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_62468( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void framebuffer_texture2D(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      id v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      int v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5416LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v24 = (char *)v59;
    uint64_t v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x47) {
      goto LABEL_24;
    }
    int v53 = (327 - v27) & 0xFFFFFF00;
    v61 += v53;
    uint64_t v24 = (char *)malloc(v53 + v26);
    unsigned int v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        uint64_t v23 = &v24[v25];
LABEL_24:
        *((void *)v23 + 8) = 0LL;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)uint64_t v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        unsigned int v60 = v23 + 72;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 194;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        *(void *)(v24 + 36) = 0x69697565656543LL;
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *((_DWORD *)v24 + 15) = a4;
        *((_DWORD *)v24 + 16) = a5;
        *((_DWORD *)v24 + 17) = a6;
        char v29 = byte_206F1A;
        if ((byte_206F1A & 1) != 0) {
          breakpoint_break( (uint64_t)&v59,  (volatile int *)&stru_B8.sectname[10],  1LL,  *(unsigned int *)(v17 + 3404),  v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32)
                                                                                                 + 5416LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            id v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            __uint64_t v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  char *v23;
  char *v24;
  int64_t v25;
  unsigned int v26;
  unint64_t v27;
  uint64_t v28;
  char v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  unint64_t v33;
  void *v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  int v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  __uint64_t v58;
  void *v59;
  char *v60;
  unsigned int v61;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      id v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      int v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5416LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v24 = (char *)v59;
    uint64_t v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x47) {
      goto LABEL_24;
    }
    int v53 = (327 - v27) & 0xFFFFFF00;
    v61 += v53;
    uint64_t v24 = (char *)malloc(v53 + v26);
    unsigned int v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        uint64_t v23 = &v24[v25];
LABEL_24:
        *((void *)v23 + 8) = 0LL;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)uint64_t v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        unsigned int v60 = v23 + 72;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 194;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        *(void *)(v24 + 36) = 0x69697565656543LL;
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *((_DWORD *)v24 + 15) = a4;
        *((_DWORD *)v24 + 16) = a5;
        *((_DWORD *)v24 + 17) = a6;
        char v29 = byte_206F1A;
        if ((byte_206F1A & 1) != 0) {
          breakpoint_break( (uint64_t)&v59,  (volatile int *)&stru_B8.sectname[10],  1LL,  *(unsigned int *)(v17 + 3404),  v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32)
                                                                                                 + 5416LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            id v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            __uint64_t v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      id v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5416LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        unsigned int v26 = __ldaxr(v18);
      while (__stlxr(v26 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32) + 5416LL))( a1,  a2,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v17);
      }
    }
  }

  do
  {
    uint64_t v23 = __ldaxr(v18);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v18));
  if (gCheckGLErrors) {
    int64_t v25 = v24 < 1;
  }
  else {
    int64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  int64x2_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      id v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        uint64_t v32 = __ldaxr(v18);
      while (__stlxr(v32 - 1, v18));
      unint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5416LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32) + 5416LL))( a1,  a2,  a3,  a4,  a5,  a6);
  uint64_t v24 = mach_absolute_time();
  int64_t v25 = vdupq_n_s64(1uLL);
  v25.i64[0] = v24 - v23;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v25, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      id v34 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v17);
      }
    }
  }

  do
  {
    unsigned int v26 = __ldaxr(v18);
    unint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v18));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_629AC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void framebuffer_renderbuffer(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      id v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5432LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __uint64_t v57 = 0LL;
  __uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    id v22 = (char *)v57;
    BOOL v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    id v22 = (char *)malloc(v51 + v24);
    __uint64_t v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        BOOL v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)BOOL v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        __uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 192;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceeeui");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_206F18;
        if ((byte_206F18 & 1) != 0) {
          breakpoint_break((uint64_t)&v57, (volatile int *)&stru_B8.sectname[8], 1LL, *(unsigned int *)(v15 + 3404), v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5432LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            uint64_t v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      id v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5432LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __uint64_t v57 = 0LL;
  __uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    id v22 = (char *)v57;
    BOOL v21 = v58;
    int64_t v23 = v58 - (_BYTE *)v57;
    unsigned int v24 = v59;
    unint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v59 += v51;
    id v22 = (char *)malloc(v51 + v24);
    __uint64_t v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        BOOL v21 = &v22[v23];
LABEL_24:
        *((_DWORD *)v21 + 16) = 0;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)BOOL v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        __uint64_t v58 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 192;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Ceeeui");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *((_DWORD *)v22 + 15) = a4;
        *((_DWORD *)v22 + 16) = a5;
        char v27 = byte_206F18;
        if ((byte_206F18 & 1) != 0) {
          breakpoint_break((uint64_t)&v57, (volatile int *)&stru_B8.sectname[8], 1LL, *(unsigned int *)(v15 + 3404), v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5432LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            uint64_t v55 = v57;
            *((void *)v57 + 3) = v54;
            uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5432LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        unsigned int v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5432LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    BOOL v21 = __ldaxr(v16);
    id v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    int64_t v23 = v22 < 1;
  }
  else {
    int64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5432LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5432LL))( a1,  a2,  a3,  a4,  a5);
  id v22 = mach_absolute_time();
  int64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    unsigned int v24 = __ldaxr(v16);
    unint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_62EC8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_framebuffer_attachment_parameteriv( __GLIContextRec *a1, uint64_t a2, uint64_t a3, GPUTools::GL *a4, int *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v16);
      while (__stlxr(v55 - 1, v16));
      __uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, GPUTools::GL *, int *))(*(void *)(v15 + 24) + 5440LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __int128 v62 = 0LL;
  __int128 v63 = 0LL;
  unsigned int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::GL::DYGetFramebufferAttachmentParameterInfo(a4, &v61[1], (unsigned int *)v61, v20);
    uint64_t v22 = 101LL;
    if (!v61[0]) {
      uint64_t v22 = 105LL;
    }
    snprintf((char *)(v15 + 4709), 0x40uLL, "Ceee@%u%c", *(_DWORD *)&v61[1], v22);
    GPUTools::FB::Encode((uint64_t)&v62, 240LL, 256LL, v15 + 4709, v23, v24, v25, v26, *(void *)v15);
    char v28 = byte_206F48;
    if ((byte_206F48 & 1) != 0) {
      breakpoint_break((uint64_t)&v62, (volatile int *)&stru_B8.reloff, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    if (!([(id)DYGetGLGuestAppClient(v27) overrideFlags] & 0x10 | v28 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, GPUTools::GL *, int *))(*(void *)(v15 + 32) + 5440LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v34 = mach_absolute_time() - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v36 = v62;
        *((void *)v62 + 3) = v34;
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        unsigned int v36 = v62;
        *((void *)v62 + 3) = v59;
        uint64_t v33 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
      }

      v36[2] = v33;
      if (gCheckGLErrors) {
        check_errors(v15);
      }
    }

    unsigned int v37 = v62;
    __int128 v60 = *((_OWORD *)v62 + 1);
    __int128 v63 = v62;
    if (v64 >= 0x24)
    {
      *((_DWORD *)v62 + 8) = 0;
      _OWORD *v37 = 0u;
      v37[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v62, 240LL, 256LL, v15 + 4709, v29, v30, v31, v32, *(void *)v15);
    *((_OWORD *)v62 + 1) = v60;
    id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v62, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v62, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)&v62);
    }
    unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v62);
    uint64_t v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      uint64_t v57 = 3LL;
      uint64_t v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v57 = 2LL;
      uint64_t v58 = 240LL;
    }

    breakpoint_break((uint64_t)&v62, (volatile int *)v58, v57, v44, v15);
LABEL_43:
    BOOL v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      unsigned int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v62, *(unsigned int *)v62, 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v16);
      signed int v50 = v49 - 1;
    }

    while (__stlxr(v50, v16));
    if (gCheckGLErrors) {
      BOOL v51 = v50 < 1;
    }
    else {
      BOOL v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v16);
  while (__stlxr(v52 - 1, v16));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, GPUTools::GL *, int *))(*(void *)(v15 + 24) + 5440LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62) {
    free(v62);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  BOOL *v20;
  id v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  uint64_t v34;
  unint64_t v35;
  void *v36;
  _OWORD *v37;
  uint64_t v38;
  id v39;
  GPUTools::FB::Fbuf *v40;
  unsigned int v41;
  GPUTools::FB::Fbuf *v42;
  dispatch_queue_s *v43;
  uint64_t v44;
  GPUTools::FB::Stream *v45;
  unsigned int *v46;
  unsigned int v47;
  unsigned int v48;
  unsigned int v49;
  signed int v50;
  BOOL v51;
  unsigned int v52;
  uint64_t v53;
  id v54;
  unsigned int v55;
  dispatch_queue_s *v56;
  uint64_t v57;
  uint64_t v58;
  uint64_t v59;
  __int128 v60;
  _BYTE v61[5];
  void *v62;
  void *v63;
  unsigned int v64;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v16);
      while (__stlxr(v55 - 1, v16));
      __uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, GPUTools::GL *, int *))(*(void *)(v15 + 24) + 5440LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __int128 v62 = 0LL;
  __int128 v63 = 0LL;
  unsigned int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    GPUTools::GL::DYGetFramebufferAttachmentParameterInfo(a4, &v61[1], (unsigned int *)v61, v20);
    uint64_t v22 = 101LL;
    if (!v61[0]) {
      uint64_t v22 = 105LL;
    }
    snprintf((char *)(v15 + 4709), 0x40uLL, "Ceee@%u%c", *(_DWORD *)&v61[1], v22);
    GPUTools::FB::Encode((uint64_t)&v62, 240LL, 256LL, v15 + 4709, v23, v24, v25, v26, *(void *)v15);
    char v28 = byte_206F48;
    if ((byte_206F48 & 1) != 0) {
      breakpoint_break((uint64_t)&v62, (volatile int *)&stru_B8.reloff, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    if (!([(id)DYGetGLGuestAppClient(v27) overrideFlags] & 0x10 | v28 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, GPUTools::GL *, int *))(*(void *)(v15 + 32) + 5440LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v34 = mach_absolute_time() - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v36 = v62;
        *((void *)v62 + 3) = v34;
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        unsigned int v36 = v62;
        *((void *)v62 + 3) = v59;
        uint64_t v33 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
      }

      v36[2] = v33;
      if (gCheckGLErrors) {
        check_errors(v15);
      }
    }

    unsigned int v37 = v62;
    __int128 v60 = *((_OWORD *)v62 + 1);
    __int128 v63 = v62;
    if (v64 >= 0x24)
    {
      *((_DWORD *)v62 + 8) = 0;
      _OWORD *v37 = 0u;
      v37[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v62, 240LL, 256LL, v15 + 4709, v29, v30, v31, v32, *(void *)v15);
    *((_OWORD *)v62 + 1) = v60;
    id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v62, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
    if ((_DWORD)v42) {
      id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v62, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v15, (uint64_t)&v62);
    }
    unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v62);
    uint64_t v44 = *(unsigned int *)(v15 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      uint64_t v57 = 3LL;
      uint64_t v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v57 = 2LL;
      uint64_t v58 = 240LL;
    }

    breakpoint_break((uint64_t)&v62, (volatile int *)v58, v57, v44, v15);
LABEL_43:
    BOOL v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      unsigned int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v62, *(unsigned int *)v62, 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v16);
      signed int v50 = v49 - 1;
    }

    while (__stlxr(v50, v16));
    if (gCheckGLErrors) {
      BOOL v51 = v50 < 1;
    }
    else {
      BOOL v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v15);
    }
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v16);
  while (__stlxr(v52 - 1, v16));
  [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, GPUTools::GL *, int *))(*(void *)(v15 + 24) + 5440LL))( a1,  a2,  a3,  a4,  a5);
LABEL_56:
  if (v62) {
    free(v62);
  }
}

void sub_633DC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(exception_object);
}

void generate_mipmap(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      uint64_t v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5448LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  BOOL v51 = 0LL;
  unsigned int v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    uint64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    BOOL v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        unsigned int v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 210;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206F2A;
        if ((byte_206F2A & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_B8.segname[10], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5448LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            unsigned int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      uint64_t v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5448LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  BOOL v51 = 0LL;
  unsigned int v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    uint64_t v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    BOOL v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        uint64_t v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)uint64_t v15 = 0u;
        unsigned int v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 210;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "Ce");
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_206F2A;
        if ((byte_206F2A & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_B8.segname[10], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5448LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            unsigned int v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5448LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5448LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    uint64_t v15 = __ldaxr(v10);
    id v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5448LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5448LL))(a1, a2);
  id v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_638A8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void program_parameteri(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v13);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_61:
        unsigned int v49 = __ldaxr(v14);
      while (__stlxr(v49 - 1, v14));
      __uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 24) + 5512LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetProgramParameterInfo(a3, 0, (unsigned int *)&v55, v18);
    uint64_t v20 = 101LL;
    if (!v55) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie%c", v20);
    GPUTools::FB::Encode((uint64_t)v56, 467LL, v13 + 4709, v21, v22, v23, v24, v25, *(void *)v13);
    BOOL v26 = check_errors(v13);
    char v27 = byte_20702B;
    if ((byte_20702B & 1) != 0) {
      breakpoint_break( (uint64_t)v56,  (volatile int *)((char *)&stru_1A8.size + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 32) + 5512LL))( a1,  a2,  a3,  a4);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v56[0];
        *((void *)v56[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        id v54 = v56[0];
        *((void *)v56[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v28 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  BOOL v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  char v55;
  void *v56[2];
  int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v13);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_61:
        unsigned int v49 = __ldaxr(v14);
      while (__stlxr(v49 - 1, v14));
      __uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 24) + 5512LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetProgramParameterInfo(a3, 0, (unsigned int *)&v55, v18);
    uint64_t v20 = 101LL;
    if (!v55) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie%c", v20);
    GPUTools::FB::Encode((uint64_t)v56, 467LL, v13 + 4709, v21, v22, v23, v24, v25, *(void *)v13);
    BOOL v26 = check_errors(v13);
    char v27 = byte_20702B;
    if ((byte_20702B & 1) != 0) {
      breakpoint_break( (uint64_t)v56,  (volatile int *)((char *)&stru_1A8.size + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 32) + 5512LL))( a1,  a2,  a3,  a4);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v56[0];
        *((void *)v56[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        id v54 = v56[0];
        *((void *)v56[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v28 = check_errors(v13);
    }

void sub_63D74( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void framebuffer_texture_layer( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5528LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  uint64_t v59 = 0LL;
  __int128 v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v24 = (char *)v59;
    uint64_t v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x47) {
      goto LABEL_24;
    }
    int v53 = (327 - v27) & 0xFFFFFF00;
    v61 += v53;
    uint64_t v24 = (char *)malloc(v53 + v26);
    uint64_t v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        uint64_t v23 = &v24[v25];
LABEL_24:
        *((void *)v23 + 8) = 0LL;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)uint64_t v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        __int128 v60 = v23 + 72;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 198;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        *(void *)(v24 + 36) = 0x69696975656543LL;
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *((_DWORD *)v24 + 15) = a4;
        *((_DWORD *)v24 + 16) = a5;
        *((_DWORD *)v24 + 17) = a6;
        char v29 = byte_206F1E;
        if ((byte_206F1E & 1) != 0) {
          breakpoint_break( (uint64_t)&v59,  (volatile int *)&stru_B8.sectname[14],  1LL,  *(unsigned int *)(v17 + 3404),  v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32)
                                                                                                 + 5528LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            int v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  char *v23;
  char *v24;
  int64_t v25;
  unsigned int v26;
  unint64_t v27;
  uint64_t v28;
  char v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  unint64_t v33;
  void *v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  int v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  __uint64_t v58;
  void *v59;
  char *v60;
  unsigned int v61;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5528LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  uint64_t v59 = 0LL;
  __int128 v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v24 = (char *)v59;
    uint64_t v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x47) {
      goto LABEL_24;
    }
    int v53 = (327 - v27) & 0xFFFFFF00;
    v61 += v53;
    uint64_t v24 = (char *)malloc(v53 + v26);
    uint64_t v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        uint64_t v23 = &v24[v25];
LABEL_24:
        *((void *)v23 + 8) = 0LL;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)uint64_t v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        __int128 v60 = v23 + 72;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 198;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        *(void *)(v24 + 36) = 0x69696975656543LL;
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *((_DWORD *)v24 + 15) = a4;
        *((_DWORD *)v24 + 16) = a5;
        *((_DWORD *)v24 + 17) = a6;
        char v29 = byte_206F1E;
        if ((byte_206F1E & 1) != 0) {
          breakpoint_break( (uint64_t)&v59,  (volatile int *)&stru_B8.sectname[14],  1LL,  *(unsigned int *)(v17 + 3404),  v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32)
                                                                                                 + 5528LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            int v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5528LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        unsigned int v26 = __ldaxr(v18);
      while (__stlxr(v26 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32) + 5528LL))( a1,  a2,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v17);
      }
    }
  }

  do
  {
    uint64_t v23 = __ldaxr(v18);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v18));
  if (gCheckGLErrors) {
    int64_t v25 = v24 < 1;
  }
  else {
    int64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  int64x2_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        uint64_t v32 = __ldaxr(v18);
      while (__stlxr(v32 - 1, v18));
      unint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5528LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32) + 5528LL))( a1,  a2,  a3,  a4,  a5,  a6);
  uint64_t v24 = mach_absolute_time();
  int64_t v25 = vdupq_n_s64(1uLL);
  v25.i64[0] = v24 - v23;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v25, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v34 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v17);
      }
    }
  }

  do
  {
    unsigned int v26 = __ldaxr(v18);
    unint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v18));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_642B4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void bind_buffer_range(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v17);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_59:
        unsigned int v50 = __ldaxr(v18);
      while (__stlxr(v50 - 1, v18));
      unsigned int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5544LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v56, 15LL, 0LL, (uint64_t)"Ceuiuill", v22, v23, v24, v25, *(void *)v17);
    char v28 = byte_206E67;
    if ((byte_206E67 & 1) != 0) {
      breakpoint_break((uint64_t)v56, (int *)((char *)&dword_C + 3), 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32)
                                                                                             + 5544LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v29 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  id v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  void *v56[2];
  int v57;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v17);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_59:
        unsigned int v50 = __ldaxr(v18);
      while (__stlxr(v50 - 1, v18));
      unsigned int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5544LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v56, 15LL, 0LL, (uint64_t)"Ceuiuill", v22, v23, v24, v25, *(void *)v17);
    char v28 = byte_206E67;
    if ((byte_206E67 & 1) != 0) {
      breakpoint_break((uint64_t)v56, (int *)((char *)&dword_C + 3), 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32)
                                                                                             + 5544LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v29 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    char v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v27 = handle_opengl_thread_conflict((const void **)v17);
    char v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_37:
        uint64_t v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5544LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        id v26 = __ldaxr(v18);
      while (__stlxr(v26 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32) + 5544LL))( a1,  a2,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError && (uint64_t v31 = *(unsigned int *)(v17 + 3404), (_DWORD)v31))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v17);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v17);
LABEL_25:
  if (!*(_DWORD *)(v17 + 3404)) {
    wrapper_cache_buffer_binding((_DWORD *)v17, a2, a4);
  }
  do
  {
    uint64_t v23 = __ldaxr(v18);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v18));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  int64x2_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_37:
        unint64_t v32 = __ldaxr(v18);
      while (__stlxr(v32 - 1, v18));
      unint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 5544LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        uint64_t v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  uint64_t v23 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32) + 5544LL))( a1,  a2,  a3,  a4,  a5,  a6);
  uint64_t v24 = mach_absolute_time();
  uint64_t v25 = vdupq_n_s64(1uLL);
  v25.i64[0] = v24 - v23;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v25, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError && (id v34 = *(unsigned int *)(v17 + 3404), (_DWORD)v34))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v17);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v17);
LABEL_25:
  if (!*(_DWORD *)(v17 + 3404)) {
    wrapper_cache_buffer_binding((_DWORD *)v17, a2, a4);
  }
  do
  {
    id v26 = __ldaxr(v18);
    uint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v18));
  if (gCheckGLErrors) {
    char v28 = v27 < 1;
  }
  else {
    char v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_64760( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void bind_buffer_base(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v13);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_59:
        unsigned int v46 = __ldaxr(v14);
      while (__stlxr(v46 - 1, v14));
      unsigned int v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 5560LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v52[0] = 0LL;
  v52[1] = 0LL;
  int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)v52, 13LL, 0LL, (uint64_t)"Ceuiui", v18, v19, v20, v21, *(void *)v13);
    char v24 = byte_206E65;
    if ((byte_206E65 & 1) != 0) {
      breakpoint_break((uint64_t)v52, (int *)((char *)&dword_C + 1), 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 5560LL))( a1,  a2,  a3,  a4);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      unint64_t v28 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v29 = v52[0];
        *((void *)v52[0] + 2) = v26;
        v29[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v50 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        unsigned int v51 = v52[0];
        *((void *)v52[0] + 3) = v50;
        uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
        v51[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v25 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  id v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  unint64_t v28;
  void *v29;
  id v30;
  GPUTools::FB::Fbuf *v31;
  unsigned int v32;
  GPUTools::FB::Fbuf *v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  GPUTools::FB::Stream *v36;
  unsigned int *v37;
  unsigned int v38;
  unsigned int v39;
  unsigned int v40;
  signed int v41;
  BOOL v42;
  unsigned int v43;
  uint64_t v44;
  id v45;
  unsigned int v46;
  dispatch_queue_s *v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  void *v52[2];
  int v53;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v13);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_59:
        unsigned int v46 = __ldaxr(v14);
      while (__stlxr(v46 - 1, v14));
      unsigned int v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 5560LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v52[0] = 0LL;
  v52[1] = 0LL;
  int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)v52, 13LL, 0LL, (uint64_t)"Ceuiui", v18, v19, v20, v21, *(void *)v13);
    char v24 = byte_206E65;
    if ((byte_206E65 & 1) != 0) {
      breakpoint_break((uint64_t)v52, (int *)((char *)&dword_C + 1), 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 5560LL))( a1,  a2,  a3,  a4);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      unint64_t v28 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v29 = v52[0];
        *((void *)v52[0] + 2) = v26;
        v29[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v50 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        unsigned int v51 = v52[0];
        *((void *)v52[0] + 3) = v50;
        uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
        v51[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v25 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    char v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    char v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_37:
        uint64_t v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 5560LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        id v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 5560LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError && (uint64_t v27 = *(unsigned int *)(v13 + 3404), (_DWORD)v27))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v13);
LABEL_25:
  if (!*(_DWORD *)(v13 + 3404)) {
    wrapper_cache_buffer_binding((_DWORD *)v13, a2, a4);
  }
  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_37:
        unint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 5560LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 5560LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  uint64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError && (id v30 = *(unsigned int *)(v13 + 3404), (_DWORD)v30))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v13);
LABEL_25:
  if (!*(_DWORD *)(v13 + 3404)) {
    wrapper_cache_buffer_binding((_DWORD *)v13, a2, a4);
  }
  do
  {
    id v22 = __ldaxr(v14);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    char v24 = v23 < 1;
  }
  else {
    char v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_64BC0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void begin_transform_feedback(__GLIContextRec *a1, uint64_t a2)
{
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v41 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v40 = handle_opengl_thread_conflict((const void **)v9);
    id v41 = [(id)DYGetGLGuestAppClient(v40) waitOnGraphicsSemaphoreAssertions];
    if ((int)v41 >= 1)
    {
      do
LABEL_59:
        unsigned int v42 = __ldaxr(v10);
      while (__stlxr(v42 - 1, v10));
      unsigned int v43 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v41) graphicsLockWaitQueue];
      dispatch_sync_f(v43, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5568LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v48[0] = 0LL;
  v48[1] = 0LL;
  int v49 = 0;
  if ([(id)DYGetGLGuestAppClient(v41) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v48, 10LL, 0LL, (uint64_t)"Ce", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_206E62;
    if ((byte_206E62 & 1) != 0) {
      breakpoint_break((uint64_t)v48, (int *)((char *)&dword_8 + 2), 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v21 = (uint64_t)[(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if (!(v21 & 0x10 | v20 & 4))
    {
      uint64_t v22 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5568LL))(a1, a2);
      uint64_t v21 = mach_absolute_time();
      uint64_t v23 = v21 - v22;
      unint64_t v24 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v25 = v48[0];
        *((void *)v48[0] + 2) = v22;
        v25[3] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v46 = __udivti3(g_DYTimebaseInfo * v23, (g_DYTimebaseInfo * (unsigned __int128)v23) >> 64);
        unsigned int v47 = v48[0];
        *((void *)v48[0] + 3) = v46;
        uint64_t v21 = __udivti3(v24 * v22, (v24 * (unsigned __int128)v22) >> 64);
        v47[2] = v21;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v21 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  id v18;
  uint64_t v19;
  char v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  unint64_t v24;
  void *v25;
  id v26;
  GPUTools::FB::Fbuf *v27;
  unsigned int v28;
  GPUTools::FB::Fbuf *v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  GPUTools::FB::Stream *v32;
  unsigned int *v33;
  unsigned int v34;
  unsigned int v35;
  unsigned int v36;
  signed int v37;
  BOOL v38;
  unsigned int v39;
  uint64_t v40;
  id v41;
  unsigned int v42;
  dispatch_queue_s *v43;
  uint64_t v44;
  uint64_t v45;
  uint64_t v46;
  void *v47;
  void *v48[2];
  int v49;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v41 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v40 = handle_opengl_thread_conflict((const void **)v9);
    id v41 = [(id)DYGetGLGuestAppClient(v40) waitOnGraphicsSemaphoreAssertions];
    if ((int)v41 >= 1)
    {
      do
LABEL_59:
        unsigned int v42 = __ldaxr(v10);
      while (__stlxr(v42 - 1, v10));
      unsigned int v43 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v41) graphicsLockWaitQueue];
      dispatch_sync_f(v43, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5568LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v48[0] = 0LL;
  v48[1] = 0LL;
  int v49 = 0;
  if ([(id)DYGetGLGuestAppClient(v41) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v48, 10LL, 0LL, (uint64_t)"Ce", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_206E62;
    if ((byte_206E62 & 1) != 0) {
      breakpoint_break((uint64_t)v48, (int *)((char *)&dword_8 + 2), 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v21 = (uint64_t)[(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if (!(v21 & 0x10 | v20 & 4))
    {
      uint64_t v22 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5568LL))(a1, a2);
      uint64_t v21 = mach_absolute_time();
      uint64_t v23 = v21 - v22;
      unint64_t v24 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v25 = v48[0];
        *((void *)v48[0] + 2) = v22;
        v25[3] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v46 = __udivti3(g_DYTimebaseInfo * v23, (g_DYTimebaseInfo * (unsigned __int128)v23) >> 64);
        unsigned int v47 = v48[0];
        *((void *)v48[0] + 3) = v46;
        uint64_t v21 = __udivti3(v24 * v22, (v24 * (unsigned __int128)v22) >> 64);
        v47[2] = v21;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v21 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    char v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_37:
        uint64_t v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5568LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        id v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5568LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError && (uint64_t v23 = *(unsigned int *)(v9 + 3404), (_DWORD)v23))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v9);
LABEL_25:
  if (!*(_DWORD *)(v9 + 3404)) {
    wrapper_cache_active_transform_feedback((ContextInfo *)v9);
  }
  do
  {
    uint64_t v15 = __ldaxr(v10);
    uint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 < 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_37:
        unint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 5568LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 5568LL))(a1, a2);
  uint64_t v16 = mach_absolute_time();
  uint64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError && (id v26 = *(unsigned int *)(v9 + 3404), (_DWORD)v26))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v9);
LABEL_25:
  if (!*(_DWORD *)(v9 + 3404)) {
    wrapper_cache_active_transform_feedback((ContextInfo *)v9);
  }
  do
  {
    id v18 = __ldaxr(v10);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    char v20 = v19 < 1;
  }
  else {
    char v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_64FE8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void end_transform_feedback(__GLIContextRec *a1)
{
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v40 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v39 = handle_opengl_thread_conflict((const void **)v7);
    id v40 = [(id)DYGetGLGuestAppClient(v39) waitOnGraphicsSemaphoreAssertions];
    if ((int)v40 >= 1)
    {
      do
LABEL_57:
        unsigned int v41 = __ldaxr(v8);
      while (__stlxr(v41 - 1, v8));
      unsigned int v42 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v40) graphicsLockWaitQueue];
      dispatch_sync_f(v42, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 5576LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  int v49 = 0LL;
  uint64_t v50 = 0LL;
  unsigned int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v40) state] != (char *)&dword_0 + 1
    || (id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v12))
  {
    uint64_t v14 = (char *)v49;
    BOOL v13 = v50;
    int64_t v15 = v50 - (_BYTE *)v49;
    unsigned int v16 = v51;
    unint64_t v17 = v51 - (v50 - (_BYTE *)v49);
    if (v17 > 0x2F) {
      goto LABEL_24;
    }
    int v43 = (303 - v17) & 0xFFFFFF00;
    v51 += v43;
    uint64_t v14 = (char *)malloc(v43 + v16);
    int v49 = v14;
    if (v14)
    {
      if ((v14 & 3) == 0)
      {
        BOOL v13 = &v14[v15];
LABEL_24:
        *((_OWORD *)v13 + 1) = 0u;
        *((_OWORD *)v13 + 2) = 0u;
        *(_OWORD *)BOOL v13 = 0u;
        uint64_t v50 = v13 + 48;
        GPUTools::FB::Fbuf::align((char **)&v49);
        *((_DWORD *)v14 + 1) = 160;
        *((_DWORD *)v14 + 8) = 0;
        __uint64_t v48 = 0LL;
        uint64_t v18 = pthread_threadid_np(0LL, &v48);
        *((void *)v14 + 1) = v48;
        *((_WORD *)v14 + 18) = 67;
        *((void *)v14 + 5) = *(void *)v7;
        char v19 = byte_206EF8;
        if ((byte_206EF8 & 1) != 0) {
          breakpoint_break((uint64_t)&v49, (volatile int *)&stru_68.reloff, 1LL, *(unsigned int *)(v7 + 3404), v7);
        }
        uint64_t v20 = (uint64_t)[(id)DYGetGLGuestAppClient(v18) overrideFlags];
        if (!(v20 & 0x10 | v19 & 4))
        {
          uint64_t v21 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 5576LL))(a1);
          uint64_t v20 = mach_absolute_time();
          uint64_t v22 = v20 - v21;
          unint64_t v23 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v24 = v49;
            *((void *)v49 + 2) = v21;
            v24[3] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v46 = __udivti3(g_DYTimebaseInfo * v22, (g_DYTimebaseInfo * (unsigned __int128)v22) >> 64);
            unsigned int v47 = v49;
            *((void *)v49 + 3) = v46;
            uint64_t v20 = __udivti3(v23 * v21, (v23 * (unsigned __int128)v21) >> 64);
            v47[2] = v20;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v20 = check_errors(v7);
        }

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  char *v13;
  char *v14;
  int64_t v15;
  unsigned int v16;
  unint64_t v17;
  uint64_t v18;
  char v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  unint64_t v23;
  void *v24;
  id v25;
  GPUTools::FB::Fbuf *v26;
  unsigned int v27;
  GPUTools::FB::Fbuf *v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  GPUTools::FB::Stream *v31;
  unsigned int *v32;
  unsigned int v33;
  unsigned int v34;
  unsigned int v35;
  signed int v36;
  BOOL v37;
  unsigned int v38;
  uint64_t v39;
  id v40;
  unsigned int v41;
  dispatch_queue_s *v42;
  int v43;
  uint64_t v44;
  uint64_t v45;
  uint64_t v46;
  void *v47;
  __uint64_t v48;
  void *v49;
  char *v50;
  unsigned int v51;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    id v40 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v39 = handle_opengl_thread_conflict((const void **)v7);
    id v40 = [(id)DYGetGLGuestAppClient(v39) waitOnGraphicsSemaphoreAssertions];
    if ((int)v40 >= 1)
    {
      do
LABEL_57:
        unsigned int v41 = __ldaxr(v8);
      while (__stlxr(v41 - 1, v8));
      unsigned int v42 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v40) graphicsLockWaitQueue];
      dispatch_sync_f(v42, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 5576LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  int v49 = 0LL;
  uint64_t v50 = 0LL;
  unsigned int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v40) state] != (char *)&dword_0 + 1
    || (id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v12))
  {
    uint64_t v14 = (char *)v49;
    BOOL v13 = v50;
    int64_t v15 = v50 - (_BYTE *)v49;
    unsigned int v16 = v51;
    unint64_t v17 = v51 - (v50 - (_BYTE *)v49);
    if (v17 > 0x2F) {
      goto LABEL_24;
    }
    int v43 = (303 - v17) & 0xFFFFFF00;
    v51 += v43;
    uint64_t v14 = (char *)malloc(v43 + v16);
    int v49 = v14;
    if (v14)
    {
      if ((v14 & 3) == 0)
      {
        BOOL v13 = &v14[v15];
LABEL_24:
        *((_OWORD *)v13 + 1) = 0u;
        *((_OWORD *)v13 + 2) = 0u;
        *(_OWORD *)BOOL v13 = 0u;
        uint64_t v50 = v13 + 48;
        GPUTools::FB::Fbuf::align((char **)&v49);
        *((_DWORD *)v14 + 1) = 160;
        *((_DWORD *)v14 + 8) = 0;
        __uint64_t v48 = 0LL;
        uint64_t v18 = pthread_threadid_np(0LL, &v48);
        *((void *)v14 + 1) = v48;
        *((_WORD *)v14 + 18) = 67;
        *((void *)v14 + 5) = *(void *)v7;
        char v19 = byte_206EF8;
        if ((byte_206EF8 & 1) != 0) {
          breakpoint_break((uint64_t)&v49, (volatile int *)&stru_68.reloff, 1LL, *(unsigned int *)(v7 + 3404), v7);
        }
        uint64_t v20 = (uint64_t)[(id)DYGetGLGuestAppClient(v18) overrideFlags];
        if (!(v20 & 0x10 | v19 & 4))
        {
          uint64_t v21 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 5576LL))(a1);
          uint64_t v20 = mach_absolute_time();
          uint64_t v22 = v20 - v21;
          unint64_t v23 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v24 = v49;
            *((void *)v49 + 2) = v21;
            v24[3] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v46 = __udivti3(g_DYTimebaseInfo * v22, (g_DYTimebaseInfo * (unsigned __int128)v22) >> 64);
            unsigned int v47 = v49;
            *((void *)v49 + 3) = v46;
            uint64_t v20 = __udivti3(v23 * v21, (v23 * (unsigned __int128)v21) >> 64);
            v47[2] = v20;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v20 = check_errors(v7);
        }

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  unsigned int v16;
  uint64_t v17;
  id v18;
  unsigned int v19;
  dispatch_queue_s *v20;
  uint64_t v21;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v17 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v18 = [(id)DYGetGLGuestAppClient(v17) waitOnGraphicsSemaphoreAssertions];
    if ((int)v18 >= 1)
    {
      do
LABEL_34:
        char v19 = __ldaxr(v8);
      while (__stlxr(v19 - 1, v8));
      uint64_t v20 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v18) graphicsLockWaitQueue];
      dispatch_sync_f(v20, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 5576LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v18) state] == (char *)&dword_0 + 1)
  {
    id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        unsigned int v16 = __ldaxr(v8);
      while (__stlxr(v16 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 5576LL))(a1);
  ++*(void *)(v7 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      uint64_t v21 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v21) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v21, v7);
      }
    }
  }

  do
  {
    BOOL v13 = __ldaxr(v8);
    uint64_t v14 = v13 - 1;
  }

  while (__stlxr(v14, v8));
  if (gCheckGLErrors) {
    int64_t v15 = v14 < 1;
  }
  else {
    int64_t v15 = 1;
  }
  if (!v15) {
    handle_opengl_thread_conflict((const void **)v7);
  }
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  uint64_t v13;
  uint64_t v14;
  int64x2_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_34:
        uint64_t v22 = __ldaxr(v8);
      while (__stlxr(v22 - 1, v8));
      unint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 5576LL))(a1);
      return;
    }
  }

  *(_BYTE *)(v7 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v12 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v12)
    {
      do
        char v19 = __ldaxr(v8);
      while (__stlxr(v19 - 1, v8));
      [(id)DYGetGLGuestAppClient(v12) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v13 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 5576LL))(a1);
  uint64_t v14 = mach_absolute_time();
  int64_t v15 = vdupq_n_s64(1uLL);
  v15.i64[0] = v14 - v13;
  *(int64x2_t *)(v7 + 3696) = vaddq_s64(v15, *(int64x2_t *)(v7 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      unint64_t v24 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v7);
      }
    }
  }

  do
  {
    unsigned int v16 = __ldaxr(v8);
    unint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v8));
  if (gCheckGLErrors) {
    uint64_t v18 = v17 < 1;
  }
  else {
    uint64_t v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v7);
  }
}

void sub_65490( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void transform_feedback_varyings( __GLIContextRec *a1, uint64_t a2, uint64_t a3, const char *const *a4, uint64_t a5)
{
  signed int v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    signed int v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_56:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, uint64_t))(*(void *)(v15 + 24)
                                                                                                + 5584LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    snprintf((char *)(v15 + 4709), 0x40uLL, "Cuii@%dSe", a3);
    GPUTools::FB::Encode((uint64_t)v55, 606LL, v15 + 4709, v21, v22, v23, v24, v25, *(void *)v15);
    uint64_t v26 = wrapper_cache_program_xfb_varyings((ContextInfo *)v15, a2);
    char v27 = byte_2070B6;
    if ((byte_2070B6 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.segname[6], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, uint64_t))(*(void *)(v15 + 32)
                                                                                                + 5584LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v32 = v55[0];
        *((void *)v55[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        uint64_t v54 = v55[0];
        *((void *)v55[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v28 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  void *v55[2];
  int v56;
  signed int v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    signed int v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_56:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, uint64_t))(*(void *)(v15 + 24)
                                                                                                + 5584LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    snprintf((char *)(v15 + 4709), 0x40uLL, "Cuii@%dSe", a3);
    GPUTools::FB::Encode((uint64_t)v55, 606LL, v15 + 4709, v21, v22, v23, v24, v25, *(void *)v15);
    uint64_t v26 = wrapper_cache_program_xfb_varyings((ContextInfo *)v15, a2);
    char v27 = byte_2070B6;
    if ((byte_2070B6 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_248.segname[6], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, uint64_t))(*(void *)(v15 + 32)
                                                                                                + 5584LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v32 = v55[0];
        *((void *)v55[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        uint64_t v54 = v55[0];
        *((void *)v55[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v28 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  signed int v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    signed int v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, uint64_t))(*(void *)(v15 + 24)
                                                                                                + 5584LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  wrapper_cache_program_xfb_varyings((ContextInfo *)v15, a2);
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, uint64_t))(*(void *)(v15 + 32)
                                                                                            + 5584LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  signed int v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    signed int v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, uint64_t))(*(void *)(v15 + 24)
                                                                                                + 5584LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  wrapper_cache_program_xfb_varyings((ContextInfo *)v15, a2);
  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const char *const *, uint64_t))(*(void *)(v15 + 32)
                                                                                            + 5584LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unsigned int v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_658FC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void get_transform_feedback_varying( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, int *a5, int *a6, unsigned int *a7, char *a8)
{
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      unsigned int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v58 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v57 = handle_opengl_thread_conflict((const void **)v17);
    id v58 = [(id)DYGetGLGuestAppClient(v57) waitOnGraphicsSemaphoreAssertions];
    if ((int)v58 >= 1)
    {
      do
LABEL_71:
        unsigned int v59 = __ldaxr(v18);
      while (__stlxr(v59 - 1, v18));
      __int128 v60 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v58) graphicsLockWaitQueue];
      dispatch_sync_f(v60, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v17 + 24) + 5592LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v71 = 0LL;
  v72 = 0LL;
  unsigned int v73 = 0;
  if ([(id)DYGetGLGuestAppClient(v58) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    int v70 = 0;
    BOOL v23 = a5 == 0LL;
    if (!a5) {
      a5 = &v70;
    }
    *a5 = 0;
    strcpy((char *)(v17 + 4709), "Cuiuii");
    if (v23) {
      uint64_t v24 = "t";
    }
    else {
      uint64_t v24 = "@1i";
    }
    strlcat((char *)(v17 + 4709), v24, 0x40uLL);
    if (a6) {
      uint64_t v25 = "@1i";
    }
    else {
      uint64_t v25 = "t";
    }
    strlcat((char *)(v17 + 4709), v25, 0x40uLL);
    if (a7) {
      uint64_t v26 = "@1e";
    }
    else {
      uint64_t v26 = "t";
    }
    strlcat((char *)(v17 + 4709), v26, 0x40uLL);
    strlcat((char *)(v17 + 4709), "t", 0x40uLL);
    GPUTools::FB::Encode((uint64_t)&v71, 296LL, 256LL, v17 + 4709, v27, v28, v29, v30, *(void *)v17);
    char v32 = byte_206F80;
    if ((byte_206F80 & 1) != 0) {
      breakpoint_break((uint64_t)&v71, (volatile int *)&stru_108.addr, 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v17 + 32) + 5592LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        BOOL v37 = v71;
        v71[2] = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_39;
        }
      }

      else
      {
        uint64_t v63 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v64 = v71;
        v71[3] = v63;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v64[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_39;
        }
      }

      uint64_t v33 = check_errors(v17);
    }

{
  void *v16;
  uint64_t v17;
  unint64_t v18;
  BOOL v19;
  void *v20;
  uint64_t v21;
  unsigned int *v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  id v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  uint64_t v34;
  unint64_t v35;
  void *v36;
  id v37;
  GPUTools::FB::Fbuf *v38;
  unsigned int v39;
  GPUTools::FB::Fbuf *v40;
  dispatch_queue_s *v41;
  uint64_t v42;
  GPUTools::FB::Stream *v43;
  unsigned int *v44;
  unsigned int v45;
  unsigned int v46;
  unsigned int v47;
  signed int v48;
  BOOL v49;
  unsigned int v50;
  uint64_t v51;
  id v52;
  unsigned int v53;
  dispatch_queue_s *v54;
  uint64_t v55;
  uint64_t v56;
  uint64_t v57;
  void *v58;
  char v59;
  uint64_t v60;
  void *v61[2];
  int v62;
  unsigned int v16 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v16) {
    goto LABEL_12;
  }
  uint64_t v17 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    signed int v18 = v16[4];
    unsigned int v19 = v18 >= (unint64_t)a1;
    else {
      signed int v20 = v16 + 1;
    }
    if (v19) {
      uint64_t v17 = (uint64_t)v16;
    }
    unsigned int v16 = (void *)*v20;
  }

  while (*v20);
  if (v17 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v17 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v17 = ContextInfo::activeCtxInfoMap + 8;
  BOOL v21 = *(void *)(v17 + 40);
  id v22 = (unsigned int *)(v21 + 4640);
  do
  {
    BOOL v23 = __ldaxr(v22);
    uint64_t v24 = v23 + 1;
  }

  while (__stlxr(v24, v22));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 <= 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (v25)
  {
    unsigned int v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v51 = handle_opengl_thread_conflict((const void **)v21);
    unsigned int v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_56:
        unsigned int v53 = __ldaxr(v22);
      while (__stlxr(v53 - 1, v22));
      signed int v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v21 + 24) + 5592LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v21 + 4838) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  uint64_t v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (uint64_t v30 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v30))
  {
    GPUTools::FB::Encode((uint64_t)v61, 296LL, 2LL, (uint64_t)"Cuiuiipppp", v26, v27, v28, v29, *(void *)v21);
    unsigned int v59 = byte_206F80;
    if ((byte_206F80 & 1) != 0) {
      breakpoint_break((uint64_t)v61, (volatile int *)&stru_108.addr, 1LL, *(unsigned int *)(v21 + 3404), v21);
    }
    char v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    __int128 v60 = v21;
    if (!(v32 & 0x10 | v59 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v60 + 32) + 5592LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      char v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      uint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v36 = v61[0];
        *((void *)v61[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        id v58 = v61[0];
        *((void *)v61[0] + 3) = v57;
        char v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      char v32 = check_errors(v60);
    }

{
  void *v15;
  uint64_t v16;
  unint64_t v17;
  BOOL v18;
  void *v19;
  uint64_t v20;
  unsigned int *v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  id v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  BOOL v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  unsigned int v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v17 = v15[4];
    signed int v18 = v17 >= (unint64_t)a1;
    else {
      unsigned int v19 = v15 + 1;
    }
    if (v18) {
      unsigned int v16 = (uint64_t)v15;
    }
    BOOL v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unsigned int v16 = ContextInfo::activeCtxInfoMap + 8;
  signed int v20 = *(void *)(v16 + 40);
  BOOL v21 = (unsigned int *)(v20 + 4640);
  do
  {
    id v22 = __ldaxr(v21);
    BOOL v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 <= 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (v24)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v20);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        char v32 = __ldaxr(v21);
      while (__stlxr(v32 - 1, v21));
      uint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 24) + 5592LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v20 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v25)
    {
      do
        uint64_t v29 = __ldaxr(v21);
      while (__stlxr(v29 - 1, v21));
      [(id)DYGetGLGuestAppClient(v25) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 32) + 5592LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
  ++*(void *)(v20 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v20);
    if (gBreakOnError)
    {
      uint64_t v34 = *(unsigned int *)(v20 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v20);
      }
    }
  }

  do
  {
    uint64_t v26 = __ldaxr(v21);
    uint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v21));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v20);
  }
}

{
  void *v15;
  uint64_t v16;
  unint64_t v17;
  BOOL v18;
  void *v19;
  uint64_t v20;
  unsigned int *v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  id v25;
  uint64_t v26;
  char *v27;
  uint64_t v28;
  uint64_t v29;
  int64x2_t v30;
  unsigned int v31;
  signed int v32;
  BOOL v33;
  unsigned int v34;
  uint64_t v35;
  id v36;
  unsigned int v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  BOOL v15 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v15) {
    goto LABEL_12;
  }
  unsigned int v16 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v17 = v15[4];
    signed int v18 = v17 >= (unint64_t)a1;
    else {
      unsigned int v19 = v15 + 1;
    }
    if (v18) {
      unsigned int v16 = (uint64_t)v15;
    }
    BOOL v15 = (void *)*v19;
  }

  while (*v19);
  if (v16 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v16 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unsigned int v16 = ContextInfo::activeCtxInfoMap + 8;
  signed int v20 = *(void *)(v16 + 40);
  BOOL v21 = (unsigned int *)(v20 + 4640);
  do
  {
    id v22 = __ldaxr(v21);
    BOOL v23 = v22 + 1;
  }

  while (__stlxr(v23, v21));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 <= 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (v24)
  {
    unint64_t v36 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v35 = handle_opengl_thread_conflict((const void **)v20);
    unint64_t v36 = [(id)DYGetGLGuestAppClient(v35) waitOnGraphicsSemaphoreAssertions];
    if ((int)v36 >= 1)
    {
      do
LABEL_34:
        BOOL v37 = __ldaxr(v21);
      while (__stlxr(v37 - 1, v21));
      uint64_t v38 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v36) graphicsLockWaitQueue];
      dispatch_sync_f(v38, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 24) + 5592LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8);
      return;
    }
  }

  *(_BYTE *)(v20 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v36) state] == (char *)&dword_0 + 1)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v25)
    {
      do
        uint64_t v34 = __ldaxr(v21);
      while (__stlxr(v34 - 1, v21));
      [(id)DYGetGLGuestAppClient(v25) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v26 = mach_absolute_time();
  uint64_t v27 = a8;
  uint64_t v28 = v26;
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, int *, unsigned int *, char *))(*(void *)(v20 + 32) + 5592LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  v27);
  uint64_t v29 = mach_absolute_time();
  uint64_t v30 = vdupq_n_s64(1uLL);
  v30.i64[0] = v29 - v28;
  *(int64x2_t *)(v20 + 3696) = vaddq_s64(v30, *(int64x2_t *)(v20 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v20);
    if (gBreakOnError)
    {
      uint64_t v39 = *(unsigned int *)(v20 + 3404);
      if ((_DWORD)v39) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v39, v20);
      }
    }
  }

  do
  {
    uint64_t v31 = __ldaxr(v21);
    char v32 = v31 - 1;
  }

  while (__stlxr(v32, v21));
  if (gCheckGLErrors) {
    uint64_t v33 = v32 < 1;
  }
  else {
    uint64_t v33 = 1;
  }
  if (!v33) {
    handle_opengl_thread_conflict((const void **)v20);
  }
}

void sub_65EA8(_Unwind_Exception *exception_object)
{
  unint64_t v4 = *(void **)(v2 - 112);
  if (v4) {
    free(v4);
  }
  _Unwind_Resume(exception_object);
}

void get_integer_indexedv_EXT(__GLIContextRec *a1, GPUTools::GL *a2, uint64_t a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v13);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v14);
      while (__stlxr(v55 - 1, v14));
      unsigned int v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 24) + 5600LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v62 = 0LL;
  uint64_t v63 = 0LL;
  unsigned int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetParameterInfo(a2, &v65[1], (unsigned int *)v65, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v65[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Ceui@%u%c", *(_DWORD *)&v65[1], v21);
    GPUTools::FB::Encode((uint64_t)&v62, 246LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F4E;
    if ((byte_206F4E & 1) != 0) {
      breakpoint_break( (uint64_t)&v62,  (volatile int *)((char *)&stru_B8.nreloc + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 32) + 5600LL))( a1,  a2,  a3,  a4);
      uint64_t v60 = v13;
      uint64_t v33 = v13 + 4709;
      uint64_t v34 = mach_absolute_time() - v32;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v36 = v62;
        *((void *)v62 + 3) = v34;
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        unint64_t v36 = v62;
        *((void *)v62 + 3) = v59;
        uint64_t v32 = __udivti3(v35 * v32, (v35 * (unsigned __int128)v32) >> 64);
      }

      v36[2] = v32;
      uint64_t v20 = v33;
      uint64_t v13 = v60;
      if (gCheckGLErrors) {
        check_errors(v60);
      }
    }

    BOOL v37 = v62;
    __int128 v61 = *((_OWORD *)v62 + 1);
    uint64_t v63 = v62;
    if (v64 >= 0x24)
    {
      *((_DWORD *)v62 + 8) = 0;
      _OWORD *v37 = 0u;
      v37[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v62, 246LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v62 + 1) = v61;
    id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v62, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42) {
      id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v62, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v62);
    }
    id v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v62);
    uint64_t v44 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      uint64_t v57 = 3LL;
      uint64_t v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v57 = 2LL;
      uint64_t v58 = 246LL;
    }

    breakpoint_break((uint64_t)&v62, (volatile int *)v58, v57, v44, v13);
LABEL_43:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      unsigned int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v62, *(unsigned int *)v62, 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v14);
      signed int v50 = v49 - 1;
    }

    while (__stlxr(v50, v14));
    if (gCheckGLErrors) {
      BOOL v51 = v50 < 1;
    }
    else {
      BOOL v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v14);
  while (__stlxr(v52 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 24) + 5600LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v62) {
    free(v62);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  uint64_t v34;
  unint64_t v35;
  void *v36;
  _OWORD *v37;
  uint64_t v38;
  id v39;
  GPUTools::FB::Fbuf *v40;
  unsigned int v41;
  GPUTools::FB::Fbuf *v42;
  dispatch_queue_s *v43;
  uint64_t v44;
  GPUTools::FB::Stream *v45;
  unsigned int *v46;
  unsigned int v47;
  unsigned int v48;
  unsigned int v49;
  signed int v50;
  BOOL v51;
  unsigned int v52;
  uint64_t v53;
  id v54;
  unsigned int v55;
  dispatch_queue_s *v56;
  uint64_t v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  __int128 v61;
  void *v62;
  void *v63;
  unsigned int v64;
  _BYTE v65[5];
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v13);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v14);
      while (__stlxr(v55 - 1, v14));
      unsigned int v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 24) + 5600LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v62 = 0LL;
  uint64_t v63 = 0LL;
  unsigned int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetParameterInfo(a2, &v65[1], (unsigned int *)v65, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v65[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Ceui@%u%c", *(_DWORD *)&v65[1], v21);
    GPUTools::FB::Encode((uint64_t)&v62, 246LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F4E;
    if ((byte_206F4E & 1) != 0) {
      breakpoint_break( (uint64_t)&v62,  (volatile int *)((char *)&stru_B8.nreloc + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 32) + 5600LL))( a1,  a2,  a3,  a4);
      uint64_t v60 = v13;
      uint64_t v33 = v13 + 4709;
      uint64_t v34 = mach_absolute_time() - v32;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v36 = v62;
        *((void *)v62 + 3) = v34;
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        unint64_t v36 = v62;
        *((void *)v62 + 3) = v59;
        uint64_t v32 = __udivti3(v35 * v32, (v35 * (unsigned __int128)v32) >> 64);
      }

      v36[2] = v32;
      uint64_t v20 = v33;
      uint64_t v13 = v60;
      if (gCheckGLErrors) {
        check_errors(v60);
      }
    }

    BOOL v37 = v62;
    __int128 v61 = *((_OWORD *)v62 + 1);
    uint64_t v63 = v62;
    if (v64 >= 0x24)
    {
      *((_DWORD *)v62 + 8) = 0;
      _OWORD *v37 = 0u;
      v37[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v62, 246LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v62 + 1) = v61;
    id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v62, v40);
    }
    unsigned int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42) {
      id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v62, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v62);
    }
    id v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v62);
    uint64_t v44 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      uint64_t v57 = 3LL;
      uint64_t v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v57 = 2LL;
      uint64_t v58 = 246LL;
    }

    breakpoint_break((uint64_t)&v62, (volatile int *)v58, v57, v44, v13);
LABEL_43:
    unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      unsigned int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v62, *(unsigned int *)v62, 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v14);
      signed int v50 = v49 - 1;
    }

    while (__stlxr(v50, v14));
    if (gCheckGLErrors) {
      BOOL v51 = v50 < 1;
    }
    else {
      BOOL v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v14);
  while (__stlxr(v52 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, int *))(*(void *)(v13 + 24) + 5600LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v62) {
    free(v62);
  }
}

void sub_66398( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, void *a15)
{
  if (a15) {
    free(a15);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attribI4i(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, void *a6)
{
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v17);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_58:
        unsigned int v54 = __ldaxr(v18);
      while (__stlxr(v54 - 1, v18));
      unsigned int v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                              + 5712LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v61, 722LL, 0LL, (uint64_t)"Cuiiiii", v22, v23, v24, v25, *(void *)v17);
    char v28 = byte_20712A;
    if ((byte_20712A & 1) != 0) {
      breakpoint_break( (uint64_t)v61,  (volatile int *)((char *)&stru_298.reloff + 2),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 32)
                                                                                              + 5712LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      char v59 = v28;
      uint64_t v60 = v17;
      int v31 = a3;
      int v32 = a4;
      int v33 = a2;
      int v34 = a5;
      int v35 = (int)a6;
      uint64_t v36 = v29 - v30;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        a6 = v61[0];
        *((void *)v61[0] + 3) = v36;
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        a6 = v61[0];
        *((void *)v61[0] + 3) = v58;
        uint64_t v29 = __udivti3(v37 * v30, (v37 * (unsigned __int128)v30) >> 64);
        uint64_t v30 = v29;
      }

      a6[2] = v30;
      LODWORD(a6) = v35;
      LODWORD(a5) = v34;
      LODWORD(a2) = v33;
      LODWORD(a4) = v32;
      LODWORD(a3) = v31;
      uint64_t v17 = v60;
      char v28 = v59;
      if (gCheckGLErrors) {
        uint64_t v29 = check_errors(v60);
      }
    }

    id v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      id v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v61, v39);
    }
    unsigned int v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v17 + 3404);
    if ((_DWORD)v41) {
      id v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v61, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v17, (uint64_t)v61);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v17 + 3480),  (GPUTools::FB::Fbuf *)(v17 + 3520),  (GPUTools::FB *)v61);
    uint64_t v43 = *(unsigned int *)(v17 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      uint64_t v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_39;
      }
      uint64_t v56 = 2LL;
      uint64_t v57 = 722LL;
    }

    breakpoint_break((uint64_t)v61, (volatile int *)v57, v56, v43, v17);
LABEL_39:
    uint64_t v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          unsigned int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v61, *(unsigned int *)v61[0], 1);
    atomic_store(0, v45);
    wrapper_cache_vertex_attrib( (char *)v17,  a2,  5124,  (double)(int)a3,  (double)(int)a4,  (double)(int)a5,  (double)(int)a6);
    do
    {
      unsigned int v48 = __ldaxr(v18);
      signed int v49 = v48 - 1;
    }

    while (__stlxr(v49, v18));
    if (gCheckGLErrors) {
      BOOL v50 = v49 < 1;
    }
    else {
      BOOL v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v17);
    }
    goto LABEL_52;
  }

  do
    unsigned int v51 = __ldaxr(v18);
  while (__stlxr(v51 - 1, v18));
  [(id)DYGetGLGuestAppClient(v26) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                          + 5712LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_52:
  if (v61[0]) {
    free(v61[0]);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  id v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  uint64_t v36;
  unint64_t v37;
  id v38;
  GPUTools::FB::Fbuf *v39;
  unsigned int v40;
  GPUTools::FB::Fbuf *v41;
  dispatch_queue_s *v42;
  uint64_t v43;
  GPUTools::FB::Stream *v44;
  unsigned int *v45;
  unsigned int v46;
  unsigned int v47;
  unsigned int v48;
  signed int v49;
  BOOL v50;
  unsigned int v51;
  uint64_t v52;
  id v53;
  unsigned int v54;
  dispatch_queue_s *v55;
  uint64_t v56;
  uint64_t v57;
  uint64_t v58;
  char v59;
  uint64_t v60;
  void *v61[2];
  int v62;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v17);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_58:
        unsigned int v54 = __ldaxr(v18);
      while (__stlxr(v54 - 1, v18));
      unsigned int v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                              + 5712LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v61, 722LL, 0LL, (uint64_t)"Cuiiiii", v22, v23, v24, v25, *(void *)v17);
    char v28 = byte_20712A;
    if ((byte_20712A & 1) != 0) {
      breakpoint_break( (uint64_t)v61,  (volatile int *)((char *)&stru_298.reloff + 2),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 32)
                                                                                              + 5712LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      char v59 = v28;
      uint64_t v60 = v17;
      int v31 = a3;
      int v32 = a4;
      int v33 = a2;
      int v34 = a5;
      int v35 = (int)a6;
      uint64_t v36 = v29 - v30;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        a6 = v61[0];
        *((void *)v61[0] + 3) = v36;
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        a6 = v61[0];
        *((void *)v61[0] + 3) = v58;
        uint64_t v29 = __udivti3(v37 * v30, (v37 * (unsigned __int128)v30) >> 64);
        uint64_t v30 = v29;
      }

      a6[2] = v30;
      LODWORD(a6) = v35;
      LODWORD(a5) = v34;
      LODWORD(a2) = v33;
      LODWORD(a4) = v32;
      LODWORD(a3) = v31;
      uint64_t v17 = v60;
      char v28 = v59;
      if (gCheckGLErrors) {
        uint64_t v29 = check_errors(v60);
      }
    }

    id v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      id v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v61, v39);
    }
    unsigned int v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v17 + 3404);
    if ((_DWORD)v41) {
      id v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v61, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v17, (uint64_t)v61);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v17 + 3480),  (GPUTools::FB::Fbuf *)(v17 + 3520),  (GPUTools::FB *)v61);
    uint64_t v43 = *(unsigned int *)(v17 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      uint64_t v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_39;
      }
      uint64_t v56 = 2LL;
      uint64_t v57 = 722LL;
    }

    breakpoint_break((uint64_t)v61, (volatile int *)v57, v56, v43, v17);
LABEL_39:
    uint64_t v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          unsigned int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v61, *(unsigned int *)v61[0], 1);
    atomic_store(0, v45);
    wrapper_cache_vertex_attrib( (char *)v17,  a2,  5124,  (double)(int)a3,  (double)(int)a4,  (double)(int)a5,  (double)(int)a6);
    do
    {
      unsigned int v48 = __ldaxr(v18);
      signed int v49 = v48 - 1;
    }

    while (__stlxr(v49, v18));
    if (gCheckGLErrors) {
      BOOL v50 = v49 < 1;
    }
    else {
      BOOL v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v17);
    }
    goto LABEL_52;
  }

  do
    unsigned int v51 = __ldaxr(v18);
  while (__stlxr(v51 - 1, v18));
  [(id)DYGetGLGuestAppClient(v26) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                          + 5712LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_52:
  if (v61[0]) {
    free(v61[0]);
  }
}

void sub_66850( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, void *a18)
{
  if (a18) {
    free(a18);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attribI4ui(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, void *a6)
{
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v17);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_58:
        unsigned int v54 = __ldaxr(v18);
      while (__stlxr(v54 - 1, v18));
      unsigned int v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                              + 5744LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v61, 726LL, 0LL, (uint64_t)"Cuiuiuiuiui", v22, v23, v24, v25, *(void *)v17);
    char v28 = byte_20712E;
    if ((byte_20712E & 1) != 0) {
      breakpoint_break( (uint64_t)v61,  (volatile int *)((char *)&stru_298.nreloc + 2),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 32)
                                                                                              + 5744LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      char v59 = v28;
      uint64_t v60 = v17;
      int v31 = a3;
      int v32 = a4;
      int v33 = a2;
      int v34 = a5;
      int v35 = (int)a6;
      uint64_t v36 = v29 - v30;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        a6 = v61[0];
        *((void *)v61[0] + 3) = v36;
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        a6 = v61[0];
        *((void *)v61[0] + 3) = v58;
        uint64_t v29 = __udivti3(v37 * v30, (v37 * (unsigned __int128)v30) >> 64);
        uint64_t v30 = v29;
      }

      a6[2] = v30;
      LODWORD(a6) = v35;
      LODWORD(a5) = v34;
      LODWORD(a2) = v33;
      LODWORD(a4) = v32;
      LODWORD(a3) = v31;
      uint64_t v17 = v60;
      char v28 = v59;
      if (gCheckGLErrors) {
        uint64_t v29 = check_errors(v60);
      }
    }

    id v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      id v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v61, v39);
    }
    unsigned int v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v17 + 3404);
    if ((_DWORD)v41) {
      id v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v61, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v17, (uint64_t)v61);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v17 + 3480),  (GPUTools::FB::Fbuf *)(v17 + 3520),  (GPUTools::FB *)v61);
    uint64_t v43 = *(unsigned int *)(v17 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      uint64_t v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_39;
      }
      uint64_t v56 = 2LL;
      uint64_t v57 = 726LL;
    }

    breakpoint_break((uint64_t)v61, (volatile int *)v57, v56, v43, v17);
LABEL_39:
    uint64_t v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          unsigned int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v61, *(unsigned int *)v61[0], 1);
    atomic_store(0, v45);
    wrapper_cache_vertex_attrib( (char *)v17,  a2,  5125,  (double)a3,  (double)a4,  (double)a5,  (double)a6);
    do
    {
      unsigned int v48 = __ldaxr(v18);
      signed int v49 = v48 - 1;
    }

    while (__stlxr(v49, v18));
    if (gCheckGLErrors) {
      BOOL v50 = v49 < 1;
    }
    else {
      BOOL v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v17);
    }
    goto LABEL_52;
  }

  do
    unsigned int v51 = __ldaxr(v18);
  while (__stlxr(v51 - 1, v18));
  [(id)DYGetGLGuestAppClient(v26) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                          + 5744LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_52:
  if (v61[0]) {
    free(v61[0]);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  id v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  uint64_t v36;
  unint64_t v37;
  id v38;
  GPUTools::FB::Fbuf *v39;
  unsigned int v40;
  GPUTools::FB::Fbuf *v41;
  dispatch_queue_s *v42;
  uint64_t v43;
  GPUTools::FB::Stream *v44;
  unsigned int *v45;
  unsigned int v46;
  unsigned int v47;
  unsigned int v48;
  signed int v49;
  BOOL v50;
  unsigned int v51;
  uint64_t v52;
  id v53;
  unsigned int v54;
  dispatch_queue_s *v55;
  uint64_t v56;
  uint64_t v57;
  uint64_t v58;
  char v59;
  uint64_t v60;
  void *v61[2];
  int v62;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v17);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_58:
        unsigned int v54 = __ldaxr(v18);
      while (__stlxr(v54 - 1, v18));
      unsigned int v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                              + 5744LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v61, 726LL, 0LL, (uint64_t)"Cuiuiuiuiui", v22, v23, v24, v25, *(void *)v17);
    char v28 = byte_20712E;
    if ((byte_20712E & 1) != 0) {
      breakpoint_break( (uint64_t)v61,  (volatile int *)((char *)&stru_298.nreloc + 2),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 32)
                                                                                              + 5744LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      char v59 = v28;
      uint64_t v60 = v17;
      int v31 = a3;
      int v32 = a4;
      int v33 = a2;
      int v34 = a5;
      int v35 = (int)a6;
      uint64_t v36 = v29 - v30;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        a6 = v61[0];
        *((void *)v61[0] + 3) = v36;
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        a6 = v61[0];
        *((void *)v61[0] + 3) = v58;
        uint64_t v29 = __udivti3(v37 * v30, (v37 * (unsigned __int128)v30) >> 64);
        uint64_t v30 = v29;
      }

      a6[2] = v30;
      LODWORD(a6) = v35;
      LODWORD(a5) = v34;
      LODWORD(a2) = v33;
      LODWORD(a4) = v32;
      LODWORD(a3) = v31;
      uint64_t v17 = v60;
      char v28 = v59;
      if (gCheckGLErrors) {
        uint64_t v29 = check_errors(v60);
      }
    }

    id v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v29), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      id v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v61, v39);
    }
    unsigned int v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v17 + 3404);
    if ((_DWORD)v41) {
      id v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v61, v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v17, (uint64_t)v61);
    }
    unsigned int v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v17 + 3480),  (GPUTools::FB::Fbuf *)(v17 + 3520),  (GPUTools::FB *)v61);
    uint64_t v43 = *(unsigned int *)(v17 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v56 = 3LL;
      uint64_t v57 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v28 & 2) == 0) {
        goto LABEL_39;
      }
      uint64_t v56 = 2LL;
      uint64_t v57 = 726LL;
    }

    breakpoint_break((uint64_t)v61, (volatile int *)v57, v56, v43, v17);
LABEL_39:
    uint64_t v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (unsigned int *)((char *)v44 + 56);
    do
      unsigned int v46 = __ldaxr(v45);
    while (__stlxr(1u, v45));
    if (v46 == 1)
    {
      do
      {
        while (*v45 == 1)
          ;
        do
          unsigned int v47 = __ldaxr(v45);
        while (__stlxr(1u, v45));
      }

      while (v47 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v44, (GPUTools::FB::Fbuf *)v61, *(unsigned int *)v61[0], 1);
    atomic_store(0, v45);
    wrapper_cache_vertex_attrib( (char *)v17,  a2,  5125,  (double)a3,  (double)a4,  (double)a5,  (double)a6);
    do
    {
      unsigned int v48 = __ldaxr(v18);
      signed int v49 = v48 - 1;
    }

    while (__stlxr(v49, v18));
    if (gCheckGLErrors) {
      BOOL v50 = v49 < 1;
    }
    else {
      BOOL v50 = 1;
    }
    if (!v50) {
      handle_opengl_thread_conflict((const void **)v17);
    }
    goto LABEL_52;
  }

  do
    unsigned int v51 = __ldaxr(v18);
  while (__stlxr(v51 - 1, v18));
  [(id)DYGetGLGuestAppClient(v26) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void *))(*(void *)(v17 + 24)
                                                                                          + 5744LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_52:
  if (v61[0]) {
    free(v61[0]);
  }
}

void sub_66D04( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, void *a18)
{
  if (a18) {
    free(a18);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attribI4iv(__GLIContextRec *a1, uint64_t a2, const int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      unsigned int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const int *))(*(void *)(v11 + 24) + 5776LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 723LL, 0LL, (uint64_t)"Cui@4i", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_20712B;
    if ((byte_20712B & 1) != 0) {
      breakpoint_break( (uint64_t)v50,  (volatile int *)((char *)&stru_298.reloff + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const int *))(*(void *)(v11 + 32) + 5776LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        signed int v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      unsigned int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const int *))(*(void *)(v11 + 24) + 5776LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v50, 723LL, 0LL, (uint64_t)"Cuip", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_20712B;
    if ((byte_20712B & 1) != 0) {
      breakpoint_break( (uint64_t)v50,  (volatile int *)((char *)&stru_298.reloff + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const int *))(*(void *)(v11 + 32) + 5776LL))(a1, a2, a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        signed int v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

void sub_67158( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attribI4uiv(__GLIContextRec *a1, uint64_t a2, unsigned __int32 *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v11);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v12);
      while (__stlxr(v48 - 1, v12));
      signed int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned __int32 *))(*(void *)(v11 + 24) + 5808LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v54, 727LL, 0LL, (uint64_t)"Cui@4ui", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_20712F;
    if ((byte_20712F & 1) != 0) {
      breakpoint_break( (uint64_t)v54,  (volatile int *)((char *)&stru_298.nreloc + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned __int32 *))(*(void *)(v11 + 32) + 5808LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v54[0];
        *((void *)v54[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v53[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  __n128 v38;
  unint64_t v39;
  unint64_t v40;
  unint64_t v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  void *v54[2];
  int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v11);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v12);
      while (__stlxr(v48 - 1, v12));
      signed int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned __int32 *))(*(void *)(v11 + 24) + 5808LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v54, 723LL, 0LL, (uint64_t)"Cuip", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_20712B;
    if ((byte_20712B & 1) != 0) {
      breakpoint_break( (uint64_t)v54,  (volatile int *)((char *)&stru_298.reloff + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned __int32 *))(*(void *)(v11 + 32) + 5808LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v54[0];
        *((void *)v54[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v53[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

void sub_6759C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attribI_pointer( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, const void *a6)
{
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v17 + 24)
                                                                                                  + 5848LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  char v59 = 0LL;
  uint64_t v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v24 = (char *)v59;
    uint64_t v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x4B) {
      goto LABEL_24;
    }
    int v53 = (331 - v27) & 0xFFFFFF00;
    v61 += v53;
    uint64_t v24 = (char *)malloc(v53 + v26);
    char v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        uint64_t v23 = &v24[v25];
LABEL_24:
        *(_OWORD *)(v23 + 60) = 0u;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)uint64_t v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        uint64_t v60 = v23 + 76;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 729;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        *(void *)(v24 + 36) = 0x70696569697543LL;
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *((_DWORD *)v24 + 15) = a4;
        *((_DWORD *)v24 + 16) = a5;
        *(void *)(v24 + 68) = a6;
        char v29 = byte_207131;
        if ((byte_207131 & 1) != 0) {
          breakpoint_break( (uint64_t)&v59,  (volatile int *)((char *)&stru_298.flags + 1),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v17 + 32) + 5848LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            int v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            uint64_t v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  char *v23;
  char *v24;
  int64_t v25;
  unsigned int v26;
  unint64_t v27;
  uint64_t v28;
  char v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  unint64_t v33;
  void *v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  int v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  __uint64_t v58;
  void *v59;
  char *v60;
  unsigned int v61;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v17 + 24)
                                                                                                  + 5848LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  char v59 = 0LL;
  uint64_t v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v24 = (char *)v59;
    uint64_t v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x4B) {
      goto LABEL_24;
    }
    int v53 = (331 - v27) & 0xFFFFFF00;
    v61 += v53;
    uint64_t v24 = (char *)malloc(v53 + v26);
    char v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        uint64_t v23 = &v24[v25];
LABEL_24:
        *(_OWORD *)(v23 + 60) = 0u;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)uint64_t v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        uint64_t v60 = v23 + 76;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 729;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        *(void *)(v24 + 36) = 0x70696569697543LL;
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *((_DWORD *)v24 + 15) = a4;
        *((_DWORD *)v24 + 16) = a5;
        *(void *)(v24 + 68) = a6;
        char v29 = byte_207131;
        if ((byte_207131 & 1) != 0) {
          breakpoint_break( (uint64_t)&v59,  (volatile int *)((char *)&stru_298.flags + 1),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v17 + 32) + 5848LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            int v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            uint64_t v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v17 + 24)
                                                                                                  + 5848LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        unsigned int v26 = __ldaxr(v18);
      while (__stlxr(v26 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v17 + 32)
                                                                                              + 5848LL))( a1,  a2,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v17);
      }
    }
  }

  do
  {
    uint64_t v23 = __ldaxr(v18);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v18));
  if (gCheckGLErrors) {
    int64_t v25 = v24 < 1;
  }
  else {
    int64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  int64x2_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        uint64_t v32 = __ldaxr(v18);
      while (__stlxr(v32 - 1, v18));
      unint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v17 + 24)
                                                                                                  + 5848LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, const void *))(*(void *)(v17 + 32)
                                                                                              + 5848LL))( a1,  a2,  a3,  a4,  a5,  a6);
  uint64_t v24 = mach_absolute_time();
  int64_t v25 = vdupq_n_s64(1uLL);
  v25.i64[0] = v24 - v23;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v25, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      int v34 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v17);
      }
    }
  }

  do
  {
    unsigned int v26 = __ldaxr(v18);
    unint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v18));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_67AD8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_vertex_attribIiv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5856LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v64 = 0LL;
  __int128 v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetVertexAttribParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 303LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F87;
    if ((byte_206F87 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_108.addr + 7),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 5856LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    __n128 v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    __int128 v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *__n128 v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 303LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 303LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    signed int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    BOOL v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5856LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5856LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v64 = 0LL;
  __int128 v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetVertexAttribParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 303LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F87;
    if ((byte_206F87 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_108.addr + 7),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 5856LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    __n128 v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    __int128 v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *__n128 v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 303LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 303LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    signed int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    BOOL v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 5856LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_67FC8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_vertex_attribIuiv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, unsigned int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 24) + 5864LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v64 = 0LL;
  __int128 v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetVertexAttribParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = "e";
    if (!v63[0]) {
      uint64_t v21 = "ui";
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%s", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 304LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F88;
    if ((byte_206F88 & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.size, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 32) + 5864LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    __n128 v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    __int128 v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *__n128 v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 304LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 304LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    signed int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    BOOL v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 24) + 5864LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  const char *v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 24) + 5864LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v64 = 0LL;
  __int128 v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetVertexAttribParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = "e";
    if (!v63[0]) {
      uint64_t v21 = "ui";
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%s", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 304LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_206F88;
    if ((byte_206F88 & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_108.size, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 32) + 5864LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    __n128 v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    __int128 v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *__n128 v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 304LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    unsigned int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 304LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    signed int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    BOOL v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, unsigned int *))(*(void *)(v13 + 24) + 5864LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_684C0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void uniform1ui(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v11);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_59:
        unsigned int v43 = __ldaxr(v12);
      while (__stlxr(v43 - 1, v12));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5872LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
    __int128 v50 = 0u;
    __int128 v51 = 0u;
    __int128 v52 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, *(void **)v11);
    *(_BYTE *)(v11 + 4709) = 67;
    uint64_t v18 = (_BYTE *)(v11 + 4710);
    if ((_DWORD)v17 == -1)
    {
      *uint64_t v18 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, -1);
      uint64_t v19 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v18 = 1047084118;
      snprintf((char *)(v11 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v11 + 40), *(_DWORD *)(v11 + 2068), v17);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, (void *)(v11 + 4773));
      uint64_t v19 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, a3);
    strcpy(&v18[v19], "ui");
    uint64_t v20 = GPUTools::FB::Encode(v53, 613LL, 0LL, v11 + 4709, &v49);
    char v21 = byte_2070BD;
    if ((byte_2070BD & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_248.segname[13], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5872LL))(a1, v17, a3);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v53[0];
        *((void *)v53[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        unsigned int v48 = v53[0];
        *((void *)v53[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v22 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  _BYTE *v18;
  uint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  uint64_t v46;
  uint64_t v47;
  void *v48;
  char *v49;
  __int128 v50;
  __int128 v51;
  __int128 v52;
  void *v53[2];
  int v54;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v11);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_59:
        unsigned int v43 = __ldaxr(v12);
      while (__stlxr(v43 - 1, v12));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5872LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
    __int128 v50 = 0u;
    __int128 v51 = 0u;
    __int128 v52 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, *(void **)v11);
    *(_BYTE *)(v11 + 4709) = 67;
    uint64_t v18 = (_BYTE *)(v11 + 4710);
    if ((_DWORD)v17 == -1)
    {
      *uint64_t v18 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, -1);
      uint64_t v19 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v18 = 1047084118;
      snprintf((char *)(v11 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v11 + 40), *(_DWORD *)(v11 + 2068), v17);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, (void *)(v11 + 4773));
      uint64_t v19 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v49, a3);
    strcpy(&v18[v19], "ui");
    uint64_t v20 = GPUTools::FB::Encode(v53, 613LL, 0LL, v11 + 4709, &v49);
    char v21 = byte_2070BD;
    if ((byte_2070BD & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)&stru_248.segname[13], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
    if (!(v22 & 0x10 | v21 & 4))
    {
      uint64_t v23 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5872LL))(a1, v17, a3);
      uint64_t v22 = mach_absolute_time();
      uint64_t v24 = v22 - v23;
      unint64_t v25 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v26 = v53[0];
        *((void *)v53[0] + 2) = v23;
        v26[3] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
        unsigned int v48 = v53[0];
        *((void *)v53[0] + 3) = v47;
        uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
        v48[2] = v22;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v22 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5872LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5872LL))(a1, v17, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v25 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        id v27 = __ldaxr(v12);
      while (__stlxr(v27 - 1, v12));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 5872LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = wrapper_map_uniform_loc((ContextInfo *)v11, (volatile int *)*(unsigned int *)(v11 + 2068), a2);
  uint64_t v18 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 5872LL))(a1, v17, a3);
  uint64_t v19 = mach_absolute_time();
  uint64_t v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v18;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      unsigned int v29 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v11);
      }
    }
  }

  do
  {
    char v21 = __ldaxr(v12);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_689BC( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform2ui(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 5880LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    *(_BYTE *)(v13 + 4709) = 67;
    uint64_t v20 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v19 == -1)
    {
      *uint64_t v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v20 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    strcpy(&v20[v21], "uiui");
    uint64_t v22 = GPUTools::FB::Encode(v55, 619LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_2070C3;
    if ((byte_2070C3 & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_248.addr + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 5880LL))( a1,  v19,  a3,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        __int128 v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  _BYTE *v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  char *v51;
  __int128 v52;
  __int128 v53;
  __int128 v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 5880LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    *(_BYTE *)(v13 + 4709) = 67;
    uint64_t v20 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v19 == -1)
    {
      *uint64_t v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v20 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    strcpy(&v20[v21], "uiui");
    uint64_t v22 = GPUTools::FB::Encode(v55, 619LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_2070C3;
    if ((byte_2070C3 & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_248.addr + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 5880LL))( a1,  v19,  a3,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        __int128 v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 5880LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v23 = __ldaxr(v14);
      while (__stlxr(v23 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 5880LL))( a1,  v19,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v13);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v14);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        id v29 = __ldaxr(v14);
      while (__stlxr(v29 - 1, v14));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 5880LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
  uint64_t v20 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 5880LL))( a1,  v19,  a3,  a4);
  uint64_t v21 = mach_absolute_time();
  uint64_t v22 = vdupq_n_s64(1uLL);
  v22.i64[0] = v21 - v20;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unsigned int v31 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v13);
      }
    }
  }

  do
  {
    char v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_68EE0( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform3ui(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5888LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    *(_BYTE *)(v15 + 4709) = 67;
    uint64_t v22 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v22 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    strcpy(&v22[v23], "uiuiui");
    uint64_t v24 = GPUTools::FB::Encode(v57, 625LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_2070C9;
    if ((byte_2070C9 & 1) != 0) {
      breakpoint_break( (uint64_t)v57,  (volatile int *)((char *)&stru_248.size + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5888LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  _BYTE *v22;
  uint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  char *v53;
  __int128 v54;
  __int128 v55;
  __int128 v56;
  void *v57[2];
  int v58;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5888LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    *(_BYTE *)(v15 + 4709) = 67;
    uint64_t v22 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v22 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    strcpy(&v22[v23], "uiuiui");
    uint64_t v24 = GPUTools::FB::Encode(v57, 625LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_2070C9;
    if ((byte_2070C9 & 1) != 0) {
      breakpoint_break( (uint64_t)v57,  (volatile int *)((char *)&stru_248.size + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5888LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5888LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v25 = __ldaxr(v16);
      while (__stlxr(v25 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5888LL))( a1,  v21,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v15);
      }
    }
  }

  do
  {
    uint64_t v22 = __ldaxr(v16);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v16));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  int64x2_t v24;
  unsigned int v25;
  signed int v26;
  BOOL v27;
  unsigned int v28;
  uint64_t v29;
  id v30;
  unsigned int v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v30 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v29 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v30 = [(id)DYGetGLGuestAppClient(v29) waitOnGraphicsSemaphoreAssertions];
    if ((int)v30 >= 1)
    {
      do
LABEL_34:
        id v31 = __ldaxr(v16);
      while (__stlxr(v31 - 1, v16));
      uint64_t v32 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v30) graphicsLockWaitQueue];
      dispatch_sync_f(v32, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 5888LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v30) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
  uint64_t v22 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 5888LL))( a1,  v21,  a3,  a4,  a5);
  uint64_t v23 = mach_absolute_time();
  uint64_t v24 = vdupq_n_s64(1uLL);
  v24.i64[0] = v23 - v22;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v24, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unsigned int v33 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v33) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v33, v15);
      }
    }
  }

  do
  {
    char v25 = __ldaxr(v16);
    uint64_t v26 = v25 - 1;
  }

  while (__stlxr(v26, v16));
  if (gCheckGLErrors) {
    uint64_t v27 = v26 < 1;
  }
  else {
    uint64_t v27 = 1;
  }
  if (!v27) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_69440( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform4ui(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, unsigned int a6)
{
  uint64_t v11 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v11) {
    goto LABEL_12;
  }
  uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v13 = v11[4];
    BOOL v14 = v13 >= (unint64_t)a1;
    else {
      uint64_t v15 = v11 + 1;
    }
    if (v14) {
      uint64_t v12 = (uint64_t)v11;
    }
    uint64_t v11 = (void *)*v15;
  }

  while (*v15);
  if (v12 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v12 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v16 = *(void *)(v12 + 40);
  unsigned int v17 = (unsigned int *)(v16 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v16);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_59:
        unsigned int v48 = __ldaxr(v17);
      while (__stlxr(v48 - 1, v17));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 24)
                                                                                            + 5896LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v16 + 4838) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v16, (volatile int *)*(unsigned int *)(v16 + 2068), a2);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v16);
    *(_BYTE *)(v16 + 4709) = 67;
    uint64_t v23 = (_BYTE *)(v16 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v16 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v16 + 40), *(_DWORD *)(v16 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v16 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    strcpy(&v23[v24], "uiuiuiui");
    uint64_t v25 = GPUTools::FB::Encode(v59, 631LL, 0LL, v16 + 4709, &v55);
    char v26 = byte_2070CF;
    if ((byte_2070CF & 1) != 0) {
      breakpoint_break( (uint64_t)v59,  (volatile int *)((char *)&stru_248.size + 7),  1LL,  *(unsigned int *)(v16 + 3404),  v16);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 32)
                                                                                            + 5896LL))( a1,  v22,  a3,  a4,  a5,  a6);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v59[0];
        *((void *)v59[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        __int128 v53 = v59[0];
        *((void *)v59[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v16);
    }

{
  void *v11;
  uint64_t v12;
  unint64_t v13;
  BOOL v14;
  void *v15;
  uint64_t v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  char *v55;
  __int128 v56;
  __int128 v57;
  __int128 v58;
  void *v59[2];
  int v60;
  uint64_t v11 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v11) {
    goto LABEL_12;
  }
  uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v13 = v11[4];
    BOOL v14 = v13 >= (unint64_t)a1;
    else {
      uint64_t v15 = v11 + 1;
    }
    if (v14) {
      uint64_t v12 = (uint64_t)v11;
    }
    uint64_t v11 = (void *)*v15;
  }

  while (*v15);
  if (v12 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v12 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v16 = *(void *)(v12 + 40);
  unsigned int v17 = (unsigned int *)(v16 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v16);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_59:
        unsigned int v48 = __ldaxr(v17);
      while (__stlxr(v48 - 1, v17));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 24)
                                                                                            + 5896LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v16 + 4838) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v16, (volatile int *)*(unsigned int *)(v16 + 2068), a2);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v16);
    *(_BYTE *)(v16 + 4709) = 67;
    uint64_t v23 = (_BYTE *)(v16 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v16 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v16 + 40), *(_DWORD *)(v16 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v16 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    strcpy(&v23[v24], "uiuiuiui");
    uint64_t v25 = GPUTools::FB::Encode(v59, 631LL, 0LL, v16 + 4709, &v55);
    char v26 = byte_2070CF;
    if ((byte_2070CF & 1) != 0) {
      breakpoint_break( (uint64_t)v59,  (volatile int *)((char *)&stru_248.size + 7),  1LL,  *(unsigned int *)(v16 + 3404),  v16);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 32)
                                                                                            + 5896LL))( a1,  v22,  a3,  a4,  a5,  a6);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v59[0];
        *((void *)v59[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        __int128 v53 = v59[0];
        *((void *)v59[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v16);
    }

void sub_699B4( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform1uiv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, unsigned int *a4)
{
  uint64_t v7 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v7) {
    goto LABEL_12;
  }
  uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v9 = v7[4];
    BOOL v10 = v9 >= (unint64_t)a1;
    else {
      uint64_t v11 = v7 + 1;
    }
    if (v10) {
      uint64_t v8 = (uint64_t)v7;
    }
    uint64_t v7 = (void *)*v11;
  }

  while (*v11);
  if (v8 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v8 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v12 = *(void *)(v8 + 40);
  unint64_t v13 = (_BYTE *)(v12 + 4709);
  BOOL v14 = (unsigned int *)(v12 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v12);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_62:
        unsigned int v51 = __ldaxr(v14);
      while (__stlxr(v51 - 1, v14));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 24) + 5904LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v12 + 4838) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  int v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v12, (volatile int *)*(unsigned int *)(v12 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v12);
    *unint64_t v13 = 67;
    BOOL v20 = (_BYTE *)(v12 + 4710);
    if ((_DWORD)v19 == -1)
    {
      *BOOL v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)BOOL v20 = 1047084118;
      snprintf((char *)(v12 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v12 + 40), *(_DWORD *)(v12 + 2068), v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v12 + 4773));
      uint64_t v21 = 4LL;
    }

    uint64_t v22 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    uint64_t v23 = &v20[v21];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(4LL * (int)a3) < 0x41)
    {
      int v27 = snprintf(v23 + 1, v13 - v24 + 64, "@%dui", a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
      uint64_t v26 = v27;
    }

    else
    {
      uint64_t v25 = DYGetGLGuestAppClient(v22);
      GPUTools::Interpose::DYSavePointer(v25, 4LL * (int)a3, a4, v12 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v12 + 4644));
      *(_DWORD *)(v23 + 1) = 1769290837;
      v23[5] = 62;
      uint64_t v26 = 5LL;
    }

    v24[v26] = 0;
    uint64_t v28 = GPUTools::FB::Encode(v62, 614LL, 0LL, v12 + 4709, &v58);
    char v29 = byte_2070BE;
    if ((byte_2070BE & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_248.segname[14], 1LL, *(unsigned int *)(v12 + 3404), v12);
    }
    uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
    if (!(v30 & 0x10 | v29 & 4))
    {
      uint64_t v31 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 32) + 5904LL))( a1,  v19,  a3,  a4);
      uint64_t v30 = mach_absolute_time();
      uint64_t v32 = v30 - v31;
      unint64_t v33 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v34 = v62[0];
        *((void *)v62[0] + 2) = v31;
        v34[3] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
        __int128 v56 = v62[0];
        *((void *)v62[0] + 3) = v55;
        uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
        v56[2] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v30 = check_errors(v12);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  uint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  unint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v10 = v8[4];
    uint64_t v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      unint64_t v9 = (uint64_t)v8;
    }
    uint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  unint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  unsigned int v15 = (unsigned int *)(v13 + 4640);
  do
  {
    signed int v16 = __ldaxr(v15);
    BOOL v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    id v18 = v17 <= 1;
  }
  else {
    id v18 = 1;
  }
  if (v18)
  {
    uint64_t v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v48 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        id v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      unsigned int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5904LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (uint64_t v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    BOOL v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    *BOOL v14 = 67;
    uint64_t v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *uint64_t v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(4LL * (int)a3) < 0x41)
    {
      uint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%dui", a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      uint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    int v27 = GPUTools::FB::Encode(v60, 614LL, 0LL, v13 + 4709, &v56);
    uint64_t v28 = byte_2070BE;
    if ((byte_2070BE & 1) != 0) {
      breakpoint_break((uint64_t)v60, (volatile int *)&stru_248.segname[14], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    char v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 32) + 5904LL))( a1,  v20,  a3,  a4);
      char v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        char v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      char v29 = check_errors(v13);
    }

void sub_69F78( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform2uiv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, unsigned int *a4)
{
  uint64_t v7 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v7) {
    goto LABEL_12;
  }
  uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v9 = v7[4];
    BOOL v10 = v9 >= (unint64_t)a1;
    else {
      uint64_t v11 = v7 + 1;
    }
    if (v10) {
      uint64_t v8 = (uint64_t)v7;
    }
    uint64_t v7 = (void *)*v11;
  }

  while (*v11);
  if (v8 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v8 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v12 = *(void *)(v8 + 40);
  unint64_t v13 = (_BYTE *)(v12 + 4709);
  BOOL v14 = (unsigned int *)(v12 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v12);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        unsigned int v52 = __ldaxr(v14);
      while (__stlxr(v52 - 1, v14));
      uint64_t v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 24) + 5912LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v12 + 4838) = 1;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v12, (volatile int *)*(unsigned int *)(v12 + 2068), a2);
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, *(void **)v12);
    *unint64_t v13 = 67;
    BOOL v20 = (_BYTE *)(v12 + 4710);
    if ((_DWORD)v19 == -1)
    {
      *BOOL v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)BOOL v20 = 1047084118;
      snprintf((char *)(v12 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v12 + 40), *(_DWORD *)(v12 + 2068), v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v12 + 4773));
      uint64_t v21 = 4LL;
    }

    uint64_t v22 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a3);
    uint64_t v23 = &v20[v21];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    unint64_t v25 = 8LL * (_DWORD)a3;
    if (v25 < 0x41)
    {
      int v28 = snprintf(v23 + 1, v13 - v24 + 64, "@%dui", 2 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a4);
      uint64_t v27 = v28;
    }

    else
    {
      uint64_t v26 = DYGetGLGuestAppClient(v22);
      GPUTools::Interpose::DYSavePointer(v26, v25, a4, v12 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v12 + 4644));
      *(_DWORD *)(v23 + 1) = 1769290837;
      v23[5] = 62;
      uint64_t v27 = 5LL;
    }

    v24[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v63, 620LL, 0LL, v12 + 4709, &v59);
    char v30 = byte_2070C4;
    if ((byte_2070C4 & 1) != 0) {
      breakpoint_break((uint64_t)v63, (_DWORD *)&stru_248.addr + 1, 1LL, *(unsigned int *)(v12 + 3404), v12);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 32) + 5912LL))( a1,  v19,  a3,  a4);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      unint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v35 = v63[0];
        *((void *)v63[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        __int128 v57 = v63[0];
        *((void *)v63[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v12);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  uint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  unint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v10 = v8[4];
    uint64_t v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      unint64_t v9 = (uint64_t)v8;
    }
    uint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  unint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  unsigned int v15 = (unsigned int *)(v13 + 4640);
  do
  {
    signed int v16 = __ldaxr(v15);
    BOOL v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    id v18 = v17 <= 1;
  }
  else {
    id v18 = 1;
  }
  if (v18)
  {
    unsigned int v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v48 = handle_opengl_thread_conflict((const void **)v13);
    unsigned int v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        uint64_t v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      id v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5912LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (uint64_t v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    BOOL v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    *BOOL v14 = 67;
    uint64_t v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *uint64_t v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(8LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%dui", 2 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      unint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      unint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 620LL, 0LL, v13 + 4709, &v56);
    int v28 = byte_2070C4;
    if ((byte_2070C4 & 1) != 0) {
      breakpoint_break((uint64_t)v60, (_DWORD *)&stru_248.addr + 1, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      char v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 32) + 5912LL))( a1,  v20,  a3,  a4);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v13);
    }

void sub_6A540( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform3uiv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, unsigned int *a4)
{
  uint64_t v7 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v7) {
    goto LABEL_12;
  }
  uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v9 = v7[4];
    BOOL v10 = v9 >= (unint64_t)a1;
    else {
      uint64_t v11 = v7 + 1;
    }
    if (v10) {
      uint64_t v8 = (uint64_t)v7;
    }
    uint64_t v7 = (void *)*v11;
  }

  while (*v11);
  if (v8 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v8 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v12 = *(void *)(v8 + 40);
  unint64_t v13 = (_BYTE *)(v12 + 4709);
  BOOL v14 = (unsigned int *)(v12 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v12);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        unsigned int v52 = __ldaxr(v14);
      while (__stlxr(v52 - 1, v14));
      uint64_t v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 24) + 5920LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v12 + 4838) = 1;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v12, (volatile int *)*(unsigned int *)(v12 + 2068), a2);
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, *(void **)v12);
    *unint64_t v13 = 67;
    BOOL v20 = (_BYTE *)(v12 + 4710);
    if ((_DWORD)v19 == -1)
    {
      *BOOL v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)BOOL v20 = 1047084118;
      snprintf((char *)(v12 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v12 + 40), *(_DWORD *)(v12 + 2068), v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v12 + 4773));
      uint64_t v21 = 4LL;
    }

    uint64_t v22 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a3);
    uint64_t v23 = &v20[v21];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    unint64_t v25 = 12LL * (_DWORD)a3;
    if (v25 < 0x41)
    {
      int v28 = snprintf(v23 + 1, v13 - v24 + 64, "@%dui", 3 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a4);
      uint64_t v27 = v28;
    }

    else
    {
      uint64_t v26 = DYGetGLGuestAppClient(v22);
      GPUTools::Interpose::DYSavePointer(v26, v25, a4, v12 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v12 + 4644));
      *(_DWORD *)(v23 + 1) = 1769290837;
      v23[5] = 62;
      uint64_t v27 = 5LL;
    }

    v24[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v63, 626LL, 0LL, v12 + 4709, &v59);
    char v30 = byte_2070CA;
    if ((byte_2070CA & 1) != 0) {
      breakpoint_break( (uint64_t)v63,  (volatile int *)((char *)&stru_248.size + 2),  1LL,  *(unsigned int *)(v12 + 3404),  v12);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 32) + 5920LL))( a1,  v19,  a3,  a4);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      unint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v35 = v63[0];
        *((void *)v63[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        __int128 v57 = v63[0];
        *((void *)v63[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v12);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  uint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  unint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v10 = v8[4];
    uint64_t v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      unint64_t v9 = (uint64_t)v8;
    }
    uint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  unint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  unsigned int v15 = (unsigned int *)(v13 + 4640);
  do
  {
    signed int v16 = __ldaxr(v15);
    BOOL v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    id v18 = v17 <= 1;
  }
  else {
    id v18 = 1;
  }
  if (v18)
  {
    unsigned int v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v48 = handle_opengl_thread_conflict((const void **)v13);
    unsigned int v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        uint64_t v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      id v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5920LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (uint64_t v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    BOOL v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    *BOOL v14 = 67;
    uint64_t v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *uint64_t v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(12LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%dui", 3 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      unint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      unint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 626LL, 0LL, v13 + 4709, &v56);
    int v28 = byte_2070CA;
    if ((byte_2070CA & 1) != 0) {
      breakpoint_break( (uint64_t)v60,  (volatile int *)((char *)&stru_248.size + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      char v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 32) + 5920LL))( a1,  v20,  a3,  a4);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v13);
    }

void sub_6AB08( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform4uiv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, unsigned int *a4)
{
  uint64_t v7 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v7) {
    goto LABEL_12;
  }
  uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v9 = v7[4];
    BOOL v10 = v9 >= (unint64_t)a1;
    else {
      uint64_t v11 = v7 + 1;
    }
    if (v10) {
      uint64_t v8 = (uint64_t)v7;
    }
    uint64_t v7 = (void *)*v11;
  }

  while (*v11);
  if (v8 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v8 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v8 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v12 = *(void *)(v8 + 40);
  unint64_t v13 = (_BYTE *)(v12 + 4709);
  BOOL v14 = (unsigned int *)(v12 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v12);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        unsigned int v52 = __ldaxr(v14);
      while (__stlxr(v52 - 1, v14));
      uint64_t v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 24) + 5928LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v12 + 4838) = 1;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v12, (volatile int *)*(unsigned int *)(v12 + 2068), a2);
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, *(void **)v12);
    *unint64_t v13 = 67;
    BOOL v20 = (_BYTE *)(v12 + 4710);
    if ((_DWORD)v19 == -1)
    {
      *BOOL v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)BOOL v20 = 1047084118;
      snprintf((char *)(v12 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v12 + 40), *(_DWORD *)(v12 + 2068), v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v12 + 4773));
      uint64_t v21 = 4LL;
    }

    uint64_t v22 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a3);
    uint64_t v23 = &v20[v21];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    unint64_t v25 = 16LL * (_DWORD)a3;
    if (v25 < 0x41)
    {
      int v28 = snprintf(v23 + 1, v13 - v24 + 64, "@%dui", 4 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, a4);
      uint64_t v27 = v28;
    }

    else
    {
      uint64_t v26 = DYGetGLGuestAppClient(v22);
      GPUTools::Interpose::DYSavePointer(v26, v25, a4, v12 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v59, (void *)(v12 + 4644));
      *(_DWORD *)(v23 + 1) = 1769290837;
      v23[5] = 62;
      uint64_t v27 = 5LL;
    }

    v24[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v63, 632LL, 0LL, v12 + 4709, &v59);
    char v30 = byte_2070D0;
    if ((byte_2070D0 & 1) != 0) {
      breakpoint_break((uint64_t)v63, (volatile int *)&stru_248.offset, 1LL, *(unsigned int *)(v12 + 3404), v12);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v12 + 32) + 5928LL))( a1,  v19,  a3,  a4);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      unint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v35 = v63[0];
        *((void *)v63[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        __int128 v57 = v63[0];
        *((void *)v63[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v12);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  _BYTE *v14;
  unsigned int *v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  id v19;
  uint64_t v20;
  _BYTE *v21;
  uint64_t v22;
  _BYTE *v23;
  char *v24;
  uint64_t v25;
  int v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  char *v56;
  __int128 v57;
  __int128 v58;
  __int128 v59;
  void *v60[2];
  int v61;
  uint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  unint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v10 = v8[4];
    uint64_t v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      unint64_t v9 = (uint64_t)v8;
    }
    uint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  unint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (_BYTE *)(v13 + 4709);
  unsigned int v15 = (unsigned int *)(v13 + 4640);
  do
  {
    signed int v16 = __ldaxr(v15);
    BOOL v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    id v18 = v17 <= 1;
  }
  else {
    id v18 = 1;
  }
  if (v18)
  {
    unsigned int v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v48 = handle_opengl_thread_conflict((const void **)v13);
    unsigned int v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_62:
        uint64_t v50 = __ldaxr(v15);
      while (__stlxr(v50 - 1, v15));
      id v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5928LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v60[0] = 0LL;
  v60[1] = 0LL;
  __int128 v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (uint64_t v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    BOOL v20 = wrapper_map_uniform_loc((ContextInfo *)v13, (volatile int *)*(unsigned int *)(v13 + 2068), a2);
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, *(void **)v13);
    *BOOL v14 = 67;
    uint64_t v21 = (_BYTE *)(v13 + 4710);
    if ((_DWORD)v20 == -1)
    {
      *uint64_t v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v21 = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), *(_DWORD *)(v13 + 2068), v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a3);
    uint64_t v23 = &v21[v22];
    *uint64_t v23 = 105;
    uint64_t v24 = v23 + 1;
    if ((unint64_t)(16LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v26 = snprintf(v24, v14 - v24 + 64, "@%dui", 4 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      unint64_t v25 = v26;
    }

    else
    {
      *uint64_t v24 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v56, a4);
      unint64_t v25 = 1LL;
    }

    v24[v25] = 0;
    uint64_t v27 = GPUTools::FB::Encode(v60, 632LL, 0LL, v13 + 4709, &v56);
    int v28 = byte_2070D0;
    if ((byte_2070D0 & 1) != 0) {
      breakpoint_break((uint64_t)v60, (volatile int *)&stru_248.offset, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      char v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 32) + 5928LL))( a1,  v20,  a3,  a4);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      uint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v60[0];
        *((void *)v60[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        uint64_t v55 = v60[0];
        *((void *)v60[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v13);
    }

void sub_6B0D0( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void get_uniformuiv(__GLIContextRec *a1, volatile int *a2, uint64_t a3, unsigned int *a4)
{
  uint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    uint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_57:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      unsigned int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5936LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v56 = 0LL;
  __int128 v57 = 0LL;
  unsigned int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    uint64_t v21 = (char *)v56;
    BOOL v20 = v57;
    int64_t v22 = v57 - (_BYTE *)v56;
    unsigned int v23 = v58;
    unint64_t v24 = v58 - (v57 - (_BYTE *)v56);
    if (v24 > 0x43) {
      goto LABEL_24;
    }
    int v50 = (323 - v24) & 0xFFFFFF00;
    v58 += v50;
    uint64_t v21 = (char *)malloc(v50 + v23);
    uint64_t v56 = v21;
    if (v21)
    {
      if ((v21 & 3) == 0)
      {
        BOOL v20 = &v21[v22];
LABEL_24:
        *((_DWORD *)v20 + 16) = 0;
        *((_OWORD *)v20 + 2) = 0u;
        *((_OWORD *)v20 + 3) = 0u;
        *(_OWORD *)BOOL v20 = 0u;
        *((_OWORD *)v20 + 1) = 0u;
        __int128 v57 = v20 + 68;
        GPUTools::FB::Fbuf::align((char **)&v56);
        *((_DWORD *)v21 + 1) = 302;
        *((_DWORD *)v21 + 8) = 256;
        __uint64_t v55 = 0LL;
        uint64_t v25 = pthread_threadid_np(0LL, &v55);
        *((void *)v21 + 1) = v55;
        strcpy(v21 + 36, "Cuiip");
        *(void *)(v21 + 44) = *(void *)v13;
        *((_DWORD *)v21 + 13) = (_DWORD)a2;
        *((_DWORD *)v21 + 14) = v19;
        *(void *)(v21 + 60) = a4;
        char v26 = byte_206F86;
        if ((byte_206F86 & 1) != 0) {
          breakpoint_break( (uint64_t)&v56,  (volatile int *)((char *)&stru_108.addr + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
        if (!(v27 & 0x10 | v26 & 4))
        {
          uint64_t v28 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, unsigned int *))(*(void *)(v13 + 32)
                                                                                             + 5936LL))( a1,  a2,  v19,  a4);
          uint64_t v27 = mach_absolute_time();
          uint64_t v29 = v27 - v28;
          unint64_t v30 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v31 = v56;
            *((void *)v56 + 2) = v28;
            v31[3] = v29;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v53 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
            uint64_t v54 = v56;
            *((void *)v56 + 3) = v53;
            uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
            v54[2] = v27;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v27 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  char *v20;
  char *v21;
  int64_t v22;
  unsigned int v23;
  unint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  int v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  __uint64_t v55;
  void *v56;
  char *v57;
  unsigned int v58;
  uint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    uint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_57:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      unsigned int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5936LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v56 = 0LL;
  __int128 v57 = 0LL;
  unsigned int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    uint64_t v21 = (char *)v56;
    BOOL v20 = v57;
    int64_t v22 = v57 - (_BYTE *)v56;
    unsigned int v23 = v58;
    unint64_t v24 = v58 - (v57 - (_BYTE *)v56);
    if (v24 > 0x43) {
      goto LABEL_24;
    }
    int v50 = (323 - v24) & 0xFFFFFF00;
    v58 += v50;
    uint64_t v21 = (char *)malloc(v50 + v23);
    uint64_t v56 = v21;
    if (v21)
    {
      if ((v21 & 3) == 0)
      {
        BOOL v20 = &v21[v22];
LABEL_24:
        *((_DWORD *)v20 + 16) = 0;
        *((_OWORD *)v20 + 2) = 0u;
        *((_OWORD *)v20 + 3) = 0u;
        *(_OWORD *)BOOL v20 = 0u;
        *((_OWORD *)v20 + 1) = 0u;
        __int128 v57 = v20 + 68;
        GPUTools::FB::Fbuf::align((char **)&v56);
        *((_DWORD *)v21 + 1) = 302;
        *((_DWORD *)v21 + 8) = 256;
        __uint64_t v55 = 0LL;
        uint64_t v25 = pthread_threadid_np(0LL, &v55);
        *((void *)v21 + 1) = v55;
        strcpy(v21 + 36, "Cuiip");
        *(void *)(v21 + 44) = *(void *)v13;
        *((_DWORD *)v21 + 13) = (_DWORD)a2;
        *((_DWORD *)v21 + 14) = v19;
        *(void *)(v21 + 60) = a4;
        char v26 = byte_206F86;
        if ((byte_206F86 & 1) != 0) {
          breakpoint_break( (uint64_t)&v56,  (volatile int *)((char *)&stru_108.addr + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
        if (!(v27 & 0x10 | v26 & 4))
        {
          uint64_t v28 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, unsigned int *))(*(void *)(v13 + 32)
                                                                                             + 5936LL))( a1,  a2,  v19,  a4);
          uint64_t v27 = mach_absolute_time();
          uint64_t v29 = v27 - v28;
          unint64_t v30 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v31 = v56;
            *((void *)v56 + 2) = v28;
            v31[3] = v29;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v53 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
            uint64_t v54 = v56;
            *((void *)v56 + 3) = v53;
            uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
            v54[2] = v27;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v27 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  uint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    uint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v24 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        char v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5936LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        unsigned int v23 = __ldaxr(v14);
      while (__stlxr(v23 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, unsigned int *))(*(void *)(v13 + 32) + 5936LL))( a1,  a2,  v19,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v13);
      }
    }
  }

  do
  {
    BOOL v20 = __ldaxr(v14);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    int64_t v22 = v21 < 1;
  }
  else {
    int64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  uint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    uint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  BOOL v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v27 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        uint64_t v29 = __ldaxr(v14);
      while (__stlxr(v29 - 1, v14));
      unint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, unsigned int *))(*(void *)(v13 + 24) + 5936LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
  BOOL v20 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, unsigned int *))(*(void *)(v13 + 32) + 5936LL))( a1,  a2,  v19,  a4);
  uint64_t v21 = mach_absolute_time();
  int64_t v22 = vdupq_n_s64(1uLL);
  v22.i64[0] = v21 - v20;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v13);
      }
    }
  }

  do
  {
    unsigned int v23 = __ldaxr(v14);
    unint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_6B5F8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t get_frag_data_location(__GLIContextRec *a1, uint64_t a2, const char *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_56:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 5952LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v57, 239LL, 0LL, (uint64_t)"CuiS", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_206F47;
    if ((byte_206F47 & 1) != 0) {
      breakpoint_break( (uint64_t)v57,  (volatile int *)((char *)&stru_B8.align + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if ([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4)
    {
      uint64_t v29 = 0xFFFFFFFFLL;
      goto LABEL_28;
    }

    uint64_t v28 = mach_absolute_time();
    uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 32) + 5952LL))( a1,  a2,  a3);
    uint64_t v30 = mach_absolute_time() - v28;
    unint64_t v31 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      id v32 = v57[0];
      *((void *)v57[0] + 2) = v28;
      v32[3] = v30;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
      uint64_t v56 = v57[0];
      *((void *)v57[0] + 3) = v55;
      v56[2] = __udivti3(v31 * v28, (v31 * (unsigned __int128)v28) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v11);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v57, 4294955008LL, (uint64_t)"i", v23, v24, v25, v26, v27, v29);
    id v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      id v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v57, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v37) {
      id v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v57, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v57);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v57);
    uint64_t v39 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v22 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 239LL;
    }

    breakpoint_break((uint64_t)v57, (volatile int *)v54, v53, v39, v11);
LABEL_37:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    unsigned int v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          unsigned int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v57, *(unsigned int *)v57[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v12);
      signed int v45 = v44 - 1;
    }

    while (__stlxr(v45, v12));
    if (gCheckGLErrors) {
      BOOL v46 = v45 < 1;
    }
    else {
      BOOL v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_50;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 5952LL))( a1,  a2,  a3);
LABEL_50:
  if (v57[0]) {
    free(v57[0]);
  }
  return v29;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  void *v57[2];
  int v58;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_56:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 5952LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v57, 239LL, 0LL, (uint64_t)"CuiS", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_206F47;
    if ((byte_206F47 & 1) != 0) {
      breakpoint_break( (uint64_t)v57,  (volatile int *)((char *)&stru_B8.align + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if ([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4)
    {
      uint64_t v29 = 0xFFFFFFFFLL;
      goto LABEL_28;
    }

    uint64_t v28 = mach_absolute_time();
    uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 32) + 5952LL))( a1,  a2,  a3);
    uint64_t v30 = mach_absolute_time() - v28;
    unint64_t v31 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      id v32 = v57[0];
      *((void *)v57[0] + 2) = v28;
      v32[3] = v30;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
      uint64_t v56 = v57[0];
      *((void *)v57[0] + 3) = v55;
      v56[2] = __udivti3(v31 * v28, (v31 * (unsigned __int128)v28) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v11);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v57, 4294955008LL, (uint64_t)"i", v23, v24, v25, v26, v27, v29);
    id v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      id v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v57, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v37) {
      id v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v57, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v57);
    }
    unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v57);
    uint64_t v39 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v22 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 239LL;
    }

    breakpoint_break((uint64_t)v57, (volatile int *)v54, v53, v39, v11);
LABEL_37:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    unsigned int v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          unsigned int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v57, *(unsigned int *)v57[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v12);
      signed int v45 = v44 - 1;
    }

    while (__stlxr(v45, v12));
    if (gCheckGLErrors) {
      BOOL v46 = v45 < 1;
    }
    else {
      BOOL v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_50;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 5952LL))( a1,  a2,  a3);
LABEL_50:
  if (v57[0]) {
    free(v57[0]);
  }
  return v29;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v22 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_35:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 5952LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 5952LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 32) + 5952LL))( a1,  a2,  a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    id v20 = v19 < 1;
  }
  else {
    id v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v17;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v12);
      while (__stlxr(v28 - 1, v12));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 5952LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v25 = __ldaxr(v12);
      while (__stlxr(v25 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 5952LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = mach_absolute_time();
  uint64_t v18 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 32) + 5952LL))( a1,  a2,  a3);
  uint64_t v19 = mach_absolute_time();
  id v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v11);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v12);
    char v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v18;
}

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  id v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v22;
  dispatch_queue_s *v23;
  unsigned int v24;
  BOOL v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  uint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  uint64_t v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      char v22 = __ldaxr(v12);
    while (__stlxr(v22 - 1, v12));
    uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 5952LL))( v5,  a2,  a3);
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v16) state] == (char *)&dword_0 + 1)
  {
    uint64_t v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v17 & 1) != 0)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, const char *))(*(void *)(v11 + 24) + 5952LL))( v5,  a2,  a3);
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    id v20 = v19 < 1;
  }
  else {
    id v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return 0LL;
}

void sub_6BA4C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void uniform_matrix2x3fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, float *a5)
{
  BOOL v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      unsigned int v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    BOOL v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  BOOL v15 = (_BYTE *)(v14 + 4709);
  uint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 5992LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 4838) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, (volatile int *)*(unsigned int *)(v14 + 2068), a2);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    _BYTE *v15 = 67;
    char v22 = (_BYTE *)(v14 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *char v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)char v22 = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), *(_DWORD *)(v14 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a3);
    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v22[v23 + 3];
    unint64_t v27 = 24LL * (_DWORD)a3;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 6 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 635LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2070D3;
    if ((byte_2070D3 & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (volatile int *)((char *)&stru_248.offset + 3),  1LL,  *(unsigned int *)(v14 + 3404),  v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 32) + 5992LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  _BYTE *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    unsigned int v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  BOOL v15 = *(void *)(v11 + 40);
  uint64_t v16 = (_BYTE *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 5992LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    char v22 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    unsigned int *v16 = 67;
    uint64_t v23 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v23[v24 + 3];
    if ((unint64_t)(24LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 6 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 635LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2070D3;
    if ((byte_2070D3 & 1) != 0) {
      breakpoint_break( (uint64_t)v62,  (volatile int *)((char *)&stru_248.offset + 3),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 32) + 5992LL))( a1,  v22,  a3,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_6C028( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform_matrix3x2fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, float *a5)
{
  BOOL v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      unsigned int v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    BOOL v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  BOOL v15 = (_BYTE *)(v14 + 4709);
  uint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6000LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 4838) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, (volatile int *)*(unsigned int *)(v14 + 2068), a2);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    _BYTE *v15 = 67;
    char v22 = (_BYTE *)(v14 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *char v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)char v22 = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), *(_DWORD *)(v14 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a3);
    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v22[v23 + 3];
    unint64_t v27 = 24LL * (_DWORD)a3;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 6 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 638LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2070D6;
    if ((byte_2070D6 & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (volatile int *)((char *)&stru_248.align + 2),  1LL,  *(unsigned int *)(v14 + 3404),  v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 32) + 6000LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  _BYTE *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    unsigned int v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  BOOL v15 = *(void *)(v11 + 40);
  uint64_t v16 = (_BYTE *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6000LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    char v22 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    unsigned int *v16 = 67;
    uint64_t v23 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v23[v24 + 3];
    if ((unint64_t)(24LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 6 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 638LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2070D6;
    if ((byte_2070D6 & 1) != 0) {
      breakpoint_break( (uint64_t)v62,  (volatile int *)((char *)&stru_248.align + 2),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 32) + 6000LL))( a1,  v22,  a3,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_6C610( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform_matrix2x4fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, float *a5)
{
  BOOL v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      unsigned int v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    BOOL v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  BOOL v15 = (_BYTE *)(v14 + 4709);
  uint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6008LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 4838) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, (volatile int *)*(unsigned int *)(v14 + 2068), a2);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    _BYTE *v15 = 67;
    char v22 = (_BYTE *)(v14 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *char v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)char v22 = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), *(_DWORD *)(v14 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a3);
    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v22[v23 + 3];
    unint64_t v27 = 32LL * (_DWORD)a3;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 8 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 636LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2070D4;
    if ((byte_2070D4 & 1) != 0) {
      breakpoint_break((uint64_t)v65, (volatile int *)&stru_248.align, 1LL, *(unsigned int *)(v14 + 3404), v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 32) + 6008LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  _BYTE *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    unsigned int v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  BOOL v15 = *(void *)(v11 + 40);
  uint64_t v16 = (_BYTE *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6008LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    char v22 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    unsigned int *v16 = 67;
    uint64_t v23 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v23[v24 + 3];
    if ((unint64_t)(32LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 8 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 636LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2070D4;
    if ((byte_2070D4 & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_248.align, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 32) + 6008LL))( a1,  v22,  a3,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_6CBF4( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform_matrix4x2fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, float *a5)
{
  BOOL v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      unsigned int v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    BOOL v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  BOOL v15 = (_BYTE *)(v14 + 4709);
  uint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6016LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 4838) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, (volatile int *)*(unsigned int *)(v14 + 2068), a2);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    _BYTE *v15 = 67;
    char v22 = (_BYTE *)(v14 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *char v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)char v22 = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), *(_DWORD *)(v14 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a3);
    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v22[v23 + 3];
    unint64_t v27 = 32LL * (_DWORD)a3;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 8 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 641LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2070D9;
    if ((byte_2070D9 & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (volatile int *)((char *)&stru_248.reloff + 1),  1LL,  *(unsigned int *)(v14 + 3404),  v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 32) + 6016LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  _BYTE *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    unsigned int v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  BOOL v15 = *(void *)(v11 + 40);
  uint64_t v16 = (_BYTE *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6016LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    char v22 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    unsigned int *v16 = 67;
    uint64_t v23 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v23[v24 + 3];
    if ((unint64_t)(32LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 8 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 641LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2070D9;
    if ((byte_2070D9 & 1) != 0) {
      breakpoint_break( (uint64_t)v62,  (volatile int *)((char *)&stru_248.reloff + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 32) + 6016LL))( a1,  v22,  a3,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_6D1D8( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform_matrix3x4fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, float *a5)
{
  BOOL v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      unsigned int v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    BOOL v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  BOOL v15 = (_BYTE *)(v14 + 4709);
  uint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6024LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 4838) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, (volatile int *)*(unsigned int *)(v14 + 2068), a2);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    _BYTE *v15 = 67;
    char v22 = (_BYTE *)(v14 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *char v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)char v22 = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), *(_DWORD *)(v14 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a3);
    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v22[v23 + 3];
    unint64_t v27 = 48LL * (_DWORD)a3;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 12 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 639LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2070D7;
    if ((byte_2070D7 & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (volatile int *)((char *)&stru_248.align + 3),  1LL,  *(unsigned int *)(v14 + 3404),  v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 32) + 6024LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  _BYTE *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    unsigned int v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  BOOL v15 = *(void *)(v11 + 40);
  uint64_t v16 = (_BYTE *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6024LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    char v22 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    unsigned int *v16 = 67;
    uint64_t v23 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v23[v24 + 3];
    if ((unint64_t)(48LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 12 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 639LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2070D7;
    if ((byte_2070D7 & 1) != 0) {
      breakpoint_break( (uint64_t)v62,  (volatile int *)((char *)&stru_248.align + 3),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 32) + 6024LL))( a1,  v22,  a3,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_6D7C0( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void uniform_matrix4x3fv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, float *a5)
{
  BOOL v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      unsigned int v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    BOOL v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  BOOL v15 = (_BYTE *)(v14 + 4709);
  uint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 24) + 6032LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 4838) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, (volatile int *)*(unsigned int *)(v14 + 2068), a2);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    _BYTE *v15 = 67;
    char v22 = (_BYTE *)(v14 + 4710);
    if ((_DWORD)v21 == -1)
    {
      *char v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)char v22 = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), *(_DWORD *)(v14 + 2068), v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a3);
    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v22[v23 + 3];
    unint64_t v27 = 48LL * (_DWORD)a3;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 12 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 642LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2070DA;
    if ((byte_2070DA & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (volatile int *)((char *)&stru_248.reloff + 2),  1LL,  *(unsigned int *)(v14 + 3404),  v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v14 + 32) + 6032LL))( a1,  v21,  a3,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  _BYTE *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    unsigned int v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  BOOL v15 = *(void *)(v11 + 40);
  uint64_t v16 = (_BYTE *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 24) + 6032LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    char v22 = wrapper_map_uniform_loc((ContextInfo *)v15, (volatile int *)*(unsigned int *)(v15 + 2068), a2);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    unsigned int *v16 = 67;
    uint64_t v23 = (_BYTE *)(v15 + 4710);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)uint64_t v23 = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), *(_DWORD *)(v15 + 2068), v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a3);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *(_WORD *)uint64_t v25 = 30057;
    v25[2] = 98;
    uint64_t v26 = &v23[v24 + 3];
    if ((unint64_t)(48LL * (_DWORD)a3) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 12 * a3);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 642LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2070DA;
    if ((byte_2070DA & 1) != 0) {
      breakpoint_break( (uint64_t)v62,  (volatile int *)((char *)&stru_248.reloff + 2),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, float *))(*(void *)(v15 + 32) + 6032LL))( a1,  v22,  a3,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_6DDA8( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void blit_framebuffer( __GLIContextRec *a1, uint64_t a2, uint64_t a3, unsigned int a4, unsigned int a5, unsigned int a6, unsigned int a7, unsigned int a8, uint64_t a9, unsigned int a10)
{
  unint64_t v13 = a10;
  uint64_t v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      signed int v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    uint64_t v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  id v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v19);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_58:
        unsigned int v53 = __ldaxr(v20);
      while (__stlxr(v53 - 1, v20));
      unsigned int v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void, void, void, void, void, uint64_t))(*(void *)(v19 + 24) + 6040LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9);
      return;
    }
  }

  *(_WORD *)(v19 + 4838) = 257;
  unsigned int v73 = 0LL;
  uint64_t v74 = 0LL;
  unsigned int v75 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    uint64_t v26 = (uint64_t)v73;
    uint64_t v25 = v74;
    uint64_t v27 = v74 - (void)v73;
    unsigned int v28 = v75;
    unint64_t v29 = v75 - (v74 - (void)v73);
    if (v29 > 0x63) {
      goto LABEL_24;
    }
    int v55 = (355 - v29) & 0xFFFFFF00;
    v75 += v55;
    uint64_t v26 = (uint64_t)malloc(v55 + v28);
    unsigned int v73 = (void *)v26;
    if (v26)
    {
      if ((v26 & 3) == 0)
      {
        uint64_t v25 = v27 + v26;
LABEL_24:
        *(_DWORD *)(v25 + 96) = 0;
        *(_OWORD *)(v25 + 64) = 0u;
        *(_OWORD *)(v25 + 80) = 0u;
        *(_OWORD *)(v25 + 32) = 0u;
        *(_OWORD *)(v25 + 48) = 0u;
        *(_OWORD *)uint64_t v25 = 0u;
        *(_OWORD *)(v25 + 16) = 0u;
        uint64_t v74 = v25 + 100;
        GPUTools::FB::Fbuf::align((char **)&v73);
        *(_DWORD *)(v26 + 4) = 28;
        *(_DWORD *)(v26 + 32) = 0;
        __uint64_t v72 = 0LL;
        uint64_t v30 = pthread_threadid_np(0LL, &v72);
        *(void *)(v26 + 8) = v72;
        strcpy((char *)(v26 + 36), "Ciiiiiiiiuie");
        *(void *)(v26 + 52) = *(void *)v19;
        *(_DWORD *)(v26 + 60) = a2;
        *(_DWORD *)(v26 + 64) = a3;
        *(_DWORD *)(v26 + 68) = a4;
        *(_DWORD *)(v26 + 72) = a5;
        *(_DWORD *)(v26 + 76) = a6;
        *(_DWORD *)(v26 + 80) = a7;
        *(_DWORD *)(v26 + 84) = a8;
        *(void *)(v26 + 88) = a9;
        *(_DWORD *)(v26 + 96) = a10;
        LOBYTE(v27) = byte_206E74;
        if ((byte_206E74 & 1) != 0) {
          breakpoint_break((uint64_t)&v73, &dword_1C, 1LL, *(unsigned int *)(v19 + 3404), v19);
        }
        uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
        if (v31 & 0x10 | v27 & 4) {
          goto LABEL_30;
        }
        id v32 = [(id)DYGetGLGuestAppClient(v31) overrideFlags];
        if (!(_DWORD)v32)
        {
          uint64_t v33 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void, void, void, void, void, uint64_t, unsigned int))(*(void *)(v19 + 32) + 6040LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
          uint64_t v31 = mach_absolute_time();
          uint64_t v34 = v31 - v33;
          unint64_t v35 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v36 = v73;
            *((void *)v73 + 2) = v33;
            v36[3] = v34;
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          else
          {
            uint64_t v63 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
            __int128 v64 = v73;
            *((void *)v73 + 3) = v63;
            uint64_t v31 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
            v64[2] = v31;
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          uint64_t v31 = check_errors(v19);
LABEL_30:
          id v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
          if ((_DWORD)v37) {
            id v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v73, v38);
          }
          unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v19 + 3404);
          if ((_DWORD)v40) {
            id v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v73, v40, v39);
          }
          if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
            encode_driver_events((id *)v19, (uint64_t)&v73);
          }
          unsigned int v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v19 + 3480),  (GPUTools::FB::Fbuf *)(v19 + 3520),  (GPUTools::FB *)&v73);
          uint64_t v42 = *(unsigned int *)(v19 + 3404);
          if ((_DWORD)v42 && gBreakOnError)
          {
            uint64_t v56 = 3LL;
            uint64_t v57 = 0xFFFFFFFFLL;
          }

          else
          {
            if ((v27 & 2) == 0) {
              goto LABEL_39;
            }
            uint64_t v56 = 2LL;
            uint64_t v57 = 28LL;
          }

          breakpoint_break((uint64_t)&v73, (volatile int *)v57, v56, v42, v19);
LABEL_39:
          uint64_t v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
          unsigned int v44 = (unsigned int *)((char *)v43 + 56);
          do
            unsigned int v45 = __ldaxr(v44);
          while (__stlxr(1u, v44));
          if (v45 == 1)
          {
            do
            {
              while (*v44 == 1)
                ;
              do
                unsigned int v46 = __ldaxr(v44);
              while (__stlxr(1u, v44));
            }

            while (v46 == 1);
          }

          GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)&v73, *(unsigned int *)v73, 1);
          atomic_store(0, v44);
          do
          {
            unsigned int v47 = __ldaxr(v20);
            signed int v48 = v47 - 1;
          }

          while (__stlxr(v48, v20));
          if (gCheckGLErrors) {
            BOOL v49 = v48 < 1;
          }
          else {
            BOOL v49 = 1;
          }
          if (!v49) {
            handle_opengl_thread_conflict((const void **)v19);
          }
          goto LABEL_52;
        }

        uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
        if ((v31 & 8) != 0) {
          goto LABEL_30;
        }
        uint64_t v58 = (volatile int *)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
        apply_draw_overrides(v19, v58);
        uint64_t v26 = mach_absolute_time();
        (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void, void, void, void, void, uint64_t, unsigned int))(*(void *)(v19 + 32) + 6040LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
        uint64_t v59 = mach_absolute_time();
        uint64_t v60 = v59 - v26;
        unint64_t v13 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          __int128 v61 = v73;
          *((void *)v73 + 2) = v26;
          v61[3] = v60;
          if (!gCheckGLErrors)
          {
LABEL_67:
            int v62 = [(id)DYGetGLGuestAppClient(v59) overrideFlags];
            unapply_draw_overrides(v19, v62);
            goto LABEL_30;
          }

{
  unint64_t v13;
  void *v14;
  uint64_t v15;
  unint64_t v16;
  BOOL v17;
  void *v18;
  uint64_t v19;
  unsigned int *v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  id v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  unsigned int v28;
  unint64_t v29;
  uint64_t v30;
  uint64_t v31;
  id v32;
  uint64_t v33;
  uint64_t v34;
  unint64_t v35;
  void *v36;
  id v37;
  GPUTools::FB::Fbuf *v38;
  unsigned int v39;
  GPUTools::FB::Fbuf *v40;
  dispatch_queue_s *v41;
  uint64_t v42;
  GPUTools::FB::Stream *v43;
  unsigned int *v44;
  unsigned int v45;
  unsigned int v46;
  unsigned int v47;
  signed int v48;
  BOOL v49;
  unsigned int v50;
  uint64_t v51;
  id v52;
  unsigned int v53;
  dispatch_queue_s *v54;
  int v55;
  uint64_t v56;
  uint64_t v57;
  volatile int *v58;
  uint64_t v59;
  uint64_t v60;
  void *v61;
  int v62;
  uint64_t v63;
  void *v64;
  uint64_t v65;
  void *v66;
  __uint64_t v72;
  void *v73;
  uint64_t v74;
  unsigned int v75;
  unint64_t v13 = a10;
  uint64_t v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      signed int v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    uint64_t v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  id v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v19);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_58:
        unsigned int v53 = __ldaxr(v20);
      while (__stlxr(v53 - 1, v20));
      unsigned int v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void, void, void, void, void, uint64_t))(*(void *)(v19 + 24) + 6040LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9);
      return;
    }
  }

  *(_WORD *)(v19 + 4838) = 257;
  unsigned int v73 = 0LL;
  uint64_t v74 = 0LL;
  unsigned int v75 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    uint64_t v26 = (uint64_t)v73;
    uint64_t v25 = v74;
    uint64_t v27 = v74 - (void)v73;
    unsigned int v28 = v75;
    unint64_t v29 = v75 - (v74 - (void)v73);
    if (v29 > 0x63) {
      goto LABEL_24;
    }
    int v55 = (355 - v29) & 0xFFFFFF00;
    v75 += v55;
    uint64_t v26 = (uint64_t)malloc(v55 + v28);
    unsigned int v73 = (void *)v26;
    if (v26)
    {
      if ((v26 & 3) == 0)
      {
        uint64_t v25 = v27 + v26;
LABEL_24:
        *(_DWORD *)(v25 + 96) = 0;
        *(_OWORD *)(v25 + 64) = 0u;
        *(_OWORD *)(v25 + 80) = 0u;
        *(_OWORD *)(v25 + 32) = 0u;
        *(_OWORD *)(v25 + 48) = 0u;
        *(_OWORD *)uint64_t v25 = 0u;
        *(_OWORD *)(v25 + 16) = 0u;
        uint64_t v74 = v25 + 100;
        GPUTools::FB::Fbuf::align((char **)&v73);
        *(_DWORD *)(v26 + 4) = 28;
        *(_DWORD *)(v26 + 32) = 0;
        __uint64_t v72 = 0LL;
        uint64_t v30 = pthread_threadid_np(0LL, &v72);
        *(void *)(v26 + 8) = v72;
        strcpy((char *)(v26 + 36), "Ciiiiiiiiuie");
        *(void *)(v26 + 52) = *(void *)v19;
        *(_DWORD *)(v26 + 60) = a2;
        *(_DWORD *)(v26 + 64) = a3;
        *(_DWORD *)(v26 + 68) = a4;
        *(_DWORD *)(v26 + 72) = a5;
        *(_DWORD *)(v26 + 76) = a6;
        *(_DWORD *)(v26 + 80) = a7;
        *(_DWORD *)(v26 + 84) = a8;
        *(void *)(v26 + 88) = a9;
        *(_DWORD *)(v26 + 96) = a10;
        LOBYTE(v27) = byte_206E74;
        if ((byte_206E74 & 1) != 0) {
          breakpoint_break((uint64_t)&v73, &dword_1C, 1LL, *(unsigned int *)(v19 + 3404), v19);
        }
        uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
        if (v31 & 0x10 | v27 & 4) {
          goto LABEL_30;
        }
        id v32 = [(id)DYGetGLGuestAppClient(v31) overrideFlags];
        if (!(_DWORD)v32)
        {
          uint64_t v33 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void, void, void, void, void, uint64_t, unsigned int))(*(void *)(v19 + 32) + 6040LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
          uint64_t v31 = mach_absolute_time();
          uint64_t v34 = v31 - v33;
          unint64_t v35 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v36 = v73;
            *((void *)v73 + 2) = v33;
            v36[3] = v34;
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          else
          {
            uint64_t v63 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
            __int128 v64 = v73;
            *((void *)v73 + 3) = v63;
            uint64_t v31 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
            v64[2] = v31;
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          uint64_t v31 = check_errors(v19);
LABEL_30:
          id v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v31), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
          if ((_DWORD)v37) {
            id v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v73, v38);
          }
          unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v19 + 3404);
          if ((_DWORD)v40) {
            id v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v73, v40, v39);
          }
          if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
            encode_driver_events((id *)v19, (uint64_t)&v73);
          }
          unsigned int v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v19 + 3480),  (GPUTools::FB::Fbuf *)(v19 + 3520),  (GPUTools::FB *)&v73);
          uint64_t v42 = *(unsigned int *)(v19 + 3404);
          if ((_DWORD)v42 && gBreakOnError)
          {
            uint64_t v56 = 3LL;
            uint64_t v57 = 0xFFFFFFFFLL;
          }

          else
          {
            if ((v27 & 2) == 0) {
              goto LABEL_39;
            }
            uint64_t v56 = 2LL;
            uint64_t v57 = 28LL;
          }

          breakpoint_break((uint64_t)&v73, (volatile int *)v57, v56, v42, v19);
LABEL_39:
          uint64_t v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
          unsigned int v44 = (unsigned int *)((char *)v43 + 56);
          do
            unsigned int v45 = __ldaxr(v44);
          while (__stlxr(1u, v44));
          if (v45 == 1)
          {
            do
            {
              while (*v44 == 1)
                ;
              do
                unsigned int v46 = __ldaxr(v44);
              while (__stlxr(1u, v44));
            }

            while (v46 == 1);
          }

          GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)&v73, *(unsigned int *)v73, 1);
          atomic_store(0, v44);
          do
          {
            unsigned int v47 = __ldaxr(v20);
            signed int v48 = v47 - 1;
          }

          while (__stlxr(v48, v20));
          if (gCheckGLErrors) {
            BOOL v49 = v48 < 1;
          }
          else {
            BOOL v49 = 1;
          }
          if (!v49) {
            handle_opengl_thread_conflict((const void **)v19);
          }
          goto LABEL_52;
        }

        uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
        if ((v31 & 8) != 0) {
          goto LABEL_30;
        }
        uint64_t v58 = (volatile int *)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
        apply_draw_overrides(v19, v58);
        uint64_t v26 = mach_absolute_time();
        (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, void, void, void, void, void, uint64_t, unsigned int))(*(void *)(v19 + 32) + 6040LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7,  a8,  a9,  a10);
        uint64_t v59 = mach_absolute_time();
        uint64_t v60 = v59 - v26;
        unint64_t v13 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          __int128 v61 = v73;
          *((void *)v73 + 2) = v26;
          v61[3] = v60;
          if (!gCheckGLErrors)
          {
LABEL_67:
            int v62 = [(id)DYGetGLGuestAppClient(v59) overrideFlags];
            unapply_draw_overrides(v19, v62);
            goto LABEL_30;
          }

void sub_6E440( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void renderbuffer_storage_multisample( __GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  BOOL v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      unint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    BOOL v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      id v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 6048LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  uint64_t v59 = 0LL;
  uint64_t v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    id v24 = (char *)v59;
    BOOL v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x47) {
      goto LABEL_24;
    }
    int v53 = (327 - v27) & 0xFFFFFF00;
    v61 += v53;
    id v24 = (char *)malloc(v53 + v26);
    uint64_t v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        BOOL v23 = &v24[v25];
LABEL_24:
        *((void *)v23 + 8) = 0LL;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)BOOL v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        uint64_t v60 = v23 + 72;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 509;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        strcpy(v24 + 36, "Ceieii");
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *((_DWORD *)v24 + 15) = a4;
        *((_DWORD *)v24 + 16) = a5;
        *((_DWORD *)v24 + 17) = a6;
        char v29 = byte_207055;
        if ((byte_207055 & 1) != 0) {
          breakpoint_break( (uint64_t)&v59,  (volatile int *)&stru_1F8.sectname[5],  1LL,  *(unsigned int *)(v17 + 3404),  v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32)
                                                                                                 + 6048LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            uint64_t v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  char *v23;
  char *v24;
  int64_t v25;
  unsigned int v26;
  unint64_t v27;
  uint64_t v28;
  char v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  unint64_t v33;
  void *v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  int v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  __uint64_t v58;
  void *v59;
  char *v60;
  unsigned int v61;
  BOOL v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      unint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    BOOL v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      id v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 6048LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  uint64_t v59 = 0LL;
  uint64_t v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    id v24 = (char *)v59;
    BOOL v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x47) {
      goto LABEL_24;
    }
    int v53 = (327 - v27) & 0xFFFFFF00;
    v61 += v53;
    id v24 = (char *)malloc(v53 + v26);
    uint64_t v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        BOOL v23 = &v24[v25];
LABEL_24:
        *((void *)v23 + 8) = 0LL;
        *((_OWORD *)v23 + 2) = 0u;
        *((_OWORD *)v23 + 3) = 0u;
        *(_OWORD *)BOOL v23 = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        uint64_t v60 = v23 + 72;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 509;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        strcpy(v24 + 36, "Ceieii");
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *((_DWORD *)v24 + 15) = a4;
        *((_DWORD *)v24 + 16) = a5;
        *((_DWORD *)v24 + 17) = a6;
        char v29 = byte_207055;
        if ((byte_207055 & 1) != 0) {
          breakpoint_break( (uint64_t)&v59,  (volatile int *)&stru_1F8.sectname[5],  1LL,  *(unsigned int *)(v17 + 3404),  v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32)
                                                                                                 + 6048LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            uint64_t v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  BOOL v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      unint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    BOOL v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 6048LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        unsigned int v26 = __ldaxr(v18);
      while (__stlxr(v26 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32) + 6048LL))( a1,  a2,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v17);
      }
    }
  }

  do
  {
    BOOL v23 = __ldaxr(v18);
    id v24 = v23 - 1;
  }

  while (__stlxr(v24, v18));
  if (gCheckGLErrors) {
    int64_t v25 = v24 < 1;
  }
  else {
    int64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  int64x2_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  BOOL v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      unint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    BOOL v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        uint64_t v32 = __ldaxr(v18);
      while (__stlxr(v32 - 1, v18));
      unint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 6048LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v23 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32) + 6048LL))( a1,  a2,  a3,  a4,  a5,  a6);
  id v24 = mach_absolute_time();
  int64_t v25 = vdupq_n_s64(1uLL);
  v25.i64[0] = v24 - v23;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v25, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v34 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v17);
      }
    }
  }

  do
  {
    unsigned int v26 = __ldaxr(v18);
    unint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v18));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_6E98C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_attached_shaders(__GLIContextRec *a1, uint64_t a2, uint64_t a3, int *a4, unsigned int *a5)
{
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_63:
        unsigned int v55 = __ldaxr(v16);
      while (__stlxr(v55 - 1, v16));
      uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, unsigned int *))(*(void *)(v15 + 24) + 6072LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  __int128 v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    int v63 = 0;
    if (a4) {
      BOOL v21 = a4;
    }
    else {
      BOOL v21 = &v63;
    }
    *BOOL v21 = 0;
    id v22 = "t";
    if (v21 == a4) {
      id v22 = "@1i";
    }
    snprintf((char *)(v15 + 4709), 0x40uLL, "Cuii%s@%dui", v22, a3);
    GPUTools::FB::Encode((uint64_t)&v64, 214LL, 256LL, v15 + 4709, v23, v24, v25, v26, *(void *)v15);
    uint64_t v28 = a2;
    char v62 = byte_206F2E;
    if ((byte_206F2E & 1) != 0) {
      breakpoint_break((uint64_t)&v64, (volatile int *)&stru_B8.segname[14], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    if (!([(id)DYGetGLGuestAppClient(v27) overrideFlags] & 0x10 | v62 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, unsigned int *))(*(void *)(v15 + 32) + 6072LL))( a1,  v28,  a3,  v21,  a5);
      uint64_t v34 = mach_absolute_time() - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v36 = v64;
        *((void *)v64 + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        uint64_t v60 = v64;
        *((void *)v64 + 3) = v59;
        v60[2] = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  id v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  void *v54[2];
  int v55;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    unsigned int v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    signed int v46 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_56:
        unsigned int v48 = __ldaxr(v16);
      while (__stlxr(v48 - 1, v16));
      unsigned int v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, unsigned int *))(*(void *)(v15 + 24) + 6072LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v54[0] = 0LL;
  v54[1] = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (uint64_t v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    GPUTools::FB::Encode((uint64_t)v54, 214LL, 2LL, (uint64_t)"Cuiipp", v20, v21, v22, v23, *(void *)v15);
    uint64_t v26 = byte_206F2E;
    if ((byte_206F2E & 1) != 0) {
      breakpoint_break((uint64_t)v54, (volatile int *)&stru_B8.segname[14], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, unsigned int *))(*(void *)(v15 + 32) + 6072LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      uint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v54[0];
        *((void *)v54[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        unsigned int v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v54[0];
        *((void *)v54[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v27 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, unsigned int *))(*(void *)(v15 + 24) + 6072LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, unsigned int *))(*(void *)(v15 + 32) + 6072LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    BOOL v21 = __ldaxr(v16);
    id v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, unsigned int *))(*(void *)(v15 + 24) + 6072LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, unsigned int *))(*(void *)(v15 + 32) + 6072LL))( a1,  a2,  a3,  a4,  a5);
  id v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_6EEA0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(exception_object);
}

void vertex_attrib_divisor(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      uint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      signed int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6088LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  id v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    signed int v18 = (char *)v53;
    unsigned int v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    signed int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        unsigned int v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)unsigned int v17 = 0u;
        id v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 833;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Cuiui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_207199;
        if ((byte_207199 & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)&stru_338.sectname[9],  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6088LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            BOOL v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      uint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      signed int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6088LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  id v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    signed int v18 = (char *)v53;
    unsigned int v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    signed int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        unsigned int v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)unsigned int v17 = 0u;
        id v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 833;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Cuiui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_207199;
        if ((byte_207199 & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)&stru_338.sectname[9],  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6088LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            BOOL v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      uint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6088LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6088LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    unsigned int v17 = __ldaxr(v12);
    signed int v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      uint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6088LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unsigned int v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6088LL))(a1, a2, a3);
  signed int v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_6F384( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void draw_arrays_instanced(__GLIContextRec *a1, uint64_t a2, unint64_t a3, uint64_t a4, uint64_t a5)
{
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v58 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v57 = handle_opengl_thread_conflict((const void **)v15);
    id v58 = [(id)DYGetGLGuestAppClient(v57) waitOnGraphicsSemaphoreAssertions];
    if ((int)v58 >= 1)
    {
      do
LABEL_68:
        unsigned int v59 = __ldaxr(v16);
      while (__stlxr(v59 - 1, v16));
      uint64_t v60 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v58) graphicsLockWaitQueue];
      dispatch_sync_f(v60, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                             + 6096LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_WORD *)(v15 + 4838) = 257;
  unsigned int v73 = 0LL;
  uint64_t v74 = 0LL;
  unsigned int v75 = 0;
  if ([(id)DYGetGLGuestAppClient(v58) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    if ((int)a4 < 1)
    {
      uint64_t v21 = 0LL;
      uint64_t v23 = (uint64_t)v73;
      uint64_t v22 = v74;
      uint64_t v24 = v74 - (void)v73;
      unsigned int v25 = v75;
      unint64_t v26 = v75 - (v74 - (void)v73);
      if (v26 > 0x43) {
        goto LABEL_27;
      }
    }

    else
    {
      uint64_t v21 = copyout_vertex_arrays2((ContextInfo *)v15, (int)a3, a4, (int)a5);
      uint64_t v23 = (uint64_t)v73;
      uint64_t v22 = v74;
      uint64_t v24 = v74 - (void)v73;
      unsigned int v25 = v75;
      unint64_t v26 = v75 - (v74 - (void)v73);
      if (v26 > 0x43) {
        goto LABEL_27;
      }
    }

    unsigned int v75 = ((323 - v26) & 0xFFFFFF00) + v25;
    uint64_t v23 = (uint64_t)malloc(v75);
    unsigned int v73 = (void *)v23;
    if (v23)
    {
      if ((v23 & 3) == 0)
      {
        uint64_t v22 = v24 + v23;
LABEL_27:
        *(_DWORD *)(v22 + 64) = 0;
        *(_OWORD *)(v22 + 32) = 0u;
        *(_OWORD *)(v22 + 48) = 0u;
        *(_OWORD *)uint64_t v22 = 0u;
        *(_OWORD *)(v22 + 16) = 0u;
        uint64_t v74 = v22 + 68;
        GPUTools::FB::Fbuf::align((char **)&v73);
        *(_DWORD *)(v23 + 4) = 823;
        *(_DWORD *)(v23 + 32) = 0;
        __uint64_t v72 = 0LL;
        uint64_t v27 = pthread_threadid_np(0LL, &v72);
        *(void *)(v23 + 8) = v72;
        strcpy((char *)(v23 + 36), "Ceiii");
        *(void *)(v23 + 44) = *(void *)v15;
        *(_DWORD *)(v23 + 52) = a2;
        *(_DWORD *)(v23 + 56) = a3;
        *(_DWORD *)(v23 + 60) = a4;
        *(_DWORD *)(v23 + 64) = a5;
        LOBYTE(v24) = byte_20718F;
        if ((byte_20718F & 1) != 0) {
          breakpoint_break( (uint64_t)&v73,  (volatile int *)((char *)&stru_2E8.reserved3 + 3),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
        if (v28 & 0x10 | v24 & 4) {
          goto LABEL_33;
        }
        id v29 = [(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(_DWORD)v29)
        {
          uint64_t v30 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, unint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32)
                                                                                                 + 6096LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v28 = mach_absolute_time();
          uint64_t v31 = v28 - v30;
          unint64_t v32 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v33 = v73;
            *((void *)v73 + 2) = v30;
            v33[3] = v31;
            if (!gCheckGLErrors) {
              goto LABEL_33;
            }
          }

          else
          {
            uint64_t v68 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
            v69 = v73;
            *((void *)v73 + 3) = v68;
            uint64_t v28 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
            v69[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_33;
            }
          }

          uint64_t v28 = check_errors(v15);
LABEL_33:
          id v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v28), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
          if ((_DWORD)v34) {
            id v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v73, v35);
          }
          unsigned int v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
          if ((_DWORD)v37) {
            id v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v73, v37, v36);
          }
          if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
            encode_driver_events((id *)v15, (uint64_t)&v73);
          }
          unsigned int v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v73);
          uint64_t v39 = *(unsigned int *)(v15 + 3404);
          if ((_DWORD)v39 && gBreakOnError)
          {
            uint64_t v61 = 3LL;
            uint64_t v62 = 0xFFFFFFFFLL;
          }

          else
          {
            if ((v24 & 2) == 0) {
              goto LABEL_42;
            }
            uint64_t v61 = 2LL;
            uint64_t v62 = 823LL;
          }

          breakpoint_break((uint64_t)&v73, (volatile int *)v62, v61, v39, v15);
LABEL_42:
          signed int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
          BOOL v41 = (unsigned int *)((char *)v40 + 56);
          do
            unsigned int v42 = __ldaxr(v41);
          while (__stlxr(1u, v41));
          if (v42 == 1)
          {
            do
            {
              while (*v41 == 1)
                ;
              do
                unsigned int v43 = __ldaxr(v41);
              while (__stlxr(1u, v41));
            }

            while (v43 == 1);
          }

          GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)&v73, *(unsigned int *)v73, 1);
          atomic_store(0, v41);
          if (v21)
          {
            GPUTools::FB::Encode((uint64_t)&v73, 4294955021LL, 4LL, (uint64_t)"C", v44, v45, v46, v47, *(void *)v15);
            uint64_t v49 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v48) defaultFbufStream];
            uint64_t v50 = (unsigned int *)((char *)v49 + 56);
            do
              unsigned int v51 = __ldaxr(v50);
            while (__stlxr(1u, v50));
            if (v51 == 1)
            {
              do
              {
                while (*v50 == 1)
                  ;
                do
                  unsigned int v52 = __ldaxr(v50);
                while (__stlxr(1u, v50));
              }

              while (v52 == 1);
            }

            GPUTools::FB::Stream::Write_nolock(v49, (GPUTools::FB::Fbuf *)&v73, *(unsigned int *)v73, 1);
            atomic_store(0, v50);
          }

          do
          {
            unsigned int v53 = __ldaxr(v16);
            signed int v54 = v53 - 1;
          }

          while (__stlxr(v54, v16));
          if (gCheckGLErrors) {
            BOOL v55 = v54 < 1;
          }
          else {
            BOOL v55 = 1;
          }
          if (!v55) {
            handle_opengl_thread_conflict((const void **)v15);
          }
          goto LABEL_62;
        }

        uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
        if ((v28 & 8) != 0) {
          goto LABEL_33;
        }
        int v63 = (volatile int *)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        apply_draw_overrides(v15, v63);
        uint64_t v23 = mach_absolute_time();
        (*(void (**)(__GLIContextRec *, uint64_t, unint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32)
                                                                                               + 6096LL))( a1,  a2,  a3,  a4,  a5);
        uint64_t v64 = mach_absolute_time();
        uint64_t v65 = v64 - v23;
        a3 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v66 = v73;
          *((void *)v73 + 2) = v23;
          v66[3] = v65;
          if (!gCheckGLErrors)
          {
LABEL_77:
            int v67 = [(id)DYGetGLGuestAppClient(v64) overrideFlags];
            unapply_draw_overrides(v15, v67);
            goto LABEL_33;
          }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  uint64_t v27;
  id v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  volatile int *v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  int v58;
  uint64_t v59;
  void *v60;
  uint64_t v61;
  void *v62;
  __uint64_t v63;
  void *v64;
  uint64_t v65;
  unsigned int v66;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  id v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_58:
        uint64_t v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                             + 6096LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_WORD *)(v15 + 4838) = 257;
  uint64_t v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (uint64_t)v64;
    uint64_t v21 = v65;
    uint64_t v23 = v65 - (void)v64;
    uint64_t v24 = v66;
    unsigned int v25 = v66 - (v65 - (void)v64);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    unsigned int v51 = (323 - v25) & 0xFFFFFF00;
    v66 += v51;
    uint64_t v22 = (uint64_t)malloc(v51 + v24);
    uint64_t v64 = (void *)v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = v23 + v22;
LABEL_24:
        *(_DWORD *)(v21 + 64) = 0;
        *(_OWORD *)(v21 + 32) = 0u;
        *(_OWORD *)(v21 + 48) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *(_OWORD *)(v21 + 16) = 0u;
        uint64_t v65 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v64);
        *(_DWORD *)(v22 + 4) = 823;
        *(_DWORD *)(v22 + 32) = 0;
        int v63 = 0LL;
        unint64_t v26 = pthread_threadid_np(0LL, &v63);
        *(void *)(v22 + 8) = v63;
        strcpy((char *)(v22 + 36), "Ceiii");
        *(void *)(v22 + 44) = *(void *)v15;
        *(_DWORD *)(v22 + 52) = a2;
        *(_DWORD *)(v22 + 56) = a3;
        *(_DWORD *)(v22 + 60) = a4;
        *(_DWORD *)(v22 + 64) = a5;
        LOBYTE(v23) = byte_20718F;
        if ((byte_20718F & 1) != 0) {
          breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_2E8.reserved3 + 3),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (v27 & 0x10 | v23 & 4) {
          goto LABEL_30;
        }
        uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) overrideFlags];
        if (!(_DWORD)v28)
        {
          id v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, unint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32)
                                                                                                 + 6096LL))( a1,  a2,  a3,  a4,  a5);
          uint64_t v27 = mach_absolute_time();
          uint64_t v30 = v27 - v29;
          uint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v32 = v64;
            *((void *)v64 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          else
          {
            unsigned int v59 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            uint64_t v60 = v64;
            *((void *)v64 + 3) = v59;
            uint64_t v27 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v60[2] = v27;
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          uint64_t v27 = check_errors(v15);
LABEL_30:
          uint64_t v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v27), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
          if ((_DWORD)v33) {
            uint64_t v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v34);
          }
          unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
          if ((_DWORD)v36) {
            uint64_t v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v36, v35);
          }
          if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
            encode_driver_events((id *)v15, (uint64_t)&v64);
          }
          unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v64);
          unsigned int v38 = *(unsigned int *)(v15 + 3404);
          if ((_DWORD)v38 && gBreakOnError)
          {
            unsigned int v52 = 3LL;
            unsigned int v53 = 0xFFFFFFFFLL;
          }

          else
          {
            if ((v23 & 2) == 0) {
              goto LABEL_39;
            }
            unsigned int v52 = 2LL;
            unsigned int v53 = 823LL;
          }

          breakpoint_break((uint64_t)&v64, (volatile int *)v53, v52, v38, v15);
LABEL_39:
          uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
          signed int v40 = (unsigned int *)((char *)v39 + 56);
          do
            BOOL v41 = __ldaxr(v40);
          while (__stlxr(1u, v40));
          if (v41 == 1)
          {
            do
            {
              while (*v40 == 1)
                ;
              do
                unsigned int v42 = __ldaxr(v40);
              while (__stlxr(1u, v40));
            }

            while (v42 == 1);
          }

          GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
          atomic_store(0, v40);
          do
          {
            unsigned int v43 = __ldaxr(v16);
            uint64_t v44 = v43 - 1;
          }

          while (__stlxr(v44, v16));
          if (gCheckGLErrors) {
            uint64_t v45 = v44 < 1;
          }
          else {
            uint64_t v45 = 1;
          }
          if (!v45) {
            handle_opengl_thread_conflict((const void **)v15);
          }
          goto LABEL_52;
        }

        uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if ((v27 & 8) != 0) {
          goto LABEL_30;
        }
        signed int v54 = (volatile int *)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
        apply_draw_overrides(v15, v54);
        uint64_t v22 = mach_absolute_time();
        (*(void (**)(__GLIContextRec *, uint64_t, unint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32)
                                                                                               + 6096LL))( a1,  a2,  a3,  a4,  a5);
        BOOL v55 = mach_absolute_time();
        unsigned int v56 = v55 - v22;
        a3 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v57 = v64;
          *((void *)v64 + 2) = v22;
          v57[3] = v56;
          if (!gCheckGLErrors)
          {
LABEL_67:
            id v58 = [(id)DYGetGLGuestAppClient(v55) overrideFlags];
            unapply_draw_overrides(v15, v58);
            goto LABEL_30;
          }

void sub_6FA80( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void draw_elements_instanced( __GLIContextRec *a1, uint64_t a2, int a3, GPUTools::GL *a4, void *a5, uint64_t a6)
{
  int v86 = a3;
  v85 = a5;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v64 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v63 = handle_opengl_thread_conflict((const void **)v13);
    id v64 = [(id)DYGetGLGuestAppClient(v63) waitOnGraphicsSemaphoreAssertions];
    if ((int)v64 >= 1)
    {
      do
LABEL_72:
        unsigned int v65 = __ldaxr(v14);
      while (__stlxr(v65 - 1, v14));
      unsigned int v66 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v64) graphicsLockWaitQueue];
      dispatch_sync_f(v66, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, void, GPUTools::GL *, void *, uint64_t))(*(void *)(v13 + 24)
                                                                                                  + 6104LL))( a1,  a2,  v86,  a4,  v85,  a6);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  v83[0] = 0LL;
  v83[1] = 0LL;
  int v84 = 0;
  if ([(id)DYGetGLGuestAppClient(v64) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    strlcpy((char *)(v13 + 4709), "Ceie", 0x40uLL);
    if ((_DWORD)a6 && v86)
    {
      if (has_client_memory_vertex_arrays((ContextInfo *)v13))
      {
        uint64_t v19 = determine_element_range((ContextInfo *)v13, &v86, (int)a4, (const void **)&v85, 0LL, 1);
        uint64_t v80 = copyout_vertex_arrays2((ContextInfo *)v13, v19, v20, (int)a6);
        if (*(_DWORD *)(v13 + 2036))
        {
LABEL_27:
          strlcat((char *)(v13 + 4709), "ti", 0x40uLL);
          goto LABEL_31;
        }
      }

      else
      {
        uint64_t v80 = 0LL;
        if (*(_DWORD *)(v13 + 2036)) {
          goto LABEL_27;
        }
      }

      strlcat((char *)(v13 + 4709), "Ui", 0x40uLL);
      uint64_t v27 = GPUTools::GL::dy_type_size(a4, v26);
      int v28 = v27;
      int v29 = v86;
      uint64_t v30 = v85;
      uint64_t v31 = DYGetGLGuestAppClient(v27);
      GPUTools::Interpose::DYSavePointer(v31, (v29 * v28), v30, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
    }

    else
    {
      strlcat((char *)(v13 + 4709), "ti", 0x40uLL);
      uint64_t v80 = 0LL;
    }

void sub_7017C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, void *a18)
{
  if (a18) {
    free(a18);
  }
  _Unwind_Resume(exception_object);
}

void bind_vertex_array(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_56:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      uint64_t v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6144LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v49, 838LL, 0LL, (uint64_t)"Cui", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_20719E;
    if ((byte_20719E & 1) != 0) {
      breakpoint_break((uint64_t)v49, (volatile int *)&stru_338.sectname[14], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v21 = (uint64_t)[(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if (!(v21 & 0x10 | v20 & 4))
    {
      uint64_t v22 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6144LL))(a1, a2);
      uint64_t v21 = mach_absolute_time();
      uint64_t v23 = v21 - v22;
      unint64_t v24 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v25 = v49[0];
        *((void *)v49[0] + 2) = v22;
        v25[3] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v23, (g_DYTimebaseInfo * (unsigned __int128)v23) >> 64);
        unsigned int v48 = v49[0];
        *((void *)v49[0] + 3) = v47;
        uint64_t v21 = __udivti3(v24 * v22, (v24 * (unsigned __int128)v22) >> 64);
        v48[2] = v21;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v21 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  id v18;
  uint64_t v19;
  char v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  unint64_t v24;
  void *v25;
  id v26;
  GPUTools::FB::Fbuf *v27;
  unsigned int v28;
  GPUTools::FB::Fbuf *v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  GPUTools::FB::Stream *v32;
  unsigned int *v33;
  unsigned int v34;
  unsigned int v35;
  __n128 v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  uint64_t v46;
  uint64_t v47;
  void *v48;
  void *v49[2];
  int v50;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_56:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      uint64_t v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6144LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v49, 838LL, 0LL, (uint64_t)"Cui", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_20719E;
    if ((byte_20719E & 1) != 0) {
      breakpoint_break((uint64_t)v49, (volatile int *)&stru_338.sectname[14], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v21 = (uint64_t)[(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if (!(v21 & 0x10 | v20 & 4))
    {
      uint64_t v22 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6144LL))(a1, a2);
      uint64_t v21 = mach_absolute_time();
      uint64_t v23 = v21 - v22;
      unint64_t v24 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v25 = v49[0];
        *((void *)v49[0] + 2) = v22;
        v25[3] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v23, (g_DYTimebaseInfo * (unsigned __int128)v23) >> 64);
        unsigned int v48 = v49[0];
        *((void *)v49[0] + 3) = v47;
        uint64_t v21 = __udivti3(v24 * v22, (v24 * (unsigned __int128)v22) >> 64);
        v48[2] = v21;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v21 = check_errors(v9);
    }

void sub_705C4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void delete_vertex_arrays(__GLIContextRec *a1, uint64_t a2, const unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_56:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6152LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v51[0] = 0LL;
  v51[1] = 0LL;
  int v52 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)v51, 839LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_20719F;
    if ((byte_20719F & 1) != 0) {
      breakpoint_break((uint64_t)v51, (volatile int *)&stru_338.sectname[15], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 6152LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v51[0];
        *((void *)v51[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        int v50 = v51[0];
        *((void *)v51[0] + 3) = v49;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v50[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  __n128 v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  void *v51[2];
  int v52;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_56:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6152LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v51[0] = 0LL;
  v51[1] = 0LL;
  int v52 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)v51, 839LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_20719F;
    if ((byte_20719F & 1) != 0) {
      breakpoint_break((uint64_t)v51, (volatile int *)&stru_338.sectname[15], 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 6152LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v51[0];
        *((void *)v51[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        int v50 = v51[0];
        *((void *)v51[0] + 3) = v49;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v50[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

void sub_70A20( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void gen_vertex_arrays(__GLIContextRec *a1, uint64_t a2, unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6160LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v57 = 0LL;
  unsigned int v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 840LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_2071A0;
    if ((byte_2071A0 & 1) != 0) {
      breakpoint_break((uint64_t)&v57, (volatile int *)stru_338.segname, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6160LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        BOOL v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  _OWORD *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __int128 v56;
  void *v57;
  void *v58;
  unsigned int v59;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6160LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v57 = 0LL;
  unsigned int v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 840LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_2071A0;
    if ((byte_2071A0 & 1) != 0) {
      breakpoint_break((uint64_t)&v57, (volatile int *)stru_338.segname, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6160LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        BOOL v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6160LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6160LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6160LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6160LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_70EB8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_vertex_array(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6168LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  unsigned int v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    unsigned int v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 841;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_2071A1;
        if ((byte_2071A1 & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_338.segname[1], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6168LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 841LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        signed int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6168LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      uint64_t v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6168LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  unsigned int v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    unsigned int v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 841;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_2071A1;
        if ((byte_2071A1 & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_338.segname[1], 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6168LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 841LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        signed int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6168LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6168LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6168LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6168LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6168LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6168LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6168LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  uint64_t v3 = a1;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6168LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6168LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_713C0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void point_size_pointer(__GLIContextRec *a1, uint64_t a2, uint64_t a3, const void *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_56:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 24) + 6176LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    int v23 = *(_DWORD *)(v13 + 2032);
    *(_DWORD *)(v13 + 1980) = a2;
    *(_DWORD *)(v13 + 1988) = a3;
    *(void *)(v13 + 1968) = a4;
    *(_DWORD *)(v13 + 1976) = v23;
    GPUTools::FB::Encode( (uint64_t)v53,  806LL,  2 * (v23 == 0),  (uint64_t)"Ceit",  v18,  v19,  v20,  v21,  *(void *)v13);
    char v25 = byte_20717E;
    if ((byte_20717E & 1) != 0) {
      breakpoint_break( (uint64_t)v53,  (volatile int *)((char *)&stru_2E8.nreloc + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 32) + 6176LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v30 = v53[0];
        *((void *)v53[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        int v52 = v53[0];
        *((void *)v53[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v26 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  id v22;
  int v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  void *v53[2];
  int v54;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_56:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 24) + 6176LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    int v23 = *(_DWORD *)(v13 + 2032);
    *(_DWORD *)(v13 + 1980) = a2;
    *(_DWORD *)(v13 + 1988) = a3;
    *(void *)(v13 + 1968) = a4;
    *(_DWORD *)(v13 + 1976) = v23;
    GPUTools::FB::Encode( (uint64_t)v53,  806LL,  2 * (v23 == 0),  (uint64_t)"Ceit",  v18,  v19,  v20,  v21,  *(void *)v13);
    char v25 = byte_20717E;
    if ((byte_20717E & 1) != 0) {
      breakpoint_break( (uint64_t)v53,  (volatile int *)((char *)&stru_2E8.nreloc + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 32) + 6176LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v30 = v53[0];
        *((void *)v53[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        int v52 = v53[0];
        *((void *)v53[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v26 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    int v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 24) + 6176LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        id v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 32) + 6176LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 24) + 6176LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const void *))(*(void *)(v13 + 32) + 6176LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  uint64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    id v22 = __ldaxr(v14);
    int v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_71810( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void clear_bufferiv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, const int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_60:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 24) + 6192LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    else {
      snprintf((char *)(v13 + 4709), 0x40uLL, "Cei@%u%s", dword_1F2EC8[(int)a2 - 6144], "i");
    }
    GPUTools::FB::Encode((uint64_t)v63, 853LL, v13 + 4709, v18, v19, v20, v21, v22, *(void *)v13);
    char v25 = byte_2071AD;
    if ((byte_2071AD & 1) != 0) {
      breakpoint_break((uint64_t)v63, (volatile int *)&stru_338.segname[13], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (v26 & 0x10 | v25 & 4) {
      goto LABEL_32;
    }
    id v27 = [(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(_DWORD)v27)
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 32) + 6192LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v29 = v26 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v63[0];
        *((void *)v63[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v60 = v63[0];
        *((void *)v63[0] + 3) = v59;
        uint64_t v26 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v60[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v26 = check_errors(v13);
LABEL_32:
      id v32 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v26), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v32) {
        id v32 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v33);
      }
      unsigned int v35 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
      if ((_DWORD)v35) {
        id v32 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v35, v34);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v13, (uint64_t)v63);
      }
      uint64_t v36 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
      uint64_t v37 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v37 && gBreakOnError)
      {
        uint64_t v50 = 3LL;
        uint64_t v51 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v25 & 2) == 0) {
          goto LABEL_41;
        }
        uint64_t v50 = 2LL;
        uint64_t v51 = 853LL;
      }

      breakpoint_break((uint64_t)v63, (volatile int *)v51, v50, v37, v13);
LABEL_41:
      uint64_t v38 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v36) defaultFbufStream];
      unsigned int v39 = (unsigned int *)((char *)v38 + 56);
      do
        unsigned int v40 = __ldaxr(v39);
      while (__stlxr(1u, v39));
      if (v40 == 1)
      {
        do
        {
          while (*v39 == 1)
            ;
          do
            unsigned int v41 = __ldaxr(v39);
          while (__stlxr(1u, v39));
        }

        while (v41 == 1);
      }

      GPUTools::FB::Stream::Write_nolock(v38, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
      atomic_store(0, v39);
      do
      {
        unsigned int v42 = __ldaxr(v14);
        signed int v43 = v42 - 1;
      }

      while (__stlxr(v43, v14));
      if (gCheckGLErrors) {
        BOOL v44 = v43 < 1;
      }
      else {
        BOOL v44 = 1;
      }
      if (!v44) {
        handle_opengl_thread_conflict((const void **)v13);
      }
      goto LABEL_54;
    }

    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if ((v26 & 8) != 0) {
      goto LABEL_32;
    }
    int v52 = (volatile int *)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    apply_draw_overrides(v13, v52);
    uint64_t v53 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 32) + 6192LL))( a1,  a2,  a3,  a4);
    uint64_t v54 = mach_absolute_time();
    uint64_t v55 = v54 - v53;
    unint64_t v56 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      __uint64_t v57 = v63[0];
      *((void *)v63[0] + 2) = v53;
      v57[3] = v55;
      if (!gCheckGLErrors)
      {
LABEL_66:
        int v58 = [(id)DYGetGLGuestAppClient(v54) overrideFlags];
        unapply_draw_overrides(v13, v58);
        goto LABEL_32;
      }
    }

    else
    {
      uint64_t v61 = __udivti3(g_DYTimebaseInfo * v55, (g_DYTimebaseInfo * (unsigned __int128)v55) >> 64);
      unsigned int v62 = v63[0];
      *((void *)v63[0] + 3) = v61;
      uint64_t v54 = __udivti3(v56 * v53, (v56 * (unsigned __int128)v53) >> 64);
      v62[2] = v54;
      if (!gCheckGLErrors) {
        goto LABEL_66;
      }
    }

    uint64_t v54 = check_errors(v13);
    goto LABEL_66;
  }

  do
    unsigned int v45 = __ldaxr(v14);
  while (__stlxr(v45 - 1, v14));
  [(id)DYGetGLGuestAppClient(v23) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 24) + 6192LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63[0]) {
    free(v63[0]);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  id v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  id v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  volatile int *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  unint64_t v56;
  void *v57;
  int v58;
  uint64_t v59;
  void *v60;
  uint64_t v61;
  void *v62;
  void *v63[2];
  int v64;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_60:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 24) + 6192LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    else {
      snprintf((char *)(v13 + 4709), 0x40uLL, "Cei@%u%s", dword_1F2ED4[(int)a2 - 6144], "i");
    }
    GPUTools::FB::Encode((uint64_t)v63, 853LL, v13 + 4709, v18, v19, v20, v21, v22, *(void *)v13);
    char v25 = byte_2071AD;
    if ((byte_2071AD & 1) != 0) {
      breakpoint_break((uint64_t)v63, (volatile int *)&stru_338.segname[13], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (v26 & 0x10 | v25 & 4) {
      goto LABEL_32;
    }
    id v27 = [(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(_DWORD)v27)
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 32) + 6192LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v29 = v26 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v63[0];
        *((void *)v63[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v60 = v63[0];
        *((void *)v63[0] + 3) = v59;
        uint64_t v26 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v60[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v26 = check_errors(v13);
LABEL_32:
      id v32 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v26), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v32) {
        id v32 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v33);
      }
      unsigned int v35 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
      if ((_DWORD)v35) {
        id v32 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v35, v34);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v13, (uint64_t)v63);
      }
      uint64_t v36 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
      uint64_t v37 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v37 && gBreakOnError)
      {
        uint64_t v50 = 3LL;
        uint64_t v51 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v25 & 2) == 0) {
          goto LABEL_41;
        }
        uint64_t v50 = 2LL;
        uint64_t v51 = 853LL;
      }

      breakpoint_break((uint64_t)v63, (volatile int *)v51, v50, v37, v13);
LABEL_41:
      uint64_t v38 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v36) defaultFbufStream];
      unsigned int v39 = (unsigned int *)((char *)v38 + 56);
      do
        unsigned int v40 = __ldaxr(v39);
      while (__stlxr(1u, v39));
      if (v40 == 1)
      {
        do
        {
          while (*v39 == 1)
            ;
          do
            unsigned int v41 = __ldaxr(v39);
          while (__stlxr(1u, v39));
        }

        while (v41 == 1);
      }

      GPUTools::FB::Stream::Write_nolock(v38, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
      atomic_store(0, v39);
      do
      {
        unsigned int v42 = __ldaxr(v14);
        signed int v43 = v42 - 1;
      }

      while (__stlxr(v43, v14));
      if (gCheckGLErrors) {
        BOOL v44 = v43 < 1;
      }
      else {
        BOOL v44 = 1;
      }
      if (!v44) {
        handle_opengl_thread_conflict((const void **)v13);
      }
      goto LABEL_54;
    }

    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if ((v26 & 8) != 0) {
      goto LABEL_32;
    }
    int v52 = (volatile int *)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    apply_draw_overrides(v13, v52);
    uint64_t v53 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 32) + 6192LL))( a1,  a2,  a3,  a4);
    uint64_t v54 = mach_absolute_time();
    uint64_t v55 = v54 - v53;
    unint64_t v56 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      __uint64_t v57 = v63[0];
      *((void *)v63[0] + 2) = v53;
      v57[3] = v55;
      if (!gCheckGLErrors)
      {
LABEL_66:
        int v58 = [(id)DYGetGLGuestAppClient(v54) overrideFlags];
        unapply_draw_overrides(v13, v58);
        goto LABEL_32;
      }
    }

    else
    {
      uint64_t v61 = __udivti3(g_DYTimebaseInfo * v55, (g_DYTimebaseInfo * (unsigned __int128)v55) >> 64);
      unsigned int v62 = v63[0];
      *((void *)v63[0] + 3) = v61;
      uint64_t v54 = __udivti3(v56 * v53, (v56 * (unsigned __int128)v53) >> 64);
      v62[2] = v54;
      if (!gCheckGLErrors) {
        goto LABEL_66;
      }
    }

    uint64_t v54 = check_errors(v13);
    goto LABEL_66;
  }

  do
    unsigned int v45 = __ldaxr(v14);
  while (__stlxr(v45 - 1, v14));
  [(id)DYGetGLGuestAppClient(v23) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 24) + 6192LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63[0]) {
    free(v63[0]);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  char *v18;
  id v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  id v28;
  volatile int *v29;
  uint64_t v30;
  int v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    char v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v13);
    char v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_35:
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      id v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 24) + 6192LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(v25) state];
  if (v18 == (_BYTE *)&dword_0 + 1)
  {
    uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        id v23 = __ldaxr(v14);
      while (__stlxr(v23 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  uint64_t v19 = [(id)DYGetGLGuestAppClient(v18) overrideFlags];
  if ((_DWORD)v19)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if ((v28 & 8) == 0)
    {
      uint64_t v29 = (volatile int *)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
      apply_draw_overrides(v13, v29);
      unint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 32) + 6192LL))( a1,  a2,  a3,  a4);
      ++*(void *)(v13 + 3704);
      if (gCheckGLErrors)
      {
        unint64_t v30 = check_errors(v13);
        if (gBreakOnError)
        {
          unsigned int v33 = *(unsigned int *)(v13 + 3404);
          if ((_DWORD)v33) {
            breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v33, v13);
          }
        }
      }

      id v31 = [(id)DYGetGLGuestAppClient(v30) overrideFlags];
      unapply_draw_overrides(v13, v31);
    }
  }

  else
  {
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 32) + 6192LL))( a1,  a2,  a3,  a4);
    ++*(void *)(v13 + 3704);
    if (gCheckGLErrors)
    {
      check_errors(v13);
      if (gBreakOnError)
      {
        id v32 = *(unsigned int *)(v13 + 3404);
        if ((_DWORD)v32) {
          breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v13);
        }
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v14);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  char *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  id v31;
  volatile int *v32;
  uint64_t v33;
  uint64_t v34;
  int64x2_t v35;
  int v36;
  uint64_t v37;
  uint64_t v38;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v27 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_35:
        uint64_t v29 = __ldaxr(v14);
      while (__stlxr(v29 - 1, v14));
      unint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 24) + 6192LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(v28) state];
  if (v18 == (_BYTE *)&dword_0 + 1)
  {
    uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  uint64_t v19 = [(id)DYGetGLGuestAppClient(v18) overrideFlags];
  if ((_DWORD)v19)
  {
    id v31 = [(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if ((v31 & 8) == 0)
    {
      id v32 = (volatile int *)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
      apply_draw_overrides(v13, v32);
      unsigned int v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 32) + 6192LL))( a1,  a2,  a3,  a4);
      unsigned int v34 = mach_absolute_time();
      unsigned int v35 = vdupq_n_s64(1uLL);
      v35.i64[0] = v34 - v33;
      *(int64x2_t *)(v13 + 3696) = vaddq_s64(v35, *(int64x2_t *)(v13 + 3696));
      if (gCheckGLErrors)
      {
        unsigned int v34 = check_errors(v13);
        if (gBreakOnError)
        {
          uint64_t v38 = *(unsigned int *)(v13 + 3404);
          if ((_DWORD)v38) {
            breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v38, v13);
          }
        }
      }

      uint64_t v36 = [(id)DYGetGLGuestAppClient(v34) overrideFlags];
      unapply_draw_overrides(v13, v36);
    }
  }

  else
  {
    uint64_t v20 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const int *))(*(void *)(v13 + 32) + 6192LL))( a1,  a2,  a3,  a4);
    uint64_t v21 = mach_absolute_time();
    uint64_t v22 = vdupq_n_s64(1uLL);
    v22.i64[0] = v21 - v20;
    *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
    if (gCheckGLErrors)
    {
      check_errors(v13);
      if (gBreakOnError)
      {
        uint64_t v37 = *(unsigned int *)(v13 + 3404);
        if ((_DWORD)v37) {
          breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v37, v13);
        }
      }
    }
  }

  do
  {
    id v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    char v25 = v24 < 1;
  }
  else {
    char v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_71D8C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void clear_bufferuiv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, const unsigned int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_60:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 24) + 6200LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    else {
      snprintf((char *)(v13 + 4709), 0x40uLL, "Cei@%u%s", dword_1F2EC8[(int)a2 - 6144], "ui");
    }
    GPUTools::FB::Encode((uint64_t)v63, 854LL, v13 + 4709, v18, v19, v20, v21, v22, *(void *)v13);
    char v25 = byte_2071AE;
    if ((byte_2071AE & 1) != 0) {
      breakpoint_break((uint64_t)v63, (volatile int *)&stru_338.segname[14], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (v26 & 0x10 | v25 & 4) {
      goto LABEL_32;
    }
    id v27 = [(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(_DWORD)v27)
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 32) + 6200LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v29 = v26 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v63[0];
        *((void *)v63[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v60 = v63[0];
        *((void *)v63[0] + 3) = v59;
        uint64_t v26 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v60[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v26 = check_errors(v13);
LABEL_32:
      id v32 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v26), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v32) {
        id v32 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v33);
      }
      unsigned int v35 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
      if ((_DWORD)v35) {
        id v32 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v35, v34);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v13, (uint64_t)v63);
      }
      uint64_t v36 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
      uint64_t v37 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v37 && gBreakOnError)
      {
        uint64_t v50 = 3LL;
        uint64_t v51 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v25 & 2) == 0) {
          goto LABEL_41;
        }
        uint64_t v50 = 2LL;
        uint64_t v51 = 854LL;
      }

      breakpoint_break((uint64_t)v63, (volatile int *)v51, v50, v37, v13);
LABEL_41:
      uint64_t v38 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v36) defaultFbufStream];
      unsigned int v39 = (unsigned int *)((char *)v38 + 56);
      do
        unsigned int v40 = __ldaxr(v39);
      while (__stlxr(1u, v39));
      if (v40 == 1)
      {
        do
        {
          while (*v39 == 1)
            ;
          do
            unsigned int v41 = __ldaxr(v39);
          while (__stlxr(1u, v39));
        }

        while (v41 == 1);
      }

      GPUTools::FB::Stream::Write_nolock(v38, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
      atomic_store(0, v39);
      do
      {
        unsigned int v42 = __ldaxr(v14);
        signed int v43 = v42 - 1;
      }

      while (__stlxr(v43, v14));
      if (gCheckGLErrors) {
        BOOL v44 = v43 < 1;
      }
      else {
        BOOL v44 = 1;
      }
      if (!v44) {
        handle_opengl_thread_conflict((const void **)v13);
      }
      goto LABEL_54;
    }

    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if ((v26 & 8) != 0) {
      goto LABEL_32;
    }
    int v52 = (volatile int *)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    apply_draw_overrides(v13, v52);
    uint64_t v53 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 32) + 6200LL))( a1,  a2,  a3,  a4);
    uint64_t v54 = mach_absolute_time();
    uint64_t v55 = v54 - v53;
    unint64_t v56 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      __uint64_t v57 = v63[0];
      *((void *)v63[0] + 2) = v53;
      v57[3] = v55;
      if (!gCheckGLErrors)
      {
LABEL_66:
        int v58 = [(id)DYGetGLGuestAppClient(v54) overrideFlags];
        unapply_draw_overrides(v13, v58);
        goto LABEL_32;
      }
    }

    else
    {
      uint64_t v61 = __udivti3(g_DYTimebaseInfo * v55, (g_DYTimebaseInfo * (unsigned __int128)v55) >> 64);
      unsigned int v62 = v63[0];
      *((void *)v63[0] + 3) = v61;
      uint64_t v54 = __udivti3(v56 * v53, (v56 * (unsigned __int128)v53) >> 64);
      v62[2] = v54;
      if (!gCheckGLErrors) {
        goto LABEL_66;
      }
    }

    uint64_t v54 = check_errors(v13);
    goto LABEL_66;
  }

  do
    unsigned int v45 = __ldaxr(v14);
  while (__stlxr(v45 - 1, v14));
  [(id)DYGetGLGuestAppClient(v23) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 24) + 6200LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63[0]) {
    free(v63[0]);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  id v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  id v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  volatile int *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  unint64_t v56;
  void *v57;
  int v58;
  uint64_t v59;
  void *v60;
  uint64_t v61;
  void *v62;
  void *v63[2];
  int v64;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_60:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 24) + 6200LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    else {
      snprintf((char *)(v13 + 4709), 0x40uLL, "Cei@%u%s", dword_1F2ED4[(int)a2 - 6144], "ui");
    }
    GPUTools::FB::Encode((uint64_t)v63, 854LL, v13 + 4709, v18, v19, v20, v21, v22, *(void *)v13);
    char v25 = byte_2071AE;
    if ((byte_2071AE & 1) != 0) {
      breakpoint_break((uint64_t)v63, (volatile int *)&stru_338.segname[14], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (v26 & 0x10 | v25 & 4) {
      goto LABEL_32;
    }
    id v27 = [(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(_DWORD)v27)
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 32) + 6200LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v29 = v26 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v63[0];
        *((void *)v63[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v60 = v63[0];
        *((void *)v63[0] + 3) = v59;
        uint64_t v26 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v60[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v26 = check_errors(v13);
LABEL_32:
      id v32 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v26), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v32) {
        id v32 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v33);
      }
      unsigned int v35 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
      if ((_DWORD)v35) {
        id v32 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v35, v34);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v13, (uint64_t)v63);
      }
      uint64_t v36 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
      uint64_t v37 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v37 && gBreakOnError)
      {
        uint64_t v50 = 3LL;
        uint64_t v51 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v25 & 2) == 0) {
          goto LABEL_41;
        }
        uint64_t v50 = 2LL;
        uint64_t v51 = 854LL;
      }

      breakpoint_break((uint64_t)v63, (volatile int *)v51, v50, v37, v13);
LABEL_41:
      uint64_t v38 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v36) defaultFbufStream];
      unsigned int v39 = (unsigned int *)((char *)v38 + 56);
      do
        unsigned int v40 = __ldaxr(v39);
      while (__stlxr(1u, v39));
      if (v40 == 1)
      {
        do
        {
          while (*v39 == 1)
            ;
          do
            unsigned int v41 = __ldaxr(v39);
          while (__stlxr(1u, v39));
        }

        while (v41 == 1);
      }

      GPUTools::FB::Stream::Write_nolock(v38, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
      atomic_store(0, v39);
      do
      {
        unsigned int v42 = __ldaxr(v14);
        signed int v43 = v42 - 1;
      }

      while (__stlxr(v43, v14));
      if (gCheckGLErrors) {
        BOOL v44 = v43 < 1;
      }
      else {
        BOOL v44 = 1;
      }
      if (!v44) {
        handle_opengl_thread_conflict((const void **)v13);
      }
      goto LABEL_54;
    }

    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if ((v26 & 8) != 0) {
      goto LABEL_32;
    }
    int v52 = (volatile int *)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    apply_draw_overrides(v13, v52);
    uint64_t v53 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 32) + 6200LL))( a1,  a2,  a3,  a4);
    uint64_t v54 = mach_absolute_time();
    uint64_t v55 = v54 - v53;
    unint64_t v56 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      __uint64_t v57 = v63[0];
      *((void *)v63[0] + 2) = v53;
      v57[3] = v55;
      if (!gCheckGLErrors)
      {
LABEL_66:
        int v58 = [(id)DYGetGLGuestAppClient(v54) overrideFlags];
        unapply_draw_overrides(v13, v58);
        goto LABEL_32;
      }
    }

    else
    {
      uint64_t v61 = __udivti3(g_DYTimebaseInfo * v55, (g_DYTimebaseInfo * (unsigned __int128)v55) >> 64);
      unsigned int v62 = v63[0];
      *((void *)v63[0] + 3) = v61;
      uint64_t v54 = __udivti3(v56 * v53, (v56 * (unsigned __int128)v53) >> 64);
      v62[2] = v54;
      if (!gCheckGLErrors) {
        goto LABEL_66;
      }
    }

    uint64_t v54 = check_errors(v13);
    goto LABEL_66;
  }

  do
    unsigned int v45 = __ldaxr(v14);
  while (__stlxr(v45 - 1, v14));
  [(id)DYGetGLGuestAppClient(v23) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 24) + 6200LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63[0]) {
    free(v63[0]);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  char *v18;
  id v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  id v28;
  volatile int *v29;
  uint64_t v30;
  int v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    char v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v13);
    char v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_35:
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      id v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 24) + 6200LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(v25) state];
  if (v18 == (_BYTE *)&dword_0 + 1)
  {
    uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        id v23 = __ldaxr(v14);
      while (__stlxr(v23 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  uint64_t v19 = [(id)DYGetGLGuestAppClient(v18) overrideFlags];
  if ((_DWORD)v19)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if ((v28 & 8) == 0)
    {
      uint64_t v29 = (volatile int *)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
      apply_draw_overrides(v13, v29);
      unint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 32)
                                                                                                 + 6200LL))( a1,  a2,  a3,  a4);
      ++*(void *)(v13 + 3704);
      if (gCheckGLErrors)
      {
        unint64_t v30 = check_errors(v13);
        if (gBreakOnError)
        {
          unsigned int v33 = *(unsigned int *)(v13 + 3404);
          if ((_DWORD)v33) {
            breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v33, v13);
          }
        }
      }

      id v31 = [(id)DYGetGLGuestAppClient(v30) overrideFlags];
      unapply_draw_overrides(v13, v31);
    }
  }

  else
  {
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 32) + 6200LL))( a1,  a2,  a3,  a4);
    ++*(void *)(v13 + 3704);
    if (gCheckGLErrors)
    {
      check_errors(v13);
      if (gBreakOnError)
      {
        id v32 = *(unsigned int *)(v13 + 3404);
        if ((_DWORD)v32) {
          breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v13);
        }
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v14);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  char *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  id v31;
  volatile int *v32;
  uint64_t v33;
  uint64_t v34;
  int64x2_t v35;
  int v36;
  uint64_t v37;
  uint64_t v38;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v27 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_35:
        uint64_t v29 = __ldaxr(v14);
      while (__stlxr(v29 - 1, v14));
      unint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 24) + 6200LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(v28) state];
  if (v18 == (_BYTE *)&dword_0 + 1)
  {
    uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  uint64_t v19 = [(id)DYGetGLGuestAppClient(v18) overrideFlags];
  if ((_DWORD)v19)
  {
    id v31 = [(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if ((v31 & 8) == 0)
    {
      id v32 = (volatile int *)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
      apply_draw_overrides(v13, v32);
      unsigned int v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 32) + 6200LL))( a1,  a2,  a3,  a4);
      unsigned int v34 = mach_absolute_time();
      unsigned int v35 = vdupq_n_s64(1uLL);
      v35.i64[0] = v34 - v33;
      *(int64x2_t *)(v13 + 3696) = vaddq_s64(v35, *(int64x2_t *)(v13 + 3696));
      if (gCheckGLErrors)
      {
        unsigned int v34 = check_errors(v13);
        if (gBreakOnError)
        {
          uint64_t v38 = *(unsigned int *)(v13 + 3404);
          if ((_DWORD)v38) {
            breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v38, v13);
          }
        }
      }

      uint64_t v36 = [(id)DYGetGLGuestAppClient(v34) overrideFlags];
      unapply_draw_overrides(v13, v36);
    }
  }

  else
  {
    uint64_t v20 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const unsigned int *))(*(void *)(v13 + 32) + 6200LL))( a1,  a2,  a3,  a4);
    uint64_t v21 = mach_absolute_time();
    uint64_t v22 = vdupq_n_s64(1uLL);
    v22.i64[0] = v21 - v20;
    *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
    if (gCheckGLErrors)
    {
      check_errors(v13);
      if (gBreakOnError)
      {
        uint64_t v37 = *(unsigned int *)(v13 + 3404);
        if ((_DWORD)v37) {
          breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v37, v13);
        }
      }
    }
  }

  do
  {
    id v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    char v25 = v24 < 1;
  }
  else {
    char v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_72308( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void clear_bufferfv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, const float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_60:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 24) + 6208LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    else {
      snprintf((char *)(v13 + 4709), 0x40uLL, "Cei@%u%s", dword_1F2EC8[(int)a2 - 6144], "f");
    }
    GPUTools::FB::Encode((uint64_t)v63, 852LL, v13 + 4709, v18, v19, v20, v21, v22, *(void *)v13);
    char v25 = byte_2071AC;
    if ((byte_2071AC & 1) != 0) {
      breakpoint_break((uint64_t)v63, (volatile int *)&stru_338.segname[12], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (v26 & 0x10 | v25 & 4) {
      goto LABEL_32;
    }
    id v27 = [(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(_DWORD)v27)
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 32) + 6208LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v29 = v26 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v63[0];
        *((void *)v63[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v60 = v63[0];
        *((void *)v63[0] + 3) = v59;
        uint64_t v26 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v60[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v26 = check_errors(v13);
LABEL_32:
      id v32 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v26), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v32) {
        id v32 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v33);
      }
      unsigned int v35 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
      if ((_DWORD)v35) {
        id v32 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v35, v34);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v13, (uint64_t)v63);
      }
      uint64_t v36 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
      uint64_t v37 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v37 && gBreakOnError)
      {
        uint64_t v50 = 3LL;
        uint64_t v51 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v25 & 2) == 0) {
          goto LABEL_41;
        }
        uint64_t v50 = 2LL;
        uint64_t v51 = 852LL;
      }

      breakpoint_break((uint64_t)v63, (volatile int *)v51, v50, v37, v13);
LABEL_41:
      uint64_t v38 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v36) defaultFbufStream];
      unsigned int v39 = (unsigned int *)((char *)v38 + 56);
      do
        unsigned int v40 = __ldaxr(v39);
      while (__stlxr(1u, v39));
      if (v40 == 1)
      {
        do
        {
          while (*v39 == 1)
            ;
          do
            unsigned int v41 = __ldaxr(v39);
          while (__stlxr(1u, v39));
        }

        while (v41 == 1);
      }

      GPUTools::FB::Stream::Write_nolock(v38, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
      atomic_store(0, v39);
      do
      {
        unsigned int v42 = __ldaxr(v14);
        signed int v43 = v42 - 1;
      }

      while (__stlxr(v43, v14));
      if (gCheckGLErrors) {
        BOOL v44 = v43 < 1;
      }
      else {
        BOOL v44 = 1;
      }
      if (!v44) {
        handle_opengl_thread_conflict((const void **)v13);
      }
      goto LABEL_54;
    }

    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if ((v26 & 8) != 0) {
      goto LABEL_32;
    }
    int v52 = (volatile int *)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    apply_draw_overrides(v13, v52);
    uint64_t v53 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 32) + 6208LL))( a1,  a2,  a3,  a4);
    uint64_t v54 = mach_absolute_time();
    uint64_t v55 = v54 - v53;
    unint64_t v56 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      __uint64_t v57 = v63[0];
      *((void *)v63[0] + 2) = v53;
      v57[3] = v55;
      if (!gCheckGLErrors)
      {
LABEL_66:
        int v58 = [(id)DYGetGLGuestAppClient(v54) overrideFlags];
        unapply_draw_overrides(v13, v58);
        goto LABEL_32;
      }
    }

    else
    {
      uint64_t v61 = __udivti3(g_DYTimebaseInfo * v55, (g_DYTimebaseInfo * (unsigned __int128)v55) >> 64);
      unsigned int v62 = v63[0];
      *((void *)v63[0] + 3) = v61;
      uint64_t v54 = __udivti3(v56 * v53, (v56 * (unsigned __int128)v53) >> 64);
      v62[2] = v54;
      if (!gCheckGLErrors) {
        goto LABEL_66;
      }
    }

    uint64_t v54 = check_errors(v13);
    goto LABEL_66;
  }

  do
    unsigned int v45 = __ldaxr(v14);
  while (__stlxr(v45 - 1, v14));
  [(id)DYGetGLGuestAppClient(v23) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 24) + 6208LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63[0]) {
    free(v63[0]);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  id v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  id v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  volatile int *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  unint64_t v56;
  void *v57;
  int v58;
  uint64_t v59;
  void *v60;
  uint64_t v61;
  void *v62;
  void *v63[2];
  int v64;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_60:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 24) + 6208LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  v63[0] = 0LL;
  v63[1] = 0LL;
  int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    else {
      snprintf((char *)(v13 + 4709), 0x40uLL, "Cei@%u%s", dword_1F2ED4[(int)a2 - 6144], "f");
    }
    GPUTools::FB::Encode((uint64_t)v63, 852LL, v13 + 4709, v18, v19, v20, v21, v22, *(void *)v13);
    char v25 = byte_2071AC;
    if ((byte_2071AC & 1) != 0) {
      breakpoint_break((uint64_t)v63, (volatile int *)&stru_338.segname[12], 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (v26 & 0x10 | v25 & 4) {
      goto LABEL_32;
    }
    id v27 = [(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(_DWORD)v27)
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 32) + 6208LL))( a1,  a2,  a3,  a4);
      uint64_t v26 = mach_absolute_time();
      uint64_t v29 = v26 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v63[0];
        *((void *)v63[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        unsigned int v60 = v63[0];
        *((void *)v63[0] + 3) = v59;
        uint64_t v26 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v60[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      uint64_t v26 = check_errors(v13);
LABEL_32:
      id v32 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v26), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
      if ((_DWORD)v32) {
        id v32 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v63, v33);
      }
      unsigned int v35 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
      if ((_DWORD)v35) {
        id v32 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v63, v35, v34);
      }
      if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
        encode_driver_events((id *)v13, (uint64_t)v63);
      }
      uint64_t v36 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)v63);
      uint64_t v37 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v37 && gBreakOnError)
      {
        uint64_t v50 = 3LL;
        uint64_t v51 = 0xFFFFFFFFLL;
      }

      else
      {
        if ((v25 & 2) == 0) {
          goto LABEL_41;
        }
        uint64_t v50 = 2LL;
        uint64_t v51 = 852LL;
      }

      breakpoint_break((uint64_t)v63, (volatile int *)v51, v50, v37, v13);
LABEL_41:
      uint64_t v38 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v36) defaultFbufStream];
      unsigned int v39 = (unsigned int *)((char *)v38 + 56);
      do
        unsigned int v40 = __ldaxr(v39);
      while (__stlxr(1u, v39));
      if (v40 == 1)
      {
        do
        {
          while (*v39 == 1)
            ;
          do
            unsigned int v41 = __ldaxr(v39);
          while (__stlxr(1u, v39));
        }

        while (v41 == 1);
      }

      GPUTools::FB::Stream::Write_nolock(v38, (GPUTools::FB::Fbuf *)v63, *(unsigned int *)v63[0], 1);
      atomic_store(0, v39);
      do
      {
        unsigned int v42 = __ldaxr(v14);
        signed int v43 = v42 - 1;
      }

      while (__stlxr(v43, v14));
      if (gCheckGLErrors) {
        BOOL v44 = v43 < 1;
      }
      else {
        BOOL v44 = 1;
      }
      if (!v44) {
        handle_opengl_thread_conflict((const void **)v13);
      }
      goto LABEL_54;
    }

    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if ((v26 & 8) != 0) {
      goto LABEL_32;
    }
    int v52 = (volatile int *)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    apply_draw_overrides(v13, v52);
    uint64_t v53 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 32) + 6208LL))( a1,  a2,  a3,  a4);
    uint64_t v54 = mach_absolute_time();
    uint64_t v55 = v54 - v53;
    unint64_t v56 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      __uint64_t v57 = v63[0];
      *((void *)v63[0] + 2) = v53;
      v57[3] = v55;
      if (!gCheckGLErrors)
      {
LABEL_66:
        int v58 = [(id)DYGetGLGuestAppClient(v54) overrideFlags];
        unapply_draw_overrides(v13, v58);
        goto LABEL_32;
      }
    }

    else
    {
      uint64_t v61 = __udivti3(g_DYTimebaseInfo * v55, (g_DYTimebaseInfo * (unsigned __int128)v55) >> 64);
      unsigned int v62 = v63[0];
      *((void *)v63[0] + 3) = v61;
      uint64_t v54 = __udivti3(v56 * v53, (v56 * (unsigned __int128)v53) >> 64);
      v62[2] = v54;
      if (!gCheckGLErrors) {
        goto LABEL_66;
      }
    }

    uint64_t v54 = check_errors(v13);
    goto LABEL_66;
  }

  do
    unsigned int v45 = __ldaxr(v14);
  while (__stlxr(v45 - 1, v14));
  [(id)DYGetGLGuestAppClient(v23) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 24) + 6208LL))( a1,  a2,  a3,  a4);
LABEL_54:
  if (v63[0]) {
    free(v63[0]);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  char *v18;
  id v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  id v28;
  volatile int *v29;
  uint64_t v30;
  int v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    char v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v13);
    char v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_35:
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      id v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 24) + 6208LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(v25) state];
  if (v18 == (_BYTE *)&dword_0 + 1)
  {
    uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        id v23 = __ldaxr(v14);
      while (__stlxr(v23 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  uint64_t v19 = [(id)DYGetGLGuestAppClient(v18) overrideFlags];
  if ((_DWORD)v19)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if ((v28 & 8) == 0)
    {
      uint64_t v29 = (volatile int *)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
      apply_draw_overrides(v13, v29);
      unint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 32)
                                                                                          + 6208LL))( a1,  a2,  a3,  a4);
      ++*(void *)(v13 + 3704);
      if (gCheckGLErrors)
      {
        unint64_t v30 = check_errors(v13);
        if (gBreakOnError)
        {
          unsigned int v33 = *(unsigned int *)(v13 + 3404);
          if ((_DWORD)v33) {
            breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v33, v13);
          }
        }
      }

      id v31 = [(id)DYGetGLGuestAppClient(v30) overrideFlags];
      unapply_draw_overrides(v13, v31);
    }
  }

  else
  {
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 32) + 6208LL))( a1,  a2,  a3,  a4);
    ++*(void *)(v13 + 3704);
    if (gCheckGLErrors)
    {
      check_errors(v13);
      if (gBreakOnError)
      {
        id v32 = *(unsigned int *)(v13 + 3404);
        if ((_DWORD)v32) {
          breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v13);
        }
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v14);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  char *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  id v31;
  volatile int *v32;
  uint64_t v33;
  uint64_t v34;
  int64x2_t v35;
  int v36;
  uint64_t v37;
  uint64_t v38;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v27 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_35:
        uint64_t v29 = __ldaxr(v14);
      while (__stlxr(v29 - 1, v14));
      unint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_37:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 24) + 6208LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_WORD *)(v13 + 4838) = 257;
  uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(v28) state];
  if (v18 == (_BYTE *)&dword_0 + 1)
  {
    uint64_t v18 = (char *)[(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_37;
    }
  }

  uint64_t v19 = [(id)DYGetGLGuestAppClient(v18) overrideFlags];
  if ((_DWORD)v19)
  {
    id v31 = [(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if ((v31 & 8) == 0)
    {
      id v32 = (volatile int *)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
      apply_draw_overrides(v13, v32);
      unsigned int v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 32) + 6208LL))( a1,  a2,  a3,  a4);
      unsigned int v34 = mach_absolute_time();
      unsigned int v35 = vdupq_n_s64(1uLL);
      v35.i64[0] = v34 - v33;
      *(int64x2_t *)(v13 + 3696) = vaddq_s64(v35, *(int64x2_t *)(v13 + 3696));
      if (gCheckGLErrors)
      {
        unsigned int v34 = check_errors(v13);
        if (gBreakOnError)
        {
          uint64_t v38 = *(unsigned int *)(v13 + 3404);
          if ((_DWORD)v38) {
            breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v38, v13);
          }
        }
      }

      uint64_t v36 = [(id)DYGetGLGuestAppClient(v34) overrideFlags];
      unapply_draw_overrides(v13, v36);
    }
  }

  else
  {
    uint64_t v20 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, const float *))(*(void *)(v13 + 32) + 6208LL))( a1,  a2,  a3,  a4);
    uint64_t v21 = mach_absolute_time();
    uint64_t v22 = vdupq_n_s64(1uLL);
    v22.i64[0] = v21 - v20;
    *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
    if (gCheckGLErrors)
    {
      check_errors(v13);
      if (gBreakOnError)
      {
        uint64_t v37 = *(unsigned int *)(v13 + 3404);
        if ((_DWORD)v37) {
          breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v37, v13);
        }
      }
    }
  }

  do
  {
    id v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    char v25 = v24 < 1;
  }
  else {
    char v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_72884( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void clear_bufferfi(__GLIContextRec *a1, unint64_t a2, uint64_t a3, float a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_58:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, unint64_t, uint64_t, uint64_t, float))(*(void *)(v15 + 24)
                                                                                           + 6216LL))( a1,  a2,  a3,  a5,  a4);
      return;
    }
  }

  *(_WORD *)(v15 + 4838) = 257;
  int v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (uint64_t)v64;
    uint64_t v21 = v65;
    uint64_t v23 = v65 - (void)v64;
    unsigned int v24 = v66;
    unint64_t v25 = v66 - (v65 - (void)v64);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v66 += v51;
    uint64_t v22 = (uint64_t)malloc(v51 + v24);
    int v64 = (void *)v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = v23 + v22;
LABEL_24:
        *(_DWORD *)(v21 + 64) = 0;
        *(_OWORD *)(v21 + 32) = 0u;
        *(_OWORD *)(v21 + 48) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *(_OWORD *)(v21 + 16) = 0u;
        uint64_t v65 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v64);
        *(_DWORD *)(v22 + 4) = 851;
        *(_DWORD *)(v22 + 32) = 0;
        __uint64_t v63 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v63);
        *(void *)(v22 + 8) = v63;
        strcpy((char *)(v22 + 36), "Ceifi");
        *(void *)(v22 + 44) = *(void *)v15;
        *(_DWORD *)(v22 + 52) = a2;
        *(_DWORD *)(v22 + 56) = a3;
        *(float *)(v22 + 60) = a4;
        *(_DWORD *)(v22 + 64) = a5;
        LOBYTE(v23) = byte_2071AB;
        if ((byte_2071AB & 1) != 0) {
          breakpoint_break( (uint64_t)&v64,  (volatile int *)&stru_338.segname[11],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (v27 & 0x10 | v23 & 4) {
          goto LABEL_30;
        }
        id v28 = [(id)DYGetGLGuestAppClient(v27) overrideFlags];
        if (!(_DWORD)v28)
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, unint64_t, uint64_t, uint64_t, float))(*(void *)(v15 + 32)
                                                                                               + 6216LL))( a1,  a2,  a3,  a5,  a4);
          uint64_t v27 = mach_absolute_time();
          uint64_t v30 = v27 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            id v32 = v64;
            *((void *)v64 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          else
          {
            uint64_t v59 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v60 = v64;
            *((void *)v64 + 3) = v59;
            uint64_t v27 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v60[2] = v27;
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          uint64_t v27 = check_errors(v15);
LABEL_30:
          id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v27), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
          if ((_DWORD)v33) {
            id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v34);
          }
          uint64_t v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
          if ((_DWORD)v36) {
            id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v36, v35);
          }
          if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
            encode_driver_events((id *)v15, (uint64_t)&v64);
          }
          uint64_t v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v64);
          uint64_t v38 = *(unsigned int *)(v15 + 3404);
          if ((_DWORD)v38 && gBreakOnError)
          {
            uint64_t v52 = 3LL;
            uint64_t v53 = 0xFFFFFFFFLL;
          }

          else
          {
            if ((v23 & 2) == 0) {
              goto LABEL_39;
            }
            uint64_t v52 = 2LL;
            uint64_t v53 = 851LL;
          }

          breakpoint_break((uint64_t)&v64, (volatile int *)v53, v52, v38, v15);
LABEL_39:
          unsigned int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
          unsigned int v40 = (unsigned int *)((char *)v39 + 56);
          do
            unsigned int v41 = __ldaxr(v40);
          while (__stlxr(1u, v40));
          if (v41 == 1)
          {
            do
            {
              while (*v40 == 1)
                ;
              do
                unsigned int v42 = __ldaxr(v40);
              while (__stlxr(1u, v40));
            }

            while (v42 == 1);
          }

          GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
          atomic_store(0, v40);
          do
          {
            unsigned int v43 = __ldaxr(v16);
            signed int v44 = v43 - 1;
          }

          while (__stlxr(v44, v16));
          if (gCheckGLErrors) {
            BOOL v45 = v44 < 1;
          }
          else {
            BOOL v45 = 1;
          }
          if (!v45) {
            handle_opengl_thread_conflict((const void **)v15);
          }
          goto LABEL_52;
        }

        uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if ((v27 & 8) != 0) {
          goto LABEL_30;
        }
        uint64_t v54 = (volatile int *)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
        apply_draw_overrides(v15, v54);
        uint64_t v22 = mach_absolute_time();
        (*(void (**)(__GLIContextRec *, unint64_t, uint64_t, uint64_t, float))(*(void *)(v15 + 32)
                                                                                             + 6216LL))( a1,  a2,  a3,  a5,  a4);
        uint64_t v55 = mach_absolute_time();
        uint64_t v56 = v55 - v22;
        a2 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          __uint64_t v57 = v64;
          *((void *)v64 + 2) = v22;
          v57[3] = v56;
          if (!gCheckGLErrors)
          {
LABEL_67:
            int v58 = [(id)DYGetGLGuestAppClient(v55) overrideFlags];
            unapply_draw_overrides(v15, v58);
            goto LABEL_30;
          }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  uint64_t v27;
  id v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  volatile int *v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  int v58;
  uint64_t v59;
  void *v60;
  uint64_t v61;
  void *v62;
  __uint64_t v63;
  void *v64;
  uint64_t v65;
  unsigned int v66;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      id v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v15);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_58:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, unint64_t, uint64_t, uint64_t, float))(*(void *)(v15 + 24)
                                                                                           + 6216LL))( a1,  a2,  a3,  a5,  a4);
      return;
    }
  }

  *(_WORD *)(v15 + 4838) = 257;
  int v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (uint64_t)v64;
    uint64_t v21 = v65;
    uint64_t v23 = v65 - (void)v64;
    unsigned int v24 = v66;
    unint64_t v25 = v66 - (v65 - (void)v64);
    if (v25 > 0x43) {
      goto LABEL_24;
    }
    int v51 = (323 - v25) & 0xFFFFFF00;
    v66 += v51;
    uint64_t v22 = (uint64_t)malloc(v51 + v24);
    int v64 = (void *)v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = v23 + v22;
LABEL_24:
        *(_DWORD *)(v21 + 64) = 0;
        *(_OWORD *)(v21 + 32) = 0u;
        *(_OWORD *)(v21 + 48) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *(_OWORD *)(v21 + 16) = 0u;
        uint64_t v65 = v21 + 68;
        GPUTools::FB::Fbuf::align((char **)&v64);
        *(_DWORD *)(v22 + 4) = 851;
        *(_DWORD *)(v22 + 32) = 0;
        __uint64_t v63 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v63);
        *(void *)(v22 + 8) = v63;
        strcpy((char *)(v22 + 36), "Ceifi");
        *(void *)(v22 + 44) = *(void *)v15;
        *(_DWORD *)(v22 + 52) = a2;
        *(_DWORD *)(v22 + 56) = a3;
        *(float *)(v22 + 60) = a4;
        *(_DWORD *)(v22 + 64) = a5;
        LOBYTE(v23) = byte_2071AB;
        if ((byte_2071AB & 1) != 0) {
          breakpoint_break( (uint64_t)&v64,  (volatile int *)&stru_338.segname[11],  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (v27 & 0x10 | v23 & 4) {
          goto LABEL_30;
        }
        id v28 = [(id)DYGetGLGuestAppClient(v27) overrideFlags];
        if (!(_DWORD)v28)
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, unint64_t, uint64_t, uint64_t, float))(*(void *)(v15 + 32)
                                                                                               + 6216LL))( a1,  a2,  a3,  a5,  a4);
          uint64_t v27 = mach_absolute_time();
          uint64_t v30 = v27 - v29;
          unint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            id v32 = v64;
            *((void *)v64 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          else
          {
            uint64_t v59 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            unsigned int v60 = v64;
            *((void *)v64 + 3) = v59;
            uint64_t v27 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v60[2] = v27;
            if (!gCheckGLErrors) {
              goto LABEL_30;
            }
          }

          uint64_t v27 = check_errors(v15);
LABEL_30:
          id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v27), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
          if ((_DWORD)v33) {
            id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v34);
          }
          uint64_t v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
          if ((_DWORD)v36) {
            id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v36, v35);
          }
          if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
            encode_driver_events((id *)v15, (uint64_t)&v64);
          }
          uint64_t v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v64);
          uint64_t v38 = *(unsigned int *)(v15 + 3404);
          if ((_DWORD)v38 && gBreakOnError)
          {
            uint64_t v52 = 3LL;
            uint64_t v53 = 0xFFFFFFFFLL;
          }

          else
          {
            if ((v23 & 2) == 0) {
              goto LABEL_39;
            }
            uint64_t v52 = 2LL;
            uint64_t v53 = 851LL;
          }

          breakpoint_break((uint64_t)&v64, (volatile int *)v53, v52, v38, v15);
LABEL_39:
          unsigned int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
          unsigned int v40 = (unsigned int *)((char *)v39 + 56);
          do
            unsigned int v41 = __ldaxr(v40);
          while (__stlxr(1u, v40));
          if (v41 == 1)
          {
            do
            {
              while (*v40 == 1)
                ;
              do
                unsigned int v42 = __ldaxr(v40);
              while (__stlxr(1u, v40));
            }

            while (v42 == 1);
          }

          GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
          atomic_store(0, v40);
          do
          {
            unsigned int v43 = __ldaxr(v16);
            signed int v44 = v43 - 1;
          }

          while (__stlxr(v44, v16));
          if (gCheckGLErrors) {
            BOOL v45 = v44 < 1;
          }
          else {
            BOOL v45 = 1;
          }
          if (!v45) {
            handle_opengl_thread_conflict((const void **)v15);
          }
          goto LABEL_52;
        }

        uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if ((v27 & 8) != 0) {
          goto LABEL_30;
        }
        uint64_t v54 = (volatile int *)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
        apply_draw_overrides(v15, v54);
        uint64_t v22 = mach_absolute_time();
        (*(void (**)(__GLIContextRec *, unint64_t, uint64_t, uint64_t, float))(*(void *)(v15 + 32)
                                                                                             + 6216LL))( a1,  a2,  a3,  a5,  a4);
        uint64_t v55 = mach_absolute_time();
        uint64_t v56 = v55 - v22;
        a2 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          __uint64_t v57 = v64;
          *((void *)v64 + 2) = v22;
          v57[3] = v56;
          if (!gCheckGLErrors)
          {
LABEL_67:
            int v58 = [(id)DYGetGLGuestAppClient(v55) overrideFlags];
            unapply_draw_overrides(v15, v58);
            goto LABEL_30;
          }

void sub_72E9C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t get_stringi(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_56:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6224LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v57, 863LL, 256LL, (uint64_t)"Ceui", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_2071B7;
    if ((byte_2071B7 & 1) != 0) {
      breakpoint_break( (uint64_t)v57,  (volatile int *)((char *)&stru_338.addr + 7),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if ([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4)
    {
      uint64_t v29 = 0LL;
      goto LABEL_28;
    }

    uint64_t v28 = mach_absolute_time();
    uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6224LL))(a1, a2, a3);
    uint64_t v30 = mach_absolute_time() - v28;
    unint64_t v31 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      id v32 = v57[0];
      *((void *)v57[0] + 2) = v28;
      v32[3] = v30;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
      uint64_t v56 = v57[0];
      *((void *)v57[0] + 3) = v55;
      v56[2] = __udivti3(v31 * v28, (v31 * (unsigned __int128)v28) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v11);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v57, 4294955008LL, (uint64_t)"S", v23, v24, v25, v26, v27, v29);
    id v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      id v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v57, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v37) {
      id v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v57, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v57);
    }
    uint64_t v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v57);
    uint64_t v39 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v22 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 863LL;
    }

    breakpoint_break((uint64_t)v57, (volatile int *)v54, v53, v39, v11);
LABEL_37:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    unsigned int v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          unsigned int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v57, *(unsigned int *)v57[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v12);
      signed int v45 = v44 - 1;
    }

    while (__stlxr(v45, v12));
    if (gCheckGLErrors) {
      BOOL v46 = v45 < 1;
    }
    else {
      BOOL v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_50;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6224LL))(a1, a2, a3);
LABEL_50:
  if (v57[0]) {
    free(v57[0]);
  }
  return v29;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  id v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  void *v57[2];
  int v58;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_56:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6224LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    GPUTools::FB::Encode((uint64_t)v57, 863LL, 256LL, (uint64_t)"Ceui", v16, v17, v18, v19, *(void *)v11);
    char v22 = byte_2071B7;
    if ((byte_2071B7 & 1) != 0) {
      breakpoint_break( (uint64_t)v57,  (volatile int *)((char *)&stru_338.addr + 7),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if ([(id)DYGetGLGuestAppClient(v21) overrideFlags] & 0x10 | v22 & 4)
    {
      uint64_t v29 = 0LL;
      goto LABEL_28;
    }

    uint64_t v28 = mach_absolute_time();
    uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6224LL))(a1, a2, a3);
    uint64_t v30 = mach_absolute_time() - v28;
    unint64_t v31 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      id v32 = v57[0];
      *((void *)v57[0] + 2) = v28;
      v32[3] = v30;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
      uint64_t v56 = v57[0];
      *((void *)v57[0] + 3) = v55;
      v56[2] = __udivti3(v31 * v28, (v31 * (unsigned __int128)v28) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    check_errors(v11);
LABEL_28:
    GPUTools::FB::Encode((uint64_t)v57, 4294955008LL, (uint64_t)"S", v23, v24, v25, v26, v27, v29);
    id v34 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v34) {
      id v34 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)v57, v35);
    }
    uint64_t v37 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v37) {
      id v34 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)v57, v37, v36);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)v57);
    }
    uint64_t v38 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)v57);
    uint64_t v39 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v39 && gBreakOnError)
    {
      uint64_t v53 = 3LL;
      uint64_t v54 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v22 & 2) == 0) {
        goto LABEL_37;
      }
      uint64_t v53 = 2LL;
      uint64_t v54 = 863LL;
    }

    breakpoint_break((uint64_t)v57, (volatile int *)v54, v53, v39, v11);
LABEL_37:
    unsigned int v40 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v38) defaultFbufStream];
    unsigned int v41 = (unsigned int *)((char *)v40 + 56);
    do
      unsigned int v42 = __ldaxr(v41);
    while (__stlxr(1u, v41));
    if (v42 == 1)
    {
      do
      {
        while (*v41 == 1)
          ;
        do
          unsigned int v43 = __ldaxr(v41);
        while (__stlxr(1u, v41));
      }

      while (v43 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v40, (GPUTools::FB::Fbuf *)v57, *(unsigned int *)v57[0], 1);
    atomic_store(0, v41);
    do
    {
      unsigned int v44 = __ldaxr(v12);
      signed int v45 = v44 - 1;
    }

    while (__stlxr(v45, v12));
    if (gCheckGLErrors) {
      BOOL v46 = v45 < 1;
    }
    else {
      BOOL v46 = 1;
    }
    if (!v46) {
      handle_opengl_thread_conflict((const void **)v11);
    }
    goto LABEL_50;
  }

  do
    unsigned int v48 = __ldaxr(v12);
  while (__stlxr(v48 - 1, v12));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  uint64_t v29 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6224LL))(a1, a2, a3);
LABEL_50:
  if (v57[0]) {
    free(v57[0]);
  }
  return v29;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v22 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_35:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6224LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6224LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6224LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    id v20 = v19 < 1;
  }
  else {
    id v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v17;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v12);
      while (__stlxr(v28 - 1, v12));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6224LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v25 = __ldaxr(v12);
      while (__stlxr(v25 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6224LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = mach_absolute_time();
  uint64_t v18 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6224LL))(a1, a2, a3);
  uint64_t v19 = mach_absolute_time();
  id v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v11);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v12);
    char v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v18;
}

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  id v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v22;
  dispatch_queue_s *v23;
  unsigned int v24;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  uint64_t v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      char v22 = __ldaxr(v12);
    while (__stlxr(v22 - 1, v12));
    uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6224LL))(v5, a2, a3);
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v16) state] == (char *)&dword_0 + 1)
  {
    uint64_t v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v17 & 1) != 0)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6224LL))( v5,  a2,  a3);
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    id v20 = v19 < 1;
  }
  else {
    id v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return 0LL;
}

void sub_732F0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t fence_sync(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v11);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_57:
        unsigned int v52 = __ldaxr(v12);
      while (__stlxr(v52 - 1, v12));
      uint64_t v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6232LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v60 = 0LL;
  uint64_t v61 = 0LL;
  unsigned int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v18 = (char *)v60;
    uint64_t v17 = v61;
    int64_t v19 = v61 - (_BYTE *)v60;
    unsigned int v20 = v62;
    unint64_t v21 = v62 - (v61 - (_BYTE *)v60);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v54 = (315 - v21) & 0xFFFFFF00;
    v62 += v54;
    uint64_t v18 = (char *)malloc(v54 + v20);
    unsigned int v60 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        uint64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)uint64_t v17 = 0u;
        uint64_t v61 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v60);
        *((_DWORD *)v18 + 1) = 881;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v59 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v59);
        *((void *)v18 + 1) = v59;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_2071C9;
        if ((byte_2071C9 & 1) != 0) {
          breakpoint_break( (uint64_t)&v60,  (volatile int *)((char *)&stru_338.reloff + 1),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        if ([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4)
        {
          uint64_t v30 = 0LL;
          goto LABEL_29;
        }

        uint64_t v29 = mach_absolute_time();
        uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6232LL))( a1,  a2,  a3);
        uint64_t v31 = mach_absolute_time() - v29;
        unint64_t v32 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v33 = v60;
          *((void *)v60 + 2) = v29;
          v33[3] = v31;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v57 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
          int v58 = v60;
          *((void *)v60 + 3) = v57;
          v58[2] = __udivti3(v32 * v29, (v32 * (unsigned __int128)v29) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v11);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v60, 4294955008LL, (uint64_t)"Y", v24, v25, v26, v27, v28, v30);
        id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v35) {
          id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v60, v36);
        }
        uint64_t v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
        if ((_DWORD)v38) {
          id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v60, v38, v37);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v11, (uint64_t)&v60);
        }
        uint64_t v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v60);
        uint64_t v40 = *(unsigned int *)(v11 + 3404);
        if ((_DWORD)v40 && gBreakOnError)
        {
          uint64_t v55 = 3LL;
          uint64_t v56 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v23 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v55 = 2LL;
          uint64_t v56 = 881LL;
        }

        breakpoint_break((uint64_t)&v60, (volatile int *)v56, v55, v40, v11);
LABEL_38:
        unsigned int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
        unsigned int v42 = (unsigned int *)((char *)v41 + 56);
        do
          unsigned int v43 = __ldaxr(v42);
        while (__stlxr(1u, v42));
        if (v43 == 1)
        {
          do
          {
            while (*v42 == 1)
              ;
            do
              unsigned int v44 = __ldaxr(v42);
            while (__stlxr(1u, v42));
          }

          while (v44 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v60, *(unsigned int *)v60, 1);
        atomic_store(0, v42);
        do
        {
          unsigned int v45 = __ldaxr(v12);
          signed int v46 = v45 - 1;
        }

        while (__stlxr(v46, v12));
        if (gCheckGLErrors) {
          BOOL v47 = v46 < 1;
        }
        else {
          BOOL v47 = 1;
        }
        if (!v47) {
          handle_opengl_thread_conflict((const void **)v11);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v18, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v49 = __ldaxr(v12);
  while (__stlxr(v49 - 1, v12));
  [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
  uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6232LL))(a1, a2, a3);
LABEL_51:
  if (v60) {
    free(v60);
  }
  return v30;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  uint64_t v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  uint64_t result;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  int v54;
  uint64_t v55;
  uint64_t v56;
  uint64_t v57;
  void *v58;
  __uint64_t v59;
  void *v60;
  char *v61;
  unsigned int v62;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v11);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_57:
        unsigned int v52 = __ldaxr(v12);
      while (__stlxr(v52 - 1, v12));
      uint64_t v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6232LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  unsigned int v60 = 0LL;
  uint64_t v61 = 0LL;
  unsigned int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v18 = (char *)v60;
    uint64_t v17 = v61;
    int64_t v19 = v61 - (_BYTE *)v60;
    unsigned int v20 = v62;
    unint64_t v21 = v62 - (v61 - (_BYTE *)v60);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v54 = (315 - v21) & 0xFFFFFF00;
    v62 += v54;
    uint64_t v18 = (char *)malloc(v54 + v20);
    unsigned int v60 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        uint64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)uint64_t v17 = 0u;
        uint64_t v61 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v60);
        *((_DWORD *)v18 + 1) = 881;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v59 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v59);
        *((void *)v18 + 1) = v59;
        strcpy(v18 + 36, "Ceui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_2071C9;
        if ((byte_2071C9 & 1) != 0) {
          breakpoint_break( (uint64_t)&v60,  (volatile int *)((char *)&stru_338.reloff + 1),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        if ([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4)
        {
          uint64_t v30 = 0LL;
          goto LABEL_29;
        }

        uint64_t v29 = mach_absolute_time();
        uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6232LL))( a1,  a2,  a3);
        uint64_t v31 = mach_absolute_time() - v29;
        unint64_t v32 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v33 = v60;
          *((void *)v60 + 2) = v29;
          v33[3] = v31;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v57 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
          int v58 = v60;
          *((void *)v60 + 3) = v57;
          v58[2] = __udivti3(v32 * v29, (v32 * (unsigned __int128)v29) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v11);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v60, 4294955008LL, (uint64_t)"Y", v24, v25, v26, v27, v28, v30);
        id v35 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v34), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v35) {
          id v35 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v60, v36);
        }
        uint64_t v38 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
        if ((_DWORD)v38) {
          id v35 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v60, v38, v37);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v35), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v11, (uint64_t)&v60);
        }
        uint64_t v39 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)&v60);
        uint64_t v40 = *(unsigned int *)(v11 + 3404);
        if ((_DWORD)v40 && gBreakOnError)
        {
          uint64_t v55 = 3LL;
          uint64_t v56 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v23 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v55 = 2LL;
          uint64_t v56 = 881LL;
        }

        breakpoint_break((uint64_t)&v60, (volatile int *)v56, v55, v40, v11);
LABEL_38:
        unsigned int v41 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v39) defaultFbufStream];
        unsigned int v42 = (unsigned int *)((char *)v41 + 56);
        do
          unsigned int v43 = __ldaxr(v42);
        while (__stlxr(1u, v42));
        if (v43 == 1)
        {
          do
          {
            while (*v42 == 1)
              ;
            do
              unsigned int v44 = __ldaxr(v42);
            while (__stlxr(1u, v42));
          }

          while (v44 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v41, (GPUTools::FB::Fbuf *)&v60, *(unsigned int *)v60, 1);
        atomic_store(0, v42);
        do
        {
          unsigned int v45 = __ldaxr(v12);
          signed int v46 = v45 - 1;
        }

        while (__stlxr(v46, v12));
        if (gCheckGLErrors) {
          BOOL v47 = v46 < 1;
        }
        else {
          BOOL v47 = 1;
        }
        if (!v47) {
          handle_opengl_thread_conflict((const void **)v11);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v18, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v49 = __ldaxr(v12);
  while (__stlxr(v49 - 1, v12));
  [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
  uint64_t v30 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6232LL))(a1, a2, a3);
LABEL_51:
  if (v60) {
    free(v60);
  }
  return v30;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v11);
    char v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_35:
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6232LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unint64_t v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6232LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6232LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    int64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    unsigned int v20 = v19 < 1;
  }
  else {
    unsigned int v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v17;
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  int64x2_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v12);
      while (__stlxr(v28 - 1, v12));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6232LL))( a1,  a2,  a3);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v25 = __ldaxr(v12);
      while (__stlxr(v25 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6232LL))( a1,  a2,  a3);
    }
  }

  uint64_t v17 = mach_absolute_time();
  uint64_t v18 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6232LL))(a1, a2, a3);
  int64_t v19 = mach_absolute_time();
  unsigned int v20 = vdupq_n_s64(1uLL);
  v20.i64[0] = v19 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v20, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v11);
      }
    }
  }

  do
  {
    unint64_t v21 = __ldaxr(v12);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v12));
  if (gCheckGLErrors) {
    char v23 = v22 < 1;
  }
  else {
    char v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return v18;
}

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  id v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v22;
  dispatch_queue_s *v23;
  unsigned int v24;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  id v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      uint64_t v22 = __ldaxr(v12);
    while (__stlxr(v22 - 1, v12));
    char v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6232LL))(v5, a2, a3);
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v16) state] == (char *)&dword_0 + 1)
  {
    uint64_t v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v17 & 1) != 0)
    {
      do
        uint64_t v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6232LL))( v5,  a2,  a3);
    }
  }

  do
  {
    uint64_t v18 = __ldaxr(v12);
    int64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    unsigned int v20 = v19 < 1;
  }
  else {
    unsigned int v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
  return 0LL;
}

void sub_73804( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_sync(__GLIContextRec *a1, __GLsync *a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      id v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6240LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v58 = 0LL;
  __uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x37) {
      goto LABEL_24;
    }
    int v52 = (311 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    int v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((void *)v15 + 6) = 0LL;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        __uint64_t v59 = v15 + 56;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 884;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        strcpy(v16 + 36, "CY");
        *((void *)v16 + 5) = *(void *)v9;
        *((void *)v16 + 6) = a2;
        char v21 = byte_2071CC;
        if ((byte_2071CC & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_338.nreloc, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 32) + 6240LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          uint64_t v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 884LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        uint64_t v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6240LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      id v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6240LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  int v58 = 0LL;
  __uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x37) {
      goto LABEL_24;
    }
    int v52 = (311 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    int v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((void *)v15 + 6) = 0LL;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        __uint64_t v59 = v15 + 56;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 884;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        strcpy(v16 + 36, "CY");
        *((void *)v16 + 5) = *(void *)v9;
        *((void *)v16 + 6) = a2;
        char v21 = byte_2071CC;
        if ((byte_2071CC & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_338.nreloc, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 32) + 6240LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          uint64_t v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 884LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        uint64_t v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6240LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6240LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6240LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 32) + 6240LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6240LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6240LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 32) + 6240LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  uint64_t v3 = a1;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6240LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6240LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_73D0C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void delete_sync(__GLIContextRec *a1, __GLsync *a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6248LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  id v51 = 0LL;
  int v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x37) {
      goto LABEL_24;
    }
    int v45 = (311 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    id v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((void *)v15 + 6) = 0LL;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        int v52 = v15 + 56;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 880;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "CY");
        *((void *)v16 + 5) = *(void *)v9;
        *((void *)v16 + 6) = a2;
        char v21 = byte_2071C8;
        if ((byte_2071C8 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_338.reloff, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 32) + 6248LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            id v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      signed int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6248LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  id v51 = 0LL;
  int v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x37) {
      goto LABEL_24;
    }
    int v45 = (311 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    id v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((void *)v15 + 6) = 0LL;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        int v52 = v15 + 56;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 880;
        *((_DWORD *)v16 + 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        strcpy(v16 + 36, "CY");
        *((void *)v16 + 5) = *(void *)v9;
        *((void *)v16 + 6) = a2;
        char v21 = byte_2071C8;
        if ((byte_2071C8 & 1) != 0) {
          breakpoint_break((uint64_t)&v51, (volatile int *)&stru_338.reloff, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 32) + 6248LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            id v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6248LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 32) + 6248LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    BOOL v15 = __ldaxr(v10);
    id v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 24) + 6248LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, __GLsync *))(*(void *)(v9 + 32) + 6248LL))(a1, a2);
  id v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_741D4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t client_wait_sync(__GLIContextRec *a1, __GLsync *a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v13);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_57:
        unsigned int v54 = __ldaxr(v14);
      while (__stlxr(v54 - 1, v14));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6256LL))( a1,  a2,  a3,  a4);
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v62 = 0LL;
  __uint64_t v63 = 0LL;
  unsigned int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v62;
    unint64_t v19 = v63;
    int64_t v21 = v63 - (_BYTE *)v62;
    unsigned int v22 = v64;
    unint64_t v23 = v64 - (v63 - (_BYTE *)v62);
    if (v23 > 0x47) {
      goto LABEL_24;
    }
    int v56 = (327 - v23) & 0xFFFFFF00;
    v64 += v56;
    uint64_t v20 = (char *)malloc(v56 + v22);
    unsigned int v62 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((void *)v19 + 8) = 0LL;
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        __uint64_t v63 = v19 + 72;
        GPUTools::FB::Fbuf::align((char **)&v62);
        *((_DWORD *)v20 + 1) = 879;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v61 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v61);
        *((void *)v20 + 1) = v61;
        strcpy(v20 + 36, "CYuiuw");
        *(void *)(v20 + 44) = *(void *)v13;
        *(void *)(v20 + 52) = a2;
        *((_DWORD *)v20 + 15) = a3;
        *((void *)v20 + 8) = a4;
        char v25 = byte_2071C7;
        if ((byte_2071C7 & 1) != 0) {
          breakpoint_break( (uint64_t)&v62,  (volatile int *)((char *)&stru_338.align + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        if ([(id)DYGetGLGuestAppClient(v24) overrideFlags] & 0x10 | v25 & 4)
        {
          uint64_t v32 = 0LL;
          goto LABEL_29;
        }

        uint64_t v31 = mach_absolute_time();
        uint64_t v32 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6256LL))( a1,  a2,  a3,  a4);
        uint64_t v33 = mach_absolute_time() - v31;
        unint64_t v34 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v35 = v62;
          *((void *)v62 + 2) = v31;
          v35[3] = v33;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v59 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
          unsigned int v60 = v62;
          *((void *)v62 + 3) = v59;
          v60[2] = __udivti3(v34 * v31, (v34 * (unsigned __int128)v31) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v13);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v62, 4294955008LL, (uint64_t)"e", v26, v27, v28, v29, v30, v32);
        id v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v37) {
          id v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v62, v38);
        }
        unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
        if ((_DWORD)v40) {
          id v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v62, v40, v39);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v13, (uint64_t)&v62);
        }
        uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v62);
        uint64_t v42 = *(unsigned int *)(v13 + 3404);
        if ((_DWORD)v42 && gBreakOnError)
        {
          uint64_t v57 = 3LL;
          uint64_t v58 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v25 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v57 = 2LL;
          uint64_t v58 = 879LL;
        }

        breakpoint_break((uint64_t)&v62, (volatile int *)v58, v57, v42, v13);
LABEL_38:
        unsigned int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
        signed int v44 = (unsigned int *)((char *)v43 + 56);
        do
          unsigned int v45 = __ldaxr(v44);
        while (__stlxr(1u, v44));
        if (v45 == 1)
        {
          do
          {
            while (*v44 == 1)
              ;
            do
              unsigned int v46 = __ldaxr(v44);
            while (__stlxr(1u, v44));
          }

          while (v46 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)&v62, *(unsigned int *)v62, 1);
        atomic_store(0, v44);
        do
        {
          unsigned int v47 = __ldaxr(v14);
          signed int v48 = v47 - 1;
        }

        while (__stlxr(v48, v14));
        if (gCheckGLErrors) {
          BOOL v49 = v48 < 1;
        }
        else {
          BOOL v49 = 1;
        }
        if (!v49) {
          handle_opengl_thread_conflict((const void **)v13);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v20, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v51 = __ldaxr(v14);
  while (__stlxr(v51 - 1, v14));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  uint64_t v32 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6256LL))( a1,  a2,  a3,  a4);
LABEL_51:
  if (v62) {
    free(v62);
  }
  return v32;
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  uint64_t v36;
  id v37;
  GPUTools::FB::Fbuf *v38;
  unsigned int v39;
  GPUTools::FB::Fbuf *v40;
  dispatch_queue_s *v41;
  uint64_t v42;
  GPUTools::FB::Stream *v43;
  unsigned int *v44;
  unsigned int v45;
  unsigned int v46;
  unsigned int v47;
  signed int v48;
  BOOL v49;
  uint64_t result;
  unsigned int v51;
  uint64_t v52;
  id v53;
  unsigned int v54;
  dispatch_queue_s *v55;
  int v56;
  uint64_t v57;
  uint64_t v58;
  uint64_t v59;
  void *v60;
  __uint64_t v61;
  void *v62;
  char *v63;
  unsigned int v64;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v13);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_57:
        unsigned int v54 = __ldaxr(v14);
      while (__stlxr(v54 - 1, v14));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6256LL))( a1,  a2,  a3,  a4);
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v62 = 0LL;
  __uint64_t v63 = 0LL;
  unsigned int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v62;
    unint64_t v19 = v63;
    int64_t v21 = v63 - (_BYTE *)v62;
    unsigned int v22 = v64;
    unint64_t v23 = v64 - (v63 - (_BYTE *)v62);
    if (v23 > 0x47) {
      goto LABEL_24;
    }
    int v56 = (327 - v23) & 0xFFFFFF00;
    v64 += v56;
    uint64_t v20 = (char *)malloc(v56 + v22);
    unsigned int v62 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((void *)v19 + 8) = 0LL;
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        __uint64_t v63 = v19 + 72;
        GPUTools::FB::Fbuf::align((char **)&v62);
        *((_DWORD *)v20 + 1) = 879;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v61 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v61);
        *((void *)v20 + 1) = v61;
        strcpy(v20 + 36, "CYuiuw");
        *(void *)(v20 + 44) = *(void *)v13;
        *(void *)(v20 + 52) = a2;
        *((_DWORD *)v20 + 15) = a3;
        *((void *)v20 + 8) = a4;
        char v25 = byte_2071C7;
        if ((byte_2071C7 & 1) != 0) {
          breakpoint_break( (uint64_t)&v62,  (volatile int *)((char *)&stru_338.align + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        if ([(id)DYGetGLGuestAppClient(v24) overrideFlags] & 0x10 | v25 & 4)
        {
          uint64_t v32 = 0LL;
          goto LABEL_29;
        }

        uint64_t v31 = mach_absolute_time();
        uint64_t v32 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6256LL))( a1,  a2,  a3,  a4);
        uint64_t v33 = mach_absolute_time() - v31;
        unint64_t v34 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v35 = v62;
          *((void *)v62 + 2) = v31;
          v35[3] = v33;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v59 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
          unsigned int v60 = v62;
          *((void *)v62 + 3) = v59;
          v60[2] = __udivti3(v34 * v31, (v34 * (unsigned __int128)v31) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v13);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v62, 4294955008LL, (uint64_t)"e", v26, v27, v28, v29, v30, v32);
        id v37 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v36), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v37) {
          id v37 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v62, v38);
        }
        unsigned int v40 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
        if ((_DWORD)v40) {
          id v37 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v62, v40, v39);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v13, (uint64_t)&v62);
        }
        uint64_t v41 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v62);
        uint64_t v42 = *(unsigned int *)(v13 + 3404);
        if ((_DWORD)v42 && gBreakOnError)
        {
          uint64_t v57 = 3LL;
          uint64_t v58 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v25 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v57 = 2LL;
          uint64_t v58 = 879LL;
        }

        breakpoint_break((uint64_t)&v62, (volatile int *)v58, v57, v42, v13);
LABEL_38:
        unsigned int v43 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v41) defaultFbufStream];
        signed int v44 = (unsigned int *)((char *)v43 + 56);
        do
          unsigned int v45 = __ldaxr(v44);
        while (__stlxr(1u, v44));
        if (v45 == 1)
        {
          do
          {
            while (*v44 == 1)
              ;
            do
              unsigned int v46 = __ldaxr(v44);
            while (__stlxr(1u, v44));
          }

          while (v46 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v43, (GPUTools::FB::Fbuf *)&v62, *(unsigned int *)v62, 1);
        atomic_store(0, v44);
        do
        {
          unsigned int v47 = __ldaxr(v14);
          signed int v48 = v47 - 1;
        }

        while (__stlxr(v48, v14));
        if (gCheckGLErrors) {
          BOOL v49 = v48 < 1;
        }
        else {
          BOOL v49 = 1;
        }
        if (!v49) {
          handle_opengl_thread_conflict((const void **)v13);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v20, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v51 = __ldaxr(v14);
  while (__stlxr(v51 - 1, v14));
  [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
  uint64_t v32 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6256LL))( a1,  a2,  a3,  a4);
LABEL_51:
  if (v62) {
    free(v62);
  }
  return v32;
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v25 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        uint64_t v27 = __ldaxr(v14);
      while (__stlxr(v27 - 1, v14));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6256LL))( a1,  a2,  a3,  a4);
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v24 = __ldaxr(v14);
      while (__stlxr(v24 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6256LL))( a1,  a2,  a3,  a4);
    }
  }

  unint64_t v19 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6256LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v13);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v14);
    int64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    unsigned int v22 = v21 < 1;
  }
  else {
    unsigned int v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
  return v19;
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v14);
      while (__stlxr(v30 - 1, v14));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6256LL))( a1,  a2,  a3,  a4);
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v27 = __ldaxr(v14);
      while (__stlxr(v27 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6256LL))( a1,  a2,  a3,  a4);
    }
  }

  unint64_t v19 = mach_absolute_time();
  uint64_t v20 = (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6256LL))( a1,  a2,  a3,  a4);
  int64_t v21 = mach_absolute_time();
  unsigned int v22 = vdupq_n_s64(1uLL);
  v22.i64[0] = v21 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v32 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v13);
      }
    }
  }

  do
  {
    unint64_t v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    char v25 = v24 < 1;
  }
  else {
    char v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
  return v20;
}

{
  __GLIContextRec *v7;
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  id v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v24;
  dispatch_queue_s *v25;
  unsigned int v26;
  BOOL v7 = a1;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (!v17) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v13);
  }
  id v18 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v18 >= 1)
  {
    do
      uint64_t v24 = __ldaxr(v14);
    while (__stlxr(v24 - 1, v14));
    char v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v18) graphicsLockWaitQueue];
    dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6256LL))( v7,  a2,  a3,  a4);
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v18) state] == (char *)&dword_0 + 1)
  {
    unint64_t v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v19 & 1) != 0)
    {
      do
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6256LL))( v7,  a2,  a3,  a4);
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v14);
    int64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    unsigned int v22 = v21 < 1;
  }
  else {
    unsigned int v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
  return 0LL;
}

void sub_74710( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void wait_sync(__GLIContextRec *a1, __GLsync *a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      signed int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6264LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v55 = 0LL;
  int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    unint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x47) {
      goto LABEL_24;
    }
    int v49 = (327 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    uint64_t v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((void *)v19 + 8) = 0LL;
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        int v56 = v19 + 72;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 885;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "CYuiuw");
        *(void *)(v20 + 44) = *(void *)v13;
        *(void *)(v20 + 52) = a2;
        *((_DWORD *)v20 + 15) = a3;
        *((void *)v20 + 8) = a4;
        char v25 = byte_2071CD;
        if ((byte_2071CD & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_338.nreloc + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6264LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            id v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  __uint64_t v54;
  void *v55;
  char *v56;
  unsigned int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v13);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      signed int v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6264LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v55 = 0LL;
  int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    unint64_t v19 = v56;
    int64_t v21 = v56 - (_BYTE *)v55;
    unsigned int v22 = v57;
    unint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x47) {
      goto LABEL_24;
    }
    int v49 = (327 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    uint64_t v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        unint64_t v19 = &v20[v21];
LABEL_24:
        *((void *)v19 + 8) = 0LL;
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)unint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        int v56 = v19 + 72;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 885;
        *((_DWORD *)v20 + 8) = 0;
        __uint64_t v54 = 0LL;
        uint64_t v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "CYuiuw");
        *(void *)(v20 + 44) = *(void *)v13;
        *(void *)(v20 + 52) = a2;
        *((_DWORD *)v20 + 15) = a3;
        *((void *)v20 + 8) = a4;
        char v25 = byte_2071CD;
        if ((byte_2071CD & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_338.nreloc + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6264LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          uint64_t v28 = v26 - v27;
          unint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            id v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6264LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        unsigned int v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6264LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    int64_t v21 = v20 < 1;
  }
  else {
    int64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6264LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  unint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, __GLsync *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6264LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  int64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    unsigned int v22 = __ldaxr(v14);
    unint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_74C20( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_integer64v(__GLIContextRec *a1, GPUTools::GL *a2, uint64_t *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_62:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t *))(*(void *)(v11 + 24) + 6272LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v17))
  {
    if ((_DWORD)a2 == 34467)
    {
      (*(void (**)(void, uint64_t, _BYTE *))(*(void *)(v11 + 32) + 832LL))( *(void *)(v11 + 16),  34466LL,  &v61[1]);
      v61[0] = 1;
      uint64_t v18 = 78LL;
    }

    else
    {
      GPUTools::GL::DYGetParameterInfo(a2, &v61[1], (unsigned int *)v61, v16);
      if (v61[0]) {
        uint64_t v18 = 78LL;
      }
      else {
        uint64_t v18 = 119LL;
      }
    }

    snprintf((char *)(v11 + 4709), 0x40uLL, "Ce@%u%c", *(_DWORD *)&v61[1], v18);
    GPUTools::FB::Encode((uint64_t)&v58, 882LL, 256LL, v11 + 4709, v19, v20, v21, v22, *(void *)v11);
    char v24 = byte_2071CA;
    if ((byte_2071CA & 1) != 0) {
      breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_338.reloff + 2),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v23) overrideFlags] & 0x10 | v24 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t *))(*(void *)(v11 + 32) + 6272LL))( a1,  a2,  a3);
      uint64_t v30 = mach_absolute_time() - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v58;
        *((void *)v58 + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        int v56 = v58;
        *((void *)v58 + 3) = v55;
        v56[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  BOOL *v16;
  id v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  _OWORD *v33;
  uint64_t v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __int128 v57;
  void *v58;
  void *v59;
  unsigned int v60;
  _BYTE v61[5];
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v11);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_62:
        unsigned int v51 = __ldaxr(v12);
      while (__stlxr(v51 - 1, v12));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t *))(*(void *)(v11 + 24) + 6272LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v17))
  {
    if ((_DWORD)a2 == 34467)
    {
      (*(void (**)(void, uint64_t, _BYTE *))(*(void *)(v11 + 32) + 832LL))( *(void *)(v11 + 16),  34466LL,  &v61[1]);
      v61[0] = 1;
      uint64_t v18 = 78LL;
    }

    else
    {
      GPUTools::GL::DYGetParameterInfo(a2, &v61[1], (unsigned int *)v61, v16);
      if (v61[0]) {
        uint64_t v18 = 78LL;
      }
      else {
        uint64_t v18 = 119LL;
      }
    }

    snprintf((char *)(v11 + 4709), 0x40uLL, "Ce@%u%c", *(_DWORD *)&v61[1], v18);
    GPUTools::FB::Encode((uint64_t)&v58, 882LL, 256LL, v11 + 4709, v19, v20, v21, v22, *(void *)v11);
    char v24 = byte_2071CA;
    if ((byte_2071CA & 1) != 0) {
      breakpoint_break( (uint64_t)&v58,  (volatile int *)((char *)&stru_338.reloff + 2),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v23) overrideFlags] & 0x10 | v24 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t *))(*(void *)(v11 + 32) + 6272LL))( a1,  a2,  a3);
      uint64_t v30 = mach_absolute_time() - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v32 = v58;
        *((void *)v58 + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        int v56 = v58;
        *((void *)v58 + 3) = v55;
        v56[2] = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_32;
        }
      }

      check_errors(v11);
    }

void sub_75120( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, void *a15)
{
  if (a15) {
    free(a15);
  }
  _Unwind_Resume(exception_object);
}

void get_synciv(__GLIContextRec *a1, __GLsync *a2, GPUTools::GL *a3, uint64_t a4, int *a5, int *a6)
{
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v56 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v55 = handle_opengl_thread_conflict((const void **)v17);
    id v56 = [(id)DYGetGLGuestAppClient(v55) waitOnGraphicsSemaphoreAssertions];
    if ((int)v56 >= 1)
    {
      do
LABEL_64:
        unsigned int v57 = __ldaxr(v18);
      while (__stlxr(v57 - 1, v18));
      uint64_t v58 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v56) graphicsLockWaitQueue];
      dispatch_sync_f(v58, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, __GLsync *, GPUTools::GL *, uint64_t, int *, int *))(*(void *)(v17 + 24) + 6280LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0LL;
  unsigned int v67 = 0;
  if ([(id)DYGetGLGuestAppClient(v56) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    GPUTools::GL::DYGetSyncObjectParamterInfo(a3, &v64[1], (unsigned int *)v64, v22);
    char v24 = "@1i";
    if (!a5) {
      char v24 = "t";
    }
    uint64_t v25 = "e";
    if (!v64[0]) {
      uint64_t v25 = "ui";
    }
    snprintf((char *)(v17 + 4709), 0x40uLL, "CYei%s@%u%s", v24, *(_DWORD *)&v64[1], v25);
    GPUTools::FB::Encode((uint64_t)&v65, 883LL, 256LL, v17 + 4709, v26, v27, v28, v29, *(void *)v17);
    char v63 = byte_2071CB;
    if ((byte_2071CB & 1) != 0) {
      breakpoint_break( (uint64_t)&v65,  (volatile int *)((char *)&stru_338.reloff + 3),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    if (!([(id)DYGetGLGuestAppClient(v30) overrideFlags] & 0x10 | v63 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, __GLsync *, GPUTools::GL *, uint64_t, int *, int *))(*(void *)(v17 + 32) + 6280LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v36 = mach_absolute_time() - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        signed int v38 = v65;
        *((void *)v65 + 3) = v36;
      }

      else
      {
        uint64_t v61 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        signed int v38 = v65;
        *((void *)v65 + 3) = v61;
        uint64_t v35 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
      }

      v38[2] = v35;
      if (gCheckGLErrors) {
        check_errors(v17);
      }
    }

    unsigned int v39 = v65;
    __int128 v62 = *((_OWORD *)v65 + 1);
    unsigned int v66 = v65;
    if (v67 >= 0x24)
    {
      *((_DWORD *)v65 + 8) = 0;
      _OWORD *v39 = 0u;
      v39[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v65, 883LL, 256LL, v17 + 4709, v31, v32, v33, v34, *(void *)v17);
    *((_OWORD *)v65 + 1) = v62;
    id v41 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v41) {
      id v41 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v65, v42);
    }
    unsigned int v44 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v17 + 3404);
    if ((_DWORD)v44) {
      id v41 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v65, v44, v43);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v41), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v17, (uint64_t)&v65);
    }
    unsigned int v45 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v17 + 3480),  (GPUTools::FB::Fbuf *)(v17 + 3520),  (GPUTools::FB *)&v65);
    uint64_t v46 = *(unsigned int *)(v17 + 3404);
    if ((_DWORD)v46 && gBreakOnError)
    {
      uint64_t v59 = 3LL;
      uint64_t v60 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v63 & 2) == 0) {
        goto LABEL_45;
      }
      uint64_t v59 = 2LL;
      uint64_t v60 = 883LL;
    }

    breakpoint_break((uint64_t)&v65, (volatile int *)v60, v59, v46, v17);
LABEL_45:
    BOOL v47 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v45) defaultFbufStream];
    unsigned int v48 = (unsigned int *)((char *)v47 + 56);
    do
      unsigned int v49 = __ldaxr(v48);
    while (__stlxr(1u, v48));
    if (v49 == 1)
    {
      do
      {
        while (*v48 == 1)
          ;
        do
          unsigned int v50 = __ldaxr(v48);
        while (__stlxr(1u, v48));
      }

      while (v50 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v47, (GPUTools::FB::Fbuf *)&v65, *(unsigned int *)v65, 1);
    atomic_store(0, v48);
    do
    {
      unsigned int v51 = __ldaxr(v18);
      signed int v52 = v51 - 1;
    }

    while (__stlxr(v52, v18));
    if (gCheckGLErrors) {
      BOOL v53 = v52 < 1;
    }
    else {
      BOOL v53 = 1;
    }
    if (!v53) {
      handle_opengl_thread_conflict((const void **)v17);
    }
    goto LABEL_58;
  }

  do
    unsigned int v54 = __ldaxr(v18);
  while (__stlxr(v54 - 1, v18));
  [(id)DYGetGLGuestAppClient(v23) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, __GLsync *, GPUTools::GL *, uint64_t, int *, int *))(*(void *)(v17 + 24)
                                                                                               + 6280LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_58:
  if (v65) {
    free(v65);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  BOOL *v22;
  id v23;
  const char *v24;
  const char *v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  uint64_t v34;
  uint64_t v35;
  uint64_t v36;
  unint64_t v37;
  void *v38;
  _OWORD *v39;
  uint64_t v40;
  id v41;
  GPUTools::FB::Fbuf *v42;
  unsigned int v43;
  GPUTools::FB::Fbuf *v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  GPUTools::FB::Stream *v47;
  unsigned int *v48;
  unsigned int v49;
  unsigned int v50;
  unsigned int v51;
  signed int v52;
  BOOL v53;
  unsigned int v54;
  uint64_t v55;
  id v56;
  unsigned int v57;
  dispatch_queue_s *v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  char v63;
  _BYTE v64[5];
  void *v65;
  void *v66;
  unsigned int v67;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v56 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v55 = handle_opengl_thread_conflict((const void **)v17);
    id v56 = [(id)DYGetGLGuestAppClient(v55) waitOnGraphicsSemaphoreAssertions];
    if ((int)v56 >= 1)
    {
      do
LABEL_64:
        unsigned int v57 = __ldaxr(v18);
      while (__stlxr(v57 - 1, v18));
      uint64_t v58 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v56) graphicsLockWaitQueue];
      dispatch_sync_f(v58, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, __GLsync *, GPUTools::GL *, uint64_t, int *, int *))(*(void *)(v17 + 24) + 6280LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0LL;
  unsigned int v67 = 0;
  if ([(id)DYGetGLGuestAppClient(v56) state] != (char *)&dword_0 + 1
    || (id v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    GPUTools::GL::DYGetSyncObjectParamterInfo(a3, &v64[1], (unsigned int *)v64, v22);
    char v24 = "@1i";
    if (!a5) {
      char v24 = "t";
    }
    uint64_t v25 = "e";
    if (!v64[0]) {
      uint64_t v25 = "ui";
    }
    snprintf((char *)(v17 + 4709), 0x40uLL, "CYei%s@%u%s", v24, *(_DWORD *)&v64[1], v25);
    GPUTools::FB::Encode((uint64_t)&v65, 883LL, 256LL, v17 + 4709, v26, v27, v28, v29, *(void *)v17);
    char v63 = byte_2071CB;
    if ((byte_2071CB & 1) != 0) {
      breakpoint_break( (uint64_t)&v65,  (volatile int *)((char *)&stru_338.reloff + 3),  1LL,  *(unsigned int *)(v17 + 3404),  v17);
    }
    if (!([(id)DYGetGLGuestAppClient(v30) overrideFlags] & 0x10 | v63 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, __GLsync *, GPUTools::GL *, uint64_t, int *, int *))(*(void *)(v17 + 32) + 6280LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v36 = mach_absolute_time() - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        signed int v38 = v65;
        *((void *)v65 + 3) = v36;
      }

      else
      {
        uint64_t v61 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        signed int v38 = v65;
        *((void *)v65 + 3) = v61;
        uint64_t v35 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
      }

      v38[2] = v35;
      if (gCheckGLErrors) {
        check_errors(v17);
      }
    }

    unsigned int v39 = v65;
    __int128 v62 = *((_OWORD *)v65 + 1);
    unsigned int v66 = v65;
    if (v67 >= 0x24)
    {
      *((_DWORD *)v65 + 8) = 0;
      _OWORD *v39 = 0u;
      v39[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v65, 883LL, 256LL, v17 + 4709, v31, v32, v33, v34, *(void *)v17);
    *((_OWORD *)v65 + 1) = v62;
    id v41 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v41) {
      id v41 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v65, v42);
    }
    unsigned int v44 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v17 + 3404);
    if ((_DWORD)v44) {
      id v41 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v65, v44, v43);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v41), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v17, (uint64_t)&v65);
    }
    unsigned int v45 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v17 + 3480),  (GPUTools::FB::Fbuf *)(v17 + 3520),  (GPUTools::FB *)&v65);
    uint64_t v46 = *(unsigned int *)(v17 + 3404);
    if ((_DWORD)v46 && gBreakOnError)
    {
      uint64_t v59 = 3LL;
      uint64_t v60 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v63 & 2) == 0) {
        goto LABEL_45;
      }
      uint64_t v59 = 2LL;
      uint64_t v60 = 883LL;
    }

    breakpoint_break((uint64_t)&v65, (volatile int *)v60, v59, v46, v17);
LABEL_45:
    BOOL v47 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v45) defaultFbufStream];
    unsigned int v48 = (unsigned int *)((char *)v47 + 56);
    do
      unsigned int v49 = __ldaxr(v48);
    while (__stlxr(1u, v48));
    if (v49 == 1)
    {
      do
      {
        while (*v48 == 1)
          ;
        do
          unsigned int v50 = __ldaxr(v48);
        while (__stlxr(1u, v48));
      }

      while (v50 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v47, (GPUTools::FB::Fbuf *)&v65, *(unsigned int *)v65, 1);
    atomic_store(0, v48);
    do
    {
      unsigned int v51 = __ldaxr(v18);
      signed int v52 = v51 - 1;
    }

    while (__stlxr(v52, v18));
    if (gCheckGLErrors) {
      BOOL v53 = v52 < 1;
    }
    else {
      BOOL v53 = 1;
    }
    if (!v53) {
      handle_opengl_thread_conflict((const void **)v17);
    }
    goto LABEL_58;
  }

  do
    unsigned int v54 = __ldaxr(v18);
  while (__stlxr(v54 - 1, v18));
  [(id)DYGetGLGuestAppClient(v23) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, __GLsync *, GPUTools::GL *, uint64_t, int *, int *))(*(void *)(v17 + 24)
                                                                                               + 6280LL))( a1,  a2,  a3,  a4,  a5,  a6);
LABEL_58:
  if (v65) {
    free(v65);
  }
}

void sub_75670( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(exception_object);
}

void copy_buffer_sub_data(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      signed int v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 6328LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  uint64_t v59 = 0LL;
  uint64_t v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    char v24 = (char *)v59;
    id v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x53) {
      goto LABEL_24;
    }
    int v53 = (339 - v27) & 0xFFFFFF00;
    v61 += v53;
    char v24 = (char *)malloc(v53 + v26);
    uint64_t v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        id v23 = &v24[v25];
LABEL_24:
        *((_DWORD *)v23 + 20) = 0;
        *((_OWORD *)v23 + 3) = 0u;
        *((_OWORD *)v23 + 4) = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        *((_OWORD *)v23 + 2) = 0u;
        *(_OWORD *)id v23 = 0u;
        uint64_t v60 = v23 + 84;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 855;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        strcpy(v24 + 36, "Ceelll");
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *(void *)(v24 + 60) = a4;
        *(void *)(v24 + 68) = a5;
        *(void *)(v24 + 76) = a6;
        char v29 = byte_2071AF;
        if ((byte_2071AF & 1) != 0) {
          breakpoint_break( (uint64_t)&v59,  (volatile int *)&stru_338.segname[15],  1LL,  *(unsigned int *)(v17 + 3404),  v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32)
                                                                                                 + 6328LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            unsigned int v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  char *v23;
  char *v24;
  int64_t v25;
  unsigned int v26;
  unint64_t v27;
  uint64_t v28;
  char v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  unint64_t v33;
  void *v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  int v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  __uint64_t v58;
  void *v59;
  char *v60;
  unsigned int v61;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v17);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_57:
        unsigned int v51 = __ldaxr(v18);
      while (__stlxr(v51 - 1, v18));
      signed int v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 6328LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  uint64_t v59 = 0LL;
  uint64_t v60 = 0LL;
  unsigned int v61 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    char v24 = (char *)v59;
    id v23 = v60;
    int64_t v25 = v60 - (_BYTE *)v59;
    unsigned int v26 = v61;
    unint64_t v27 = v61 - (v60 - (_BYTE *)v59);
    if (v27 > 0x53) {
      goto LABEL_24;
    }
    int v53 = (339 - v27) & 0xFFFFFF00;
    v61 += v53;
    char v24 = (char *)malloc(v53 + v26);
    uint64_t v59 = v24;
    if (v24)
    {
      if ((v24 & 3) == 0)
      {
        id v23 = &v24[v25];
LABEL_24:
        *((_DWORD *)v23 + 20) = 0;
        *((_OWORD *)v23 + 3) = 0u;
        *((_OWORD *)v23 + 4) = 0u;
        *((_OWORD *)v23 + 1) = 0u;
        *((_OWORD *)v23 + 2) = 0u;
        *(_OWORD *)id v23 = 0u;
        uint64_t v60 = v23 + 84;
        GPUTools::FB::Fbuf::align((char **)&v59);
        *((_DWORD *)v24 + 1) = 855;
        *((_DWORD *)v24 + 8) = 0;
        __uint64_t v58 = 0LL;
        uint64_t v28 = pthread_threadid_np(0LL, &v58);
        *((void *)v24 + 1) = v58;
        strcpy(v24 + 36, "Ceelll");
        *(void *)(v24 + 44) = *(void *)v17;
        *((_DWORD *)v24 + 13) = a2;
        *((_DWORD *)v24 + 14) = a3;
        *(void *)(v24 + 60) = a4;
        *(void *)(v24 + 68) = a5;
        *(void *)(v24 + 76) = a6;
        char v29 = byte_2071AF;
        if ((byte_2071AF & 1) != 0) {
          breakpoint_break( (uint64_t)&v59,  (volatile int *)&stru_338.segname[15],  1LL,  *(unsigned int *)(v17 + 3404),  v17);
        }
        uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
        if (!(v30 & 0x10 | v29 & 4))
        {
          uint64_t v31 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32)
                                                                                                 + 6328LL))( a1,  a2,  a3,  a4,  a5,  a6);
          uint64_t v30 = mach_absolute_time();
          uint64_t v32 = v30 - v31;
          unint64_t v33 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v34 = v59;
            *((void *)v59 + 2) = v31;
            v34[3] = v32;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v56 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
            unsigned int v57 = v59;
            *((void *)v59 + 3) = v56;
            uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
            v57[2] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v30 = check_errors(v17);
        }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 6328LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        unsigned int v26 = __ldaxr(v18);
      while (__stlxr(v26 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32) + 6328LL))( a1,  a2,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v17);
      }
    }
  }

  do
  {
    id v23 = __ldaxr(v18);
    char v24 = v23 - 1;
  }

  while (__stlxr(v24, v18));
  if (gCheckGLErrors) {
    int64_t v25 = v24 < 1;
  }
  else {
    int64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  int64x2_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  signed int v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    signed int v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  uint64_t v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        uint64_t v32 = __ldaxr(v18);
      while (__stlxr(v32 - 1, v18));
      unint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 24)
                                                                                             + 6328LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        char v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  id v23 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v17 + 32) + 6328LL))( a1,  a2,  a3,  a4,  a5,  a6);
  char v24 = mach_absolute_time();
  int64_t v25 = vdupq_n_s64(1uLL);
  v25.i64[0] = v24 - v23;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v25, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v34 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v17);
      }
    }
  }

  do
  {
    unsigned int v26 = __ldaxr(v18);
    unint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v18));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_75BC0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t map_buffer_range(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v15);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_57:
        unsigned int v56 = __ldaxr(v16);
      while (__stlxr(v56 - 1, v16));
      unsigned int v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                              + 6360LL))( a1,  a2,  a3,  a4,  a5);
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    id v22 = (char *)v64;
    BOOL v21 = v65;
    int64_t v23 = v65 - (_BYTE *)v64;
    unsigned int v24 = v66;
    unint64_t v25 = v66 - (v65 - (_BYTE *)v64);
    if (v25 > 0x4B) {
      goto LABEL_24;
    }
    int v58 = (331 - v25) & 0xFFFFFF00;
    v66 += v58;
    id v22 = (char *)malloc(v58 + v24);
    unsigned int v64 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        BOOL v21 = &v22[v23];
LABEL_24:
        *(_OWORD *)(v21 + 60) = 0u;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)BOOL v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v65 = v21 + 76;
        GPUTools::FB::Fbuf::align((char **)&v64);
        *((_DWORD *)v22 + 1) = 865;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v63 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v63);
        *((void *)v22 + 1) = v63;
        strcpy(v22 + 36, "Celle");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((void *)v22 + 7) = a3;
        *((void *)v22 + 8) = a4;
        *((_DWORD *)v22 + 18) = a5;
        char v27 = byte_2071B9;
        if ((byte_2071B9 & 1) != 0) {
          breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_338.size + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        if ([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4)
        {
          uint64_t v34 = 0LL;
          goto LABEL_29;
        }

        uint64_t v33 = mach_absolute_time();
        uint64_t v34 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32)
                                                                                               + 6360LL))( a1,  a2,  a3,  a4,  a5);
        uint64_t v35 = mach_absolute_time() - v33;
        unint64_t v36 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v37 = v64;
          *((void *)v64 + 2) = v33;
          v37[3] = v35;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v61 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
          __int128 v62 = v64;
          *((void *)v64 + 3) = v61;
          v62[2] = __udivti3(v36 * v33, (v36 * (unsigned __int128)v33) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v15);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v64, 4294955008LL, (uint64_t)"p", v28, v29, v30, v31, v32, v34);
        id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v39) {
          id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v40);
        }
        signed int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
        if ((_DWORD)v42) {
          id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v42, v41);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v15, (uint64_t)&v64);
        }
        unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v64);
        uint64_t v44 = *(unsigned int *)(v15 + 3404);
        if ((_DWORD)v44 && gBreakOnError)
        {
          uint64_t v59 = 3LL;
          uint64_t v60 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v27 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v59 = 2LL;
          uint64_t v60 = 865LL;
        }

        breakpoint_break((uint64_t)&v64, (volatile int *)v60, v59, v44, v15);
LABEL_38:
        unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
        signed int v46 = (unsigned int *)((char *)v45 + 56);
        do
          unsigned int v47 = __ldaxr(v46);
        while (__stlxr(1u, v46));
        if (v47 == 1)
        {
          do
          {
            while (*v46 == 1)
              ;
            do
              unsigned int v48 = __ldaxr(v46);
            while (__stlxr(1u, v46));
          }

          while (v48 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
        atomic_store(0, v46);
        do
        {
          unsigned int v49 = __ldaxr(v16);
          signed int v50 = v49 - 1;
        }

        while (__stlxr(v50, v16));
        if (gCheckGLErrors) {
          BOOL v51 = v50 < 1;
        }
        else {
          BOOL v51 = 1;
        }
        if (!v51) {
          handle_opengl_thread_conflict((const void **)v15);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v22, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v53 = __ldaxr(v16);
  while (__stlxr(v53 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  uint64_t v34 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 6360LL))( a1,  a2,  a3,  a4,  a5);
LABEL_51:
  if (v64) {
    free(v64);
  }
  return v34;
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  uint64_t v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  uint64_t v38;
  id v39;
  GPUTools::FB::Fbuf *v40;
  unsigned int v41;
  GPUTools::FB::Fbuf *v42;
  dispatch_queue_s *v43;
  uint64_t v44;
  GPUTools::FB::Stream *v45;
  unsigned int *v46;
  unsigned int v47;
  unsigned int v48;
  unsigned int v49;
  signed int v50;
  BOOL v51;
  uint64_t result;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  int v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  void *v62;
  __uint64_t v63;
  void *v64;
  char *v65;
  unsigned int v66;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v15);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_57:
        unsigned int v56 = __ldaxr(v16);
      while (__stlxr(v56 - 1, v16));
      unsigned int v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                              + 6360LL))( a1,  a2,  a3,  a4,  a5);
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  unsigned int v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    id v22 = (char *)v64;
    BOOL v21 = v65;
    int64_t v23 = v65 - (_BYTE *)v64;
    unsigned int v24 = v66;
    unint64_t v25 = v66 - (v65 - (_BYTE *)v64);
    if (v25 > 0x4B) {
      goto LABEL_24;
    }
    int v58 = (331 - v25) & 0xFFFFFF00;
    v66 += v58;
    id v22 = (char *)malloc(v58 + v24);
    unsigned int v64 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        BOOL v21 = &v22[v23];
LABEL_24:
        *(_OWORD *)(v21 + 60) = 0u;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)BOOL v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v65 = v21 + 76;
        GPUTools::FB::Fbuf::align((char **)&v64);
        *((_DWORD *)v22 + 1) = 865;
        *((_DWORD *)v22 + 8) = 0;
        __uint64_t v63 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v63);
        *((void *)v22 + 1) = v63;
        strcpy(v22 + 36, "Celle");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((void *)v22 + 7) = a3;
        *((void *)v22 + 8) = a4;
        *((_DWORD *)v22 + 18) = a5;
        char v27 = byte_2071B9;
        if ((byte_2071B9 & 1) != 0) {
          breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_338.size + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        if ([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4)
        {
          uint64_t v34 = 0LL;
          goto LABEL_29;
        }

        uint64_t v33 = mach_absolute_time();
        uint64_t v34 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32)
                                                                                               + 6360LL))( a1,  a2,  a3,  a4,  a5);
        uint64_t v35 = mach_absolute_time() - v33;
        unint64_t v36 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          unsigned int v37 = v64;
          *((void *)v64 + 2) = v33;
          v37[3] = v35;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v61 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
          __int128 v62 = v64;
          *((void *)v64 + 3) = v61;
          v62[2] = __udivti3(v36 * v33, (v36 * (unsigned __int128)v33) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v15);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v64, 4294955008LL, (uint64_t)"p", v28, v29, v30, v31, v32, v34);
        id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v39) {
          id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v40);
        }
        signed int v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v15 + 3404);
        if ((_DWORD)v42) {
          id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v42, v41);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v15, (uint64_t)&v64);
        }
        unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v15 + 3480),  (GPUTools::FB::Fbuf *)(v15 + 3520),  (GPUTools::FB *)&v64);
        uint64_t v44 = *(unsigned int *)(v15 + 3404);
        if ((_DWORD)v44 && gBreakOnError)
        {
          uint64_t v59 = 3LL;
          uint64_t v60 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v27 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v59 = 2LL;
          uint64_t v60 = 865LL;
        }

        breakpoint_break((uint64_t)&v64, (volatile int *)v60, v59, v44, v15);
LABEL_38:
        unsigned int v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
        signed int v46 = (unsigned int *)((char *)v45 + 56);
        do
          unsigned int v47 = __ldaxr(v46);
        while (__stlxr(1u, v46));
        if (v47 == 1)
        {
          do
          {
            while (*v46 == 1)
              ;
            do
              unsigned int v48 = __ldaxr(v46);
            while (__stlxr(1u, v46));
          }

          while (v48 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
        atomic_store(0, v46);
        do
        {
          unsigned int v49 = __ldaxr(v16);
          signed int v50 = v49 - 1;
        }

        while (__stlxr(v50, v16));
        if (gCheckGLErrors) {
          BOOL v51 = v50 < 1;
        }
        else {
          BOOL v51 = 1;
        }
        if (!v51) {
          handle_opengl_thread_conflict((const void **)v15);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v22, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v53 = __ldaxr(v16);
  while (__stlxr(v53 - 1, v16));
  [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
  uint64_t v34 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24) + 6360LL))( a1,  a2,  a3,  a4,  a5);
LABEL_51:
  if (v64) {
    free(v64);
  }
  return v34;
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v27 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        uint64_t v29 = __ldaxr(v16);
      while (__stlxr(v29 - 1, v16));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                              + 6360LL))( a1,  a2,  a3,  a4,  a5);
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v26 = __ldaxr(v16);
      while (__stlxr(v26 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                              + 6360LL))( a1,  a2,  a3,  a4,  a5);
    }
  }

  BOOL v21 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 6360LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v15);
      }
    }
  }

  do
  {
    id v22 = __ldaxr(v16);
    int64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v16));
  if (gCheckGLErrors) {
    unsigned int v24 = v23 < 1;
  }
  else {
    unsigned int v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v15);
  }
  return v21;
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  int64x2_t v24;
  unsigned int v25;
  signed int v26;
  BOOL v27;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        uint64_t v32 = __ldaxr(v16);
      while (__stlxr(v32 - 1, v16));
      uint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                              + 6360LL))( a1,  a2,  a3,  a4,  a5);
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v29 = __ldaxr(v16);
      while (__stlxr(v29 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                              + 6360LL))( a1,  a2,  a3,  a4,  a5);
    }
  }

  BOOL v21 = mach_absolute_time();
  id v22 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 6360LL))( a1,  a2,  a3,  a4,  a5);
  int64_t v23 = mach_absolute_time();
  unsigned int v24 = vdupq_n_s64(1uLL);
  v24.i64[0] = v23 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v24, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v34 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v15);
      }
    }
  }

  do
  {
    unint64_t v25 = __ldaxr(v16);
    uint64_t v26 = v25 - 1;
  }

  while (__stlxr(v26, v16));
  if (gCheckGLErrors) {
    char v27 = v26 < 1;
  }
  else {
    char v27 = 1;
  }
  if (!v27) {
    handle_opengl_thread_conflict((const void **)v15);
  }
  return v22;
}

{
  __GLIContextRec *v9;
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  id v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v26;
  dispatch_queue_s *v27;
  unsigned int v28;
  BOOL v9 = a1;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (!v19) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v15);
  }
  id v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v20 >= 1)
  {
    do
      uint64_t v26 = __ldaxr(v16);
    while (__stlxr(v26 - 1, v16));
    char v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
    dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                            + 6360LL))( v9,  a2,  a3,  a4,  a5);
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    BOOL v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v21 & 1) != 0)
    {
      do
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      [(id)DYGetGLGuestAppClient(v21) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                              + 6360LL))( v9,  a2,  a3,  a4,  a5);
    }
  }

  do
  {
    id v22 = __ldaxr(v16);
    int64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v16));
  if (gCheckGLErrors) {
    unsigned int v24 = v23 < 1;
  }
  else {
    unsigned int v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v15);
  }
  return 0LL;
}

void sub_76108( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void flush_mapped_buffer_range(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v13);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_56:
        unsigned int v46 = __ldaxr(v14);
      while (__stlxr(v46 - 1, v14));
      unsigned int v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6368LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v52[0] = 0LL;
  v52[1] = 0LL;
  int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    wrapper_copyout_mapped_buffer_data((ContextInfo *)v13, a2, a3, a4);
    GPUTools::FB::Encode((uint64_t)v52, 857LL, 0LL, (uint64_t)"Cell", v19, v20, v21, v22, *(void *)v13);
    char v24 = byte_2071B1;
    if ((byte_2071B1 & 1) != 0) {
      breakpoint_break( (uint64_t)v52,  (volatile int *)((char *)&stru_338.addr + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6368LL))( a1,  a2,  a3,  a4);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      unint64_t v28 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v29 = v52[0];
        *((void *)v52[0] + 2) = v26;
        v29[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v50 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        BOOL v51 = v52[0];
        *((void *)v52[0] + 3) = v50;
        uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
        v51[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v25 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  char *v19;
  char *v20;
  int64_t v21;
  unsigned int v22;
  unint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  int v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  __uint64_t v54;
  void *v55;
  char *v56;
  unsigned int v57;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    unsigned int v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    id v45 = handle_opengl_thread_conflict((const void **)v13);
    unsigned int v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_57:
        unsigned int v47 = __ldaxr(v14);
      while (__stlxr(v47 - 1, v14));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6368LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  id v55 = 0LL;
  unsigned int v56 = 0LL;
  unsigned int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v20 = (char *)v55;
    uint64_t v19 = v56;
    uint64_t v21 = v56 - (_BYTE *)v55;
    uint64_t v22 = v57;
    uint64_t v23 = v57 - (v56 - (_BYTE *)v55);
    if (v23 > 0x47) {
      goto LABEL_24;
    }
    uint64_t v49 = (327 - v23) & 0xFFFFFF00;
    v57 += v49;
    uint64_t v20 = (char *)malloc(v49 + v22);
    id v55 = v20;
    if (v20)
    {
      if ((v20 & 3) == 0)
      {
        uint64_t v19 = &v20[v21];
LABEL_24:
        *((void *)v19 + 8) = 0LL;
        *((_OWORD *)v19 + 2) = 0u;
        *((_OWORD *)v19 + 3) = 0u;
        *(_OWORD *)uint64_t v19 = 0u;
        *((_OWORD *)v19 + 1) = 0u;
        unsigned int v56 = v19 + 72;
        GPUTools::FB::Fbuf::align((char **)&v55);
        *((_DWORD *)v20 + 1) = 857;
        *((_DWORD *)v20 + 8) = 0;
        uint64_t v54 = 0LL;
        char v24 = pthread_threadid_np(0LL, &v54);
        *((void *)v20 + 1) = v54;
        strcpy(v20 + 36, "Cell");
        *(void *)(v20 + 44) = *(void *)v13;
        *((_DWORD *)v20 + 13) = a2;
        *((void *)v20 + 7) = a3;
        *((void *)v20 + 8) = a4;
        uint64_t v25 = byte_2071B1;
        if ((byte_2071B1 & 1) != 0) {
          breakpoint_break( (uint64_t)&v55,  (volatile int *)((char *)&stru_338.addr + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
        }
        uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
        if (!(v26 & 0x10 | v25 & 4))
        {
          uint64_t v27 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6368LL))( a1,  a2,  a3,  a4);
          uint64_t v26 = mach_absolute_time();
          unint64_t v28 = v26 - v27;
          uint64_t v29 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            id v30 = v55;
            *((void *)v55 + 2) = v27;
            v30[3] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            signed int v52 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
            int v53 = v55;
            *((void *)v55 + 3) = v52;
            uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
            v53[2] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v26 = check_errors(v13);
        }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    char v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v13);
    char v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_34:
        uint64_t v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6368LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6368LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        unint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6368LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6368LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  uint64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      id v30 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
      }
    }
  }

  do
  {
    uint64_t v22 = __ldaxr(v14);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    char v24 = v23 < 1;
  }
  else {
    char v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_76550( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void get_integer64i_v(__GLIContextRec *a1, GPUTools::GL *a2, uint64_t a3, uint64_t *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v13);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v14);
      while (__stlxr(v55 - 1, v14));
      unsigned int v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, uint64_t *))(*(void *)(v13 + 24) + 6384LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  __int128 v62 = 0LL;
  __uint64_t v63 = 0LL;
  unsigned int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetParameterInfo(a2, &v65[1], (unsigned int *)v65, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 78LL;
    if (!v65[0]) {
      uint64_t v21 = 119LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Ceui@%u%c", *(_DWORD *)&v65[1], v21);
    GPUTools::FB::Encode((uint64_t)&v62, 876LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_2071C4;
    if ((byte_2071C4 & 1) != 0) {
      breakpoint_break((uint64_t)&v62, (volatile int *)&stru_338.align, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, uint64_t *))(*(void *)(v13 + 32) + 6384LL))( a1,  a2,  a3,  a4);
      uint64_t v60 = v13;
      uint64_t v33 = v13 + 4709;
      uint64_t v34 = mach_absolute_time() - v32;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v36 = v62;
        *((void *)v62 + 3) = v34;
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        unint64_t v36 = v62;
        *((void *)v62 + 3) = v59;
        uint64_t v32 = __udivti3(v35 * v32, (v35 * (unsigned __int128)v32) >> 64);
      }

      v36[2] = v32;
      uint64_t v20 = v33;
      uint64_t v13 = v60;
      if (gCheckGLErrors) {
        check_errors(v60);
      }
    }

    unsigned int v37 = v62;
    __int128 v61 = *((_OWORD *)v62 + 1);
    __uint64_t v63 = v62;
    if (v64 >= 0x24)
    {
      *((_DWORD *)v62 + 8) = 0;
      _OWORD *v37 = 0u;
      v37[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v62, 876LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v62 + 1) = v61;
    id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v62, v40);
    }
    BOOL v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42) {
      id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v62, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v62);
    }
    unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v62);
    uint64_t v44 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      uint64_t v57 = 3LL;
      uint64_t v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v57 = 2LL;
      uint64_t v58 = 876LL;
    }

    breakpoint_break((uint64_t)&v62, (volatile int *)v58, v57, v44, v13);
LABEL_43:
    id v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      unsigned int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v62, *(unsigned int *)v62, 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v14);
      signed int v50 = v49 - 1;
    }

    while (__stlxr(v50, v14));
    if (gCheckGLErrors) {
      BOOL v51 = v50 < 1;
    }
    else {
      BOOL v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v14);
  while (__stlxr(v52 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, uint64_t *))(*(void *)(v13 + 24) + 6384LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v62) {
    free(v62);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  uint64_t v34;
  unint64_t v35;
  void *v36;
  _OWORD *v37;
  uint64_t v38;
  id v39;
  GPUTools::FB::Fbuf *v40;
  unsigned int v41;
  GPUTools::FB::Fbuf *v42;
  dispatch_queue_s *v43;
  uint64_t v44;
  GPUTools::FB::Stream *v45;
  unsigned int *v46;
  unsigned int v47;
  unsigned int v48;
  unsigned int v49;
  signed int v50;
  BOOL v51;
  unsigned int v52;
  uint64_t v53;
  id v54;
  unsigned int v55;
  dispatch_queue_s *v56;
  uint64_t v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  __int128 v61;
  void *v62;
  void *v63;
  unsigned int v64;
  _BYTE v65[5];
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v13);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v14);
      while (__stlxr(v55 - 1, v14));
      unsigned int v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, uint64_t *))(*(void *)(v13 + 24) + 6384LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  __int128 v62 = 0LL;
  __uint64_t v63 = 0LL;
  unsigned int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetParameterInfo(a2, &v65[1], (unsigned int *)v65, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 78LL;
    if (!v65[0]) {
      uint64_t v21 = 119LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Ceui@%u%c", *(_DWORD *)&v65[1], v21);
    GPUTools::FB::Encode((uint64_t)&v62, 876LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_2071C4;
    if ((byte_2071C4 & 1) != 0) {
      breakpoint_break((uint64_t)&v62, (volatile int *)&stru_338.align, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, uint64_t *))(*(void *)(v13 + 32) + 6384LL))( a1,  a2,  a3,  a4);
      uint64_t v60 = v13;
      uint64_t v33 = v13 + 4709;
      uint64_t v34 = mach_absolute_time() - v32;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v36 = v62;
        *((void *)v62 + 3) = v34;
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        unint64_t v36 = v62;
        *((void *)v62 + 3) = v59;
        uint64_t v32 = __udivti3(v35 * v32, (v35 * (unsigned __int128)v32) >> 64);
      }

      v36[2] = v32;
      uint64_t v20 = v33;
      uint64_t v13 = v60;
      if (gCheckGLErrors) {
        check_errors(v60);
      }
    }

    unsigned int v37 = v62;
    __int128 v61 = *((_OWORD *)v62 + 1);
    __uint64_t v63 = v62;
    if (v64 >= 0x24)
    {
      *((_DWORD *)v62 + 8) = 0;
      _OWORD *v37 = 0u;
      v37[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v62, 876LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v62 + 1) = v61;
    id v39 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v39) {
      id v39 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v62, v40);
    }
    BOOL v42 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v42) {
      id v39 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v62, v42, v41);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v62);
    }
    unsigned int v43 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v62);
    uint64_t v44 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v44 && gBreakOnError)
    {
      uint64_t v57 = 3LL;
      uint64_t v58 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v57 = 2LL;
      uint64_t v58 = 876LL;
    }

    breakpoint_break((uint64_t)&v62, (volatile int *)v58, v57, v44, v13);
LABEL_43:
    id v45 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v43) defaultFbufStream];
    unsigned int v46 = (unsigned int *)((char *)v45 + 56);
    do
      unsigned int v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          unsigned int v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v45, (GPUTools::FB::Fbuf *)&v62, *(unsigned int *)v62, 1);
    atomic_store(0, v46);
    do
    {
      unsigned int v49 = __ldaxr(v14);
      signed int v50 = v49 - 1;
    }

    while (__stlxr(v50, v14));
    if (gCheckGLErrors) {
      BOOL v51 = v50 < 1;
    }
    else {
      BOOL v51 = 1;
    }
    if (!v51) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v52 = __ldaxr(v14);
  while (__stlxr(v52 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, GPUTools::GL *, uint64_t, uint64_t *))(*(void *)(v13 + 24) + 6384LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v62) {
    free(v62);
  }
}

void sub_76A38( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, void *a15)
{
  if (a15) {
    free(a15);
  }
  _Unwind_Resume(exception_object);
}

void get_buffer_parameteri64v(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, uint64_t *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t *))(*(void *)(v13 + 24) + 6392LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetBufferParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 78LL;
    if (!v63[0]) {
      uint64_t v21 = 119LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 875LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_2071C3;
    if ((byte_2071C3 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_338.offset + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t *))(*(void *)(v13 + 32) + 6392LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    uint64_t v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 875LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    uint64_t v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 875LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    unsigned int v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t *))(*(void *)(v13 + 24) + 6392LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t *))(*(void *)(v13 + 24) + 6392LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetBufferParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 78LL;
    if (!v63[0]) {
      uint64_t v21 = 119LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cee@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 875LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_2071C3;
    if ((byte_2071C3 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_338.offset + 3),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t *))(*(void *)(v13 + 32) + 6392LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    uint64_t v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 875LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    uint64_t v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 875LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    unsigned int v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    unsigned int v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t *))(*(void *)(v13 + 24) + 6392LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_76F24( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void gen_samplers(__GLIContextRec *a1, uint64_t a2, unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6400LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 858LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_2071B2;
    if ((byte_2071B2 & 1) != 0) {
      breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_338.addr + 2),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6400LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  _OWORD *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __int128 v56;
  void *v57;
  void *v58;
  unsigned int v59;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6400LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 858LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_2071B2;
    if ((byte_2071B2 & 1) != 0) {
      breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_338.addr + 2),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6400LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        id v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6400LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6400LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6400LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6400LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_773C4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void delete_samplers(__GLIContextRec *a1, uint64_t a2, const unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6408LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)v50, 856LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_2071B0;
    if ((byte_2071B0 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_338.addr, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 6408LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  char v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  unint64_t v26;
  void *v27;
  id v28;
  GPUTools::FB::Fbuf *v29;
  unsigned int v30;
  GPUTools::FB::Fbuf *v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  GPUTools::FB::Stream *v34;
  unsigned int *v35;
  unsigned int v36;
  unsigned int v37;
  unsigned int v38;
  signed int v39;
  BOOL v40;
  unsigned int v41;
  uint64_t v42;
  id v43;
  unsigned int v44;
  dispatch_queue_s *v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  void *v50[2];
  int v51;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v43 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v42 = handle_opengl_thread_conflict((const void **)v11);
    id v43 = [(id)DYGetGLGuestAppClient(v42) waitOnGraphicsSemaphoreAssertions];
    if ((int)v43 >= 1)
    {
      do
LABEL_56:
        unsigned int v44 = __ldaxr(v12);
      while (__stlxr(v44 - 1, v12));
      signed int v45 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v43) graphicsLockWaitQueue];
      dispatch_sync_f(v45, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6408LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  v50[0] = 0LL;
  v50[1] = 0LL;
  int v51 = 0;
  if ([(id)DYGetGLGuestAppClient(v43) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)v50, 856LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    char v22 = byte_2071B0;
    if ((byte_2071B0 & 1) != 0) {
      breakpoint_break((uint64_t)v50, (volatile int *)&stru_338.addr, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    uint64_t v23 = (uint64_t)[(id)DYGetGLGuestAppClient(v21) overrideFlags];
    if (!(v23 & 0x10 | v22 & 4))
    {
      uint64_t v24 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 6408LL))( a1,  a2,  a3);
      uint64_t v23 = mach_absolute_time();
      uint64_t v25 = v23 - v24;
      unint64_t v26 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v27 = v50[0];
        *((void *)v50[0] + 2) = v24;
        v27[3] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v48 = __udivti3(g_DYTimebaseInfo * v25, (g_DYTimebaseInfo * (unsigned __int128)v25) >> 64);
        id v49 = v50[0];
        *((void *)v50[0] + 3) = v48;
        uint64_t v23 = __udivti3(v26 * v24, (v26 * (unsigned __int128)v24) >> 64);
        v49[2] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v23 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    char v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    char v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6408LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 6408LL))( a1,  a2,  a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        unint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6408LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 32) + 6408LL))( a1,  a2,  a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      id v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    char v22 = v21 < 1;
  }
  else {
    char v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_777F4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_sampler(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6416LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 864;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_2071B8;
        if ((byte_2071B8 & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_338.size, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6416LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 864LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        signed int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        BOOL v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6416LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6416LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 864;
        *((_DWORD *)v16 + 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_2071B8;
        if ((byte_2071B8 & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_338.size, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6416LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 864LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        signed int v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        BOOL v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6416LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6416LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6416LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6416LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6416LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6416LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6416LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  uint64_t v3 = a1;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6416LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6416LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_77CF8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void bind_sampler(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6424LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        uint64_t v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 850;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Cuiui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_2071AA;
        if ((byte_2071AA & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)&stru_338.segname[10],  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6424LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  __uint64_t v52;
  void *v53;
  char *v54;
  unsigned int v55;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_57:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6424LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v53 = 0LL;
  uint64_t v54 = 0LL;
  unsigned int v55 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    unsigned int v18 = (char *)v53;
    int64_t v17 = v54;
    int64_t v19 = v54 - (_BYTE *)v53;
    unsigned int v20 = v55;
    unint64_t v21 = v55 - (v54 - (_BYTE *)v53);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v55 += v47;
    unsigned int v18 = (char *)malloc(v47 + v20);
    uint64_t v53 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        int64_t v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)int64_t v17 = 0u;
        uint64_t v54 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v53);
        *((_DWORD *)v18 + 1) = 850;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v52 = 0LL;
        uint64_t v22 = pthread_threadid_np(0LL, &v52);
        *((void *)v18 + 1) = v52;
        strcpy(v18 + 36, "Cuiui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        char v23 = byte_2071AA;
        if ((byte_2071AA & 1) != 0) {
          breakpoint_break( (uint64_t)&v53,  (volatile int *)&stru_338.segname[10],  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6424LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v28 = v53;
            *((void *)v53 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            int v51 = v53;
            *((void *)v53 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6424LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6424LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    int64_t v17 = __ldaxr(v12);
    unsigned int v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6424LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  int64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6424LL))(a1, a2, a3);
  unsigned int v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_781DC( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void sampler_parameteri(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 24) + 6432LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 101LL;
    if (!v54) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 872LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2071C0;
    if ((byte_2071C0 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_338.offset, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 32) + 6432LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  char v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 24) + 6432LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 101LL;
    if (!v54) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 872LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2071C0;
    if ((byte_2071C0 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_338.offset, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, uint64_t))(*(void *)(v13 + 32) + 6432LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_78650( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void sampler_parameteriv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, const int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 24) + 6440LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 101LL;
    if (!v54[0]) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 873LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2071C1;
    if ((byte_2071C1 & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_338.offset + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 32) + 6440LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  _BYTE v54[5];
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 24) + 6440LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 101LL;
    if (!v54[0]) {
      uint64_t v20 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 873LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2071C1;
    if ((byte_2071C1 & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_338.offset + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const int *))(*(void *)(v13 + 32) + 6440LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_78AC4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void sampler_parameterf(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 24) + 6448LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 110LL;
    if (!v54) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 870LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2071BE;
    if ((byte_2071BE & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_338.size + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 32) + 6448LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  char v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 24) + 6448LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, 0, (unsigned int *)&v54, v18);
    uint64_t v20 = 110LL;
    if (!v54) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie%c", v20);
    GPUTools::FB::Encode((uint64_t)v55, 870LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2071BE;
    if ((byte_2071BE & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_338.size + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float))(*(void *)(v13 + 32) + 6448LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_78F3C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void sampler_parameterfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, const float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 24) + 6456LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 110LL;
    if (!v54[0]) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 871LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2071BF;
    if ((byte_2071BF & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_338.size + 7),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 32) + 6456LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  _BYTE v54[5];
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v13);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_58:
        unsigned int v48 = __ldaxr(v14);
      while (__stlxr(v48 - 1, v14));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 24) + 6456LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v54[1], (unsigned int *)v54, v18);
    uint64_t v20 = 110LL;
    if (!v54[0]) {
      uint64_t v20 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v54[1], v20);
    GPUTools::FB::Encode((uint64_t)v55, 871LL, 0LL, v13 + 4709, v21, v22, v23, v24, *(void *)v13);
    char v26 = byte_2071BF;
    if ((byte_2071BF & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_338.size + 7),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, const float *))(*(void *)(v13 + 32) + 6456LL))( a1,  a2,  a3,  a4);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v31 = v55[0];
        *((void *)v55[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v53 = v55[0];
        *((void *)v55[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v13);
    }

void sub_793B0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void get_sampler_parameteriv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 6480LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 862LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_2071B6;
    if ((byte_2071B6 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_338.addr + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 6480LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    unsigned int v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    uint64_t v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *unsigned int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 862LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    signed int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    BOOL v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 862LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    id v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 6480LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 6480LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 862LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_2071B6;
    if ((byte_2071B6 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_338.addr + 6),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 6480LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    unsigned int v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    uint64_t v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *unsigned int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 862LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    signed int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    BOOL v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 862LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    id v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 6480LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_7989C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_sampler_parameterfv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, float *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 6488LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 110LL;
    if (!v63[0]) {
      uint64_t v21 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 861LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_2071B5;
    if ((byte_2071B5 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_338.addr + 5),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 6488LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    unsigned int v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    uint64_t v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *unsigned int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 861LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    signed int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    BOOL v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 861LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    id v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 6488LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 6488LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  unsigned int v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetTextureParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 110LL;
    if (!v63[0]) {
      uint64_t v21 = 102LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 861LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_2071B5;
    if ((byte_2071B5 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_338.addr + 5),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 32) + 6488LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        uint64_t v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    unsigned int v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    uint64_t v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + 8) = 0;
      *unsigned int v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 861LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    signed int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    BOOL v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 861LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    uint64_t v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    id v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, float *))(*(void *)(v13 + 24) + 6488LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_79D8C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void label_object_EXT(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, const char *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v15);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_61:
        unsigned int v50 = __ldaxr(v16);
      while (__stlxr(v50 - 1, v16));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const char *))(*(void *)(v15 + 24) + 6512LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    if ((_DWORD)a2 == 35656) {
      wrapper_cache_shader_label((ContextInfo *)v15, a3);
    }
    StringToEncode = (char *)GetStringToEncode(a4, a5);
    if (StringToEncode) {
      uint64_t v26 = "CeuiicS";
    }
    else {
      uint64_t v26 = "Ceuiit";
    }
    GPUTools::FB::Encode((uint64_t)v56, 897LL, 2LL, (uint64_t)v26, v21, v22, v23, v24, *(void *)v15);
    char v28 = byte_2071D9;
    if ((byte_2071D9 & 1) != 0) {
      breakpoint_break( (uint64_t)v56,  (volatile int *)((char *)&stru_338.reserved2 + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const char *))(*(void *)(v15 + 32) + 6512LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        id v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  char *StringToEncode;
  const char *v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  void *v56[2];
  int v57;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v15);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_61:
        unsigned int v50 = __ldaxr(v16);
      while (__stlxr(v50 - 1, v16));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const char *))(*(void *)(v15 + 24) + 6512LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    if ((_DWORD)a2 == 35656) {
      wrapper_cache_shader_label((ContextInfo *)v15, a3);
    }
    StringToEncode = (char *)GetStringToEncode(a4, a5);
    if (StringToEncode) {
      uint64_t v26 = "CeuiicS";
    }
    else {
      uint64_t v26 = "Ceuiit";
    }
    GPUTools::FB::Encode((uint64_t)v56, 897LL, 2LL, (uint64_t)v26, v21, v22, v23, v24, *(void *)v15);
    char v28 = byte_2071D9;
    if ((byte_2071D9 & 1) != 0) {
      breakpoint_break( (uint64_t)v56,  (volatile int *)((char *)&stru_338.reserved2 + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const char *))(*(void *)(v15 + 32) + 6512LL))( a1,  a2,  a3,  a4,  a5);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        id v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_36:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      char v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_38:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const char *))(*(void *)(v15 + 24) + 6512LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_38;
    }
  }

  if ((_DWORD)a2 == 35656) {
    wrapper_cache_shader_label((ContextInfo *)v15, a3);
  }
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const char *))(*(void *)(v15 + 32) + 6512LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      signed int v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_36:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_38:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const char *))(*(void *)(v15 + 24) + 6512LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_38;
    }
  }

  if ((_DWORD)a2 == 35656) {
    wrapper_cache_shader_label((ContextInfo *)v15, a3);
  }
  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, const char *))(*(void *)(v15 + 32) + 6512LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_7A230( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14)
{
  if (a14) {
    free(a14);
  }
  _Unwind_Resume(exception_object);
}

void get_object_label_EXT(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4, int *a5, char *a6)
{
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v17);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_56:
        unsigned int v50 = __ldaxr(v18);
      while (__stlxr(v50 - 1, v18));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, char *))(*(void *)(v17 + 24)
                                                                                          + 6520LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v56, 892LL, 2LL, (uint64_t)"Ceuiipp", v22, v23, v24, v25, *(void *)v17);
    char v28 = byte_2071D4;
    if ((byte_2071D4 & 1) != 0) {
      breakpoint_break((uint64_t)v56, (volatile int *)&stru_338.reserved1, 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, char *))(*(void *)(v17 + 32)
                                                                                          + 6520LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        id v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v29 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  id v26;
  uint64_t v27;
  char v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  unint64_t v32;
  void *v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  void *v56[2];
  int v57;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v17);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_56:
        unsigned int v50 = __ldaxr(v18);
      while (__stlxr(v50 - 1, v18));
      signed int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, char *))(*(void *)(v17 + 24)
                                                                                          + 6520LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  v56[0] = 0LL;
  v56[1] = 0LL;
  int v57 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v26 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v26))
  {
    GPUTools::FB::Encode((uint64_t)v56, 892LL, 2LL, (uint64_t)"Ceuiipp", v22, v23, v24, v25, *(void *)v17);
    char v28 = byte_2071D4;
    if ((byte_2071D4 & 1) != 0) {
      breakpoint_break((uint64_t)v56, (volatile int *)&stru_338.reserved1, 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v28 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, char *))(*(void *)(v17 + 32)
                                                                                          + 6520LL))( a1,  a2,  a3,  a4,  a5,  a6);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v56[0];
        *((void *)v56[0] + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        id v55 = v56[0];
        *((void *)v56[0] + 3) = v54;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v55[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v29 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    char v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v27 = handle_opengl_thread_conflict((const void **)v17);
    char v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        uint64_t v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, char *))(*(void *)(v17 + 24)
                                                                                          + 6520LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        id v26 = __ldaxr(v18);
      while (__stlxr(v26 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, char *))(*(void *)(v17 + 32) + 6520LL))( a1,  a2,  a3,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      uint64_t v31 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v17);
      }
    }
  }

  do
  {
    uint64_t v23 = __ldaxr(v18);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v18));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  int64x2_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        unint64_t v32 = __ldaxr(v18);
      while (__stlxr(v32 - 1, v18));
      uint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, char *))(*(void *)(v17 + 24)
                                                                                          + 6520LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        uint64_t v29 = __ldaxr(v18);
      while (__stlxr(v29 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t, int *, char *))(*(void *)(v17 + 32) + 6520LL))( a1,  a2,  a3,  a4,  a5,  a6);
  uint64_t v24 = mach_absolute_time();
  uint64_t v25 = vdupq_n_s64(1uLL);
  v25.i64[0] = v24 - v23;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v25, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      id v34 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v17);
      }
    }
  }

  do
  {
    id v26 = __ldaxr(v18);
    uint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v18));
  if (gCheckGLErrors) {
    char v28 = v27 < 1;
  }
  else {
    char v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_7A6A0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void insert_event_marker_EXT(__GLIContextRec *a1, unsigned int *a2, char *a3)
{
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 < 2;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  id v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      unsigned int v42 = __ldaxr(v12);
    while (__stlxr(v42 - 1, v12));
    unsigned int v43 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v43, 0LL, (dispatch_function_t)do_nothing);
    (*(void (**)(__GLIContextRec *, unsigned int *, char *))(*(void *)(v11 + 24) + 6528LL))(v5, a2, a3);
    goto LABEL_51;
  }

  if ((wrapper_handle_marker_event((ContextInfo *)v11, a2, a3) & 1) == 0)
  {
    StringToEncode = (char *)GetStringToEncode((int)a2, a3);
    uint64_t v18 = 83LL;
    if (!StringToEncode) {
      uint64_t v18 = 116LL;
    }
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci%c", v18);
    GPUTools::FB::Encode((uint64_t)v49, 895LL, 2LL, v11 + 4709, v19, v20, v21, v22, *(void *)v11);
    char v24 = byte_2071D7;
    if ((byte_2071D7 & 1) != 0) {
      breakpoint_break( (uint64_t)v49,  (volatile int *)((char *)&stru_338.reserved1 + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, unsigned int *, char *))(*(void *)(v11 + 32) + 6528LL))( v5,  a2,  StringToEncode);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        char v28 = v49[0];
        *((void *)v49[0] + 2) = v26;
        v28[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_29;
        }
      }

      else
      {
        unint64_t v46 = g_DYTimebaseInfo;
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        uint64_t v48 = v49[0];
        *((void *)v49[0] + 3) = v47;
        uint64_t v25 = __udivti3(v46 * v26, (v46 * (unsigned __int128)v26) >> 64);
        v48[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_29;
        }
      }

      uint64_t v25 = check_errors(v11);
    }

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *StringToEncode;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  dispatch_queue_s *v43;
  uint64_t v44;
  uint64_t v45;
  unint64_t v46;
  uint64_t v47;
  void *v48;
  void *v49[2];
  int v50;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 < 2;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  id v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      unsigned int v42 = __ldaxr(v12);
    while (__stlxr(v42 - 1, v12));
    unsigned int v43 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v43, 0LL, (dispatch_function_t)do_nothing);
    (*(void (**)(__GLIContextRec *, unsigned int *, char *))(*(void *)(v11 + 24) + 6528LL))(v5, a2, a3);
    goto LABEL_51;
  }

  if ((wrapper_handle_marker_event((ContextInfo *)v11, a2, a3) & 1) == 0)
  {
    StringToEncode = (char *)GetStringToEncode((int)a2, a3);
    uint64_t v18 = 83LL;
    if (!StringToEncode) {
      uint64_t v18 = 116LL;
    }
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci%c", v18);
    GPUTools::FB::Encode((uint64_t)v49, 895LL, 2LL, v11 + 4709, v19, v20, v21, v22, *(void *)v11);
    char v24 = byte_2071D7;
    if ((byte_2071D7 & 1) != 0) {
      breakpoint_break( (uint64_t)v49,  (volatile int *)((char *)&stru_338.reserved1 + 3),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, unsigned int *, char *))(*(void *)(v11 + 32) + 6528LL))( v5,  a2,  StringToEncode);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        char v28 = v49[0];
        *((void *)v49[0] + 2) = v26;
        v28[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_29;
        }
      }

      else
      {
        unint64_t v46 = g_DYTimebaseInfo;
        uint64_t v47 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        uint64_t v48 = v49[0];
        *((void *)v49[0] + 3) = v47;
        uint64_t v25 = __udivti3(v46 * v26, (v46 * (unsigned __int128)v26) >> 64);
        v48[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_29;
        }
      }

      uint64_t v25 = check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v19 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_31:
        uint64_t v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, unsigned int *, char *))(*(void *)(v11 + 24) + 6528LL))(a1, a2, a3);
      return;
    }
  }

  if ((wrapper_handle_marker_event((ContextInfo *)v11, a2, a3) & 1) == 0)
  {
    (*(void (**)(__GLIContextRec *, unsigned int *, char *))(*(void *)(v11 + 32) + 6528LL))(a1, a2, a3);
    ++*(void *)(v11 + 3704);
    if (gCheckGLErrors)
    {
      check_errors(v11);
      if (gBreakOnError)
      {
        uint64_t v23 = *(unsigned int *)(v11 + 3404);
        if ((_DWORD)v23) {
          breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v11);
        }
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v12);
    uint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v12));
  if (gCheckGLErrors) {
    uint64_t v18 = v17 < 1;
  }
  else {
    uint64_t v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_31:
        char v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, unsigned int *, char *))(*(void *)(v11 + 24) + 6528LL))(a1, a2, a3);
      return;
    }
  }

  if ((wrapper_handle_marker_event((ContextInfo *)v11, a2, a3) & 1) == 0)
  {
    id v16 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, unsigned int *, char *))(*(void *)(v11 + 32) + 6528LL))(a1, a2, a3);
    uint64_t v17 = mach_absolute_time();
    uint64_t v18 = vdupq_n_s64(1uLL);
    v18.i64[0] = v17 - v16;
    *(int64x2_t *)(v11 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v11 + 3696));
    if (gCheckGLErrors)
    {
      check_errors(v11);
      if (gBreakOnError)
      {
        uint64_t v26 = *(unsigned int *)(v11 + 3404);
        if ((_DWORD)v26) {
          breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
        }
      }
    }
  }

  do
  {
    uint64_t v19 = __ldaxr(v12);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v12));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_7AA9C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void push_group_marker_EXT(__GLIContextRec *a1, size_t a2, const char *a3)
{
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 < 2;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  id v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      unsigned int v43 = __ldaxr(v12);
    while (__stlxr(v43 - 1, v12));
    uint64_t v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
    (*(void (**)(__GLIContextRec *, size_t, const char *))(*(void *)(v11 + 24) + 6536LL))(v5, a2, a3);
    goto LABEL_50;
  }

  StringToEncode = (char *)GetStringToEncode(a2, a3);
  uint64_t v18 = 83LL;
  if (!StringToEncode) {
    uint64_t v18 = 116LL;
  }
  snprintf((char *)(v11 + 4709), 0x40uLL, "Ci%c", v18);
  GPUTools::FB::Encode((uint64_t)v49, 919LL, 2LL, v11 + 4709, v19, v20, v21, v22, *(void *)v11);
  char v24 = byte_2071EF;
  if ((byte_2071EF & 1) != 0) {
    breakpoint_break((uint64_t)v49, (volatile int *)&stru_388.sectname[15], 1LL, *(unsigned int *)(v11 + 3404), v11);
  }
  uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
  if (!(v25 & 0x10 | v24 & 4))
  {
    uint64_t v26 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, size_t, char *))(*(void *)(v11 + 32) + 6536LL))(v5, a2, StringToEncode);
    uint64_t v25 = mach_absolute_time();
    uint64_t v27 = v25 - v26;
    unint64_t v28 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      id v29 = v49[0];
      *((void *)v49[0] + 2) = v26;
      v29[3] = v27;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v47 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
      uint64_t v48 = v49[0];
      *((void *)v49[0] + 3) = v47;
      uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
      v48[2] = v25;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    uint64_t v25 = check_errors(v11);
  }

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *StringToEncode;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  unint64_t v28;
  void *v29;
  id v30;
  GPUTools::FB::Fbuf *v31;
  unsigned int v32;
  GPUTools::FB::Fbuf *v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  GPUTools::FB::Stream *v36;
  unsigned int *v37;
  unsigned int v38;
  unsigned int v39;
  unsigned int v40;
  signed int v41;
  BOOL v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  uint64_t v46;
  uint64_t v47;
  void *v48;
  void *v49[2];
  int v50;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  v49[0] = 0LL;
  v49[1] = 0LL;
  int v50 = 0;
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 < 2;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  id v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      unsigned int v43 = __ldaxr(v12);
    while (__stlxr(v43 - 1, v12));
    uint64_t v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
    (*(void (**)(__GLIContextRec *, size_t, const char *))(*(void *)(v11 + 24) + 6536LL))(v5, a2, a3);
    goto LABEL_50;
  }

  StringToEncode = (char *)GetStringToEncode(a2, a3);
  uint64_t v18 = 83LL;
  if (!StringToEncode) {
    uint64_t v18 = 116LL;
  }
  snprintf((char *)(v11 + 4709), 0x40uLL, "Ci%c", v18);
  GPUTools::FB::Encode((uint64_t)v49, 919LL, 2LL, v11 + 4709, v19, v20, v21, v22, *(void *)v11);
  char v24 = byte_2071EF;
  if ((byte_2071EF & 1) != 0) {
    breakpoint_break((uint64_t)v49, (volatile int *)&stru_388.sectname[15], 1LL, *(unsigned int *)(v11 + 3404), v11);
  }
  uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
  if (!(v25 & 0x10 | v24 & 4))
  {
    uint64_t v26 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *, size_t, char *))(*(void *)(v11 + 32) + 6536LL))(v5, a2, StringToEncode);
    uint64_t v25 = mach_absolute_time();
    uint64_t v27 = v25 - v26;
    unint64_t v28 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      id v29 = v49[0];
      *((void *)v49[0] + 2) = v26;
      v29[3] = v27;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    else
    {
      uint64_t v47 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
      uint64_t v48 = v49[0];
      *((void *)v49[0] + 3) = v47;
      uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
      v48[2] = v25;
      if (!gCheckGLErrors) {
        goto LABEL_28;
      }
    }

    uint64_t v25 = check_errors(v11);
  }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v19 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_31:
        uint64_t v21 = __ldaxr(v12);
      while (__stlxr(v21 - 1, v12));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, size_t, const char *))(*(void *)(v11 + 24) + 6536LL))(a1, a2, a3);
      return;
    }
  }

  (*(void (**)(__GLIContextRec *, size_t, const char *))(*(void *)(v11 + 32) + 6536LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v11);
      }
    }
  }

  wrapper_push_group_marker((ContextInfo *)v11, a2, a3);
  do
  {
    id v16 = __ldaxr(v12);
    uint64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v12));
  if (gCheckGLErrors) {
    uint64_t v18 = v17 < 1;
  }
  else {
    uint64_t v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_31:
        char v24 = __ldaxr(v12);
      while (__stlxr(v24 - 1, v12));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, size_t, const char *))(*(void *)(v11 + 24) + 6536LL))(a1, a2, a3);
      return;
    }
  }

  id v16 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, size_t, const char *))(*(void *)(v11 + 32) + 6536LL))(a1, a2, a3);
  uint64_t v17 = mach_absolute_time();
  uint64_t v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v16;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v11);
      }
    }
  }

  wrapper_push_group_marker((ContextInfo *)v11, a2, a3);
  do
  {
    uint64_t v19 = __ldaxr(v12);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v12));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  dispatch_queue_s *v21;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  unint64_t v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  id v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v12);
    while (__stlxr(v20 - 1, v12));
    uint64_t v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    (*(void (**)(__GLIContextRec *, size_t, const char *))(*(void *)(v11 + 24) + 6536LL))(v5, a2, a3);
  }

  else
  {
    wrapper_push_group_marker((ContextInfo *)v11, a2, a3);
    do
    {
      uint64_t v17 = __ldaxr(v12);
      uint64_t v18 = v17 - 1;
    }

    while (__stlxr(v18, v12));
    if (gCheckGLErrors) {
      uint64_t v19 = v18 < 1;
    }
    else {
      uint64_t v19 = 1;
    }
    if (!v19) {
      handle_opengl_thread_conflict((const void **)v11);
    }
  }

{
  void *v5;
  uint64_t v6;
  unint64_t v7;
  BOOL v8;
  void *v9;
  ContextInfo *v10;
  uint64_t v5 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v5) {
    goto LABEL_12;
  }
  unint64_t v6 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v7 = v5[4];
    unint64_t v8 = v7 >= (unint64_t)a1;
    else {
      BOOL v9 = v5 + 1;
    }
    if (v8) {
      unint64_t v6 = (uint64_t)v5;
    }
    uint64_t v5 = (void *)*v9;
  }

  while (*v9);
  if (v6 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v6 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v6 = ContextInfo::activeCtxInfoMap + 8;
  unint64_t v10 = *(ContextInfo **)(v6 + 40);
  (*(void (**)(__GLIContextRec *, size_t, const char *))(*((void *)v10 + 4) + 6536LL))(a1, a2, a3);
  wrapper_push_group_marker(v10, a2, a3);
}

void sub_7AEA8( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void pop_group_marker_EXT(__GLIContextRec *a1)
{
  v1 = a1;
  uint64_t v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    uint64_t v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  v43[0] = 0LL;
  v43[1] = 0LL;
  int v44 = 0;
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 < 2;
  }
  else {
    BOOL v11 = 1;
  }
  if (!v11) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v7);
  }
  id v12 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v12 >= 1)
  {
    do
      unsigned int v37 = __ldaxr(v8);
    while (__stlxr(v37 - 1, v8));
    unsigned int v38 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v12) graphicsLockWaitQueue];
    dispatch_sync_f(v38, 0LL, (dispatch_function_t)do_nothing);
    (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 6544LL))(v1);
    goto LABEL_48;
  }

  GPUTools::FB::Encode((uint64_t)v43, 898LL, 2LL, (uint64_t)"C", v13, v14, v15, v16, *(void *)v7);
  char v18 = byte_2071DA;
  if ((byte_2071DA & 1) != 0) {
    breakpoint_break( (uint64_t)v43,  (volatile int *)((char *)&stru_338.reserved2 + 2),  1LL,  *(unsigned int *)(v7 + 3404),  v7);
  }
  uint64_t v19 = (uint64_t)[(id)DYGetGLGuestAppClient(v17) overrideFlags];
  if (!(v19 & 0x10 | v18 & 4))
  {
    uint64_t v20 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 6544LL))(v1);
    uint64_t v19 = mach_absolute_time();
    uint64_t v21 = v19 - v20;
    unint64_t v22 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v23 = v43[0];
      *((void *)v43[0] + 2) = v20;
      v23[3] = v21;
      if (!gCheckGLErrors) {
        goto LABEL_26;
      }
    }

    else
    {
      uint64_t v41 = __udivti3(g_DYTimebaseInfo * v21, (g_DYTimebaseInfo * (unsigned __int128)v21) >> 64);
      BOOL v42 = v43[0];
      *((void *)v43[0] + 3) = v41;
      uint64_t v19 = __udivti3(v22 * v20, (v22 * (unsigned __int128)v20) >> 64);
      v42[2] = v19;
      if (!gCheckGLErrors) {
        goto LABEL_26;
      }
    }

    uint64_t v19 = check_errors(v7);
  }

{
  __GLIContextRec *v1;
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  uint64_t v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  char v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  unint64_t v22;
  void *v23;
  id v24;
  GPUTools::FB::Fbuf *v25;
  unsigned int v26;
  GPUTools::FB::Fbuf *v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  GPUTools::FB::Stream *v30;
  unsigned int *v31;
  unsigned int v32;
  unsigned int v33;
  unsigned int v34;
  signed int v35;
  BOOL v36;
  unsigned int v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  uint64_t v40;
  uint64_t v41;
  void *v42;
  void *v43[2];
  int v44;
  v1 = a1;
  uint64_t v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    uint64_t v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  v43[0] = 0LL;
  v43[1] = 0LL;
  int v44 = 0;
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 < 2;
  }
  else {
    BOOL v11 = 1;
  }
  if (!v11) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v7);
  }
  id v12 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v12 >= 1)
  {
    do
      unsigned int v37 = __ldaxr(v8);
    while (__stlxr(v37 - 1, v8));
    unsigned int v38 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v12) graphicsLockWaitQueue];
    dispatch_sync_f(v38, 0LL, (dispatch_function_t)do_nothing);
    (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 6544LL))(v1);
    goto LABEL_48;
  }

  GPUTools::FB::Encode((uint64_t)v43, 898LL, 2LL, (uint64_t)"C", v13, v14, v15, v16, *(void *)v7);
  char v18 = byte_2071DA;
  if ((byte_2071DA & 1) != 0) {
    breakpoint_break( (uint64_t)v43,  (volatile int *)((char *)&stru_338.reserved2 + 2),  1LL,  *(unsigned int *)(v7 + 3404),  v7);
  }
  uint64_t v19 = (uint64_t)[(id)DYGetGLGuestAppClient(v17) overrideFlags];
  if (!(v19 & 0x10 | v18 & 4))
  {
    uint64_t v20 = mach_absolute_time();
    (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 6544LL))(v1);
    uint64_t v19 = mach_absolute_time();
    uint64_t v21 = v19 - v20;
    unint64_t v22 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      uint64_t v23 = v43[0];
      *((void *)v43[0] + 2) = v20;
      v23[3] = v21;
      if (!gCheckGLErrors) {
        goto LABEL_26;
      }
    }

    else
    {
      uint64_t v41 = __udivti3(g_DYTimebaseInfo * v21, (g_DYTimebaseInfo * (unsigned __int128)v21) >> 64);
      BOOL v42 = v43[0];
      *((void *)v43[0] + 3) = v41;
      uint64_t v19 = __udivti3(v22 * v20, (v22 * (unsigned __int128)v20) >> 64);
      v42[2] = v19;
      if (!gCheckGLErrors) {
        goto LABEL_26;
      }
    }

    uint64_t v19 = check_errors(v7);
  }

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  unsigned int v12;
  signed int v13;
  BOOL v14;
  uint64_t v15;
  id v16;
  unsigned int v17;
  dispatch_queue_s *v18;
  uint64_t v19;
  uint64_t v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    uint64_t v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v15 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v16 = [(id)DYGetGLGuestAppClient(v15) waitOnGraphicsSemaphoreAssertions];
    if ((int)v16 >= 1)
    {
      do
LABEL_31:
        uint64_t v17 = __ldaxr(v8);
      while (__stlxr(v17 - 1, v8));
      char v18 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
      dispatch_sync_f(v18, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 6544LL))(a1);
      return;
    }
  }

  (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 6544LL))(a1);
  ++*(void *)(v7 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      uint64_t v19 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v19) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v19, v7);
      }
    }
  }

  wrapper_pop_group_marker(v7);
  do
  {
    id v12 = __ldaxr(v8);
    uint64_t v13 = v12 - 1;
  }

  while (__stlxr(v13, v8));
  if (gCheckGLErrors) {
    uint64_t v14 = v13 < 1;
  }
  else {
    uint64_t v14 = 1;
  }
  if (!v14) {
    handle_opengl_thread_conflict((const void **)v7);
  }
}

{
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  uint64_t v12;
  uint64_t v13;
  int64x2_t v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  id v19;
  unsigned int v20;
  dispatch_queue_s *v21;
  uint64_t v22;
  uint64_t v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    uint64_t v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (v11)
  {
    uint64_t v19 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    char v18 = handle_opengl_thread_conflict((const void **)v7);
    uint64_t v19 = [(id)DYGetGLGuestAppClient(v18) waitOnGraphicsSemaphoreAssertions];
    if ((int)v19 >= 1)
    {
      do
LABEL_31:
        uint64_t v20 = __ldaxr(v8);
      while (__stlxr(v20 - 1, v8));
      uint64_t v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v19) graphicsLockWaitQueue];
      dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 6544LL))(a1);
      return;
    }
  }

  id v12 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 32) + 6544LL))(a1);
  uint64_t v13 = mach_absolute_time();
  uint64_t v14 = vdupq_n_s64(1uLL);
  v14.i64[0] = v13 - v12;
  *(int64x2_t *)(v7 + 3696) = vaddq_s64(v14, *(int64x2_t *)(v7 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v7);
    if (gBreakOnError)
    {
      unint64_t v22 = *(unsigned int *)(v7 + 3404);
      if ((_DWORD)v22) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v22, v7);
      }
    }
  }

  wrapper_pop_group_marker(v7);
  do
  {
    uint64_t v15 = __ldaxr(v8);
    uint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v8));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 < 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v7);
  }
}

{
  __GLIContextRec *v1;
  void *v2;
  uint64_t v3;
  unint64_t v4;
  BOOL v5;
  void *v6;
  uint64_t v7;
  unsigned int *v8;
  unsigned int v9;
  signed int v10;
  BOOL v11;
  id v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  unsigned int v16;
  dispatch_queue_s *v17;
  v1 = a1;
  uint64_t v2 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v2) {
    goto LABEL_12;
  }
  uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v4 = v2[4];
    BOOL v5 = v4 >= (unint64_t)a1;
    else {
      unint64_t v6 = v2 + 1;
    }
    if (v5) {
      uint64_t v3 = (uint64_t)v2;
    }
    uint64_t v2 = (void *)*v6;
  }

  while (*v6);
  if (v3 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v3 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v3 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v7 = *(void *)(v3 + 40);
  unint64_t v8 = (unsigned int *)(v7 + 4640);
  do
  {
    unsigned int v9 = __ldaxr(v8);
    signed int v10 = v9 + 1;
  }

  while (__stlxr(v10, v8));
  if (gCheckGLErrors) {
    BOOL v11 = v10 <= 1;
  }
  else {
    BOOL v11 = 1;
  }
  if (!v11) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v7);
  }
  id v12 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v12 >= 1)
  {
    do
      uint64_t v16 = __ldaxr(v8);
    while (__stlxr(v16 - 1, v8));
    uint64_t v17 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v12) graphicsLockWaitQueue];
    dispatch_sync_f(v17, 0LL, (dispatch_function_t)do_nothing);
    (*(void (**)(__GLIContextRec *))(*(void *)(v7 + 24) + 6544LL))(v1);
  }

  else
  {
    wrapper_pop_group_marker(v7);
    do
    {
      uint64_t v13 = __ldaxr(v8);
      uint64_t v14 = v13 - 1;
    }

    while (__stlxr(v14, v8));
    if (gCheckGLErrors) {
      uint64_t v15 = v14 < 1;
    }
    else {
      uint64_t v15 = 1;
    }
    if (!v15) {
      handle_opengl_thread_conflict((const void **)v7);
    }
  }

{
  void *v1;
  uint64_t v2;
  unint64_t v3;
  BOOL v4;
  void *v5;
  uint64_t v6;
  v1 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v1) {
    goto LABEL_12;
  }
  uint64_t v2 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v3 = v1[4];
    unint64_t v4 = v3 >= (unint64_t)a1;
    else {
      BOOL v5 = v1 + 1;
    }
    if (v4) {
      uint64_t v2 = (uint64_t)v1;
    }
    v1 = (void *)*v5;
  }

  while (*v5);
  if (v2 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v2 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v2 = ContextInfo::activeCtxInfoMap + 8;
  unint64_t v6 = *(void *)(v2 + 40);
  (*(void (**)(__GLIContextRec *))(*(void *)(v6 + 32) + 6544LL))(a1);
  wrapper_pop_group_marker(v6);
}

void sub_7B22C( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *a10)
{
  if (a10) {
    free(a10);
  }
  _Unwind_Resume(exception_object);
}

void use_program_stages(__GLIContextRec *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v13);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_60:
        unsigned int v46 = __ldaxr(v14);
      while (__stlxr(v46 - 1, v14));
      uint64_t v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6552LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)v53, 920LL, 512LL, (uint64_t)"Cuiuiui", v18, v19, v20, v21, *(void *)v13);
    query_pipeline_programs(v13, a2, v52);
    BOOL v23 = check_errors(v13);
    char v24 = byte_2071F0;
    if ((byte_2071F0 & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)stru_388.segname, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6552LL))( a1,  a2,  a3,  a4);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      unint64_t v28 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v29 = v53[0];
        *((void *)v53[0] + 2) = v26;
        v29[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v50 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        signed int v51 = v53[0];
        *((void *)v53[0] + 3) = v50;
        uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
        v51[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v25 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  id v22;
  BOOL v23;
  char v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  unint64_t v28;
  void *v29;
  id v30;
  GPUTools::FB::Fbuf *v31;
  unsigned int v32;
  GPUTools::FB::Fbuf *v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  GPUTools::FB::Stream *v36;
  unsigned int *v37;
  unsigned int v38;
  unsigned int v39;
  unsigned int v40;
  signed int v41;
  BOOL v42;
  unsigned int v43;
  uint64_t v44;
  id v45;
  unsigned int v46;
  dispatch_queue_s *v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  unsigned int v52[6];
  void *v53[2];
  int v54;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v45 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v44 = handle_opengl_thread_conflict((const void **)v13);
    id v45 = [(id)DYGetGLGuestAppClient(v44) waitOnGraphicsSemaphoreAssertions];
    if ((int)v45 >= 1)
    {
      do
LABEL_60:
        unsigned int v46 = __ldaxr(v14);
      while (__stlxr(v46 - 1, v14));
      uint64_t v47 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v45) graphicsLockWaitQueue];
      dispatch_sync_f(v47, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6552LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  v53[0] = 0LL;
  v53[1] = 0LL;
  int v54 = 0;
  if ([(id)DYGetGLGuestAppClient(v45) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    GPUTools::FB::Encode((uint64_t)v53, 920LL, 512LL, (uint64_t)"Cuiuiui", v18, v19, v20, v21, *(void *)v13);
    query_pipeline_programs(v13, a2, v52);
    BOOL v23 = check_errors(v13);
    char v24 = byte_2071F0;
    if ((byte_2071F0 & 1) != 0) {
      breakpoint_break((uint64_t)v53, (volatile int *)stru_388.segname, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v25 = (uint64_t)[(id)DYGetGLGuestAppClient(v23) overrideFlags];
    if (!(v25 & 0x10 | v24 & 4))
    {
      uint64_t v26 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6552LL))( a1,  a2,  a3,  a4);
      uint64_t v25 = mach_absolute_time();
      uint64_t v27 = v25 - v26;
      unint64_t v28 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v29 = v53[0];
        *((void *)v53[0] + 2) = v26;
        v29[3] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v50 = __udivti3(g_DYTimebaseInfo * v27, (g_DYTimebaseInfo * (unsigned __int128)v27) >> 64);
        signed int v51 = v53[0];
        *((void *)v53[0] + 3) = v50;
        uint64_t v25 = __udivti3(v28 * v26, (v28 * (unsigned __int128)v26) >> 64);
        v51[2] = v25;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v25 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unsigned int v28[6];
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    char v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v23 = handle_opengl_thread_conflict((const void **)v13);
    char v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_38:
        uint64_t v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
LABEL_40:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6552LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        id v22 = __ldaxr(v14);
      while (__stlxr(v22 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_40;
    }
  }

  query_pipeline_programs(v13, a2, v28);
  check_errors(v13);
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6552LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (!gCheckGLErrors) {
    goto LABEL_24;
  }
  check_errors(v13);
  if (gBreakOnError && (uint64_t v27 = *(unsigned int *)(v13 + 3404), (_DWORD)v27))
  {
    breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v13);
    if (!gCheckGLErrors) {
      goto LABEL_24;
    }
  }

  else if (!gCheckGLErrors)
  {
LABEL_24:
    check_errors(v13);
  }

  if ((_DWORD)a3 && !*(_DWORD *)(v13 + 3404)) {
    wrapper_cache_pipeline_use_stages((void *)v13, a2, a3, a4, v28, 0);
  }
  do
  {
    uint64_t v19 = __ldaxr(v14);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v14));
  if (gCheckGLErrors) {
    uint64_t v21 = v20 < 1;
  }
  else {
    uint64_t v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  int64x2_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unsigned int v31[6];
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_38:
        unint64_t v28 = __ldaxr(v14);
      while (__stlxr(v28 - 1, v14));
      uint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_40:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6552LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v25 = __ldaxr(v14);
      while (__stlxr(v25 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_40;
    }
  }

  query_pipeline_programs(v13, a2, v31);
  check_errors(v13);
  uint64_t v19 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6552LL))( a1,  a2,  a3,  a4);
  uint64_t v20 = mach_absolute_time();
  uint64_t v21 = vdupq_n_s64(1uLL);
  v21.i64[0] = v20 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v21, *(int64x2_t *)(v13 + 3696));
  if (!gCheckGLErrors) {
    goto LABEL_24;
  }
  check_errors(v13);
  if (gBreakOnError && (id v30 = *(unsigned int *)(v13 + 3404), (_DWORD)v30))
  {
    breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v13);
    if (!gCheckGLErrors) {
      goto LABEL_24;
    }
  }

  else if (!gCheckGLErrors)
  {
LABEL_24:
    check_errors(v13);
  }

  if ((_DWORD)a3 && !*(_DWORD *)(v13 + 3404)) {
    wrapper_cache_pipeline_use_stages((void *)v13, a2, a3, a4, v31, 0);
  }
  do
  {
    id v22 = __ldaxr(v14);
    BOOL v23 = v22 - 1;
  }

  while (__stlxr(v23, v14));
  if (gCheckGLErrors) {
    char v24 = v23 < 1;
  }
  else {
    char v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_7B6D0( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void active_shader_program(__GLIContextRec *a1, uint64_t a2, uint64_t a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_60:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6560LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  int v54 = 0LL;
  id v55 = 0LL;
  unsigned int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v18 = (char *)v54;
    BOOL v17 = v55;
    int64_t v19 = v55 - (_BYTE *)v54;
    unsigned int v20 = v56;
    unint64_t v21 = v56 - (v55 - (_BYTE *)v54);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v56 += v47;
    uint64_t v18 = (char *)malloc(v47 + v20);
    int v54 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        id v55 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v54);
        *((_DWORD *)v18 + 1) = 886;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v53 = 0LL;
        pthread_threadid_np(0LL, &v53);
        *((void *)v18 + 1) = v53;
        strcpy(v18 + 36, "Cuiui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        query_pipeline_programs(v11, a2, v52);
        BOOL v22 = check_errors(v11);
        char v23 = byte_2071CE;
        if ((byte_2071CE & 1) != 0) {
          breakpoint_break( (uint64_t)&v54,  (volatile int *)((char *)&stru_338.nreloc + 2),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6560LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v28 = v54;
            *((void *)v54 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            signed int v51 = v54;
            *((void *)v54 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  char *v17;
  char *v18;
  int64_t v19;
  unsigned int v20;
  unint64_t v21;
  BOOL v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  int v47;
  uint64_t v48;
  uint64_t v49;
  uint64_t v50;
  void *v51;
  void v52[3];
  __uint64_t v53;
  void *v54;
  char *v55;
  unsigned int v56;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v11);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_60:
        unsigned int v45 = __ldaxr(v12);
      while (__stlxr(v45 - 1, v12));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6560LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  int v54 = 0LL;
  id v55 = 0LL;
  unsigned int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    uint64_t v18 = (char *)v54;
    BOOL v17 = v55;
    int64_t v19 = v55 - (_BYTE *)v54;
    unsigned int v20 = v56;
    unint64_t v21 = v56 - (v55 - (_BYTE *)v54);
    if (v21 > 0x3B) {
      goto LABEL_24;
    }
    int v47 = (315 - v21) & 0xFFFFFF00;
    v56 += v47;
    uint64_t v18 = (char *)malloc(v47 + v20);
    int v54 = v18;
    if (v18)
    {
      if ((v18 & 3) == 0)
      {
        BOOL v17 = &v18[v19];
LABEL_24:
        *(_OWORD *)(v17 + 44) = 0u;
        *((_OWORD *)v17 + 1) = 0u;
        *((_OWORD *)v17 + 2) = 0u;
        *(_OWORD *)BOOL v17 = 0u;
        id v55 = v17 + 60;
        GPUTools::FB::Fbuf::align((char **)&v54);
        *((_DWORD *)v18 + 1) = 886;
        *((_DWORD *)v18 + 8) = 0;
        __uint64_t v53 = 0LL;
        pthread_threadid_np(0LL, &v53);
        *((void *)v18 + 1) = v53;
        strcpy(v18 + 36, "Cuiui");
        *(void *)(v18 + 44) = *(void *)v11;
        *((_DWORD *)v18 + 13) = a2;
        *((_DWORD *)v18 + 14) = a3;
        query_pipeline_programs(v11, a2, v52);
        BOOL v22 = check_errors(v11);
        char v23 = byte_2071CE;
        if ((byte_2071CE & 1) != 0) {
          breakpoint_break( (uint64_t)&v54,  (volatile int *)((char *)&stru_338.nreloc + 2),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
        }
        uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
        if (!(v24 & 0x10 | v23 & 4))
        {
          uint64_t v25 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6560LL))(a1, a2, a3);
          uint64_t v24 = mach_absolute_time();
          uint64_t v26 = v24 - v25;
          unint64_t v27 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v28 = v54;
            *((void *)v54 + 2) = v25;
            v28[3] = v26;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v50 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
            signed int v51 = v54;
            *((void *)v54 + 3) = v50;
            uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
            v51[2] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v24 = check_errors(v11);
        }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  void v26[3];
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    BOOL v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    BOOL v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_37:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6560LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        unsigned int v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  query_pipeline_programs(v11, a2, v26);
  check_errors(v11);
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6560LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError && (uint64_t v25 = *(unsigned int *)(v11 + 3404), (_DWORD)v25))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v11);
LABEL_25:
  if (!*(_DWORD *)(v11 + 3404)) {
    wrapper_cache_pipeline_active_shader_program((ContextInfo *)v11, a2, a3, v26);
  }
  do
  {
    BOOL v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    int64_t v19 = v18 < 1;
  }
  else {
    int64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  void v29[3];
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_37:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_39:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 24) + 6560LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_39;
    }
  }

  query_pipeline_programs(v11, a2, v29);
  check_errors(v11);
  BOOL v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t))(*(void *)(v11 + 32) + 6560LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  int64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError && (unint64_t v28 = *(unsigned int *)(v11 + 3404), (_DWORD)v28))
    {
      breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      if (gCheckGLErrors) {
        goto LABEL_25;
      }
    }

    else if (gCheckGLErrors)
    {
      goto LABEL_25;
    }
  }

  check_errors(v11);
LABEL_25:
  if (!*(_DWORD *)(v11 + 3404)) {
    wrapper_cache_pipeline_active_shader_program((ContextInfo *)v11, a2, a3, v29);
  }
  do
  {
    unsigned int v20 = __ldaxr(v12);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    BOOL v22 = v21 < 1;
  }
  else {
    BOOL v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_7BC18( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

uint64_t create_shader_programv(__GLIContextRec *a1, uint64_t a2, uint64_t a3, const char **a4)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  id v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v182 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v181 = handle_opengl_thread_conflict((const void **)v11);
    id v182 = [(id)DYGetGLGuestAppClient(v181) waitOnGraphicsSemaphoreAssertions];
    if ((int)v182 >= 1)
    {
      do
LABEL_133:
        unsigned int v183 = __ldaxr(v12);
      while (__stlxr(v183 - 1, v12));
      v184 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v182) graphicsLockWaitQueue];
      dispatch_sync_f(v184, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v11 + 24)
                                                                                           + 6568LL))( a1,  a2,  a3,  a4);
    }
  }

  *(_BYTE *)(v11 + 4838) = 1;
  uint64_t v209 = 0LL;
  v210 = &v209;
  uint64_t v211 = 0x4812000000LL;
  v212 = __Block_byref_object_copy_;
  v213 = __Block_byref_object_dispose_;
  v215 = 0LL;
  uint64_t v216 = 0LL;
  v214 = &unk_1F3D63;
  int v217 = 0;
  if ([(id)DYGetGLGuestAppClient(v182) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    v190 = malloc(73LL * (int)a3);
    if ((int)a3 >= 1)
    {
      uint64_t v17 = a3;
      uint64_t v18 = a4;
      int64_t v19 = v190;
      unsigned int v20 = (char *)&v190[(int)a3];
      do
      {
        *int64_t v19 = v20;
        unint64_t v21 = *v18;
        size_t v22 = strlen(*v18);
        int v23 = v22;
        uint64_t v24 = DYGetGLGuestAppClient(v22);
        GPUTools::Interpose::DYSavePointer(v24, v23 + 1, v21, v20, 65LL, 0LL, 1LL, 0LL, 0LL);
        ++v18;
        ++v19;
        v20 += 65;
        --v17;
      }

      while (v17);
    }

    snprintf((char *)(v11 + 4709), 0x40uLL, "Cei@%dU<cb>", a3);
    GPUTools::FB::Encode((uint64_t)(v210 + 6), 888LL, 2LL, v11 + 4709, v25, v26, v27, v28, *(void *)v11);
    BOOL v29 = check_errors(v11);
    char v30 = byte_2071D0;
    if ((byte_2071D0 & 1) != 0) {
      breakpoint_break((uint64_t)(v210 + 6), (volatile int *)&stru_338.flags, 1LL, *(unsigned int *)(v11 + 3404), v11);
    }
    if ([(id)DYGetGLGuestAppClient(v29) overrideFlags] & 0x10 | v30 & 4)
    {
      uint64_t v37 = 0LL;
      goto LABEL_31;
    }

    uint64_t v36 = mach_absolute_time();
    uint64_t v37 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v11 + 32) + 6568LL))( a1,  a2,  a3,  a4);
    uint64_t v38 = mach_absolute_time() - v36;
    unint64_t v39 = g_DYTimebaseInfo;
    if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
    {
      signed int v40 = v210 + 6;
      *(void *)(v210[6] + 24) = v38;
      *(void *)(*v40 + 16LL) = v36;
      if (!gCheckGLErrors) {
        goto LABEL_31;
      }
    }

    else
    {
      uint64_t v187 = __udivti3(g_DYTimebaseInfo * v38, (g_DYTimebaseInfo * (unsigned __int128)v38) >> 64);
      v188 = v210;
      *(void *)(v210[6] + 24) = v187;
      *(void *)(v188[6] + 16) = __udivti3(v39 * v36, (v39 * (unsigned __int128)v36) >> 64);
      if (!gCheckGLErrors) {
        goto LABEL_31;
      }
    }

    check_errors(v11);
LABEL_31:
    GPUTools::FB::Encode((uint64_t)(v210 + 6), 4294955008LL, (uint64_t)"ui", v31, v32, v33, v34, v35, v37);
    id v42 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v41), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v42) {
      id v42 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)(v210 + 6), v43);
    }
    unsigned int v45 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v11 + 3404);
    if ((_DWORD)v45) {
      id v42 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)(v210 + 6), v45, v44);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v42), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v11, (uint64_t)(v210 + 6));
    }
    unsigned int v46 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v11 + 3480),  (GPUTools::FB::Fbuf *)(v11 + 3520),  (GPUTools::FB *)(v210 + 6));
    uint64_t v47 = *(unsigned int *)(v11 + 3404);
    if ((_DWORD)v47 && gBreakOnError)
    {
      uint64_t v185 = 3LL;
      uint64_t v186 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v30 & 2) == 0)
      {
LABEL_40:
        uint64_t v48 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v46) defaultFbufStream];
        uint64_t v49 = (GPUTools::FB::Fbuf *)(v210 + 6);
        uint64_t v50 = (unsigned int *)((char *)v48 + 56);
        do
          unsigned int v51 = __ldaxr(v50);
        while (__stlxr(1u, v50));
        if (v51 == 1)
        {
          do
          {
            while (*v50 == 1)
              ;
            do
              unsigned int v52 = __ldaxr(v50);
            while (__stlxr(1u, v50));
          }

          while (v52 == 1);
        }

        __n128 v53 = GPUTools::FB::Stream::Write_nolock(v48, v49, **(unsigned int **)v49, 1);
        atomic_store(0, v50);
        if (!gCheckGLErrors) {
          check_errors(v11);
        }
        if (*(_DWORD *)(v11 + 3404)) {
          goto LABEL_120;
        }
        int v208 = 0;
        (*(void (**)(void, uint64_t, uint64_t, int *, __n128))(*(void *)(v11 + 32) + 5264LL))( *(void *)(v11 + 16),  v37,  35714LL,  &v208,  v53);
        info_log = (char *)query_info_log( v11,  v37,  *(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v11 + 32) + 5264LL),  *(void (**)(void, uint64_t, size_t, void, void *))(*(void *)(v11 + 32)
                                                                                            + 5280LL),
                             (int *)v206);
        uint64_t v60 = info_log;
        uint64_t v61 = SLODWORD(v206[0]);
        if (LODWORD(v206[0]) < 0x401)
        {
          if (LODWORD(v206[0])) {
            info_log[LODWORD(v206[0]) - 1] = 0;
          }
          __uint64_t v63 = "CiuiiSiieui";
          if (v208 != 1) {
            goto LABEL_56;
          }
        }

        else
        {
          uint64_t v62 = DYGetGLGuestAppClient(info_log);
          GPUTools::Interpose::DYSavePointer(v62, v61, v60, v11 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
          __uint64_t v63 = "CiuiiU<cb>iieui";
          if (v208 != 1)
          {
LABEL_56:
            GPUTools::FB::Encode( (uint64_t)(v210 + 6),  4294955024LL,  (uint64_t)v63,  v55,  v56,  v57,  v58,  v59,  *(void *)v11);
            uint64_t v65 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v64) defaultFbufStream];
            unsigned int v66 = (GPUTools::FB::Fbuf *)(v210 + 6);
            unsigned int v67 = (unsigned int *)((char *)v65 + 56);
            do
              unsigned int v68 = __ldaxr(v67);
            while (__stlxr(1u, v67));
            if (v68 == 1)
            {
              do
              {
                while (*v67 == 1)
                  ;
                do
                  unsigned int v69 = __ldaxr(v67);
                while (__stlxr(1u, v67));
              }

              while (v69 == 1);
            }

            GPUTools::FB::Stream::Write_nolock(v65, v66, **(unsigned int **)v66, 1);
            atomic_store(0, v67);
            free(v60);
            wrapper_cache_pipeline_create_shader_program((ContextInfo *)v11, v37, a2, (int)a3, a4);
            if (v208 == 1)
            {
              uint64_t v70 = *(void *)(v11 + 32);
              v192 = (void **)v11;
              uint64_t v193 = v70;
              v206[0] = _NSConcreteStackBlock;
              v206[1] = 3221225472LL;
              v206[2] = ___ZL22create_shader_programvP15__GLIContextRecjiPPKc_block_invoke;
              v206[3] = &unk_1F9120;
              v206[4] = &v209;
              v206[5] = v11;
              int v207 = v37;
              GPUTools::GL::EnumerateProgramActiveAttributes(&v192, v37, 1LL, v206);
              if (*(int *)(v11 + 3460) >= 3)
              {
                uint64_t v71 = *(void *)(v11 + 32);
                v192 = (void **)v11;
                uint64_t v193 = v71;
                v204[0] = _NSConcreteStackBlock;
                v204[1] = 3221225472LL;
                v204[2] = ___ZL22create_shader_programvP15__GLIContextRecjiPPKc_block_invoke_2;
                v204[3] = &unk_1F9148;
                v204[4] = &v209;
                v204[5] = v11;
                int v205 = v37;
                GPUTools::GL::EnumerateProgramTransformFeedbackVaryings(&v192, v37, v204);
                uint64_t v72 = *(void *)(v11 + 32);
                v192 = (void **)v11;
                uint64_t v193 = v72;
                v202[0] = _NSConcreteStackBlock;
                v202[1] = 3221225472LL;
                v202[2] = ___ZL22create_shader_programvP15__GLIContextRecjiPPKc_block_invoke_3;
                v202[3] = &unk_1F9170;
                v202[4] = &v209;
                v202[5] = v11;
                int v203 = v37;
                GPUTools::GL::EnumerateProgramActiveUniformBlocks(&v192, v37, v202);
              }

              uint64_t v73 = *(void *)(v11 + 32);
              v192 = (void **)v11;
              uint64_t v193 = v73;
              uint64_t v74 = *(unsigned int *)(v11 + 3456);
              v200[0] = _NSConcreteStackBlock;
              v200[1] = 3221225472LL;
              v200[2] = ___ZL22create_shader_programvP15__GLIContextRecjiPPKc_block_invoke_4;
              v200[3] = &unk_1F9198;
              v200[4] = &v209;
              v200[5] = v11;
              int v201 = v37;
              GPUTools::GL::EnumerateProgramActiveUniforms(&v192, v74, v37, 1LL, v200);
              GPUTools::FB::Encode((uint64_t)(v210 + 6), 116LL, 516LL, (uint64_t)"C", v75, v76, v77, v78, *(void *)v11);
              GPUTools::FB::Encode((uint64_t)(v210 + 6), 4294955008LL, (uint64_t)"ul", v79, v80, v81, v82, v83, v37);
              v85 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v84) defaultFbufStream];
              int v86 = (GPUTools::FB::Fbuf *)(v210 + 6);
              v87 = (unsigned int *)((char *)v85 + 56);
              do
                unsigned int v88 = __ldaxr(v87);
              while (__stlxr(1u, v87));
              if (v88 == 1)
              {
                do
                {
                  while (*v87 == 1)
                    ;
                  do
                    unsigned int v89 = __ldaxr(v87);
                  while (__stlxr(1u, v87));
                }

                while (v89 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v85, v86, **(unsigned int **)v86, 1);
              atomic_store(0, v87);
              GPUTools::FB::Encode( (uint64_t)(v210 + 6),  467LL,  516LL,  (uint64_t)"Cuiee",  v90,  v91,  v92,  v93,  *(void *)v11);
              v95 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v94) defaultFbufStream];
              v96 = (GPUTools::FB::Fbuf *)(v210 + 6);
              v97 = (unsigned int *)((char *)v95 + 56);
              do
                unsigned int v98 = __ldaxr(v97);
              while (__stlxr(1u, v97));
              if (v98 == 1)
              {
                do
                {
                  while (*v97 == 1)
                    ;
                  do
                    unsigned int v99 = __ldaxr(v97);
                  while (__stlxr(1u, v97));
                }

                while (v99 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v95, v96, **(unsigned int **)v96, 1);
              atomic_store(0, v97);
              GPUTools::FB::Encode( (uint64_t)(v210 + 6),  117LL,  516LL,  (uint64_t)"Ce",  v100,  v101,  v102,  v103,  *(void *)v11);
              GPUTools::FB::Encode( (uint64_t)(v210 + 6),  4294955008LL,  (uint64_t)"V<ul>",  v104,  v105,  v106,  v107,  v108,  (char)"rhubarb");
              v110 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v109) defaultFbufStream];
              v111 = (GPUTools::FB::Fbuf *)(v210 + 6);
              v112 = (unsigned int *)((char *)v110 + 56);
              do
                unsigned int v113 = __ldaxr(v112);
              while (__stlxr(1u, v112));
              if (v113 == 1)
              {
                do
                {
                  while (*v112 == 1)
                    ;
                  do
                    unsigned int v114 = __ldaxr(v112);
                  while (__stlxr(1u, v112));
                }

                while (v114 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v110, v111, **(unsigned int **)v111, 1);
              atomic_store(0, v112);
              snprintf((char *)(v11 + 4709), 0x40uLL, "CV<ul>i@%dU<cb>t", a3);
              GPUTools::FB::Encode( (uint64_t)(v210 + 6),  540LL,  516LL,  v11 + 4709,  v115,  v116,  v117,  v118,  *(void *)v11);
              v120 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v119) defaultFbufStream];
              v121 = (GPUTools::FB::Fbuf *)(v210 + 6);
              v122 = (unsigned int *)((char *)v120 + 56);
              do
                unsigned int v123 = __ldaxr(v122);
              while (__stlxr(1u, v122));
              if (v123 == 1)
              {
                do
                {
                  while (*v122 == 1)
                    ;
                  do
                    unsigned int v124 = __ldaxr(v122);
                  while (__stlxr(1u, v122));
                }

                while (v124 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v120, v121, **(unsigned int **)v121, 1);
              atomic_store(0, v122);
              GPUTools::FB::Encode( (uint64_t)(v210 + 6),  93LL,  516LL,  (uint64_t)"CV<ul>",  v125,  v126,  v127,  v128,  *(void *)v11);
              v130 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v129) defaultFbufStream];
              v131 = (GPUTools::FB::Fbuf *)(v210 + 6);
              v132 = (unsigned int *)((char *)v130 + 56);
              do
                unsigned int v133 = __ldaxr(v132);
              while (__stlxr(1u, v132));
              if (v133 == 1)
              {
                do
                {
                  while (*v132 == 1)
                    ;
                  do
                    unsigned int v134 = __ldaxr(v132);
                  while (__stlxr(1u, v132));
                }

                while (v134 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v130, v131, **(unsigned int **)v131, 1);
              atomic_store(0, v132);
              GPUTools::FB::Encode( (uint64_t)(v210 + 6),  6LL,  516LL,  (uint64_t)"CulV<ul>",  v135,  v136,  v137,  v138,  *(void *)v11);
              v140 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v139) defaultFbufStream];
              v141 = (GPUTools::FB::Fbuf *)(v210 + 6);
              v142 = (unsigned int *)((char *)v140 + 56);
              do
                unsigned int v143 = __ldaxr(v142);
              while (__stlxr(1u, v142));
              if (v143 == 1)
              {
                do
                {
                  while (*v142 == 1)
                    ;
                  do
                    unsigned int v144 = __ldaxr(v142);
                  while (__stlxr(1u, v142));
                }

                while (v144 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v140, v141, **(unsigned int **)v141, 1);
              atomic_store(0, v142);
              uint64_t v145 = *(void *)(v11 + 32);
              v199[0] = v11;
              v199[1] = v145;
              v192 = _NSConcreteStackBlock;
              uint64_t v193 = 3221225472LL;
              v194 = ___ZL22create_shader_programvP15__GLIContextRecjiPPKc_block_invoke_5;
              v195 = &unk_1F90F8;
              v196 = &v209;
              uint64_t v197 = v11;
              uint64_t v198 = v37;
              GPUTools::GL::EnumerateProgramActiveAttributes(v199, v37, 1LL, &v192);
              GPUTools::FB::Encode( (uint64_t)(v210 + 6),  349LL,  516LL,  (uint64_t)"Cul",  v146,  v147,  v148,  v149,  *(void *)v11);
              v151 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v150) defaultFbufStream];
              v152 = (GPUTools::FB::Fbuf *)(v210 + 6);
              v153 = (unsigned int *)((char *)v151 + 56);
              do
                unsigned int v154 = __ldaxr(v153);
              while (__stlxr(1u, v153));
              if (v154 == 1)
              {
                do
                {
                  while (*v153 == 1)
                    ;
                  do
                    unsigned int v155 = __ldaxr(v153);
                  while (__stlxr(1u, v153));
                }

                while (v155 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v151, v152, **(unsigned int **)v152, 1);
              atomic_store(0, v153);
              GPUTools::FB::Encode( (uint64_t)(v210 + 6),  133LL,  516LL,  (uint64_t)"CulV<ul>",  v156,  v157,  v158,  v159,  *(void *)v11);
              v161 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v160) defaultFbufStream];
              v162 = (GPUTools::FB::Fbuf *)(v210 + 6);
              v163 = (unsigned int *)((char *)v161 + 56);
              do
                unsigned int v164 = __ldaxr(v163);
              while (__stlxr(1u, v163));
              if (v164 == 1)
              {
                do
                {
                  while (*v163 == 1)
                    ;
                  do
                    unsigned int v165 = __ldaxr(v163);
                  while (__stlxr(1u, v163));
                }

                while (v165 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v161, v162, **(unsigned int **)v162, 1);
              atomic_store(0, v163);
              GPUTools::FB::Encode( (uint64_t)(v210 + 6),  123LL,  516LL,  (uint64_t)"CV<ul>",  v166,  v167,  v168,  v169,  *(void *)v11);
              v171 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v170) defaultFbufStream];
              v172 = (GPUTools::FB::Fbuf *)(v210 + 6);
              v173 = (unsigned int *)((char *)v171 + 56);
              do
                unsigned int v174 = __ldaxr(v173);
              while (__stlxr(1u, v173));
              if (v174 == 1)
              {
                do
                {
                  while (*v173 == 1)
                    ;
                  do
                    unsigned int v175 = __ldaxr(v173);
                  while (__stlxr(1u, v173));
                }

                while (v175 == 1);
              }

              GPUTools::FB::Stream::Write_nolock(v171, v172, **(unsigned int **)v172, 1);
              atomic_store(0, v173);
            }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  id v23;
  BOOL v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  const char *const *v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  uint64_t v36;
  uint64_t v37;
  id v38;
  GPUTools::FB::Fbuf *v39;
  unsigned int v40;
  GPUTools::FB::Fbuf *v41;
  dispatch_queue_s *v42;
  uint64_t v43;
  GPUTools::FB::Stream *v44;
  GPUTools::FB::Fbuf *v45;
  unsigned int *v46;
  unsigned int v47;
  unsigned int v48;
  __n128 v49;
  char *info_log;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  uint64_t v57;
  uint64_t v58;
  GPUTools::FB::Stream *v59;
  GPUTools::FB::Fbuf *v60;
  unsigned int *v61;
  unsigned int v62;
  unsigned int v63;
  uint64_t v64;
  uint64_t v65;
  uint64_t v66;
  uint64_t v67;
  uint64_t v68;
  unsigned int v69;
  signed int v70;
  BOOL v71;
  unsigned int v73;
  uint64_t v74;
  id v75;
  unsigned int v76;
  dispatch_queue_s *v77;
  uint64_t v78;
  uint64_t v79;
  uint64_t v80;
  uint64_t v81;
  void **v82;
  uint64_t v83;
  void (*v84)(uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t);
  void *v85;
  uint64_t *v86;
  uint64_t v87;
  int v88;
  void v89[2];
  void **v90;
  uint64_t v91;
  void (*v92)(uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t);
  void *v93;
  uint64_t *v94;
  uint64_t v95;
  int v96;
  void **v97;
  uint64_t v98;
  void (*v99)(uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t);
  void *v100;
  uint64_t *v101;
  uint64_t v102;
  int v103;
  void v104[6];
  int v105;
  int v106;
  uint64_t v107;
  uint64_t *v108;
  uint64_t v109;
  void (*v110)(uint64_t, uint64_t);
  void (*v111)(uint64_t);
  void *v112;
  void *v113;
  uint64_t v114;
  int v115;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  BOOL v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    uint64_t v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      BOOL v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    BOOL v9 = ContextInfo::activeCtxInfoMap + 8;
  unsigned int v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    BOOL v15 = __ldaxr(v14);
    id v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 <= 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (v17)
  {
    uint64_t v75 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v74 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v75 = [(id)DYGetGLGuestAppClient(v74) waitOnGraphicsSemaphoreAssertions];
    if ((int)v75 >= 1)
    {
      do
LABEL_78:
        uint64_t v76 = __ldaxr(v14);
      while (__stlxr(v76 - 1, v14));
      uint64_t v77 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v75) graphicsLockWaitQueue];
      dispatch_sync_f(v77, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v13 + 24)
                                                                                           + 6568LL))( a1,  a2,  a3,  a4);
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  uint64_t v107 = 0LL;
  uint64_t v108 = &v107;
  uint64_t v109 = 0x4812000000LL;
  v110 = __Block_byref_object_copy__0;
  v111 = __Block_byref_object_dispose__0;
  unsigned int v113 = 0LL;
  unsigned int v114 = 0LL;
  v112 = &unk_1F3D63;
  uint64_t v115 = 0;
  if ([(id)DYGetGLGuestAppClient(v75) state] != (char *)&dword_0 + 1
    || (int v23 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v23))
  {
    GPUTools::FB::Encode((uint64_t)(v108 + 6), 888LL, (uint64_t)"Ceip", v18, v19, v20, v21, v22, *(void *)v13);
    uint64_t v24 = check_errors(v13);
    uint64_t v25 = byte_2071D0;
    if ((byte_2071D0 & 1) != 0) {
      breakpoint_break((uint64_t)(v108 + 6), (volatile int *)&stru_338.flags, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    if ([(id)DYGetGLGuestAppClient(v24) overrideFlags] & 0x10 | v25 & 4)
    {
      uint64_t v36 = 0LL;
    }

    else
    {
      uint64_t v31 = mach_absolute_time();
      uint64_t v81 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v13 + 32)
                                                                                          + 6568LL))( a1,  a2,  a3,  a4);
      uint64_t v32 = a4;
      uint64_t v33 = mach_absolute_time() - v31;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v108 + 6;
        *(void *)(v108[6] + 24) = v33;
      }

      else
      {
        uint64_t v80 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v35 = v108 + 6;
        *(void *)(v108[6] + 24) = v80;
        uint64_t v31 = __udivti3(v34 * v31, (v34 * (unsigned __int128)v31) >> 64);
      }

      *(void *)(*v35 + 16LL) = v31;
      if (gCheckGLErrors) {
        check_errors(v13);
      }
      a4 = (const char **)v32;
      uint64_t v36 = v81;
    }

    GPUTools::FB::Encode((uint64_t)(v108 + 6), 4294955008LL, (uint64_t)"ui", v26, v27, v28, v29, v30, v36);
    uint64_t v38 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v37), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v38) {
      uint64_t v38 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)(v108 + 6), v39);
    }
    uint64_t v41 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v41) {
      uint64_t v38 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)(v108 + 6), v41, v40);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v38), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)(v108 + 6));
    }
    id v42 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)(v108 + 6));
    uint64_t v43 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43 && gBreakOnError)
    {
      uint64_t v78 = 3LL;
      uint64_t v79 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v25 & 2) == 0) {
        goto LABEL_40;
      }
      uint64_t v78 = 2LL;
      uint64_t v79 = 888LL;
    }

    breakpoint_break((uint64_t)(v108 + 6), (volatile int *)v79, v78, v43, v13);
LABEL_40:
    unsigned int v44 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v42) defaultFbufStream];
    unsigned int v45 = (GPUTools::FB::Fbuf *)(v108 + 6);
    unsigned int v46 = (unsigned int *)((char *)v44 + 56);
    do
      uint64_t v47 = __ldaxr(v46);
    while (__stlxr(1u, v46));
    if (v47 == 1)
    {
      do
      {
        while (*v46 == 1)
          ;
        do
          uint64_t v48 = __ldaxr(v46);
        while (__stlxr(1u, v46));
      }

      while (v48 == 1);
    }

    uint64_t v49 = GPUTools::FB::Stream::Write_nolock(v44, v45, **(unsigned int **)v45, 1);
    atomic_store(0, v46);
    if (!gCheckGLErrors) {
      check_errors(v13);
    }
    if (!*(_DWORD *)(v13 + 3404))
    {
      uint64_t v106 = 0;
      (*(void (**)(void, uint64_t, uint64_t, int *, __n128))(*(void *)(v13 + 32) + 5264LL))( *(void *)(v13 + 16),  v36,  35714LL,  &v106,  v49);
      info_log = (char *)query_info_log( v13,  v36,  *(void (**)(void, uint64_t, uint64_t, int *))(*(void *)(v13 + 32) + 5264LL),  *(void (**)(void, uint64_t, size_t, void, void *))(*(void *)(v13 + 32)
                                                                                          + 5280LL),
                           (int *)&v97);
      uint64_t v56 = info_log;
      if ((_DWORD)v97)
      {
        else {
          uint64_t v57 = v97;
        }
        info_log[v57 - 1] = 0;
      }

      if (v106 == 1)
      {
        LODWORD(v104[0]) = v36;
        [*(id *)v13 getParameter:611 to:v104];
      }

      GPUTools::FB::Encode( (uint64_t)(v108 + 6),  4294955024LL,  (uint64_t)"CiuiiSiieui",  v51,  v52,  v53,  v54,  v55,  *(void *)v13);
      uint64_t v59 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v58) defaultFbufStream];
      uint64_t v60 = (GPUTools::FB::Fbuf *)(v108 + 6);
      uint64_t v61 = (unsigned int *)((char *)v59 + 56);
      do
        uint64_t v62 = __ldaxr(v61);
      while (__stlxr(1u, v61));
      if (v62 == 1)
      {
        do
        {
          while (*v61 == 1)
            ;
          do
            __uint64_t v63 = __ldaxr(v61);
          while (__stlxr(1u, v61));
        }

        while (v63 == 1);
      }

      GPUTools::FB::Stream::Write_nolock(v59, v60, **(unsigned int **)v60, 1);
      atomic_store(0, v61);
      free(v56);
      wrapper_cache_pipeline_create_shader_program((ContextInfo *)v13, v36, a2, (int)a3, a4);
      if (v106 == 1)
      {
        uint64_t v64 = *(void *)(v13 + 32);
        v97 = (void **)v13;
        unsigned int v98 = v64;
        v104[0] = _NSConcreteStackBlock;
        v104[1] = 3221225472LL;
        v104[2] = ___ZL22create_shader_programvP15__GLIContextRecjiPPKc_block_invoke_0;
        v104[3] = &unk_1F9120;
        v104[4] = &v107;
        v104[5] = v13;
        uint64_t v105 = v36;
        GPUTools::GL::EnumerateProgramActiveAttributes(&v97, v36, 1LL, v104);
        if (*(int *)(v13 + 3460) >= 3)
        {
          uint64_t v65 = *(void *)(v13 + 32);
          uint64_t v90 = (void **)v13;
          uint64_t v91 = v65;
          v97 = _NSConcreteStackBlock;
          unsigned int v98 = 3221225472LL;
          unsigned int v99 = ___ZL22create_shader_programvP15__GLIContextRecjiPPKc_block_invoke_2_0;
          uint64_t v100 = &unk_1F9148;
          uint64_t v101 = &v107;
          uint64_t v102 = v13;
          uint64_t v103 = v36;
          GPUTools::GL::EnumerateProgramTransformFeedbackVaryings(&v90, v36, &v97);
          unsigned int v66 = *(void *)(v13 + 32);
          uint64_t v82 = (void **)v13;
          uint64_t v83 = v66;
          uint64_t v90 = _NSConcreteStackBlock;
          uint64_t v91 = 3221225472LL;
          uint64_t v92 = ___ZL22create_shader_programvP15__GLIContextRecjiPPKc_block_invoke_3_0;
          uint64_t v93 = &unk_1F9170;
          uint64_t v94 = &v107;
          v95 = v13;
          v96 = v36;
          GPUTools::GL::EnumerateProgramActiveUniformBlocks(&v82, v36, &v90);
        }

        unsigned int v67 = *(void *)(v13 + 32);
        v89[0] = v13;
        v89[1] = v67;
        unsigned int v68 = *(unsigned int *)(v13 + 3456);
        uint64_t v82 = _NSConcreteStackBlock;
        uint64_t v83 = 3221225472LL;
        uint64_t v84 = ___ZL22create_shader_programvP15__GLIContextRecjiPPKc_block_invoke_4_0;
        v85 = &unk_1F9198;
        int v86 = &v107;
        v87 = v13;
        unsigned int v88 = v36;
        GPUTools::GL::EnumerateProgramActiveUniforms(v89, v68, v36, 1LL, &v82);
      }
    }

    do
    {
      unsigned int v69 = __ldaxr(v14);
      uint64_t v70 = v69 - 1;
    }

    while (__stlxr(v70, v14));
    if (gCheckGLErrors) {
      uint64_t v71 = v70 < 1;
    }
    else {
      uint64_t v71 = 1;
    }
    if (!v71) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_72;
  }

  do
    uint64_t v73 = __ldaxr(v14);
  while (__stlxr(v73 - 1, v14));
  [(id)DYGetGLGuestAppClient(v23) triggerArmedCapture];
  uint64_t v36 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v13 + 24) + 6568LL))( a1,  a2,  a3,  a4);
LABEL_72:
  _Block_object_dispose(&v107, 8);
  if (v113) {
    free(v113);
  }
  return v36;
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  BOOL v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    uint64_t v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      BOOL v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    BOOL v9 = ContextInfo::activeCtxInfoMap + 8;
  unsigned int v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    BOOL v15 = __ldaxr(v14);
    id v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 <= 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (v17)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_39:
        uint64_t v27 = __ldaxr(v14);
      while (__stlxr(v27 - 1, v14));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v13 + 24)
                                                                                           + 6568LL))( a1,  a2,  a3,  a4);
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v24 = __ldaxr(v14);
      while (__stlxr(v24 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v13 + 24)
                                                                                           + 6568LL))( a1,  a2,  a3,  a4);
    }
  }

  check_errors(v13);
  int64_t v19 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v13 + 32) + 6568LL))( a1,  a2,  a3,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      BOOL v29 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v13);
      }
    }
  }

  if ((_DWORD)v19)
  {
    if (!gCheckGLErrors) {
      check_errors(v13);
    }
    if (!*(_DWORD *)(v13 + 3404)) {
      wrapper_cache_pipeline_create_shader_program((ContextInfo *)v13, v19, a2, (int)a3, a4);
    }
  }

  do
  {
    unsigned int v20 = __ldaxr(v14);
    unint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    size_t v22 = v21 < 1;
  }
  else {
    size_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
  return v19;
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  BOOL v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    uint64_t v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      BOOL v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    BOOL v9 = ContextInfo::activeCtxInfoMap + 8;
  unsigned int v13 = *(void *)(v9 + 40);
  signed int v14 = (unsigned int *)(v13 + 4640);
  do
  {
    BOOL v15 = __ldaxr(v14);
    id v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 <= 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (v17)
  {
    BOOL v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v13);
    BOOL v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_39:
        char v30 = __ldaxr(v14);
      while (__stlxr(v30 - 1, v14));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v13 + 24)
                                                                                           + 6568LL))( a1,  a2,  a3,  a4);
    }
  }

  *(_BYTE *)(v13 + 4838) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    uint64_t v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v27 = __ldaxr(v14);
      while (__stlxr(v27 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v13 + 24)
                                                                                           + 6568LL))( a1,  a2,  a3,  a4);
    }
  }

  check_errors(v13);
  int64_t v19 = mach_absolute_time();
  unsigned int v20 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v13 + 32) + 6568LL))( a1,  a2,  a3,  a4);
  unint64_t v21 = mach_absolute_time();
  size_t v22 = vdupq_n_s64(1uLL);
  v22.i64[0] = v21 - v19;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v32 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v13);
      }
    }
  }

  if ((_DWORD)v20)
  {
    if (!gCheckGLErrors) {
      check_errors(v13);
    }
    if (!*(_DWORD *)(v13 + 3404)) {
      wrapper_cache_pipeline_create_shader_program((ContextInfo *)v13, v20, a2, (int)a3, a4);
    }
  }

  do
  {
    int v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
  return v20;
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  uint64_t v14;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  BOOL v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    uint64_t v11 = v10 >= (unint64_t)a1;
    else {
      id v12 = v8 + 1;
    }
    if (v11) {
      BOOL v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    BOOL v9 = ContextInfo::activeCtxInfoMap + 8;
  unsigned int v13 = *(void *)(v9 + 40);
  check_errors(v13);
  signed int v14 = (*(uint64_t (**)(__GLIContextRec *, uint64_t, uint64_t, const char **))(*(void *)(v13 + 32) + 6568LL))( a1,  a2,  a3,  a4);
  if ((_DWORD)v14)
  {
    if (!gCheckGLErrors) {
      check_errors(v13);
    }
    if (!*(_DWORD *)(v13 + 3404)) {
      wrapper_cache_pipeline_create_shader_program((ContextInfo *)v13, v14, a2, (int)a3, a4);
    }
  }

  return v14;
}

void sub_7CA58(_Unwind_Exception *a1)
{
  uint64_t v3 = *(void **)(v1 - 128);
  if (v3) {
    free(v3);
  }
  _Unwind_Resume(a1);
}

void bind_program_pipeline(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6576LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  unsigned int v51 = 0LL;
  unsigned int v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    unsigned int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 887;
        *((_DWORD *)v16 + _Block_object_dispose((const void *)(v1 - 176), 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_2071CF;
        if ((byte_2071CF & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_338.nreloc + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6576LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            uint64_t v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  unint64_t v25;
  void *v26;
  id v27;
  GPUTools::FB::Fbuf *v28;
  unsigned int v29;
  GPUTools::FB::Fbuf *v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  GPUTools::FB::Stream *v33;
  unsigned int *v34;
  unsigned int v35;
  unsigned int v36;
  unsigned int v37;
  signed int v38;
  BOOL v39;
  unsigned int v40;
  uint64_t v41;
  id v42;
  unsigned int v43;
  dispatch_queue_s *v44;
  int v45;
  uint64_t v46;
  uint64_t v47;
  uint64_t v48;
  void *v49;
  __uint64_t v50;
  void *v51;
  char *v52;
  unsigned int v53;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v42 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v41 = handle_opengl_thread_conflict((const void **)v9);
    id v42 = [(id)DYGetGLGuestAppClient(v41) waitOnGraphicsSemaphoreAssertions];
    if ((int)v42 >= 1)
    {
      do
LABEL_57:
        unsigned int v43 = __ldaxr(v10);
      while (__stlxr(v43 - 1, v10));
      unsigned int v44 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v42) graphicsLockWaitQueue];
      dispatch_sync_f(v44, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6576LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  unsigned int v51 = 0LL;
  unsigned int v52 = 0LL;
  unsigned int v53 = 0;
  if ([(id)DYGetGLGuestAppClient(v42) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v51;
    BOOL v15 = v52;
    int64_t v17 = v52 - (_BYTE *)v51;
    unsigned int v18 = v53;
    unint64_t v19 = v53 - (v52 - (_BYTE *)v51);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v45 = (307 - v19) & 0xFFFFFF00;
    v53 += v45;
    id v16 = (char *)malloc(v45 + v18);
    unsigned int v51 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v52 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v51);
        *((_DWORD *)v16 + 1) = 887;
        *((_DWORD *)v16 + _Block_object_dispose((const void *)(v1 - 176), 8) = 0;
        __uint64_t v50 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v50);
        *((void *)v16 + 1) = v50;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_2071CF;
        if ((byte_2071CF & 1) != 0) {
          breakpoint_break( (uint64_t)&v51,  (volatile int *)((char *)&stru_338.nreloc + 3),  1LL,  *(unsigned int *)(v9 + 3404),  v9);
        }
        uint64_t v22 = (uint64_t)[(id)DYGetGLGuestAppClient(v20) overrideFlags];
        if (!(v22 & 0x10 | v21 & 4))
        {
          uint64_t v23 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6576LL))(a1, a2);
          uint64_t v22 = mach_absolute_time();
          uint64_t v24 = v22 - v23;
          unint64_t v25 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            uint64_t v26 = v51;
            *((void *)v51 + 2) = v23;
            v26[3] = v24;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            uint64_t v48 = __udivti3(g_DYTimebaseInfo * v24, (g_DYTimebaseInfo * (unsigned __int128)v24) >> 64);
            uint64_t v49 = v51;
            *((void *)v51 + 3) = v48;
            uint64_t v22 = __udivti3(v25 * v23, (v25 * (unsigned __int128)v23) >> 64);
            v49[2] = v22;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          uint64_t v22 = check_errors(v9);
        }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6576LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unsigned int v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6576LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    BOOL v15 = __ldaxr(v10);
    id v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    int64_t v17 = v16 < 1;
  }
  else {
    int64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        uint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      unint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6576LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        char v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  BOOL v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6576LL))(a1, a2);
  id v16 = mach_absolute_time();
  int64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    unsigned int v18 = __ldaxr(v10);
    unint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_7CF98( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void delete_program_pipelines(__GLIContextRec *a1, uint64_t a2, const unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v11);
    id v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_36:
        unsigned int v27 = __ldaxr(v12);
      while (__stlxr(v27 - 1, v12));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6584LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  uint64_t v31 = 0LL;
  uint64_t v32 = &v31;
  uint64_t v33 = 0x4812000000LL;
  uint64_t v34 = __Block_byref_object_copy_;
  unsigned int v35 = __Block_byref_object_dispose_;
  unsigned int v37 = 0LL;
  uint64_t v38 = 0LL;
  unsigned int v36 = &unk_1F3D63;
  int v39 = 0;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1
    && (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], (_DWORD)v16))
  {
    do
      unsigned int v24 = __ldaxr(v12);
    while (__stlxr(v24 - 1, v12));
    [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
    (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6584LL))( a1,  a2,  a3);
  }

  else
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)(v32 + 6), 889LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    v29[0] = _NSConcreteStackBlock;
    v29[1] = 3221225472LL;
    v29[2] = ___ZL24delete_program_pipelinesP15__GLIContextReciPKj_block_invoke;
    v29[3] = &unk_1F91C0;
    v29[4] = &v31;
    v29[5] = v11;
    int v30 = a2;
    v29[6] = a1;
    v29[7] = a3;
    wrapper_cache_pipeline_delete((ContextInfo *)v11, a2, (uint64_t)a3, (uint64_t)v29);
    do
    {
      unsigned int v21 = __ldaxr(v12);
      signed int v22 = v21 - 1;
    }

    while (__stlxr(v22, v12));
    if (gCheckGLErrors) {
      BOOL v23 = v22 < 1;
    }
    else {
      BOOL v23 = 1;
    }
    if (!v23) {
      handle_opengl_thread_conflict((const void **)v11);
    }
  }

  _Block_object_dispose(&v31, 8);
  if (v37) {
    free(v37);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  void v29[8];
  int v30;
  uint64_t v31;
  uint64_t *v32;
  uint64_t v33;
  void (*v34)(uint64_t, uint64_t);
  void (*v35)(uint64_t);
  void *v36;
  void *v37;
  uint64_t v38;
  int v39;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v11);
    id v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_36:
        unsigned int v27 = __ldaxr(v12);
      while (__stlxr(v27 - 1, v12));
      uint64_t v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6584LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  uint64_t v31 = 0LL;
  uint64_t v32 = &v31;
  uint64_t v33 = 0x4812000000LL;
  uint64_t v34 = __Block_byref_object_copy__0;
  unsigned int v35 = __Block_byref_object_dispose__0;
  unsigned int v37 = 0LL;
  uint64_t v38 = 0LL;
  unsigned int v36 = &unk_1F3D63;
  int v39 = 0;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1
    && (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], (_DWORD)v16))
  {
    do
      unsigned int v24 = __ldaxr(v12);
    while (__stlxr(v24 - 1, v12));
    [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
    (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6584LL))( a1,  a2,  a3);
  }

  else
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)(v32 + 6), 889LL, 0LL, v11 + 4709, v17, v18, v19, v20, *(void *)v11);
    v29[0] = _NSConcreteStackBlock;
    v29[1] = 3221225472LL;
    v29[2] = ___ZL24delete_program_pipelinesP15__GLIContextReciPKj_block_invoke_0;
    v29[3] = &unk_1F91C0;
    v29[4] = &v31;
    v29[5] = v11;
    int v30 = a2;
    v29[6] = a1;
    v29[7] = a3;
    wrapper_cache_pipeline_delete((ContextInfo *)v11, a2, (uint64_t)a3, (uint64_t)v29);
    do
    {
      unsigned int v21 = __ldaxr(v12);
      signed int v22 = v21 - 1;
    }

    while (__stlxr(v22, v12));
    if (gCheckGLErrors) {
      BOOL v23 = v22 < 1;
    }
    else {
      BOOL v23 = 1;
    }
    if (!v23) {
      handle_opengl_thread_conflict((const void **)v11);
    }
  }

  _Block_object_dispose(&v31, 8);
  if (v37) {
    free(v37);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  void v25[7];
  int v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    signed int v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v21 = handle_opengl_thread_conflict((const void **)v11);
    signed int v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        BOOL v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      unsigned int v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6584LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  v25[0] = _NSConcreteStackBlock;
  v25[1] = 3221225472LL;
  v25[2] = ___ZL24delete_program_pipelinesP15__GLIContextReciPKj_block_invoke_1;
  v25[3] = &__block_descriptor_60_e5_v8__0l;
  v25[4] = v11;
  v25[5] = a1;
  id v26 = a2;
  v25[6] = a3;
  wrapper_cache_pipeline_delete((ContextInfo *)v11, a2, (uint64_t)a3, (uint64_t)v25);
  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  void v25[7];
  int v26;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    signed int v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v21 = handle_opengl_thread_conflict((const void **)v11);
    signed int v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        BOOL v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      unsigned int v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6584LL))( a1,  a2,  a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  v25[0] = _NSConcreteStackBlock;
  v25[1] = 3221225472LL;
  v25[2] = ___ZL24delete_program_pipelinesP15__GLIContextReciPKj_block_invoke_2;
  v25[3] = &__block_descriptor_60_e5_v8__0l;
  v25[4] = v11;
  v25[5] = a1;
  id v26 = a2;
  v25[6] = a3;
  wrapper_cache_pipeline_delete((ContextInfo *)v11, a2, (uint64_t)a3, (uint64_t)v25);
  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  __GLIContextRec *v5;
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  id v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  unsigned int v23;
  uint64_t v5 = a1;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (!v15) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v11);
  }
  id v16 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v16 >= 1)
  {
    do
      unsigned int v21 = __ldaxr(v12);
    while (__stlxr(v21 - 1, v12));
    signed int v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v16) graphicsLockWaitQueue];
    dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
    goto LABEL_35;
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v16) state] == (char *)&dword_0 + 1)
  {
    uint64_t v17 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v17)
    {
      do
        BOOL v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v17) triggerArmedCapture];
LABEL_35:
      (*(void (**)(__GLIContextRec *, uint64_t, const unsigned int *))(*(void *)(v11 + 24) + 6584LL))( v5,  a2,  a3);
      return;
    }
  }

  wrapper_cache_pipeline_delete((ContextInfo *)v11, a2, (uint64_t)a3, (uint64_t)&__block_literal_global_1);
  do
  {
    uint64_t v18 = __ldaxr(v12);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v12));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 < 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_7D280( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, char a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, void *a28)
{
  if (a28) {
    free(a28);
  }
  _Unwind_Resume(a1);
}

void gen_program_pipelines(__GLIContextRec *a1, uint64_t a2, unsigned int *a3)
{
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      unsigned int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6592LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 890LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_2071D2;
    if ((byte_2071D2 & 1) != 0) {
      breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_338.flags + 2),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6592LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  _OWORD *v32;
  uint64_t v33;
  id v34;
  GPUTools::FB::Fbuf *v35;
  unsigned int v36;
  GPUTools::FB::Fbuf *v37;
  dispatch_queue_s *v38;
  uint64_t v39;
  GPUTools::FB::Stream *v40;
  unsigned int *v41;
  unsigned int v42;
  unsigned int v43;
  unsigned int v44;
  signed int v45;
  BOOL v46;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __int128 v56;
  void *v57;
  void *v58;
  unsigned int v59;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v11);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_58:
        unsigned int v50 = __ldaxr(v12);
      while (__stlxr(v50 - 1, v12));
      unsigned int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6592LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  uint64_t v57 = 0LL;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v16))
  {
    snprintf((char *)(v11 + 4709), 0x40uLL, "Ci@%dui", a2);
    GPUTools::FB::Encode((uint64_t)&v57, 890LL, v11 + 4709, v17, v18, v19, v20, v21, *(void *)v11);
    char v23 = byte_2071D2;
    if ((byte_2071D2 & 1) != 0) {
      breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_338.flags + 2),  1LL,  *(unsigned int *)(v11 + 3404),  v11);
    }
    if (!([(id)DYGetGLGuestAppClient(v22) overrideFlags] & 0x10 | v23 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6592LL))(a1, a2, a3);
      uint64_t v29 = mach_absolute_time() - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v31 = v57;
        *((void *)v57 + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v54 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        uint64_t v55 = v57;
        *((void *)v57 + 3) = v54;
        v55[2] = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      check_errors(v11);
    }

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  unsigned int v20;
  uint64_t v21;
  id v22;
  unsigned int v23;
  dispatch_queue_s *v24;
  uint64_t v25;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v22 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v21 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v22 = [(id)DYGetGLGuestAppClient(v21) waitOnGraphicsSemaphoreAssertions];
    if ((int)v22 >= 1)
    {
      do
LABEL_34:
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      uint64_t v24 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v22) graphicsLockWaitQueue];
      dispatch_sync_f(v24, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6592LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v22) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        uint64_t v20 = __ldaxr(v12);
      while (__stlxr(v20 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6592LL))(a1, a2, a3);
  ++*(void *)(v11 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v25 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v25) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v25, v11);
      }
    }
  }

  do
  {
    uint64_t v17 = __ldaxr(v12);
    uint64_t v18 = v17 - 1;
  }

  while (__stlxr(v18, v12));
  if (gCheckGLErrors) {
    uint64_t v19 = v18 < 1;
  }
  else {
    uint64_t v19 = 1;
  }
  if (!v19) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

{
  void *v6;
  uint64_t v7;
  unint64_t v8;
  BOOL v9;
  void *v10;
  uint64_t v11;
  unsigned int *v12;
  unsigned int v13;
  signed int v14;
  BOOL v15;
  id v16;
  uint64_t v17;
  uint64_t v18;
  int64x2_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v6 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v6) {
    goto LABEL_12;
  }
  uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v8 = v6[4];
    BOOL v9 = v8 >= (unint64_t)a1;
    else {
      unint64_t v10 = v6 + 1;
    }
    if (v9) {
      uint64_t v7 = (uint64_t)v6;
    }
    unint64_t v6 = (void *)*v10;
  }

  while (*v10);
  if (v7 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v7 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v7 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v11 = *(void *)(v7 + 40);
  signed int v12 = (unsigned int *)(v11 + 4640);
  do
  {
    unsigned int v13 = __ldaxr(v12);
    signed int v14 = v13 + 1;
  }

  while (__stlxr(v14, v12));
  if (gCheckGLErrors) {
    BOOL v15 = v14 <= 1;
  }
  else {
    BOOL v15 = 1;
  }
  if (v15)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v11);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v12);
      while (__stlxr(v26 - 1, v12));
      uint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 24) + 6592LL))(a1, a2, a3);
      return;
    }
  }

  *(_BYTE *)(v11 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v16 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v16)
    {
      do
        char v23 = __ldaxr(v12);
      while (__stlxr(v23 - 1, v12));
      [(id)DYGetGLGuestAppClient(v16) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v17 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, unsigned int *))(*(void *)(v11 + 32) + 6592LL))(a1, a2, a3);
  uint64_t v18 = mach_absolute_time();
  uint64_t v19 = vdupq_n_s64(1uLL);
  v19.i64[0] = v18 - v17;
  *(int64x2_t *)(v11 + 3696) = vaddq_s64(v19, *(int64x2_t *)(v11 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v11);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v11 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v11);
      }
    }
  }

  do
  {
    uint64_t v20 = __ldaxr(v12);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v12));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v11);
  }
}

void sub_7D710( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

uint64_t is_program_pipeline(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      unsigned int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6600LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 896;
        *((_DWORD *)v16 + _Block_object_dispose((const void *)(v1 - 176), 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_2071D8;
        if ((byte_2071D8 & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_338.reserved2, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6600LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 896LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        unsigned int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6600LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  char *v15;
  char *v16;
  int64_t v17;
  unsigned int v18;
  unint64_t v19;
  uint64_t v20;
  char v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  uint64_t v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  uint64_t result;
  unsigned int v47;
  uint64_t v48;
  id v49;
  unsigned int v50;
  dispatch_queue_s *v51;
  int v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  __uint64_t v57;
  void *v58;
  char *v59;
  unsigned int v60;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v49 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v48 = handle_opengl_thread_conflict((const void **)v9);
    id v49 = [(id)DYGetGLGuestAppClient(v48) waitOnGraphicsSemaphoreAssertions];
    if ((int)v49 >= 1)
    {
      do
LABEL_57:
        unsigned int v50 = __ldaxr(v10);
      while (__stlxr(v50 - 1, v10));
      unsigned int v51 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v49) graphicsLockWaitQueue];
      dispatch_sync_f(v51, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6600LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  uint64_t v58 = 0LL;
  unsigned int v59 = 0LL;
  unsigned int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v49) state] != (char *)&dword_0 + 1
    || (id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v14))
  {
    id v16 = (char *)v58;
    BOOL v15 = v59;
    int64_t v17 = v59 - (_BYTE *)v58;
    unsigned int v18 = v60;
    unint64_t v19 = v60 - (v59 - (_BYTE *)v58);
    if (v19 > 0x33) {
      goto LABEL_24;
    }
    int v52 = (307 - v19) & 0xFFFFFF00;
    v60 += v52;
    id v16 = (char *)malloc(v52 + v18);
    uint64_t v58 = v16;
    if (v16)
    {
      if ((v16 & 3) == 0)
      {
        BOOL v15 = &v16[v17];
LABEL_24:
        *((_DWORD *)v15 + 12) = 0;
        *((_OWORD *)v15 + 1) = 0u;
        *((_OWORD *)v15 + 2) = 0u;
        *(_OWORD *)BOOL v15 = 0u;
        unsigned int v59 = v15 + 52;
        GPUTools::FB::Fbuf::align((char **)&v58);
        *((_DWORD *)v16 + 1) = 896;
        *((_DWORD *)v16 + _Block_object_dispose((const void *)(v1 - 176), 8) = 256;
        __uint64_t v57 = 0LL;
        uint64_t v20 = pthread_threadid_np(0LL, &v57);
        *((void *)v16 + 1) = v57;
        *((_DWORD *)v16 + 9) = 6911299;
        *((void *)v16 + 5) = *(void *)v9;
        *((_DWORD *)v16 + 12) = a2;
        char v21 = byte_2071D8;
        if ((byte_2071D8 & 1) != 0) {
          breakpoint_break((uint64_t)&v58, (volatile int *)&stru_338.reserved2, 1LL, *(unsigned int *)(v9 + 3404), v9);
        }
        if ([(id)DYGetGLGuestAppClient(v20) overrideFlags] & 0x10 | v21 & 4)
        {
          uint64_t v28 = 0LL;
          goto LABEL_29;
        }

        uint64_t v27 = mach_absolute_time();
        uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6600LL))(a1, a2);
        uint64_t v29 = mach_absolute_time() - v27;
        unint64_t v30 = g_DYTimebaseInfo;
        if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
        {
          uint64_t v31 = v58;
          *((void *)v58 + 2) = v27;
          v31[3] = v29;
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        else
        {
          uint64_t v55 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
          __int128 v56 = v58;
          *((void *)v58 + 3) = v55;
          v56[2] = __udivti3(v30 * v27, (v30 * (unsigned __int128)v27) >> 64);
          if (!gCheckGLErrors) {
            goto LABEL_29;
          }
        }

        check_errors(v9);
LABEL_29:
        GPUTools::FB::Encode((uint64_t)&v58, 4294955008LL, (uint64_t)"ub", v22, v23, v24, v25, v26, v28);
        id v33 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v32), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
        if ((_DWORD)v33) {
          id v33 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v58, v34);
        }
        unsigned int v36 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v9 + 3404);
        if ((_DWORD)v36) {
          id v33 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v58, v36, v35);
        }
        if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v33), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
          encode_driver_events((id *)v9, (uint64_t)&v58);
        }
        unsigned int v37 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v9 + 3480),  (GPUTools::FB::Fbuf *)(v9 + 3520),  (GPUTools::FB *)&v58);
        uint64_t v38 = *(unsigned int *)(v9 + 3404);
        if ((_DWORD)v38 && gBreakOnError)
        {
          uint64_t v53 = 3LL;
          uint64_t v54 = 0xFFFFFFFFLL;
        }

        else
        {
          if ((v21 & 2) == 0) {
            goto LABEL_38;
          }
          uint64_t v53 = 2LL;
          uint64_t v54 = 896LL;
        }

        breakpoint_break((uint64_t)&v58, (volatile int *)v54, v53, v38, v9);
LABEL_38:
        uint64_t v39 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v37) defaultFbufStream];
        unsigned int v40 = (unsigned int *)((char *)v39 + 56);
        do
          unsigned int v41 = __ldaxr(v40);
        while (__stlxr(1u, v40));
        if (v41 == 1)
        {
          do
          {
            while (*v40 == 1)
              ;
            do
              unsigned int v42 = __ldaxr(v40);
            while (__stlxr(1u, v40));
          }

          while (v42 == 1);
        }

        GPUTools::FB::Stream::Write_nolock(v39, (GPUTools::FB::Fbuf *)&v58, *(unsigned int *)v58, 1);
        atomic_store(0, v40);
        do
        {
          unsigned int v43 = __ldaxr(v10);
          signed int v44 = v43 - 1;
        }

        while (__stlxr(v44, v10));
        if (gCheckGLErrors) {
          BOOL v45 = v44 < 1;
        }
        else {
          BOOL v45 = 1;
        }
        if (!v45) {
          handle_opengl_thread_conflict((const void **)v9);
        }
        goto LABEL_51;
      }

      uint64_t result = dy_abort("misaligned fbuf buffer: %p, required alignment=%zu", v16, 4uLL);
    }

    else
    {
      uint64_t result = dy_abort("failed to allocate fbuf buffer");
    }

    __break(1u);
    return result;
  }

  do
    unsigned int v47 = __ldaxr(v10);
  while (__stlxr(v47 - 1, v10));
  [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
  uint64_t v28 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6600LL))(a1, a2);
LABEL_51:
  if (v58) {
    free(v58);
  }
  return v28;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v19;
  uint64_t v20;
  id v21;
  unsigned int v22;
  dispatch_queue_s *v23;
  uint64_t v24;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v21 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v20 = handle_opengl_thread_conflict((const void **)v9);
    char v21 = [(id)DYGetGLGuestAppClient(v20) waitOnGraphicsSemaphoreAssertions];
    if ((int)v21 >= 1)
    {
      do
LABEL_35:
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      uint64_t v23 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v21) graphicsLockWaitQueue];
      dispatch_sync_f(v23, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6600LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v21) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        unint64_t v19 = __ldaxr(v10);
      while (__stlxr(v19 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6600LL))(a1, a2);
    }
  }

  BOOL v15 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6600LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v24 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v24) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v24, v9);
      }
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v15;
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  int64x2_t v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  unsigned int v22;
  uint64_t v23;
  id v24;
  unsigned int v25;
  dispatch_queue_s *v26;
  uint64_t v27;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v24 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v23 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v24 = [(id)DYGetGLGuestAppClient(v23) waitOnGraphicsSemaphoreAssertions];
    if ((int)v24 >= 1)
    {
      do
LABEL_35:
        uint64_t v25 = __ldaxr(v10);
      while (__stlxr(v25 - 1, v10));
      uint64_t v26 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v24) graphicsLockWaitQueue];
      dispatch_sync_f(v26, 0LL, (dispatch_function_t)do_nothing);
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6600LL))(a1, a2);
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v24) state] == (char *)&dword_0 + 1)
  {
    id v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6600LL))(a1, a2);
    }
  }

  BOOL v15 = mach_absolute_time();
  id v16 = (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6600LL))(a1, a2);
  int64_t v17 = mach_absolute_time();
  unsigned int v18 = vdupq_n_s64(1uLL);
  v18.i64[0] = v17 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v18, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v27 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v27) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v27, v9);
      }
    }
  }

  do
  {
    unint64_t v19 = __ldaxr(v10);
    uint64_t v20 = v19 - 1;
  }

  while (__stlxr(v20, v10));
  if (gCheckGLErrors) {
    char v21 = v20 < 1;
  }
  else {
    char v21 = 1;
  }
  if (!v21) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return v16;
}

{
  __GLIContextRec *v3;
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  id v15;
  unsigned int v16;
  signed int v17;
  BOOL v18;
  unsigned int v20;
  dispatch_queue_s *v21;
  unsigned int v22;
  uint64_t v3 = a1;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (!v13) {
    a1 = (__GLIContextRec *)handle_opengl_thread_conflict((const void **)v9);
  }
  id v14 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  if ((int)v14 >= 1)
  {
    do
      uint64_t v20 = __ldaxr(v10);
    while (__stlxr(v20 - 1, v10));
    char v21 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v14) graphicsLockWaitQueue];
    dispatch_sync_f(v21, 0LL, (dispatch_function_t)do_nothing);
    return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6600LL))(v3, a2);
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v14) state] == (char *)&dword_0 + 1)
  {
    BOOL v15 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((v15 & 1) != 0)
    {
      do
        uint64_t v22 = __ldaxr(v10);
      while (__stlxr(v22 - 1, v10));
      [(id)DYGetGLGuestAppClient(v15) triggerArmedCapture];
      return (*(uint64_t (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6600LL))(v3, a2);
    }
  }

  do
  {
    id v16 = __ldaxr(v10);
    int64_t v17 = v16 - 1;
  }

  while (__stlxr(v17, v10));
  if (gCheckGLErrors) {
    unsigned int v18 = v17 < 1;
  }
  else {
    unsigned int v18 = 1;
  }
  if (!v18) {
    handle_opengl_thread_conflict((const void **)v9);
  }
  return 0LL;
}

void sub_7DC18( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12)
{
  if (a12) {
    free(a12);
  }
  _Unwind_Resume(exception_object);
}

void get_program_pipelineiv(__GLIContextRec *a1, uint64_t a2, GPUTools::GL *a3, int *a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 6608LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  uint64_t v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetProgramPipelineParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 894LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_2071D6;
    if ((byte_2071D6 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_338.reserved1 + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 6608LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    uint64_t v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + _Block_object_dispose((const void *)(v1 - 176), 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 894LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    signed int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 894LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    BOOL v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    unsigned int v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 6608LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  BOOL *v18;
  id v19;
  uint64_t v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  char v34;
  uint64_t v35;
  unint64_t v36;
  void *v37;
  _OWORD *v38;
  uint64_t v39;
  id v40;
  GPUTools::FB::Fbuf *v41;
  unsigned int v42;
  GPUTools::FB::Fbuf *v43;
  dispatch_queue_s *v44;
  uint64_t v45;
  GPUTools::FB::Stream *v46;
  unsigned int *v47;
  unsigned int v48;
  unsigned int v49;
  unsigned int v50;
  signed int v51;
  BOOL v52;
  unsigned int v53;
  uint64_t v54;
  id v55;
  unsigned int v56;
  dispatch_queue_s *v57;
  uint64_t v58;
  uint64_t v59;
  uint64_t v60;
  uint64_t v61;
  __int128 v62;
  _BYTE v63[5];
  void *v64;
  void *v65;
  unsigned int v66;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      signed int v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  id v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v55 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v54 = handle_opengl_thread_conflict((const void **)v13);
    id v55 = [(id)DYGetGLGuestAppClient(v54) waitOnGraphicsSemaphoreAssertions];
    if ((int)v55 >= 1)
    {
      do
LABEL_62:
        unsigned int v56 = __ldaxr(v14);
      while (__stlxr(v56 - 1, v14));
      __uint64_t v57 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v55) graphicsLockWaitQueue];
      dispatch_sync_f(v57, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 6608LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  uint64_t v64 = 0LL;
  uint64_t v65 = 0LL;
  unsigned int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v55) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    GPUTools::GL::DYGetProgramPipelineParameterInfo(a3, &v63[1], (unsigned int *)v63, v18);
    uint64_t v20 = v13 + 4709;
    uint64_t v21 = 101LL;
    if (!v63[0]) {
      uint64_t v21 = 105LL;
    }
    snprintf((char *)(v13 + 4709), 0x40uLL, "Cuie@%u%c", *(_DWORD *)&v63[1], v21);
    GPUTools::FB::Encode((uint64_t)&v64, 894LL, 256LL, v13 + 4709, v22, v23, v24, v25, *(void *)v13);
    char v27 = byte_2071D6;
    if ((byte_2071D6 & 1) != 0) {
      breakpoint_break( (uint64_t)&v64,  (volatile int *)((char *)&stru_338.reserved1 + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    if (!([(id)DYGetGLGuestAppClient(v26) overrideFlags] & 0x10 | v27 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 32) + 6608LL))( a1,  a2,  a3,  a4);
      uint64_t v61 = v13;
      uint64_t v33 = v13 + 4709;
      char v34 = v27;
      uint64_t v35 = mach_absolute_time() - v32;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v35;
      }

      else
      {
        uint64_t v60 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        unsigned int v37 = v64;
        *((void *)v64 + 3) = v60;
        uint64_t v32 = __udivti3(v36 * v32, (v36 * (unsigned __int128)v32) >> 64);
      }

      v37[2] = v32;
      char v27 = v34;
      uint64_t v20 = v33;
      uint64_t v13 = v61;
      if (gCheckGLErrors) {
        check_errors(v61);
      }
    }

    uint64_t v38 = v64;
    __int128 v62 = *((_OWORD *)v64 + 1);
    uint64_t v65 = v64;
    if (v66 >= 0x24)
    {
      *((_DWORD *)v64 + _Block_object_dispose((const void *)(v1 - 176), 8) = 0;
      *uint64_t v38 = 0u;
      v38[1] = 0u;
    }

    GPUTools::FB::Encode((uint64_t)&v64, 894LL, 256LL, v20, v28, v29, v30, v31, *(void *)v13);
    *((_OWORD *)v64 + 1) = v62;
    id v40 = objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v39), "activeCaptureDescriptor"),  "includeBacktraceInFbufs");
    if ((_DWORD)v40) {
      id v40 = (id)GPUTools::FB::EncodeCurrentBacktrace((GPUTools::FB *)&v64, v41);
    }
    unsigned int v43 = (GPUTools::FB::Fbuf *)*(unsigned int *)(v13 + 3404);
    if ((_DWORD)v43) {
      id v40 = (id)GPUTools::FB::EncodeGLError((GPUTools::FB *)&v64, v43, v42);
    }
    if (objc_msgSend( objc_msgSend((id)DYGetGLGuestAppClient(v40), "activeCaptureDescriptor"),  "queryDriverEventsOnGraphicsCommands")) {
      encode_driver_events((id *)v13, (uint64_t)&v64);
    }
    signed int v44 = GPUTools::FB::EncodeThreadQueueInfo( (void *)(v13 + 3480),  (GPUTools::FB::Fbuf *)(v13 + 3520),  (GPUTools::FB *)&v64);
    uint64_t v45 = *(unsigned int *)(v13 + 3404);
    if ((_DWORD)v45 && gBreakOnError)
    {
      uint64_t v58 = 3LL;
      uint64_t v59 = 0xFFFFFFFFLL;
    }

    else
    {
      if ((v27 & 2) == 0) {
        goto LABEL_43;
      }
      uint64_t v58 = 2LL;
      uint64_t v59 = 894LL;
    }

    breakpoint_break((uint64_t)&v64, (volatile int *)v59, v58, v45, v13);
LABEL_43:
    BOOL v46 = (GPUTools::FB::Stream *)[(id)DYGetGLGuestAppClient(v44) defaultFbufStream];
    unsigned int v47 = (unsigned int *)((char *)v46 + 56);
    do
      unsigned int v48 = __ldaxr(v47);
    while (__stlxr(1u, v47));
    if (v48 == 1)
    {
      do
      {
        while (*v47 == 1)
          ;
        do
          unsigned int v49 = __ldaxr(v47);
        while (__stlxr(1u, v47));
      }

      while (v49 == 1);
    }

    GPUTools::FB::Stream::Write_nolock(v46, (GPUTools::FB::Fbuf *)&v64, *(unsigned int *)v64, 1);
    atomic_store(0, v47);
    do
    {
      unsigned int v50 = __ldaxr(v14);
      signed int v51 = v50 - 1;
    }

    while (__stlxr(v51, v14));
    if (gCheckGLErrors) {
      BOOL v52 = v51 < 1;
    }
    else {
      BOOL v52 = 1;
    }
    if (!v52) {
      handle_opengl_thread_conflict((const void **)v13);
    }
    goto LABEL_56;
  }

  do
    unsigned int v53 = __ldaxr(v14);
  while (__stlxr(v53 - 1, v14));
  [(id)DYGetGLGuestAppClient(v19) triggerArmedCapture];
  (*(void (**)(__GLIContextRec *, uint64_t, GPUTools::GL *, int *))(*(void *)(v13 + 24) + 6608LL))( a1,  a2,  a3,  a4);
LABEL_56:
  if (v64) {
    free(v64);
  }
}

void sub_7E108( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void validate_program_pipeline(__GLIContextRec *a1, uint64_t a2)
{
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    id v56 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v55 = handle_opengl_thread_conflict((const void **)v9);
    id v56 = [(id)DYGetGLGuestAppClient(v55) waitOnGraphicsSemaphoreAssertions];
    if ((int)v56 >= 1)
    {
      do
LABEL_67:
        unsigned int v57 = __ldaxr(v10);
      while (__stlxr(v57 - 1, v10));
      uint64_t v58 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v56) graphicsLockWaitQueue];
      dispatch_sync_f(v58, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6616LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v56) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v65, 921LL, 0LL, (uint64_t)"Cui", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_2071F1;
    if ((byte_2071F1 & 1) != 0) {
      breakpoint_break((uint64_t)v65, (volatile int *)&stru_388.segname[1], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v21 = (uint64_t)[(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if (!(v21 & 0x10 | v20 & 4))
    {
      uint64_t v22 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6616LL))(a1, a2);
      uint64_t v21 = mach_absolute_time();
      uint64_t v23 = v21 - v22;
      unint64_t v24 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v25 = v65[0];
        *((void *)v65[0] + 2) = v22;
        v25[3] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v61 = __udivti3(g_DYTimebaseInfo * v23, (g_DYTimebaseInfo * (unsigned __int128)v23) >> 64);
        __int128 v62 = v65[0];
        *((void *)v65[0] + 3) = v61;
        uint64_t v21 = __udivti3(v24 * v22, (v24 * (unsigned __int128)v22) >> 64);
        v62[2] = v21;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v21 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  uint64_t v14;
  uint64_t v15;
  uint64_t v16;
  uint64_t v17;
  id v18;
  uint64_t v19;
  char v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  unint64_t v24;
  void *v25;
  id v26;
  GPUTools::FB::Fbuf *v27;
  unsigned int v28;
  GPUTools::FB::Fbuf *v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  GPUTools::FB::Stream *v32;
  unsigned int *v33;
  unsigned int v34;
  unsigned int v35;
  char *info_log;
  void *v37;
  uint64_t v38;
  uint64_t v39;
  uint64_t v40;
  uint64_t v41;
  uint64_t v42;
  uint64_t v43;
  uint64_t v44;
  GPUTools::FB::Stream *v45;
  unsigned int *v46;
  unsigned int v47;
  unsigned int v48;
  unsigned int v49;
  signed int v50;
  BOOL v51;
  unsigned int v52;
  uint64_t v53;
  id v54;
  unsigned int v55;
  dispatch_queue_s *v56;
  uint64_t v57;
  uint64_t v58;
  uint64_t v59;
  void *v60;
  int v61;
  unsigned int v62;
  void *v63[2];
  int v64;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    unsigned int v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v53 = handle_opengl_thread_conflict((const void **)v9);
    unsigned int v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_67:
        uint64_t v55 = __ldaxr(v10);
      while (__stlxr(v55 - 1, v10));
      id v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6616LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v63[0] = 0LL;
  v63[1] = 0LL;
  unsigned int v64 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    GPUTools::FB::Encode((uint64_t)v63, 921LL, 0LL, (uint64_t)"Cui", v14, v15, v16, v17, *(void *)v9);
    char v20 = byte_2071F1;
    if ((byte_2071F1 & 1) != 0) {
      breakpoint_break((uint64_t)v63, (volatile int *)&stru_388.segname[1], 1LL, *(unsigned int *)(v9 + 3404), v9);
    }
    uint64_t v21 = (uint64_t)[(id)DYGetGLGuestAppClient(v19) overrideFlags];
    if (!(v21 & 0x10 | v20 & 4))
    {
      uint64_t v22 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6616LL))(a1, a2);
      uint64_t v21 = mach_absolute_time();
      uint64_t v23 = v21 - v22;
      unint64_t v24 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v25 = v63[0];
        *((void *)v63[0] + 2) = v22;
        v25[3] = v23;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v23, (g_DYTimebaseInfo * (unsigned __int128)v23) >> 64);
        uint64_t v60 = v63[0];
        *((void *)v63[0] + 3) = v59;
        uint64_t v21 = __udivti3(v24 * v22, (v24 * (unsigned __int128)v22) >> 64);
        v60[2] = v21;
        if (!gCheckGLErrors) {
          goto LABEL_28;
        }
      }

      uint64_t v21 = check_errors(v9);
    }

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  unsigned int v18;
  uint64_t v19;
  id v20;
  unsigned int v21;
  dispatch_queue_s *v22;
  uint64_t v23;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    char v20 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v19 = handle_opengl_thread_conflict((const void **)v9);
    char v20 = [(id)DYGetGLGuestAppClient(v19) waitOnGraphicsSemaphoreAssertions];
    if ((int)v20 >= 1)
    {
      do
LABEL_34:
        uint64_t v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      uint64_t v22 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v20) graphicsLockWaitQueue];
      dispatch_sync_f(v22, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6616LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v20) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        id v18 = __ldaxr(v10);
      while (__stlxr(v18 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6616LL))(a1, a2);
  ++*(void *)(v9 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      uint64_t v23 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v23) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v23, v9);
      }
    }
  }

  do
  {
    uint64_t v15 = __ldaxr(v10);
    uint64_t v16 = v15 - 1;
  }

  while (__stlxr(v16, v10));
  if (gCheckGLErrors) {
    uint64_t v17 = v16 < 1;
  }
  else {
    uint64_t v17 = 1;
  }
  if (!v17) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

{
  void *v4;
  uint64_t v5;
  unint64_t v6;
  BOOL v7;
  void *v8;
  uint64_t v9;
  unsigned int *v10;
  unsigned int v11;
  signed int v12;
  BOOL v13;
  id v14;
  uint64_t v15;
  uint64_t v16;
  int64x2_t v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  unsigned int v21;
  uint64_t v22;
  id v23;
  unsigned int v24;
  dispatch_queue_s *v25;
  uint64_t v26;
  unint64_t v4 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v4) {
    goto LABEL_12;
  }
  uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v6 = v4[4];
    BOOL v7 = v6 >= (unint64_t)a1;
    else {
      unint64_t v8 = v4 + 1;
    }
    if (v7) {
      uint64_t v5 = (uint64_t)v4;
    }
    unint64_t v4 = (void *)*v8;
  }

  while (*v8);
  if (v5 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v5 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v5 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v9 = *(void *)(v5 + 40);
  unint64_t v10 = (unsigned int *)(v9 + 4640);
  do
  {
    unsigned int v11 = __ldaxr(v10);
    signed int v12 = v11 + 1;
  }

  while (__stlxr(v12, v10));
  if (gCheckGLErrors) {
    BOOL v13 = v12 <= 1;
  }
  else {
    BOOL v13 = 1;
  }
  if (v13)
  {
    uint64_t v23 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v22 = handle_opengl_thread_conflict((const void **)v9);
    uint64_t v23 = [(id)DYGetGLGuestAppClient(v22) waitOnGraphicsSemaphoreAssertions];
    if ((int)v23 >= 1)
    {
      do
LABEL_34:
        unint64_t v24 = __ldaxr(v10);
      while (__stlxr(v24 - 1, v10));
      uint64_t v25 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v23) graphicsLockWaitQueue];
      dispatch_sync_f(v25, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 24) + 6616LL))(a1, a2);
      return;
    }
  }

  *(_BYTE *)(v9 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v23) state] == (char *)&dword_0 + 1)
  {
    uint64_t v14 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v14)
    {
      do
        uint64_t v21 = __ldaxr(v10);
      while (__stlxr(v21 - 1, v10));
      [(id)DYGetGLGuestAppClient(v14) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v15 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t))(*(void *)(v9 + 32) + 6616LL))(a1, a2);
  uint64_t v16 = mach_absolute_time();
  uint64_t v17 = vdupq_n_s64(1uLL);
  v17.i64[0] = v16 - v15;
  *(int64x2_t *)(v9 + 3696) = vaddq_s64(v17, *(int64x2_t *)(v9 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v9);
    if (gBreakOnError)
    {
      id v26 = *(unsigned int *)(v9 + 3404);
      if ((_DWORD)v26) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v26, v9);
      }
    }
  }

  do
  {
    id v18 = __ldaxr(v10);
    uint64_t v19 = v18 - 1;
  }

  while (__stlxr(v19, v10));
  if (gCheckGLErrors) {
    char v20 = v19 < 1;
  }
  else {
    char v20 = 1;
  }
  if (!v20) {
    handle_opengl_thread_conflict((const void **)v9);
  }
}

void sub_7E644( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *a16)
{
  if (a16) {
    free(a16);
  }
  _Unwind_Resume(exception_object);
}

void get_program_pipeline_info_log(__GLIContextRec *a1, uint64_t a2, uint64_t a3, int *a4, char *a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  uint64_t v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v56 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v55 = handle_opengl_thread_conflict((const void **)v15);
    id v56 = [(id)DYGetGLGuestAppClient(v55) waitOnGraphicsSemaphoreAssertions];
    if ((int)v56 >= 1)
    {
      do
LABEL_65:
        unsigned int v57 = __ldaxr(v16);
      while (__stlxr(v57 - 1, v16));
      uint64_t v58 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v56) graphicsLockWaitQueue];
      dispatch_sync_f(v58, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 6624LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  int v66 = 0LL;
  unsigned int v67 = 0LL;
  unsigned int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v56) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    int v65 = 0;
    if (a4) {
      uint64_t v21 = a4;
    }
    else {
      uint64_t v21 = &v65;
    }
    *uint64_t v21 = 0;
    uint64_t v22 = "t";
    if (v21 == a4) {
      uint64_t v22 = "@1i";
    }
    snprintf((char *)(v15 + 4709), 0x40uLL, "Cuii%st", v22);
    GPUTools::FB::Encode((uint64_t)&v66, 893LL, 256LL, v15 + 4709, v23, v24, v25, v26, *(void *)v15);
    unsigned int v28 = a5;
    char v64 = byte_2071D5;
    if ((byte_2071D5 & 1) != 0) {
      breakpoint_break( (uint64_t)&v66,  (volatile int *)((char *)&stru_338.reserved1 + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v29 = (uint64_t)[(id)DYGetGLGuestAppClient(v27) overrideFlags];
    if (!(v29 & 0x10 | v64 & 4))
    {
      uint64_t v30 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 6624LL))( a1,  a2,  a3,  v21,  a5);
      uint64_t v29 = mach_absolute_time();
      uint64_t v31 = v29 - v30;
      unint64_t v32 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v33 = v66;
        *((void *)v66 + 2) = v30;
        v33[3] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v61 = __udivti3(g_DYTimebaseInfo * v31, (g_DYTimebaseInfo * (unsigned __int128)v31) >> 64);
        __int128 v62 = v66;
        *((void *)v66 + 3) = v61;
        uint64_t v29 = __udivti3(v32 * v30, (v32 * (unsigned __int128)v30) >> 64);
        v62[2] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v29 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  char *v21;
  char *v22;
  int64_t v23;
  unsigned int v24;
  unint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  int v51;
  uint64_t v52;
  uint64_t v53;
  uint64_t v54;
  void *v55;
  __uint64_t v56;
  void *v57;
  char *v58;
  unsigned int v59;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  uint64_t v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    unsigned int v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v47 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_57:
        unsigned int v49 = __ldaxr(v16);
      while (__stlxr(v49 - 1, v16));
      unsigned int v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 6624LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  unsigned int v57 = 0LL;
  uint64_t v58 = 0LL;
  uint64_t v59 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v22 = (char *)v57;
    uint64_t v21 = v58;
    uint64_t v23 = v58 - (_BYTE *)v57;
    uint64_t v24 = v59;
    uint64_t v25 = v59 - (v58 - (_BYTE *)v57);
    if (v25 > 0x4B) {
      goto LABEL_24;
    }
    unsigned int v51 = (331 - v25) & 0xFFFFFF00;
    v59 += v51;
    uint64_t v22 = (char *)malloc(v51 + v24);
    unsigned int v57 = v22;
    if (v22)
    {
      if ((v22 & 3) == 0)
      {
        uint64_t v21 = &v22[v23];
LABEL_24:
        *(_OWORD *)(v21 + 60) = 0u;
        *((_OWORD *)v21 + 2) = 0u;
        *((_OWORD *)v21 + 3) = 0u;
        *(_OWORD *)uint64_t v21 = 0u;
        *((_OWORD *)v21 + 1) = 0u;
        uint64_t v58 = v21 + 76;
        GPUTools::FB::Fbuf::align((char **)&v57);
        *((_DWORD *)v22 + 1) = 893;
        *((_DWORD *)v22 + _Block_object_dispose((const void *)(v1 - 176), 8) = 256;
        id v56 = 0LL;
        uint64_t v26 = pthread_threadid_np(0LL, &v56);
        *((void *)v22 + 1) = v56;
        strcpy(v22 + 36, "Cuiipp");
        *(void *)(v22 + 44) = *(void *)v15;
        *((_DWORD *)v22 + 13) = a2;
        *((_DWORD *)v22 + 14) = a3;
        *(void *)(v22 + 60) = a4;
        *(void *)(v22 + 6_Block_object_dispose((const void *)(v1 - 176), 8) = a5;
        uint64_t v27 = byte_2071D5;
        if ((byte_2071D5 & 1) != 0) {
          breakpoint_break( (uint64_t)&v57,  (volatile int *)((char *)&stru_338.reserved1 + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
        }
        unsigned int v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
        if (!(v28 & 0x10 | v27 & 4))
        {
          uint64_t v29 = mach_absolute_time();
          (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 6624LL))( a1,  a2,  a3,  a4,  a5);
          unsigned int v28 = mach_absolute_time();
          uint64_t v30 = v28 - v29;
          uint64_t v31 = g_DYTimebaseInfo;
          if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
          {
            unint64_t v32 = v57;
            *((void *)v57 + 2) = v29;
            v32[3] = v30;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          else
          {
            unsigned int v54 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
            uint64_t v55 = v57;
            *((void *)v57 + 3) = v54;
            unsigned int v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
            v55[2] = v28;
            if (!gCheckGLErrors) {
              goto LABEL_29;
            }
          }

          unsigned int v28 = check_errors(v15);
        }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  unsigned int v24;
  uint64_t v25;
  id v26;
  unsigned int v27;
  dispatch_queue_s *v28;
  uint64_t v29;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  uint64_t v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v26 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v25 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v26 = [(id)DYGetGLGuestAppClient(v25) waitOnGraphicsSemaphoreAssertions];
    if ((int)v26 >= 1)
    {
      do
LABEL_34:
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      unsigned int v28 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v26) graphicsLockWaitQueue];
      dispatch_sync_f(v28, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 6624LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v26) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v24 = __ldaxr(v16);
      while (__stlxr(v24 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 6624LL))( a1,  a2,  a3,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v29 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v29) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v29, v15);
      }
    }
  }

  do
  {
    uint64_t v21 = __ldaxr(v16);
    uint64_t v22 = v21 - 1;
  }

  while (__stlxr(v22, v16));
  if (gCheckGLErrors) {
    uint64_t v23 = v22 < 1;
  }
  else {
    uint64_t v23 = 1;
  }
  if (!v23) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  int64x2_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  uint64_t v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v28 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v16);
      while (__stlxr(v30 - 1, v16));
      uint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 24) + 6624LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v27 = __ldaxr(v16);
      while (__stlxr(v27 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, uint64_t, uint64_t, int *, char *))(*(void *)(v15 + 32) + 6624LL))( a1,  a2,  a3,  a4,  a5);
  uint64_t v22 = mach_absolute_time();
  uint64_t v23 = vdupq_n_s64(1uLL);
  v23.i64[0] = v22 - v21;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v23, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unint64_t v32 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v15);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v16);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v16));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_7EBD4( _Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(exception_object);
}

void program_uniform1i(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6632LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a2);
    *(_WORD *)(v13 + 4709) = 30019;
    *(_BYTE *)(v13 + 4711) = 105;
    id v20 = (_BYTE *)(v13 + 4712);
    if ((_DWORD)v19 == -1)
    {
      *id v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)(v13 + 4712) = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    *(_WORD *)&v20[v21] = 105;
    uint64_t v22 = GPUTools::FB::Encode(v55, 902LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_2071DE;
    if ((byte_2071DE & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_338.reserved3 + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6632LL))( a1,  a2,  v19,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        unsigned int v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  _BYTE *v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  char *v51;
  __int128 v52;
  __int128 v53;
  __int128 v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      uint64_t v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6632LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a2);
    *(_WORD *)(v13 + 4709) = 30019;
    *(_BYTE *)(v13 + 4711) = 105;
    id v20 = (_BYTE *)(v13 + 4712);
    if ((_DWORD)v19 == -1)
    {
      *id v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)(v13 + 4712) = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    *(_WORD *)&v20[v21] = 105;
    uint64_t v22 = GPUTools::FB::Encode(v55, 902LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_2071DE;
    if ((byte_2071DE & 1) != 0) {
      breakpoint_break( (uint64_t)v55,  (volatile int *)((char *)&stru_338.reserved3 + 2),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6632LL))( a1,  a2,  v19,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        unsigned int v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6632LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v23 = __ldaxr(v14);
      while (__stlxr(v23 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6632LL))( a1,  a2,  v19,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unsigned int v28 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v13);
      }
    }
  }

  do
  {
    id v20 = __ldaxr(v14);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    unsigned int v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v13);
    unsigned int v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        id v29 = __ldaxr(v14);
      while (__stlxr(v29 - 1, v14));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6632LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
  id v20 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6632LL))( a1,  a2,  v19,  a4);
  uint64_t v21 = mach_absolute_time();
  uint64_t v22 = vdupq_n_s64(1uLL);
  v22.i64[0] = v21 - v20;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unsigned int v31 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v13);
      }
    }
  }

  do
  {
    char v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_7F0E4( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform2i(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                           + 6640LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a2);
    *(_WORD *)(v15 + 4709) = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v22 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    strcpy(&v22[v23], "ii");
    uint64_t v24 = GPUTools::FB::Encode(v57, 906LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_2071E2;
    if ((byte_2071E2 & 1) != 0) {
      breakpoint_break((uint64_t)v57, (volatile int *)&stru_388.sectname[2], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32)
                                                                                           + 6640LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  _BYTE *v22;
  uint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  char *v53;
  __int128 v54;
  __int128 v55;
  __int128 v56;
  void *v57[2];
  int v58;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                           + 6640LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a2);
    *(_WORD *)(v15 + 4709) = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v22 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    strcpy(&v22[v23], "ii");
    uint64_t v24 = GPUTools::FB::Encode(v57, 906LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_2071E2;
    if ((byte_2071E2 & 1) != 0) {
      breakpoint_break((uint64_t)v57, (volatile int *)&stru_388.sectname[2], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32)
                                                                                           + 6640LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                           + 6640LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v25 = __ldaxr(v16);
      while (__stlxr(v25 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 6640LL))( a1,  a2,  v21,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v15);
      }
    }
  }

  do
  {
    uint64_t v22 = __ldaxr(v16);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v16));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  int64x2_t v24;
  unsigned int v25;
  signed int v26;
  BOOL v27;
  unsigned int v28;
  uint64_t v29;
  id v30;
  unsigned int v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v30 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v29 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v30 = [(id)DYGetGLGuestAppClient(v29) waitOnGraphicsSemaphoreAssertions];
    if ((int)v30 >= 1)
    {
      do
LABEL_34:
        id v31 = __ldaxr(v16);
      while (__stlxr(v31 - 1, v16));
      unint64_t v32 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v30) graphicsLockWaitQueue];
      dispatch_sync_f(v32, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                           + 6640LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v30) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
  uint64_t v22 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 6640LL))( a1,  a2,  v21,  a4,  a5);
  uint64_t v23 = mach_absolute_time();
  uint64_t v24 = vdupq_n_s64(1uLL);
  v24.i64[0] = v23 - v22;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v24, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unsigned int v33 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v33) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v33, v15);
      }
    }
  }

  do
  {
    char v25 = __ldaxr(v16);
    uint64_t v26 = v25 - 1;
  }

  while (__stlxr(v26, v16));
  if (gCheckGLErrors) {
    uint64_t v27 = v26 < 1;
  }
  else {
    uint64_t v27 = 1;
  }
  if (!v27) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_7F640( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform3i( __GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, uint64_t a5, unsigned int a6)
{
  uint64_t v11 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v11) {
    goto LABEL_12;
  }
  uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v13 = v11[4];
    BOOL v14 = v13 >= (unint64_t)a1;
    else {
      uint64_t v15 = v11 + 1;
    }
    if (v14) {
      uint64_t v12 = (uint64_t)v11;
    }
    uint64_t v11 = (void *)*v15;
  }

  while (*v15);
  if (v12 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v12 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v16 = *(void *)(v12 + 40);
  unsigned int v17 = (unsigned int *)(v16 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v16);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_59:
        unsigned int v48 = __ldaxr(v17);
      while (__stlxr(v48 - 1, v17));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 24) + 6648LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v16 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v16, a2, a3);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v16);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a2);
    *(_WORD *)(v16 + 4709) = 30019;
    *(_BYTE *)(v16 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v16 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v16 + 4712) = 1047084118;
      snprintf((char *)(v16 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v16 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v16 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    *(_DWORD *)&v23[v24] = 6908265;
    uint64_t v25 = GPUTools::FB::Encode(v59, 910LL, 0LL, v16 + 4709, &v55);
    char v26 = byte_2071E6;
    if ((byte_2071E6 & 1) != 0) {
      breakpoint_break((uint64_t)v59, (volatile int *)&stru_388.sectname[6], 1LL, *(unsigned int *)(v16 + 3404), v16);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 32) + 6648LL))( a1,  a2,  v22,  a4,  a5,  a6);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v59[0];
        *((void *)v59[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        __int128 v53 = v59[0];
        *((void *)v59[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v16);
    }

{
  void *v11;
  uint64_t v12;
  unint64_t v13;
  BOOL v14;
  void *v15;
  uint64_t v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  char *v55;
  __int128 v56;
  __int128 v57;
  __int128 v58;
  void *v59[2];
  int v60;
  uint64_t v11 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v11) {
    goto LABEL_12;
  }
  uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v13 = v11[4];
    BOOL v14 = v13 >= (unint64_t)a1;
    else {
      uint64_t v15 = v11 + 1;
    }
    if (v14) {
      uint64_t v12 = (uint64_t)v11;
    }
    uint64_t v11 = (void *)*v15;
  }

  while (*v15);
  if (v12 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v12 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v16 = *(void *)(v12 + 40);
  unsigned int v17 = (unsigned int *)(v16 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v16);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_59:
        unsigned int v48 = __ldaxr(v17);
      while (__stlxr(v48 - 1, v17));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 24) + 6648LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v16 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v16, a2, a3);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v16);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a2);
    *(_WORD *)(v16 + 4709) = 30019;
    *(_BYTE *)(v16 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v16 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v16 + 4712) = 1047084118;
      snprintf((char *)(v16 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v16 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v16 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    *(_DWORD *)&v23[v24] = 6908265;
    uint64_t v25 = GPUTools::FB::Encode(v59, 910LL, 0LL, v16 + 4709, &v55);
    char v26 = byte_2071E6;
    if ((byte_2071E6 & 1) != 0) {
      breakpoint_break((uint64_t)v59, (volatile int *)&stru_388.sectname[6], 1LL, *(unsigned int *)(v16 + 3404), v16);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 32) + 6648LL))( a1,  a2,  v22,  a4,  a5,  a6);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v59[0];
        *((void *)v59[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        __int128 v53 = v59[0];
        *((void *)v59[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v16);
    }

void sub_7FBB4( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform4i( __GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, uint64_t a5, unsigned int a6, unsigned int a7)
{
  uint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    uint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v17);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_59:
        unsigned int v49 = __ldaxr(v18);
      while (__stlxr(v49 - 1, v18));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void, void))(*(void *)(v17 + 24) + 6656LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, a2, a3);
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, *(void **)v17);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a2);
    *(_WORD *)(v17 + 4709) = 30019;
    *(_BYTE *)(v17 + 4711) = 105;
    uint64_t v24 = (_BYTE *)(v17 + 4712);
    if ((_DWORD)v23 == -1)
    {
      *uint64_t v24 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, -1);
      uint64_t v25 = 1LL;
    }

    else
    {
      *(_DWORD *)(v17 + 4712) = 1047084118;
      snprintf((char *)(v17 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v17 + 40), (_DWORD)a2, v23);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, (void *)(v17 + 4773));
      uint64_t v25 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a6);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a7);
    strcpy(&v24[v25], "iiii");
    uint64_t v26 = GPUTools::FB::Encode(v61, 914LL, 0LL, v17 + 4709, &v57);
    char v27 = byte_2071EA;
    if ((byte_2071EA & 1) != 0) {
      breakpoint_break((uint64_t)v61, (volatile int *)&stru_388.sectname[10], 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void, void))(*(void *)(v17 + 32) + 6656LL))( a1,  a2,  v23,  a4,  a5,  a6,  a7);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v32 = v61[0];
        *((void *)v61[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        __int128 v54 = v61[0];
        *((void *)v61[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v28 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  _BYTE *v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  char *v57;
  __int128 v58;
  __int128 v59;
  __int128 v60;
  void *v61[2];
  int v62;
  uint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    uint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v17);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_59:
        unsigned int v49 = __ldaxr(v18);
      while (__stlxr(v49 - 1, v18));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void, void))(*(void *)(v17 + 24) + 6656LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, a2, a3);
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, *(void **)v17);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a2);
    *(_WORD *)(v17 + 4709) = 30019;
    *(_BYTE *)(v17 + 4711) = 105;
    uint64_t v24 = (_BYTE *)(v17 + 4712);
    if ((_DWORD)v23 == -1)
    {
      *uint64_t v24 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, -1);
      uint64_t v25 = 1LL;
    }

    else
    {
      *(_DWORD *)(v17 + 4712) = 1047084118;
      snprintf((char *)(v17 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v17 + 40), (_DWORD)a2, v23);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, (void *)(v17 + 4773));
      uint64_t v25 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a6);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a7);
    strcpy(&v24[v25], "iiii");
    uint64_t v26 = GPUTools::FB::Encode(v61, 914LL, 0LL, v17 + 4709, &v57);
    char v27 = byte_2071EA;
    if ((byte_2071EA & 1) != 0) {
      breakpoint_break((uint64_t)v61, (volatile int *)&stru_388.sectname[10], 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void, void))(*(void *)(v17 + 32) + 6656LL))( a1,  a2,  v23,  a4,  a5,  a6,  a7);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v32 = v61[0];
        *((void *)v61[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        __int128 v54 = v61[0];
        *((void *)v61[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v28 = check_errors(v17);
    }

void sub_8013C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform1f(__GLIContextRec *a1, volatile int *a2, uint64_t a3, float a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float))(*(void *)(v13 + 24) + 6664LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a2);
    *(_WORD *)(v13 + 4709) = 30019;
    *(_BYTE *)(v13 + 4711) = 105;
    signed int v20 = (_BYTE *)(v13 + 4712);
    if ((_DWORD)v19 == -1)
    {
      *signed int v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)(v13 + 4712) = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    *(_WORD *)&v20[v21] = 102;
    uint64_t v22 = GPUTools::FB::Encode(v55, 900LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_2071DC;
    if ((byte_2071DC & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_338.reserved3, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float))(*(void *)(v13 + 32) + 6664LL))( a1,  a2,  v19,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        uint64_t v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  _BYTE *v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  char *v51;
  __int128 v52;
  __int128 v53;
  __int128 v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float))(*(void *)(v13 + 24) + 6664LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a2);
    *(_WORD *)(v13 + 4709) = 30019;
    *(_BYTE *)(v13 + 4711) = 105;
    signed int v20 = (_BYTE *)(v13 + 4712);
    if ((_DWORD)v19 == -1)
    {
      *signed int v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)(v13 + 4712) = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    *(_WORD *)&v20[v21] = 102;
    uint64_t v22 = GPUTools::FB::Encode(v55, 900LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_2071DC;
    if ((byte_2071DC & 1) != 0) {
      breakpoint_break((uint64_t)v55, (volatile int *)&stru_338.reserved3, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float))(*(void *)(v13 + 32) + 6664LL))( a1,  a2,  v19,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        uint64_t v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float))(*(void *)(v13 + 24) + 6664LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v23 = __ldaxr(v14);
      while (__stlxr(v23 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float))(*(void *)(v13 + 32) + 6664LL))( a1,  a2,  v19,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      uint64_t v28 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v13);
      }
    }
  }

  do
  {
    signed int v20 = __ldaxr(v14);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        id v29 = __ldaxr(v14);
      while (__stlxr(v29 - 1, v14));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float))(*(void *)(v13 + 24) + 6664LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
  signed int v20 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float))(*(void *)(v13 + 32) + 6664LL))( a1,  a2,  v19,  a4);
  uint64_t v21 = mach_absolute_time();
  uint64_t v22 = vdupq_n_s64(1uLL);
  v22.i64[0] = v21 - v20;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unsigned int v31 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v13);
      }
    }
  }

  do
  {
    char v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_80668( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform2f(__GLIContextRec *a1, volatile int *a2, uint64_t a3, float a4, float a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float))(*(void *)(v15 + 24) + 6672LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a2);
    *(_WORD *)(v15 + 4709) = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v22 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    strcpy(&v22[v23], "ff");
    uint64_t v24 = GPUTools::FB::Encode(v57, 904LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_2071E0;
    if ((byte_2071E0 & 1) != 0) {
      breakpoint_break((uint64_t)v57, (volatile int *)&stru_388, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float))(*(void *)(v15 + 32) + 6672LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  _BYTE *v22;
  uint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  char *v53;
  __int128 v54;
  __int128 v55;
  __int128 v56;
  void *v57[2];
  int v58;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float))(*(void *)(v15 + 24) + 6672LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a2);
    *(_WORD *)(v15 + 4709) = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v22 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    strcpy(&v22[v23], "ff");
    uint64_t v24 = GPUTools::FB::Encode(v57, 904LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_2071E0;
    if ((byte_2071E0 & 1) != 0) {
      breakpoint_break((uint64_t)v57, (volatile int *)&stru_388, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float))(*(void *)(v15 + 32) + 6672LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float))(*(void *)(v15 + 24) + 6672LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v25 = __ldaxr(v16);
      while (__stlxr(v25 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float))(*(void *)(v15 + 32) + 6672LL))( a1,  a2,  v21,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v15);
      }
    }
  }

  do
  {
    uint64_t v22 = __ldaxr(v16);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v16));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  int64x2_t v24;
  unsigned int v25;
  signed int v26;
  BOOL v27;
  unsigned int v28;
  uint64_t v29;
  id v30;
  unsigned int v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v30 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v29 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v30 = [(id)DYGetGLGuestAppClient(v29) waitOnGraphicsSemaphoreAssertions];
    if ((int)v30 >= 1)
    {
      do
LABEL_34:
        id v31 = __ldaxr(v16);
      while (__stlxr(v31 - 1, v16));
      id v32 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v30) graphicsLockWaitQueue];
      dispatch_sync_f(v32, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float))(*(void *)(v15 + 24) + 6672LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v30) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
  uint64_t v22 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float))(*(void *)(v15 + 32) + 6672LL))( a1,  a2,  v21,  a4,  a5);
  uint64_t v23 = mach_absolute_time();
  uint64_t v24 = vdupq_n_s64(1uLL);
  v24.i64[0] = v23 - v22;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v24, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unsigned int v33 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v33) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v33, v15);
      }
    }
  }

  do
  {
    char v25 = __ldaxr(v16);
    uint64_t v26 = v25 - 1;
  }

  while (__stlxr(v26, v16));
  if (gCheckGLErrors) {
    uint64_t v27 = v26 < 1;
  }
  else {
    uint64_t v27 = 1;
  }
  if (!v27) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_80BB8( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform3f(__GLIContextRec *a1, volatile int *a2, uint64_t a3, float a4, float a5, float a6)
{
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v17);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_59:
        unsigned int v49 = __ldaxr(v18);
      while (__stlxr(v49 - 1, v18));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float))(*(void *)(v17 + 24)
                                                                                              + 6680LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, a2, a3);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v17);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a2);
    *(_WORD *)(v17 + 4709) = 30019;
    *(_BYTE *)(v17 + 4711) = 105;
    uint64_t v24 = (_BYTE *)(v17 + 4712);
    if ((_DWORD)v23 == -1)
    {
      *uint64_t v24 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v25 = 1LL;
    }

    else
    {
      *(_DWORD *)(v17 + 4712) = 1047084118;
      snprintf((char *)(v17 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v17 + 40), (_DWORD)a2, v23);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v17 + 4773));
      uint64_t v25 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    *(_DWORD *)&v24[v25] = 6710886;
    uint64_t v26 = GPUTools::FB::Encode(v59, 908LL, 0LL, v17 + 4709, &v55);
    char v27 = byte_2071E4;
    if ((byte_2071E4 & 1) != 0) {
      breakpoint_break((uint64_t)v59, (volatile int *)&stru_388.sectname[4], 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float))(*(void *)(v17 + 32)
                                                                                              + 6680LL))( a1,  a2,  v23,  a4,  a5,  a6);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v32 = v59[0];
        *((void *)v59[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        __int128 v54 = v59[0];
        *((void *)v59[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v28 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  _BYTE *v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  char *v55;
  __int128 v56;
  __int128 v57;
  __int128 v58;
  void *v59[2];
  int v60;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v17);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_59:
        unsigned int v49 = __ldaxr(v18);
      while (__stlxr(v49 - 1, v18));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float))(*(void *)(v17 + 24)
                                                                                              + 6680LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, a2, a3);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v17);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a2);
    *(_WORD *)(v17 + 4709) = 30019;
    *(_BYTE *)(v17 + 4711) = 105;
    uint64_t v24 = (_BYTE *)(v17 + 4712);
    if ((_DWORD)v23 == -1)
    {
      *uint64_t v24 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v25 = 1LL;
    }

    else
    {
      *(_DWORD *)(v17 + 4712) = 1047084118;
      snprintf((char *)(v17 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v17 + 40), (_DWORD)a2, v23);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v17 + 4773));
      uint64_t v25 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    *(_DWORD *)&v24[v25] = 6710886;
    uint64_t v26 = GPUTools::FB::Encode(v59, 908LL, 0LL, v17 + 4709, &v55);
    char v27 = byte_2071E4;
    if ((byte_2071E4 & 1) != 0) {
      breakpoint_break((uint64_t)v59, (volatile int *)&stru_388.sectname[4], 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float))(*(void *)(v17 + 32)
                                                                                              + 6680LL))( a1,  a2,  v23,  a4,  a5,  a6);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v32 = v59[0];
        *((void *)v59[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        __int128 v54 = v59[0];
        *((void *)v59[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v28 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  unsigned int v24;
  signed int v25;
  BOOL v26;
  unsigned int v27;
  uint64_t v28;
  id v29;
  unsigned int v30;
  dispatch_queue_s *v31;
  uint64_t v32;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    uint64_t v29 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v28 = handle_opengl_thread_conflict((const void **)v17);
    uint64_t v29 = [(id)DYGetGLGuestAppClient(v28) waitOnGraphicsSemaphoreAssertions];
    if ((int)v29 >= 1)
    {
      do
LABEL_34:
        uint64_t v30 = __ldaxr(v18);
      while (__stlxr(v30 - 1, v18));
      unint64_t v31 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v29) graphicsLockWaitQueue];
      dispatch_sync_f(v31, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float))(*(void *)(v17 + 24)
                                                                                              + 6680LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v29) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        char v27 = __ldaxr(v18);
      while (__stlxr(v27 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, a2, a3);
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float))(*(void *)(v17 + 32)
                                                                                          + 6680LL))( a1,  a2,  v23,  a4,  a5,  a6);
  ++*(void *)(v17 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      id v32 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v32) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v32, v17);
      }
    }
  }

  do
  {
    uint64_t v24 = __ldaxr(v18);
    uint64_t v25 = v24 - 1;
  }

  while (__stlxr(v25, v18));
  if (gCheckGLErrors) {
    uint64_t v26 = v25 < 1;
  }
  else {
    uint64_t v26 = 1;
  }
  if (!v26) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  uint64_t v24;
  uint64_t v25;
  int64x2_t v26;
  unsigned int v27;
  signed int v28;
  BOOL v29;
  unsigned int v30;
  uint64_t v31;
  id v32;
  unsigned int v33;
  dispatch_queue_s *v34;
  uint64_t v35;
  unint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      signed int v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    unint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  signed int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v32 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v31 = handle_opengl_thread_conflict((const void **)v17);
    id v32 = [(id)DYGetGLGuestAppClient(v31) waitOnGraphicsSemaphoreAssertions];
    if ((int)v32 >= 1)
    {
      do
LABEL_34:
        id v33 = __ldaxr(v18);
      while (__stlxr(v33 - 1, v18));
      uint64_t v34 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v32) graphicsLockWaitQueue];
      dispatch_sync_f(v34, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float))(*(void *)(v17 + 24)
                                                                                              + 6680LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v32) state] == (char *)&dword_0 + 1)
  {
    id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v22)
    {
      do
        uint64_t v30 = __ldaxr(v18);
      while (__stlxr(v30 - 1, v18));
      [(id)DYGetGLGuestAppClient(v22) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, a2, a3);
  uint64_t v24 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float))(*(void *)(v17 + 32)
                                                                                          + 6680LL))( a1,  a2,  v23,  a4,  a5,  a6);
  uint64_t v25 = mach_absolute_time();
  uint64_t v26 = vdupq_n_s64(1uLL);
  v26.i64[0] = v25 - v24;
  *(int64x2_t *)(v17 + 3696) = vaddq_s64(v26, *(int64x2_t *)(v17 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v17);
    if (gBreakOnError)
    {
      unsigned int v35 = *(unsigned int *)(v17 + 3404);
      if ((_DWORD)v35) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v35, v17);
      }
    }
  }

  do
  {
    char v27 = __ldaxr(v18);
    uint64_t v28 = v27 - 1;
  }

  while (__stlxr(v28, v18));
  if (gCheckGLErrors) {
    uint64_t v29 = v28 < 1;
  }
  else {
    uint64_t v29 = 1;
  }
  if (!v29) {
    handle_opengl_thread_conflict((const void **)v17);
  }
}

void sub_8112C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform4f( __GLIContextRec *a1, volatile int *a2, uint64_t a3, float a4, float a5, float a6, float a7)
{
  unint64_t v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      signed int v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    unint64_t v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  signed int v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v19);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_59:
        unsigned int v51 = __ldaxr(v20);
      while (__stlxr(v51 - 1, v20));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float, float))(*(void *)(v19 + 24) + 6688LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v19 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    uint64_t v25 = wrapper_map_uniform_loc((ContextInfo *)v19, a2, a3);
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, *(void **)v19);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a2);
    *(_WORD *)(v19 + 4709) = 30019;
    *(_BYTE *)(v19 + 4711) = 105;
    uint64_t v26 = (_BYTE *)(v19 + 4712);
    if ((_DWORD)v25 == -1)
    {
      *uint64_t v26 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, -1);
      uint64_t v27 = 1LL;
    }

    else
    {
      *(_DWORD *)(v19 + 4712) = 1047084118;
      snprintf((char *)(v19 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v19 + 40), (_DWORD)a2, v25);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, (void *)(v19 + 4773));
      uint64_t v27 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a6);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a7);
    strcpy(&v26[v27], "ffff");
    uint64_t v28 = GPUTools::FB::Encode(v61, 912LL, 0LL, v19 + 4709, &v57);
    char v29 = byte_2071E8;
    if ((byte_2071E8 & 1) != 0) {
      breakpoint_break((uint64_t)v61, (volatile int *)&stru_388.sectname[8], 1LL, *(unsigned int *)(v19 + 3404), v19);
    }
    uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
    if (!(v30 & 0x10 | v29 & 4))
    {
      uint64_t v31 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float, float))(*(void *)(v19 + 32) + 6688LL))( a1,  a2,  v25,  a4,  a5,  a6,  a7);
      uint64_t v30 = mach_absolute_time();
      uint64_t v32 = v30 - v31;
      unint64_t v33 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v34 = v61[0];
        *((void *)v61[0] + 2) = v31;
        v34[3] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
        __int128 v56 = v61[0];
        *((void *)v61[0] + 3) = v55;
        uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
        v56[2] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v30 = check_errors(v19);
    }

{
  void *v14;
  uint64_t v15;
  unint64_t v16;
  BOOL v17;
  void *v18;
  uint64_t v19;
  unsigned int *v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  id v24;
  uint64_t v25;
  _BYTE *v26;
  uint64_t v27;
  uint64_t v28;
  char v29;
  uint64_t v30;
  uint64_t v31;
  uint64_t v32;
  unint64_t v33;
  void *v34;
  id v35;
  GPUTools::FB::Fbuf *v36;
  unsigned int v37;
  GPUTools::FB::Fbuf *v38;
  dispatch_queue_s *v39;
  uint64_t v40;
  GPUTools::FB::Stream *v41;
  unsigned int *v42;
  unsigned int v43;
  unsigned int v44;
  unsigned int v45;
  signed int v46;
  BOOL v47;
  unsigned int v48;
  uint64_t v49;
  id v50;
  unsigned int v51;
  dispatch_queue_s *v52;
  uint64_t v53;
  uint64_t v54;
  uint64_t v55;
  void *v56;
  char *v57;
  __int128 v58;
  __int128 v59;
  __int128 v60;
  void *v61[2];
  int v62;
  unint64_t v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      signed int v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    unint64_t v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  signed int v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    id v50 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v49 = handle_opengl_thread_conflict((const void **)v19);
    id v50 = [(id)DYGetGLGuestAppClient(v49) waitOnGraphicsSemaphoreAssertions];
    if ((int)v50 >= 1)
    {
      do
LABEL_59:
        unsigned int v51 = __ldaxr(v20);
      while (__stlxr(v51 - 1, v20));
      uint64_t v52 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v50) graphicsLockWaitQueue];
      dispatch_sync_f(v52, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float, float))(*(void *)(v19 + 24) + 6688LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v19 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v50) state] != (char *)&dword_0 + 1
    || (id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v24))
  {
    uint64_t v25 = wrapper_map_uniform_loc((ContextInfo *)v19, a2, a3);
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, *(void **)v19);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a2);
    *(_WORD *)(v19 + 4709) = 30019;
    *(_BYTE *)(v19 + 4711) = 105;
    uint64_t v26 = (_BYTE *)(v19 + 4712);
    if ((_DWORD)v25 == -1)
    {
      *uint64_t v26 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, -1);
      uint64_t v27 = 1LL;
    }

    else
    {
      *(_DWORD *)(v19 + 4712) = 1047084118;
      snprintf((char *)(v19 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v19 + 40), (_DWORD)a2, v25);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, (void *)(v19 + 4773));
      uint64_t v27 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a6);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a7);
    strcpy(&v26[v27], "ffff");
    uint64_t v28 = GPUTools::FB::Encode(v61, 912LL, 0LL, v19 + 4709, &v57);
    char v29 = byte_2071E8;
    if ((byte_2071E8 & 1) != 0) {
      breakpoint_break((uint64_t)v61, (volatile int *)&stru_388.sectname[8], 1LL, *(unsigned int *)(v19 + 3404), v19);
    }
    uint64_t v30 = (uint64_t)[(id)DYGetGLGuestAppClient(v28) overrideFlags];
    if (!(v30 & 0x10 | v29 & 4))
    {
      uint64_t v31 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float, float))(*(void *)(v19 + 32) + 6688LL))( a1,  a2,  v25,  a4,  a5,  a6,  a7);
      uint64_t v30 = mach_absolute_time();
      uint64_t v32 = v30 - v31;
      unint64_t v33 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v34 = v61[0];
        *((void *)v61[0] + 2) = v31;
        v34[3] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v55 = __udivti3(g_DYTimebaseInfo * v32, (g_DYTimebaseInfo * (unsigned __int128)v32) >> 64);
        __int128 v56 = v61[0];
        *((void *)v61[0] + 3) = v55;
        uint64_t v30 = __udivti3(v33 * v31, (v33 * (unsigned __int128)v31) >> 64);
        v56[2] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v30 = check_errors(v19);
    }

{
  void *v14;
  uint64_t v15;
  unint64_t v16;
  BOOL v17;
  void *v18;
  uint64_t v19;
  unsigned int *v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  id v24;
  uint64_t v25;
  unsigned int v26;
  signed int v27;
  BOOL v28;
  unsigned int v29;
  uint64_t v30;
  id v31;
  unsigned int v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  unint64_t v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      signed int v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    unint64_t v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  signed int v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    uint64_t v31 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v30 = handle_opengl_thread_conflict((const void **)v19);
    uint64_t v31 = [(id)DYGetGLGuestAppClient(v30) waitOnGraphicsSemaphoreAssertions];
    if ((int)v31 >= 1)
    {
      do
LABEL_34:
        uint64_t v32 = __ldaxr(v20);
      while (__stlxr(v32 - 1, v20));
      unint64_t v33 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v31) graphicsLockWaitQueue];
      dispatch_sync_f(v33, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float, float))(*(void *)(v19 + 24) + 6688LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v19 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v31) state] == (char *)&dword_0 + 1)
  {
    id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v24)
    {
      do
        char v29 = __ldaxr(v20);
      while (__stlxr(v29 - 1, v20));
      [(id)DYGetGLGuestAppClient(v24) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v25 = wrapper_map_uniform_loc((ContextInfo *)v19, a2, a3);
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float, float))(*(void *)(v19 + 32)
                                                                                                 + 6688LL))( a1,  a2,  v25,  a4,  a5,  a6,  a7);
  ++*(void *)(v19 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v19);
    if (gBreakOnError)
    {
      uint64_t v34 = *(unsigned int *)(v19 + 3404);
      if ((_DWORD)v34) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v34, v19);
      }
    }
  }

  do
  {
    uint64_t v26 = __ldaxr(v20);
    uint64_t v27 = v26 - 1;
  }

  while (__stlxr(v27, v20));
  if (gCheckGLErrors) {
    uint64_t v28 = v27 < 1;
  }
  else {
    uint64_t v28 = 1;
  }
  if (!v28) {
    handle_opengl_thread_conflict((const void **)v19);
  }
}

{
  void *v14;
  uint64_t v15;
  unint64_t v16;
  BOOL v17;
  void *v18;
  uint64_t v19;
  unsigned int *v20;
  unsigned int v21;
  signed int v22;
  BOOL v23;
  id v24;
  uint64_t v25;
  uint64_t v26;
  uint64_t v27;
  int64x2_t v28;
  unsigned int v29;
  signed int v30;
  BOOL v31;
  unsigned int v32;
  uint64_t v33;
  id v34;
  unsigned int v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  unint64_t v14 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v14) {
    goto LABEL_12;
  }
  uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v16 = v14[4];
    BOOL v17 = v16 >= (unint64_t)a1;
    else {
      signed int v18 = v14 + 1;
    }
    if (v17) {
      uint64_t v15 = (uint64_t)v14;
    }
    unint64_t v14 = (void *)*v18;
  }

  while (*v18);
  if (v15 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v15 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v15 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v19 = *(void *)(v15 + 40);
  signed int v20 = (unsigned int *)(v19 + 4640);
  do
  {
    unsigned int v21 = __ldaxr(v20);
    signed int v22 = v21 + 1;
  }

  while (__stlxr(v22, v20));
  if (gCheckGLErrors) {
    BOOL v23 = v22 <= 1;
  }
  else {
    BOOL v23 = 1;
  }
  if (v23)
  {
    uint64_t v34 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v33 = handle_opengl_thread_conflict((const void **)v19);
    uint64_t v34 = [(id)DYGetGLGuestAppClient(v33) waitOnGraphicsSemaphoreAssertions];
    if ((int)v34 >= 1)
    {
      do
LABEL_34:
        id v35 = __ldaxr(v20);
      while (__stlxr(v35 - 1, v20));
      uint64_t v36 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v34) graphicsLockWaitQueue];
      dispatch_sync_f(v36, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float, float))(*(void *)(v19 + 24) + 6688LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v19 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v34) state] == (char *)&dword_0 + 1)
  {
    id v24 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v24)
    {
      do
        uint64_t v32 = __ldaxr(v20);
      while (__stlxr(v32 - 1, v20));
      [(id)DYGetGLGuestAppClient(v24) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v25 = wrapper_map_uniform_loc((ContextInfo *)v19, a2, a3);
  uint64_t v26 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, float, float, float, float))(*(void *)(v19 + 32)
                                                                                                 + 6688LL))( a1,  a2,  v25,  a4,  a5,  a6,  a7);
  uint64_t v27 = mach_absolute_time();
  uint64_t v28 = vdupq_n_s64(1uLL);
  v28.i64[0] = v27 - v26;
  *(int64x2_t *)(v19 + 3696) = vaddq_s64(v28, *(int64x2_t *)(v19 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v19);
    if (gBreakOnError)
    {
      unsigned int v37 = *(unsigned int *)(v19 + 3404);
      if ((_DWORD)v37) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v37, v19);
      }
    }
  }

  do
  {
    char v29 = __ldaxr(v20);
    uint64_t v30 = v29 - 1;
  }

  while (__stlxr(v30, v20));
  if (gCheckGLErrors) {
    uint64_t v31 = v30 < 1;
  }
  else {
    uint64_t v31 = 1;
  }
  if (!v31) {
    handle_opengl_thread_conflict((const void **)v19);
  }
}

void sub_816C0( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform1iv(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, int *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (char *)(v14 + 4709);
  unint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v14);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v16);
      while (__stlxr(v53 - 1, v16));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 24) + 6696LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v64[0] = 0LL;
  v64[1] = 0LL;
  int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, a2, a3);
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, *(void **)v14);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, a2);
    *(_WORD *)uint64_t v15 = 30019;
    *(_BYTE *)(v14 + 4711) = 105;
    signed int v22 = (_BYTE *)(v14 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *signed int v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v14 + 4712) = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, a4);
    uint64_t v25 = &v22[v23];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(4LL * (int)a4) < 0x41)
    {
      int v29 = snprintf(v26, v15 - v26 + 64, "@%di", a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, a5);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v27, 4LL * (int)a4, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1047084117;
      uint64_t v28 = 4LL;
    }

    v26[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v64, 903LL, 0LL, v14 + 4709, &v60);
    char v31 = byte_2071DF;
    if ((byte_2071DF & 1) != 0) {
      breakpoint_break( (uint64_t)v64,  (volatile int *)((char *)&stru_338.reserved3 + 3),  1LL,  *(unsigned int *)(v14 + 3404),  v14);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 32) + 6696LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v36 = v64[0];
        *((void *)v64[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        __int128 v58 = v64[0];
        *((void *)v64[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  char *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    uint64_t v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v50 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        id v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      unsigned int v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 6696LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    signed int v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(4LL * (int)a4) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%di", a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      uint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      uint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    int v29 = GPUTools::FB::Encode(v62, 903LL, 0LL, v15 + 4709, &v58);
    uint64_t v30 = byte_2071DF;
    if ((byte_2071DF & 1) != 0) {
      breakpoint_break( (uint64_t)v62,  (volatile int *)((char *)&stru_338.reserved3 + 3),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    char v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 32) + 6696LL))( a1,  a2,  v22,  a4,  a5);
      char v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        char v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      char v31 = check_errors(v15);
    }

void sub_81C9C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform2iv(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, int *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (char *)(v14 + 4709);
  unint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 24) + 6704LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, a2, a3);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a2);
    *(_WORD *)uint64_t v15 = 30019;
    *(_BYTE *)(v14 + 4711) = 105;
    signed int v22 = (_BYTE *)(v14 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *signed int v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v14 + 4712) = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    unint64_t v27 = 8LL * (_DWORD)a4;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%di", 2 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1047084117;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 907LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2071E3;
    if ((byte_2071E3 & 1) != 0) {
      breakpoint_break((uint64_t)v65, (volatile int *)&stru_388.sectname[3], 1LL, *(unsigned int *)(v14 + 3404), v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 32) + 6704LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  char *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 6704LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    signed int v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(8LL * (_DWORD)a4) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%di", 2 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 907LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2071E3;
    if ((byte_2071E3 & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_388.sectname[3], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 32) + 6704LL))( a1,  a2,  v22,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_8227C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform3iv(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, int *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (char *)(v14 + 4709);
  unint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 24) + 6712LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, a2, a3);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a2);
    *(_WORD *)uint64_t v15 = 30019;
    *(_BYTE *)(v14 + 4711) = 105;
    signed int v22 = (_BYTE *)(v14 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *signed int v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v14 + 4712) = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    unint64_t v27 = 12LL * (_DWORD)a4;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%di", 3 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1047084117;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 911LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2071E7;
    if ((byte_2071E7 & 1) != 0) {
      breakpoint_break((uint64_t)v65, (volatile int *)&stru_388.sectname[7], 1LL, *(unsigned int *)(v14 + 3404), v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 32) + 6712LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  char *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 6712LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    signed int v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(12LL * (_DWORD)a4) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%di", 3 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 911LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2071E7;
    if ((byte_2071E7 & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_388.sectname[7], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 32) + 6712LL))( a1,  a2,  v22,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_8285C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform4iv(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, int *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (char *)(v14 + 4709);
  unint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 24) + 6720LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, a2, a3);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a2);
    *(_WORD *)uint64_t v15 = 30019;
    *(_BYTE *)(v14 + 4711) = 105;
    signed int v22 = (_BYTE *)(v14 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *signed int v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v14 + 4712) = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    unint64_t v27 = 16LL * (_DWORD)a4;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%di", 4 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1047084117;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 915LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2071EB;
    if ((byte_2071EB & 1) != 0) {
      breakpoint_break((uint64_t)v65, (volatile int *)&stru_388.sectname[11], 1LL, *(unsigned int *)(v14 + 3404), v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v14 + 32) + 6720LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  char *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 24) + 6720LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    signed int v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(16LL * (_DWORD)a4) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%di", 4 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 915LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2071EB;
    if ((byte_2071EB & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_388.sectname[11], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, int *))(*(void *)(v15 + 32) + 6720LL))( a1,  a2,  v22,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_82E3C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform1fv(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, float *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (char *)(v14 + 4709);
  unint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v14);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v16);
      while (__stlxr(v53 - 1, v16));
      unsigned int v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 24)
                                                                                           + 6728LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v64[0] = 0LL;
  v64[1] = 0LL;
  int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, a2, a3);
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, *(void **)v14);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, a2);
    *(_WORD *)uint64_t v15 = 30019;
    *(_BYTE *)(v14 + 4711) = 105;
    signed int v22 = (_BYTE *)(v14 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *signed int v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v14 + 4712) = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, a4);
    uint64_t v25 = &v22[v23];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(4LL * (int)a4) < 0x41)
    {
      int v29 = snprintf(v26, v15 - v26 + 64, "@%df", a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, a5);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v27, 4LL * (int)a4, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1046887509;
      uint64_t v28 = 4LL;
    }

    v26[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v64, 901LL, 0LL, v14 + 4709, &v60);
    char v31 = byte_2071DD;
    if ((byte_2071DD & 1) != 0) {
      breakpoint_break( (uint64_t)v64,  (volatile int *)((char *)&stru_338.reserved3 + 1),  1LL,  *(unsigned int *)(v14 + 3404),  v14);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 32)
                                                                                           + 6728LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v36 = v64[0];
        *((void *)v64[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        uint64_t v58 = v64[0];
        *((void *)v64[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  char *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    uint64_t v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unsigned int v50 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        id v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      unsigned int v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 24)
                                                                                           + 6728LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    signed int v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(4LL * (int)a4) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      uint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      uint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    int v29 = GPUTools::FB::Encode(v62, 901LL, 0LL, v15 + 4709, &v58);
    uint64_t v30 = byte_2071DD;
    if ((byte_2071DD & 1) != 0) {
      breakpoint_break( (uint64_t)v62,  (volatile int *)((char *)&stru_338.reserved3 + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    char v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 32)
                                                                                           + 6728LL))( a1,  a2,  v22,  a4,  a5);
      char v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        char v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      char v31 = check_errors(v15);
    }

void sub_83418( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform2fv(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, float *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (char *)(v14 + 4709);
  unint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 24)
                                                                                           + 6736LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, a2, a3);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a2);
    *(_WORD *)uint64_t v15 = 30019;
    *(_BYTE *)(v14 + 4711) = 105;
    signed int v22 = (_BYTE *)(v14 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *signed int v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v14 + 4712) = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    unint64_t v27 = 8LL * (_DWORD)a4;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 2 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 905LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2071E1;
    if ((byte_2071E1 & 1) != 0) {
      breakpoint_break((uint64_t)v65, (volatile int *)&stru_388.sectname[1], 1LL, *(unsigned int *)(v14 + 3404), v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 32)
                                                                                           + 6736LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  char *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 24)
                                                                                           + 6736LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    signed int v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(8LL * (_DWORD)a4) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 2 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 905LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2071E1;
    if ((byte_2071E1 & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_388.sectname[1], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 32)
                                                                                           + 6736LL))( a1,  a2,  v22,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_839F8( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform3fv(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, float *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (char *)(v14 + 4709);
  unint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 24)
                                                                                           + 6744LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, a2, a3);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a2);
    *(_WORD *)uint64_t v15 = 30019;
    *(_BYTE *)(v14 + 4711) = 105;
    signed int v22 = (_BYTE *)(v14 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *signed int v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v14 + 4712) = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    unint64_t v27 = 12LL * (_DWORD)a4;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 3 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 909LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2071E5;
    if ((byte_2071E5 & 1) != 0) {
      breakpoint_break((uint64_t)v65, (volatile int *)&stru_388.sectname[5], 1LL, *(unsigned int *)(v14 + 3404), v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 32)
                                                                                           + 6744LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  char *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 24)
                                                                                           + 6744LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    signed int v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(12LL * (_DWORD)a4) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 3 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 909LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2071E5;
    if ((byte_2071E5 & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_388.sectname[5], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 32)
                                                                                           + 6744LL))( a1,  a2,  v22,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_83FD8( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform4fv(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, float *a5)
{
  uint64_t v9 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v9) {
    goto LABEL_12;
  }
  uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v11 = v9[4];
    BOOL v12 = v11 >= (unint64_t)a1;
    else {
      uint64_t v13 = v9 + 1;
    }
    if (v12) {
      uint64_t v10 = (uint64_t)v9;
    }
    uint64_t v9 = (void *)*v13;
  }

  while (*v13);
  if (v10 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v10 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v10 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v14 = *(void *)(v10 + 40);
  uint64_t v15 = (char *)(v14 + 4709);
  unint64_t v16 = (unsigned int *)(v14 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v53 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v52 = handle_opengl_thread_conflict((const void **)v14);
    id v53 = [(id)DYGetGLGuestAppClient(v52) waitOnGraphicsSemaphoreAssertions];
    if ((int)v53 >= 1)
    {
      do
LABEL_62:
        unsigned int v54 = __ldaxr(v16);
      while (__stlxr(v54 - 1, v16));
      uint64_t v55 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v53) graphicsLockWaitQueue];
      dispatch_sync_f(v55, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 24)
                                                                                           + 6752LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v14 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v53) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v14, a2, a3);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v14);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a2);
    *(_WORD *)uint64_t v15 = 30019;
    *(_BYTE *)(v14 + 4711) = 105;
    signed int v22 = (_BYTE *)(v14 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *signed int v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v14 + 4712) = 1047084118;
      snprintf((char *)(v14 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v14 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4773));
      uint64_t v23 = 4LL;
    }

    uint64_t v24 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v25 = &v22[v23];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    unint64_t v27 = 16LL * (_DWORD)a4;
    if (v27 < 0x41)
    {
      int v30 = snprintf(v26, v15 - v26 + 64, "@%df", 4 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v29 = v30;
    }

    else
    {
      uint64_t v28 = DYGetGLGuestAppClient(v24);
      GPUTools::Interpose::DYSavePointer(v28, v27, a5, v14 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v14 + 4644));
      *(_DWORD *)uint64_t v26 = 1046887509;
      uint64_t v29 = 4LL;
    }

    v26[v29] = 0;
    uint64_t v31 = GPUTools::FB::Encode(v65, 913LL, 0LL, v14 + 4709, &v61);
    char v32 = byte_2071E9;
    if ((byte_2071E9 & 1) != 0) {
      breakpoint_break((uint64_t)v65, (volatile int *)&stru_388.sectname[9], 1LL, *(unsigned int *)(v14 + 3404), v14);
    }
    uint64_t v33 = (uint64_t)[(id)DYGetGLGuestAppClient(v31) overrideFlags];
    if (!(v33 & 0x10 | v32 & 4))
    {
      uint64_t v34 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v14 + 32)
                                                                                           + 6752LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v33 = mach_absolute_time();
      uint64_t v35 = v33 - v34;
      unint64_t v36 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v37 = v65[0];
        *((void *)v65[0] + 2) = v34;
        v37[3] = v35;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v58 = __udivti3(g_DYTimebaseInfo * v35, (g_DYTimebaseInfo * (unsigned __int128)v35) >> 64);
        __int128 v59 = v65[0];
        *((void *)v65[0] + 3) = v58;
        uint64_t v33 = __udivti3(v36 * v34, (v36 * (unsigned __int128)v34) >> 64);
        v59[2] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v33 = check_errors(v14);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  char *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    BOOL v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      unint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    unint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    signed int v18 = __ldaxr(v17);
    BOOL v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    id v20 = v19 <= 1;
  }
  else {
    id v20 = 1;
  }
  if (v20)
  {
    unsigned int v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    BOOL v50 = handle_opengl_thread_conflict((const void **)v15);
    unsigned int v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        uint64_t v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      id v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 24)
                                                                                           + 6752LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (uint64_t v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    signed int v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(16LL * (_DWORD)a4) < 0x41)
    {
      uint64_t v28 = snprintf(v26, v16 - v26 + 64, "@%df", 4 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      unint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 913LL, 0LL, v15 + 4709, &v58);
    int v30 = byte_2071E9;
    if ((byte_2071E9 & 1) != 0) {
      breakpoint_break((uint64_t)v62, (volatile int *)&stru_388.sectname[9], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      char v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, float *))(*(void *)(v15 + 32)
                                                                                           + 6752LL))( a1,  a2,  v22,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      uint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        uint64_t v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_845B8( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform_matrix2fv( __GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, unsigned int a5, float *a6)
{
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v17);
      while (__stlxr(v55 - 1, v17));
      uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24) + 6760LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v67[0] = 0LL;
  v67[1] = 0LL;
  int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v64 = 0u;
    __int128 v65 = 0u;
    __int128 v66 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a4);
    uint64_t v25 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a5);
    uint64_t v26 = &v23[v24];
    *(_WORD *)uint64_t v26 = 30057;
    v26[2] = 98;
    unint64_t v27 = &v23[v24 + 3];
    unint64_t v28 = 16LL * (_DWORD)a4;
    if (v28 < 0x41)
    {
      int v31 = snprintf(v27, v16 - v27 + 64, "@%df", 4 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a6);
      uint64_t v30 = v31;
    }

    else
    {
      uint64_t v29 = DYGetGLGuestAppClient(v25);
      GPUTools::Interpose::DYSavePointer(v29, v28, a6, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4644));
      *(_DWORD *)unint64_t v27 = 1046887509;
      uint64_t v30 = 4LL;
    }

    v27[v30] = 0;
    uint64_t v32 = GPUTools::FB::Encode(v67, 916LL, 0LL, v15 + 4709, &v63);
    char v33 = byte_2071EC;
    if ((byte_2071EC & 1) != 0) {
      breakpoint_break((uint64_t)v67, (volatile int *)&stru_388.sectname[12], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (!(v34 & 0x10 | v33 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 32) + 6760LL))( a1,  a2,  v22,  a4,  a5,  a6);
      uint64_t v34 = mach_absolute_time();
      uint64_t v36 = v34 - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v38 = v67[0];
        *((void *)v67[0] + 2) = v35;
        v38[3] = v36;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        __int128 v60 = v67[0];
        *((void *)v67[0] + 3) = v59;
        uint64_t v34 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
        v60[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v34 = check_errors(v15);
    }

void sub_84BC0( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, char a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22)
{
  if (a22) {
    free(a22);
  }
  _Unwind_Resume(a1);
}

void program_uniform_matrix3fv( __GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, unsigned int a5, float *a6)
{
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v17);
      while (__stlxr(v55 - 1, v17));
      uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24) + 6768LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v67[0] = 0LL;
  v67[1] = 0LL;
  int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v64 = 0u;
    __int128 v65 = 0u;
    __int128 v66 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a4);
    uint64_t v25 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a5);
    uint64_t v26 = &v23[v24];
    *(_WORD *)uint64_t v26 = 30057;
    v26[2] = 98;
    unint64_t v27 = &v23[v24 + 3];
    unint64_t v28 = 36LL * (_DWORD)a4;
    if (v28 < 0x41)
    {
      int v31 = snprintf(v27, v16 - v27 + 64, "@%df", 9 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a6);
      uint64_t v30 = v31;
    }

    else
    {
      uint64_t v29 = DYGetGLGuestAppClient(v25);
      GPUTools::Interpose::DYSavePointer(v29, v28, a6, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4644));
      *(_DWORD *)unint64_t v27 = 1046887509;
      uint64_t v30 = 4LL;
    }

    v27[v30] = 0;
    uint64_t v32 = GPUTools::FB::Encode(v67, 917LL, 0LL, v15 + 4709, &v63);
    char v33 = byte_2071ED;
    if ((byte_2071ED & 1) != 0) {
      breakpoint_break((uint64_t)v67, (volatile int *)&stru_388.sectname[13], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (!(v34 & 0x10 | v33 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 32) + 6768LL))( a1,  a2,  v22,  a4,  a5,  a6);
      uint64_t v34 = mach_absolute_time();
      uint64_t v36 = v34 - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v38 = v67[0];
        *((void *)v67[0] + 2) = v35;
        v38[3] = v36;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        __int128 v60 = v67[0];
        *((void *)v67[0] + 3) = v59;
        uint64_t v34 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
        v60[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v34 = check_errors(v15);
    }

void sub_851C8( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, char a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22)
{
  if (a22) {
    free(a22);
  }
  _Unwind_Resume(a1);
}

void program_uniform_matrix4fv( __GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, unsigned int a5, float *a6)
{
  uint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    uint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unint64_t v16 = (char *)(v15 + 4709);
  unsigned int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v17);
      while (__stlxr(v55 - 1, v17));
      uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24) + 6776LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v67[0] = 0LL;
  v67[1] = 0LL;
  int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v64 = 0u;
    __int128 v65 = 0u;
    __int128 v66 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a2);
    *(_WORD *)unint64_t v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a4);
    uint64_t v25 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a5);
    uint64_t v26 = &v23[v24];
    *(_WORD *)uint64_t v26 = 30057;
    v26[2] = 98;
    unint64_t v27 = &v23[v24 + 3];
    unint64_t v28 = 64LL * (_DWORD)a4;
    if (v28 < 0x41)
    {
      int v31 = snprintf(v27, v16 - v27 + 64, "@%df", 16 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a6);
      uint64_t v30 = v31;
    }

    else
    {
      uint64_t v29 = DYGetGLGuestAppClient(v25);
      GPUTools::Interpose::DYSavePointer(v29, v28, a6, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4644));
      *(_DWORD *)unint64_t v27 = 1046887509;
      uint64_t v30 = 4LL;
    }

    v27[v30] = 0;
    uint64_t v32 = GPUTools::FB::Encode(v67, 918LL, 0LL, v15 + 4709, &v63);
    char v33 = byte_2071EE;
    if ((byte_2071EE & 1) != 0) {
      breakpoint_break((uint64_t)v67, (volatile int *)&stru_388.sectname[14], 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (!(v34 & 0x10 | v33 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 32) + 6776LL))( a1,  a2,  v22,  a4,  a5,  a6);
      uint64_t v34 = mach_absolute_time();
      uint64_t v36 = v34 - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v38 = v67[0];
        *((void *)v67[0] + 2) = v35;
        v38[3] = v36;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        __int128 v60 = v67[0];
        *((void *)v67[0] + 3) = v59;
        uint64_t v34 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
        v60[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v34 = check_errors(v15);
    }

void sub_857D0( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, char a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22)
{
  if (a22) {
    free(a22);
  }
  _Unwind_Resume(a1);
}

void program_uniform1ui(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6784LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a2);
    *(_WORD *)(v13 + 4709) = 30019;
    *(_BYTE *)(v13 + 4711) = 105;
    BOOL v20 = (_BYTE *)(v13 + 4712);
    if ((_DWORD)v19 == -1)
    {
      *BOOL v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)(v13 + 4712) = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    strcpy(&v20[v21], "ui");
    uint64_t v22 = GPUTools::FB::Encode(v55, 940LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_207204;
    if ((byte_207204 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (_DWORD *)&stru_388.addr + 1, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6784LL))( a1,  a2,  v19,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        signed int v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  _BYTE *v20;
  uint64_t v21;
  uint64_t v22;
  char v23;
  uint64_t v24;
  uint64_t v25;
  uint64_t v26;
  unint64_t v27;
  void *v28;
  id v29;
  GPUTools::FB::Fbuf *v30;
  unsigned int v31;
  GPUTools::FB::Fbuf *v32;
  dispatch_queue_s *v33;
  uint64_t v34;
  GPUTools::FB::Stream *v35;
  unsigned int *v36;
  unsigned int v37;
  unsigned int v38;
  unsigned int v39;
  signed int v40;
  BOOL v41;
  unsigned int v42;
  uint64_t v43;
  id v44;
  unsigned int v45;
  dispatch_queue_s *v46;
  uint64_t v47;
  uint64_t v48;
  uint64_t v49;
  void *v50;
  char *v51;
  __int128 v52;
  __int128 v53;
  __int128 v54;
  void *v55[2];
  int v56;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    id v44 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v43 = handle_opengl_thread_conflict((const void **)v13);
    id v44 = [(id)DYGetGLGuestAppClient(v43) waitOnGraphicsSemaphoreAssertions];
    if ((int)v44 >= 1)
    {
      do
LABEL_59:
        unsigned int v45 = __ldaxr(v14);
      while (__stlxr(v45 - 1, v14));
      unsigned int v46 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v44) graphicsLockWaitQueue];
      dispatch_sync_f(v46, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6784LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v55[0] = 0LL;
  v55[1] = 0LL;
  int v56 = 0;
  if ([(id)DYGetGLGuestAppClient(v44) state] != (char *)&dword_0 + 1
    || (id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v18))
  {
    uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    __int128 v52 = 0u;
    __int128 v53 = 0u;
    __int128 v54 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, *(void **)v13);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a2);
    *(_WORD *)(v13 + 4709) = 30019;
    *(_BYTE *)(v13 + 4711) = 105;
    BOOL v20 = (_BYTE *)(v13 + 4712);
    if ((_DWORD)v19 == -1)
    {
      *BOOL v20 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, -1);
      uint64_t v21 = 1LL;
    }

    else
    {
      *(_DWORD *)(v13 + 4712) = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, v19);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, (void *)(v13 + 4773));
      uint64_t v21 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v51, a4);
    strcpy(&v20[v21], "ui");
    uint64_t v22 = GPUTools::FB::Encode(v55, 940LL, 0LL, v13 + 4709, &v51);
    char v23 = byte_207204;
    if ((byte_207204 & 1) != 0) {
      breakpoint_break((uint64_t)v55, (_DWORD *)&stru_388.addr + 1, 1LL, *(unsigned int *)(v13 + 3404), v13);
    }
    uint64_t v24 = (uint64_t)[(id)DYGetGLGuestAppClient(v22) overrideFlags];
    if (!(v24 & 0x10 | v23 & 4))
    {
      uint64_t v25 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6784LL))( a1,  a2,  v19,  a4);
      uint64_t v24 = mach_absolute_time();
      uint64_t v26 = v24 - v25;
      unint64_t v27 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unint64_t v28 = v55[0];
        *((void *)v55[0] + 2) = v25;
        v28[3] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v49 = __udivti3(g_DYTimebaseInfo * v26, (g_DYTimebaseInfo * (unsigned __int128)v26) >> 64);
        signed int v50 = v55[0];
        *((void *)v55[0] + 3) = v49;
        uint64_t v24 = __udivti3(v27 * v25, (v27 * (unsigned __int128)v25) >> 64);
        v50[2] = v24;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v24 = check_errors(v13);
    }

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  unsigned int v20;
  signed int v21;
  BOOL v22;
  unsigned int v23;
  uint64_t v24;
  id v25;
  unsigned int v26;
  dispatch_queue_s *v27;
  uint64_t v28;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    uint64_t v25 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v24 = handle_opengl_thread_conflict((const void **)v13);
    uint64_t v25 = [(id)DYGetGLGuestAppClient(v24) waitOnGraphicsSemaphoreAssertions];
    if ((int)v25 >= 1)
    {
      do
LABEL_34:
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      unint64_t v27 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v25) graphicsLockWaitQueue];
      dispatch_sync_f(v27, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6784LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v25) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        char v23 = __ldaxr(v14);
      while (__stlxr(v23 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6784LL))( a1,  a2,  v19,  a4);
  ++*(void *)(v13 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unint64_t v28 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v28) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v28, v13);
      }
    }
  }

  do
  {
    BOOL v20 = __ldaxr(v14);
    uint64_t v21 = v20 - 1;
  }

  while (__stlxr(v21, v14));
  if (gCheckGLErrors) {
    uint64_t v22 = v21 < 1;
  }
  else {
    uint64_t v22 = 1;
  }
  if (!v22) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

{
  void *v8;
  uint64_t v9;
  unint64_t v10;
  BOOL v11;
  void *v12;
  uint64_t v13;
  unsigned int *v14;
  unsigned int v15;
  signed int v16;
  BOOL v17;
  id v18;
  uint64_t v19;
  uint64_t v20;
  uint64_t v21;
  int64x2_t v22;
  unsigned int v23;
  signed int v24;
  BOOL v25;
  unsigned int v26;
  uint64_t v27;
  id v28;
  unsigned int v29;
  dispatch_queue_s *v30;
  uint64_t v31;
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      unint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  uint64_t v14 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v15 = __ldaxr(v14);
    signed int v16 = v15 + 1;
  }

  while (__stlxr(v16, v14));
  if (gCheckGLErrors) {
    BOOL v17 = v16 <= 1;
  }
  else {
    BOOL v17 = 1;
  }
  if (v17)
  {
    unint64_t v28 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v27 = handle_opengl_thread_conflict((const void **)v13);
    unint64_t v28 = [(id)DYGetGLGuestAppClient(v27) waitOnGraphicsSemaphoreAssertions];
    if ((int)v28 >= 1)
    {
      do
LABEL_34:
        id v29 = __ldaxr(v14);
      while (__stlxr(v29 - 1, v14));
      uint64_t v30 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v28) graphicsLockWaitQueue];
      dispatch_sync_f(v30, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 24) + 6784LL))( a1,  a2,  a3,  a4);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v28) state] == (char *)&dword_0 + 1)
  {
    id v18 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v18)
    {
      do
        uint64_t v26 = __ldaxr(v14);
      while (__stlxr(v26 - 1, v14));
      [(id)DYGetGLGuestAppClient(v18) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v19 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
  BOOL v20 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t))(*(void *)(v13 + 32) + 6784LL))( a1,  a2,  v19,  a4);
  uint64_t v21 = mach_absolute_time();
  uint64_t v22 = vdupq_n_s64(1uLL);
  v22.i64[0] = v21 - v20;
  *(int64x2_t *)(v13 + 3696) = vaddq_s64(v22, *(int64x2_t *)(v13 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v13);
    if (gBreakOnError)
    {
      unsigned int v31 = *(unsigned int *)(v13 + 3404);
      if ((_DWORD)v31) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v31, v13);
      }
    }
  }

  do
  {
    char v23 = __ldaxr(v14);
    uint64_t v24 = v23 - 1;
  }

  while (__stlxr(v24, v14));
  if (gCheckGLErrors) {
    uint64_t v25 = v24 < 1;
  }
  else {
    uint64_t v25 = 1;
  }
  if (!v25) {
    handle_opengl_thread_conflict((const void **)v13);
  }
}

void sub_85CF8( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform2ui(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                           + 6792LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a2);
    *(_WORD *)(v15 + 4709) = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v22 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    strcpy(&v22[v23], "uiui");
    uint64_t v24 = GPUTools::FB::Encode(v57, 944LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_207208;
    if ((byte_207208 & 1) != 0) {
      breakpoint_break((uint64_t)v57, (volatile int *)&stru_388.size, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32)
                                                                                           + 6792LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  _BYTE *v22;
  uint64_t v23;
  uint64_t v24;
  char v25;
  uint64_t v26;
  uint64_t v27;
  uint64_t v28;
  unint64_t v29;
  void *v30;
  id v31;
  GPUTools::FB::Fbuf *v32;
  unsigned int v33;
  GPUTools::FB::Fbuf *v34;
  dispatch_queue_s *v35;
  uint64_t v36;
  GPUTools::FB::Stream *v37;
  unsigned int *v38;
  unsigned int v39;
  unsigned int v40;
  unsigned int v41;
  signed int v42;
  BOOL v43;
  unsigned int v44;
  uint64_t v45;
  id v46;
  unsigned int v47;
  dispatch_queue_s *v48;
  uint64_t v49;
  uint64_t v50;
  uint64_t v51;
  void *v52;
  char *v53;
  __int128 v54;
  __int128 v55;
  __int128 v56;
  void *v57[2];
  int v58;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    id v46 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v45 = handle_opengl_thread_conflict((const void **)v15);
    id v46 = [(id)DYGetGLGuestAppClient(v45) waitOnGraphicsSemaphoreAssertions];
    if ((int)v46 >= 1)
    {
      do
LABEL_59:
        unsigned int v47 = __ldaxr(v16);
      while (__stlxr(v47 - 1, v16));
      uint64_t v48 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v46) graphicsLockWaitQueue];
      dispatch_sync_f(v48, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                           + 6792LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v57[0] = 0LL;
  v57[1] = 0LL;
  int v58 = 0;
  if ([(id)DYGetGLGuestAppClient(v46) state] != (char *)&dword_0 + 1
    || (id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v20))
  {
    uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v54 = 0u;
    __int128 v55 = 0u;
    __int128 v56 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a2);
    *(_WORD *)(v15 + 4709) = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v22 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v21 == -1)
    {
      *uint64_t v22 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, -1);
      uint64_t v23 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v21);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, (void *)(v15 + 4773));
      uint64_t v23 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v53, a5);
    strcpy(&v22[v23], "uiui");
    uint64_t v24 = GPUTools::FB::Encode(v57, 944LL, 0LL, v15 + 4709, &v53);
    char v25 = byte_207208;
    if ((byte_207208 & 1) != 0) {
      breakpoint_break((uint64_t)v57, (volatile int *)&stru_388.size, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v26 = (uint64_t)[(id)DYGetGLGuestAppClient(v24) overrideFlags];
    if (!(v26 & 0x10 | v25 & 4))
    {
      uint64_t v27 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32)
                                                                                           + 6792LL))( a1,  a2,  v21,  a4,  a5);
      uint64_t v26 = mach_absolute_time();
      uint64_t v28 = v26 - v27;
      unint64_t v29 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        uint64_t v30 = v57[0];
        *((void *)v57[0] + 2) = v27;
        v30[3] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v51 = __udivti3(g_DYTimebaseInfo * v28, (g_DYTimebaseInfo * (unsigned __int128)v28) >> 64);
        __int128 v52 = v57[0];
        *((void *)v57[0] + 3) = v51;
        uint64_t v26 = __udivti3(v29 * v27, (v29 * (unsigned __int128)v27) >> 64);
        v52[2] = v26;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v26 = check_errors(v15);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  unsigned int v22;
  signed int v23;
  BOOL v24;
  unsigned int v25;
  uint64_t v26;
  id v27;
  unsigned int v28;
  dispatch_queue_s *v29;
  uint64_t v30;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v27 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v26 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v27 = [(id)DYGetGLGuestAppClient(v26) waitOnGraphicsSemaphoreAssertions];
    if ((int)v27 >= 1)
    {
      do
LABEL_34:
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      unint64_t v29 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v27) graphicsLockWaitQueue];
      dispatch_sync_f(v29, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                           + 6792LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v27) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        char v25 = __ldaxr(v16);
      while (__stlxr(v25 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 6792LL))( a1,  a2,  v21,  a4,  a5);
  ++*(void *)(v15 + 3704);
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      uint64_t v30 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v30) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v30, v15);
      }
    }
  }

  do
  {
    uint64_t v22 = __ldaxr(v16);
    uint64_t v23 = v22 - 1;
  }

  while (__stlxr(v23, v16));
  if (gCheckGLErrors) {
    uint64_t v24 = v23 < 1;
  }
  else {
    uint64_t v24 = 1;
  }
  if (!v24) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  unsigned int *v16;
  unsigned int v17;
  signed int v18;
  BOOL v19;
  id v20;
  uint64_t v21;
  uint64_t v22;
  uint64_t v23;
  int64x2_t v24;
  unsigned int v25;
  signed int v26;
  BOOL v27;
  unsigned int v28;
  uint64_t v29;
  id v30;
  unsigned int v31;
  dispatch_queue_s *v32;
  uint64_t v33;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      uint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  signed int v16 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v17 = __ldaxr(v16);
    signed int v18 = v17 + 1;
  }

  while (__stlxr(v18, v16));
  if (gCheckGLErrors) {
    BOOL v19 = v18 <= 1;
  }
  else {
    BOOL v19 = 1;
  }
  if (v19)
  {
    uint64_t v30 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    unint64_t v29 = handle_opengl_thread_conflict((const void **)v15);
    uint64_t v30 = [(id)DYGetGLGuestAppClient(v29) waitOnGraphicsSemaphoreAssertions];
    if ((int)v30 >= 1)
    {
      do
LABEL_34:
        id v31 = __ldaxr(v16);
      while (__stlxr(v31 - 1, v16));
      uint64_t v32 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v30) graphicsLockWaitQueue];
      dispatch_sync_f(v32, 0LL, (dispatch_function_t)do_nothing);
LABEL_36:
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 24)
                                                                                           + 6792LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  if ([(id)DYGetGLGuestAppClient(v30) state] == (char *)&dword_0 + 1)
  {
    id v20 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand];
    if ((_DWORD)v20)
    {
      do
        uint64_t v28 = __ldaxr(v16);
      while (__stlxr(v28 - 1, v16));
      [(id)DYGetGLGuestAppClient(v20) triggerArmedCapture];
      goto LABEL_36;
    }
  }

  uint64_t v21 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
  uint64_t v22 = mach_absolute_time();
  (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t))(*(void *)(v15 + 32) + 6792LL))( a1,  a2,  v21,  a4,  a5);
  uint64_t v23 = mach_absolute_time();
  uint64_t v24 = vdupq_n_s64(1uLL);
  v24.i64[0] = v23 - v22;
  *(int64x2_t *)(v15 + 3696) = vaddq_s64(v24, *(int64x2_t *)(v15 + 3696));
  if (gCheckGLErrors)
  {
    check_errors(v15);
    if (gBreakOnError)
    {
      unsigned int v33 = *(unsigned int *)(v15 + 3404);
      if ((_DWORD)v33) {
        breakpoint_break(0LL, (volatile int *)0xFFFFFFFFLL, 3LL, v33, v15);
      }
    }
  }

  do
  {
    char v25 = __ldaxr(v16);
    uint64_t v26 = v25 - 1;
  }

  while (__stlxr(v26, v16));
  if (gCheckGLErrors) {
    uint64_t v27 = v26 < 1;
  }
  else {
    uint64_t v27 = 1;
  }
  if (!v27) {
    handle_opengl_thread_conflict((const void **)v15);
  }
}

void sub_86258( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform3ui( __GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, uint64_t a5, unsigned int a6)
{
  uint64_t v11 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v11) {
    goto LABEL_12;
  }
  uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v13 = v11[4];
    BOOL v14 = v13 >= (unint64_t)a1;
    else {
      uint64_t v15 = v11 + 1;
    }
    if (v14) {
      uint64_t v12 = (uint64_t)v11;
    }
    uint64_t v11 = (void *)*v15;
  }

  while (*v15);
  if (v12 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v12 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v16 = *(void *)(v12 + 40);
  unsigned int v17 = (unsigned int *)(v16 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v16);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_59:
        unsigned int v48 = __ldaxr(v17);
      while (__stlxr(v48 - 1, v17));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 24) + 6800LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v16 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v16, a2, a3);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v16);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a2);
    *(_WORD *)(v16 + 4709) = 30019;
    *(_BYTE *)(v16 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v16 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v16 + 4712) = 1047084118;
      snprintf((char *)(v16 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v16 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v16 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    strcpy(&v23[v24], "uiuiui");
    uint64_t v25 = GPUTools::FB::Encode(v59, 948LL, 0LL, v16 + 4709, &v55);
    char v26 = byte_20720C;
    if ((byte_20720C & 1) != 0) {
      breakpoint_break((uint64_t)v59, (_DWORD *)&stru_388.size + 1, 1LL, *(unsigned int *)(v16 + 3404), v16);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 32) + 6800LL))( a1,  a2,  v22,  a4,  a5,  a6);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v59[0];
        *((void *)v59[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        __int128 v53 = v59[0];
        *((void *)v59[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v16);
    }

{
  void *v11;
  uint64_t v12;
  unint64_t v13;
  BOOL v14;
  void *v15;
  uint64_t v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  uint64_t v25;
  char v26;
  uint64_t v27;
  uint64_t v28;
  uint64_t v29;
  unint64_t v30;
  void *v31;
  id v32;
  GPUTools::FB::Fbuf *v33;
  unsigned int v34;
  GPUTools::FB::Fbuf *v35;
  dispatch_queue_s *v36;
  uint64_t v37;
  GPUTools::FB::Stream *v38;
  unsigned int *v39;
  unsigned int v40;
  unsigned int v41;
  unsigned int v42;
  signed int v43;
  BOOL v44;
  unsigned int v45;
  uint64_t v46;
  id v47;
  unsigned int v48;
  dispatch_queue_s *v49;
  uint64_t v50;
  uint64_t v51;
  uint64_t v52;
  void *v53;
  char *v55;
  __int128 v56;
  __int128 v57;
  __int128 v58;
  void *v59[2];
  int v60;
  uint64_t v11 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v11) {
    goto LABEL_12;
  }
  uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v13 = v11[4];
    BOOL v14 = v13 >= (unint64_t)a1;
    else {
      uint64_t v15 = v11 + 1;
    }
    if (v14) {
      uint64_t v12 = (uint64_t)v11;
    }
    uint64_t v11 = (void *)*v15;
  }

  while (*v15);
  if (v12 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v12 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v12 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v16 = *(void *)(v12 + 40);
  unsigned int v17 = (unsigned int *)(v16 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v47 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v46 = handle_opengl_thread_conflict((const void **)v16);
    id v47 = [(id)DYGetGLGuestAppClient(v46) waitOnGraphicsSemaphoreAssertions];
    if ((int)v47 >= 1)
    {
      do
LABEL_59:
        unsigned int v48 = __ldaxr(v17);
      while (__stlxr(v48 - 1, v17));
      uint64_t v49 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v47) graphicsLockWaitQueue];
      dispatch_sync_f(v49, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 24) + 6800LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v16 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v59[0] = 0LL;
  v59[1] = 0LL;
  int v60 = 0;
  if ([(id)DYGetGLGuestAppClient(v47) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v16, a2, a3);
    __int128 v56 = 0u;
    __int128 v57 = 0u;
    __int128 v58 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, *(void **)v16);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a2);
    *(_WORD *)(v16 + 4709) = 30019;
    *(_BYTE *)(v16 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v16 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v16 + 4712) = 1047084118;
      snprintf((char *)(v16 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v16 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, (void *)(v16 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v55, a6);
    strcpy(&v23[v24], "uiuiui");
    uint64_t v25 = GPUTools::FB::Encode(v59, 948LL, 0LL, v16 + 4709, &v55);
    char v26 = byte_20720C;
    if ((byte_20720C & 1) != 0) {
      breakpoint_break((uint64_t)v59, (_DWORD *)&stru_388.size + 1, 1LL, *(unsigned int *)(v16 + 3404), v16);
    }
    uint64_t v27 = (uint64_t)[(id)DYGetGLGuestAppClient(v25) overrideFlags];
    if (!(v27 & 0x10 | v26 & 4))
    {
      uint64_t v28 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void))(*(void *)(v16 + 32) + 6800LL))( a1,  a2,  v22,  a4,  a5,  a6);
      uint64_t v27 = mach_absolute_time();
      uint64_t v29 = v27 - v28;
      unint64_t v30 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v31 = v59[0];
        *((void *)v59[0] + 2) = v28;
        v31[3] = v29;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v52 = __udivti3(g_DYTimebaseInfo * v29, (g_DYTimebaseInfo * (unsigned __int128)v29) >> 64);
        __int128 v53 = v59[0];
        *((void *)v59[0] + 3) = v52;
        uint64_t v27 = __udivti3(v30 * v28, (v30 * (unsigned __int128)v28) >> 64);
        v53[2] = v27;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v27 = check_errors(v16);
    }

void sub_867DC( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform4ui( __GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, uint64_t a5, unsigned int a6, unsigned int a7)
{
  uint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    uint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v17);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_59:
        unsigned int v49 = __ldaxr(v18);
      while (__stlxr(v49 - 1, v18));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void, void))(*(void *)(v17 + 24) + 6808LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, a2, a3);
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, *(void **)v17);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a2);
    *(_WORD *)(v17 + 4709) = 30019;
    *(_BYTE *)(v17 + 4711) = 105;
    uint64_t v24 = (_BYTE *)(v17 + 4712);
    if ((_DWORD)v23 == -1)
    {
      *uint64_t v24 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, -1);
      uint64_t v25 = 1LL;
    }

    else
    {
      *(_DWORD *)(v17 + 4712) = 1047084118;
      snprintf((char *)(v17 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v17 + 40), (_DWORD)a2, v23);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, (void *)(v17 + 4773));
      uint64_t v25 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a6);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a7);
    strcpy(&v24[v25], "uiuiuiui");
    uint64_t v26 = GPUTools::FB::Encode(v61, 952LL, 0LL, v17 + 4709, &v57);
    char v27 = byte_207210;
    if ((byte_207210 & 1) != 0) {
      breakpoint_break((uint64_t)v61, (volatile int *)&stru_388.offset, 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void, void))(*(void *)(v17 + 32) + 6808LL))( a1,  a2,  v23,  a4,  a5,  a6,  a7);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v32 = v61[0];
        *((void *)v61[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        __int128 v54 = v61[0];
        *((void *)v61[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v28 = check_errors(v17);
    }

{
  void *v12;
  uint64_t v13;
  unint64_t v14;
  BOOL v15;
  void *v16;
  uint64_t v17;
  unsigned int *v18;
  unsigned int v19;
  signed int v20;
  BOOL v21;
  id v22;
  uint64_t v23;
  _BYTE *v24;
  uint64_t v25;
  uint64_t v26;
  char v27;
  uint64_t v28;
  uint64_t v29;
  uint64_t v30;
  unint64_t v31;
  void *v32;
  id v33;
  GPUTools::FB::Fbuf *v34;
  unsigned int v35;
  GPUTools::FB::Fbuf *v36;
  dispatch_queue_s *v37;
  uint64_t v38;
  GPUTools::FB::Stream *v39;
  unsigned int *v40;
  unsigned int v41;
  unsigned int v42;
  unsigned int v43;
  signed int v44;
  BOOL v45;
  unsigned int v46;
  uint64_t v47;
  id v48;
  unsigned int v49;
  dispatch_queue_s *v50;
  uint64_t v51;
  uint64_t v52;
  uint64_t v53;
  void *v54;
  char *v57;
  __int128 v58;
  __int128 v59;
  __int128 v60;
  void *v61[2];
  int v62;
  uint64_t v12 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v12) {
    goto LABEL_12;
  }
  uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v14 = v12[4];
    BOOL v15 = v14 >= (unint64_t)a1;
    else {
      uint64_t v16 = v12 + 1;
    }
    if (v15) {
      uint64_t v13 = (uint64_t)v12;
    }
    uint64_t v12 = (void *)*v16;
  }

  while (*v16);
  if (v13 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v13 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v13 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v17 = *(void *)(v13 + 40);
  unsigned int v18 = (unsigned int *)(v17 + 4640);
  do
  {
    unsigned int v19 = __ldaxr(v18);
    signed int v20 = v19 + 1;
  }

  while (__stlxr(v20, v18));
  if (gCheckGLErrors) {
    BOOL v21 = v20 <= 1;
  }
  else {
    BOOL v21 = 1;
  }
  if (v21)
  {
    id v48 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v47 = handle_opengl_thread_conflict((const void **)v17);
    id v48 = [(id)DYGetGLGuestAppClient(v47) waitOnGraphicsSemaphoreAssertions];
    if ((int)v48 >= 1)
    {
      do
LABEL_59:
        unsigned int v49 = __ldaxr(v18);
      while (__stlxr(v49 - 1, v18));
      uint64_t v50 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v48) graphicsLockWaitQueue];
      dispatch_sync_f(v50, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void, void))(*(void *)(v17 + 24) + 6808LL))( a1,  a2,  a3,  a4,  a5,  a6,  a7);
      return;
    }
  }

  *(_BYTE *)(v17 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v61[0] = 0LL;
  v61[1] = 0LL;
  int v62 = 0;
  if ([(id)DYGetGLGuestAppClient(v48) state] != (char *)&dword_0 + 1
    || (id v22 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v22))
  {
    uint64_t v23 = wrapper_map_uniform_loc((ContextInfo *)v17, a2, a3);
    __int128 v58 = 0u;
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, *(void **)v17);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a2);
    *(_WORD *)(v17 + 4709) = 30019;
    *(_BYTE *)(v17 + 4711) = 105;
    uint64_t v24 = (_BYTE *)(v17 + 4712);
    if ((_DWORD)v23 == -1)
    {
      *uint64_t v24 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, -1);
      uint64_t v25 = 1LL;
    }

    else
    {
      *(_DWORD *)(v17 + 4712) = 1047084118;
      snprintf((char *)(v17 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v17 + 40), (_DWORD)a2, v23);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, (void *)(v17 + 4773));
      uint64_t v25 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a4);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a5);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a6);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v57, a7);
    strcpy(&v24[v25], "uiuiuiui");
    uint64_t v26 = GPUTools::FB::Encode(v61, 952LL, 0LL, v17 + 4709, &v57);
    char v27 = byte_207210;
    if ((byte_207210 & 1) != 0) {
      breakpoint_break((uint64_t)v61, (volatile int *)&stru_388.offset, 1LL, *(unsigned int *)(v17 + 3404), v17);
    }
    uint64_t v28 = (uint64_t)[(id)DYGetGLGuestAppClient(v26) overrideFlags];
    if (!(v28 & 0x10 | v27 & 4))
    {
      uint64_t v29 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, uint64_t, void, void))(*(void *)(v17 + 32) + 6808LL))( a1,  a2,  v23,  a4,  a5,  a6,  a7);
      uint64_t v28 = mach_absolute_time();
      uint64_t v30 = v28 - v29;
      unint64_t v31 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v32 = v61[0];
        *((void *)v61[0] + 2) = v29;
        v32[3] = v30;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      else
      {
        uint64_t v53 = __udivti3(g_DYTimebaseInfo * v30, (g_DYTimebaseInfo * (unsigned __int128)v30) >> 64);
        __int128 v54 = v61[0];
        *((void *)v61[0] + 3) = v53;
        uint64_t v28 = __udivti3(v31 * v29, (v31 * (unsigned __int128)v29) >> 64);
        v54[2] = v28;
        if (!gCheckGLErrors) {
          goto LABEL_30;
        }
      }

      uint64_t v28 = check_errors(v17);
    }

void sub_86D64( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *a20)
{
  if (a20) {
    free(a20);
  }
  _Unwind_Resume(a1);
}

void program_uniform1uiv(__GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, unsigned int *a5)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (char *)(v13 + 4709);
  BOOL v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v13);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        unsigned int v52 = __ldaxr(v15);
      while (__stlxr(v52 - 1, v15));
      uint64_t v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 24)
                                                                                                  + 6816LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v64[0] = 0LL;
  v64[1] = 0LL;
  int v65 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    __int128 v61 = 0u;
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, *(void **)v13);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, a2);
    *(_WORD *)unint64_t v14 = 30019;
    *(_BYTE *)(v13 + 4711) = 105;
    BOOL v21 = (_BYTE *)(v13 + 4712);
    if ((_DWORD)v20 == -1)
    {
      *BOOL v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)(v13 + 4712) = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, a4);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    if ((unint64_t)(4LL * (int)a4) < 0x41)
    {
      int v28 = snprintf(v24 + 1, v14 - v25 + 64, "@%dui", a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, a5);
      uint64_t v27 = v28;
    }

    else
    {
      uint64_t v26 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v26, 4LL * (int)a4, a5, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v60, (void *)(v13 + 4644));
      *(_DWORD *)(v24 + 1) = 1769290837;
      v24[5] = 62;
      uint64_t v27 = 5LL;
    }

    v25[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v64, 941LL, 0LL, v13 + 4709, &v60);
    char v30 = byte_207205;
    if ((byte_207205 & 1) != 0) {
      breakpoint_break( (uint64_t)v64,  (volatile int *)((char *)&stru_388.addr + 5),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, unsigned int *))(*(void *)(v13 + 32)
                                                                                                  + 6816LL))( a1,  a2,  v20,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      unint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v35 = v64[0];
        *((void *)v64[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        __int128 v57 = v64[0];
        *((void *)v64[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v13);
    }

{
  void *v10;
  uint64_t v11;
  unint64_t v12;
  BOOL v13;
  void *v14;
  uint64_t v15;
  char *v16;
  unsigned int *v17;
  unsigned int v18;
  signed int v19;
  BOOL v20;
  id v21;
  uint64_t v22;
  _BYTE *v23;
  uint64_t v24;
  _BYTE *v25;
  char *v26;
  uint64_t v27;
  int v28;
  uint64_t v29;
  char v30;
  uint64_t v31;
  uint64_t v32;
  uint64_t v33;
  unint64_t v34;
  void *v35;
  id v36;
  GPUTools::FB::Fbuf *v37;
  unsigned int v38;
  GPUTools::FB::Fbuf *v39;
  dispatch_queue_s *v40;
  uint64_t v41;
  GPUTools::FB::Stream *v42;
  unsigned int *v43;
  unsigned int v44;
  unsigned int v45;
  unsigned int v46;
  signed int v47;
  BOOL v48;
  unsigned int v49;
  uint64_t v50;
  id v51;
  unsigned int v52;
  dispatch_queue_s *v53;
  uint64_t v54;
  uint64_t v55;
  uint64_t v56;
  void *v57;
  char *v58;
  __int128 v59;
  __int128 v60;
  __int128 v61;
  void *v62[2];
  int v63;
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  BOOL v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    uint64_t v12 = v10[4];
    uint64_t v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      BOOL v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    BOOL v11 = ContextInfo::activeCtxInfoMap + 8;
  BOOL v15 = *(void *)(v11 + 40);
  unsigned int v16 = (char *)(v15 + 4709);
  signed int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    BOOL v18 = __ldaxr(v17);
    id v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    uint64_t v20 = v19 <= 1;
  }
  else {
    uint64_t v20 = 1;
  }
  if (v20)
  {
    id v51 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v50 = handle_opengl_thread_conflict((const void **)v15);
    id v51 = [(id)DYGetGLGuestAppClient(v50) waitOnGraphicsSemaphoreAssertions];
    if ((int)v51 >= 1)
    {
      do
LABEL_62:
        unsigned int v52 = __ldaxr(v17);
      while (__stlxr(v52 - 1, v17));
      uint64_t v53 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v51) graphicsLockWaitQueue];
      dispatch_sync_f(v53, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, unsigned int *))(*(void *)(v15 + 24)
                                                                                                  + 6816LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v62[0] = 0LL;
  v62[1] = 0LL;
  __int128 v63 = 0;
  if ([(id)DYGetGLGuestAppClient(v51) state] != (char *)&dword_0 + 1
    || (BOOL v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v59 = 0u;
    __int128 v60 = 0u;
    __int128 v61 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a2);
    *(_WORD *)unsigned int v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a4);
    uint64_t v25 = &v23[v24];
    *uint64_t v25 = 105;
    uint64_t v26 = v25 + 1;
    if ((unint64_t)(4LL * (int)a4) < 0x41)
    {
      int v28 = snprintf(v26, v16 - v26 + 64, "@%dui", a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      uint64_t v27 = v28;
    }

    else
    {
      *uint64_t v26 = 112;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v58, a5);
      uint64_t v27 = 1LL;
    }

    v26[v27] = 0;
    uint64_t v29 = GPUTools::FB::Encode(v62, 941LL, 0LL, v15 + 4709, &v58);
    char v30 = byte_207205;
    if ((byte_207205 & 1) != 0) {
      breakpoint_break( (uint64_t)v62,  (volatile int *)((char *)&stru_388.addr + 5),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v31 = (uint64_t)[(id)DYGetGLGuestAppClient(v29) overrideFlags];
    if (!(v31 & 0x10 | v30 & 4))
    {
      uint64_t v32 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, unsigned int *))(*(void *)(v15 + 32)
                                                                                                  + 6816LL))( a1,  a2,  v22,  a4,  a5);
      uint64_t v31 = mach_absolute_time();
      uint64_t v33 = v31 - v32;
      unint64_t v34 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v35 = v62[0];
        *((void *)v62[0] + 2) = v32;
        v35[3] = v33;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v56 = __udivti3(g_DYTimebaseInfo * v33, (g_DYTimebaseInfo * (unsigned __int128)v33) >> 64);
        __int128 v57 = v62[0];
        *((void *)v62[0] + 3) = v56;
        uint64_t v31 = __udivti3(v34 * v32, (v34 * (unsigned __int128)v32) >> 64);
        v57[2] = v31;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v31 = check_errors(v15);
    }

void sub_87344( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, char a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22)
{
  if (a22) {
    free(a22);
  }
  _Unwind_Resume(a1);
}

void program_uniform2uiv( __GLIContextRec *a1, volatile int *a2, uint64_t a3, unsigned int a4, unsigned int *a5)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (char *)(v13 + 4709);
  BOOL v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v13);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v15);
      while (__stlxr(v53 - 1, v15));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, void, unsigned int *))(*(void *)(v13 + 24)
                                                                                                 + 6824LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v13);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a2);
    *(_WORD *)unint64_t v14 = 30019;
    *(_BYTE *)(v13 + 4711) = 105;
    BOOL v21 = (_BYTE *)(v13 + 4712);
    if ((_DWORD)v20 == -1)
    {
      *BOOL v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)(v13 + 4712) = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    unint64_t v26 = 4LL * (int)(2 * a4);
    if (v26 < 0x41)
    {
      int v29 = snprintf(v24 + 1, v14 - v25 + 64, "@%dui", 2 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v27, v26, a5, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v13 + 4644));
      *(_DWORD *)(v24 + 1) = 1769290837;
      v24[5] = 62;
      uint64_t v28 = 5LL;
    }

    v25[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v65, 945LL, 0LL, v13 + 4709, &v61);
    char v31 = byte_207209;
    if ((byte_207209 & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (volatile int *)((char *)&stru_388.size + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, void, unsigned int *))(*(void *)(v13 + 32)
                                                                                                 + 6824LL))( a1,  a2,  v20,  a4,  a5);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v36 = v65[0];
        *((void *)v65[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        __int128 v58 = v65[0];
        *((void *)v65[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v13);
    }

void sub_87934( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, char a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22)
{
  if (a22) {
    free(a22);
  }
  _Unwind_Resume(a1);
}

void program_uniform3uiv( __GLIContextRec *a1, volatile int *a2, uint64_t a3, unsigned int a4, unsigned int *a5)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (char *)(v13 + 4709);
  BOOL v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v13);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v15);
      while (__stlxr(v53 - 1, v15));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, void, unsigned int *))(*(void *)(v13 + 24)
                                                                                                 + 6832LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v13);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a2);
    *(_WORD *)unint64_t v14 = 30019;
    *(_BYTE *)(v13 + 4711) = 105;
    BOOL v21 = (_BYTE *)(v13 + 4712);
    if ((_DWORD)v20 == -1)
    {
      *BOOL v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)(v13 + 4712) = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    unint64_t v26 = 4LL * (int)(3 * a4);
    if (v26 < 0x41)
    {
      int v29 = snprintf(v24 + 1, v14 - v25 + 64, "@%dui", 3 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v27, v26, a5, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v13 + 4644));
      *(_DWORD *)(v24 + 1) = 1769290837;
      v24[5] = 62;
      uint64_t v28 = 5LL;
    }

    v25[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v65, 949LL, 0LL, v13 + 4709, &v61);
    char v31 = byte_20720D;
    if ((byte_20720D & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (volatile int *)((char *)&stru_388.size + 5),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, void, unsigned int *))(*(void *)(v13 + 32)
                                                                                                 + 6832LL))( a1,  a2,  v20,  a4,  a5);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v36 = v65[0];
        *((void *)v65[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        __int128 v58 = v65[0];
        *((void *)v65[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v13);
    }

void sub_87F24( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, char a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22)
{
  if (a22) {
    free(a22);
  }
  _Unwind_Resume(a1);
}

void program_uniform4uiv( __GLIContextRec *a1, volatile int *a2, uint64_t a3, unsigned int a4, unsigned int *a5)
{
  unint64_t v8 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v8) {
    goto LABEL_12;
  }
  uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v10 = v8[4];
    BOOL v11 = v10 >= (unint64_t)a1;
    else {
      uint64_t v12 = v8 + 1;
    }
    if (v11) {
      uint64_t v9 = (uint64_t)v8;
    }
    unint64_t v8 = (void *)*v12;
  }

  while (*v12);
  if (v9 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v9 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v9 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v13 = *(void *)(v9 + 40);
  unint64_t v14 = (char *)(v13 + 4709);
  BOOL v15 = (unsigned int *)(v13 + 4640);
  do
  {
    unsigned int v16 = __ldaxr(v15);
    signed int v17 = v16 + 1;
  }

  while (__stlxr(v17, v15));
  if (gCheckGLErrors) {
    BOOL v18 = v17 <= 1;
  }
  else {
    BOOL v18 = 1;
  }
  if (v18)
  {
    id v52 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v51 = handle_opengl_thread_conflict((const void **)v13);
    id v52 = [(id)DYGetGLGuestAppClient(v51) waitOnGraphicsSemaphoreAssertions];
    if ((int)v52 >= 1)
    {
      do
LABEL_62:
        unsigned int v53 = __ldaxr(v15);
      while (__stlxr(v53 - 1, v15));
      uint64_t v54 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v52) graphicsLockWaitQueue];
      dispatch_sync_f(v54, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, void, unsigned int *))(*(void *)(v13 + 24)
                                                                                                 + 6840LL))( a1,  a2,  a3,  a4,  a5);
      return;
    }
  }

  *(_BYTE *)(v13 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v65[0] = 0LL;
  v65[1] = 0LL;
  int v66 = 0;
  if ([(id)DYGetGLGuestAppClient(v52) state] != (char *)&dword_0 + 1
    || (id v19 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v19))
  {
    uint64_t v20 = wrapper_map_uniform_loc((ContextInfo *)v13, a2, a3);
    __int128 v62 = 0u;
    __int128 v63 = 0u;
    __int128 v64 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, *(void **)v13);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a2);
    *(_WORD *)unint64_t v14 = 30019;
    *(_BYTE *)(v13 + 4711) = 105;
    BOOL v21 = (_BYTE *)(v13 + 4712);
    if ((_DWORD)v20 == -1)
    {
      *BOOL v21 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, -1);
      uint64_t v22 = 1LL;
    }

    else
    {
      *(_DWORD *)(v13 + 4712) = 1047084118;
      snprintf((char *)(v13 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v13 + 40), (_DWORD)a2, v20);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v13 + 4773));
      uint64_t v22 = 4LL;
    }

    uint64_t v23 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a4);
    uint64_t v24 = &v21[v22];
    *uint64_t v24 = 105;
    uint64_t v25 = v24 + 1;
    unint64_t v26 = 4LL * (int)(4 * a4);
    if (v26 < 0x41)
    {
      int v29 = snprintf(v24 + 1, v14 - v25 + 64, "@%dui", 4 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, a5);
      uint64_t v28 = v29;
    }

    else
    {
      uint64_t v27 = DYGetGLGuestAppClient(v23);
      GPUTools::Interpose::DYSavePointer(v27, v26, a5, v13 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v61, (void *)(v13 + 4644));
      *(_DWORD *)(v24 + 1) = 1769290837;
      v24[5] = 62;
      uint64_t v28 = 5LL;
    }

    v25[v28] = 0;
    uint64_t v30 = GPUTools::FB::Encode(v65, 953LL, 0LL, v13 + 4709, &v61);
    char v31 = byte_207211;
    if ((byte_207211 & 1) != 0) {
      breakpoint_break( (uint64_t)v65,  (volatile int *)((char *)&stru_388.offset + 1),  1LL,  *(unsigned int *)(v13 + 3404),  v13);
    }
    uint64_t v32 = (uint64_t)[(id)DYGetGLGuestAppClient(v30) overrideFlags];
    if (!(v32 & 0x10 | v31 & 4))
    {
      uint64_t v33 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, void, unsigned int *))(*(void *)(v13 + 32)
                                                                                                 + 6840LL))( a1,  a2,  v20,  a4,  a5);
      uint64_t v32 = mach_absolute_time();
      uint64_t v34 = v32 - v33;
      unint64_t v35 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        id v36 = v65[0];
        *((void *)v65[0] + 2) = v33;
        v36[3] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v57 = __udivti3(g_DYTimebaseInfo * v34, (g_DYTimebaseInfo * (unsigned __int128)v34) >> 64);
        __int128 v58 = v65[0];
        *((void *)v65[0] + 3) = v57;
        uint64_t v32 = __udivti3(v35 * v33, (v35 * (unsigned __int128)v33) >> 64);
        v58[2] = v32;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v32 = check_errors(v13);
    }

void sub_88514( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, char a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22)
{
  if (a22) {
    free(a22);
  }
  _Unwind_Resume(a1);
}

void program_uniform_matrix2x3fv( __GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, unsigned int a5, float *a6)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (char *)(v15 + 4709);
  signed int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v17);
      while (__stlxr(v55 - 1, v17));
      uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24) + 6848LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v67[0] = 0LL;
  v67[1] = 0LL;
  int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v64 = 0u;
    __int128 v65 = 0u;
    __int128 v66 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a2);
    *(_WORD *)unsigned int v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a4);
    uint64_t v25 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a5);
    unint64_t v26 = &v23[v24];
    *(_WORD *)unint64_t v26 = 30057;
    v26[2] = 98;
    uint64_t v27 = &v23[v24 + 3];
    unint64_t v28 = 24LL * (_DWORD)a4;
    if (v28 < 0x41)
    {
      int v31 = snprintf(v27, v16 - v27 + 64, "@%df", 6 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a6);
      uint64_t v30 = v31;
    }

    else
    {
      uint64_t v29 = DYGetGLGuestAppClient(v25);
      GPUTools::Interpose::DYSavePointer(v29, v28, a6, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4644));
      *(_DWORD *)uint64_t v27 = 1046887509;
      uint64_t v30 = 4LL;
    }

    v27[v30] = 0;
    uint64_t v32 = GPUTools::FB::Encode(v67, 956LL, 0LL, v15 + 4709, &v63);
    char v33 = byte_207214;
    if ((byte_207214 & 1) != 0) {
      breakpoint_break((uint64_t)v67, (volatile int *)&stru_388.align, 1LL, *(unsigned int *)(v15 + 3404), v15);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (!(v34 & 0x10 | v33 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 32) + 6848LL))( a1,  a2,  v22,  a4,  a5,  a6);
      uint64_t v34 = mach_absolute_time();
      uint64_t v36 = v34 - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v38 = v67[0];
        *((void *)v67[0] + 2) = v35;
        v38[3] = v36;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        __int128 v60 = v67[0];
        *((void *)v67[0] + 3) = v59;
        uint64_t v34 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
        v60[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v34 = check_errors(v15);
    }

void sub_88B20( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, char a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22)
{
  if (a22) {
    free(a22);
  }
  _Unwind_Resume(a1);
}

void program_uniform_matrix3x2fv( __GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, unsigned int a5, float *a6)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (char *)(v15 + 4709);
  signed int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v17);
      while (__stlxr(v55 - 1, v17));
      uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24) + 6856LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v67[0] = 0LL;
  v67[1] = 0LL;
  int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v64 = 0u;
    __int128 v65 = 0u;
    __int128 v66 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a2);
    *(_WORD *)unsigned int v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a4);
    uint64_t v25 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a5);
    unint64_t v26 = &v23[v24];
    *(_WORD *)unint64_t v26 = 30057;
    v26[2] = 98;
    uint64_t v27 = &v23[v24 + 3];
    unint64_t v28 = 24LL * (_DWORD)a4;
    if (v28 < 0x41)
    {
      int v31 = snprintf(v27, v16 - v27 + 64, "@%df", 6 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a6);
      uint64_t v30 = v31;
    }

    else
    {
      uint64_t v29 = DYGetGLGuestAppClient(v25);
      GPUTools::Interpose::DYSavePointer(v29, v28, a6, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4644));
      *(_DWORD *)uint64_t v27 = 1046887509;
      uint64_t v30 = 4LL;
    }

    v27[v30] = 0;
    uint64_t v32 = GPUTools::FB::Encode(v67, 961LL, 0LL, v15 + 4709, &v63);
    char v33 = byte_207219;
    if ((byte_207219 & 1) != 0) {
      breakpoint_break( (uint64_t)v67,  (volatile int *)((char *)&stru_388.reloff + 1),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (!(v34 & 0x10 | v33 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 32) + 6856LL))( a1,  a2,  v22,  a4,  a5,  a6);
      uint64_t v34 = mach_absolute_time();
      uint64_t v36 = v34 - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v38 = v67[0];
        *((void *)v67[0] + 2) = v35;
        v38[3] = v36;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        __int128 v60 = v67[0];
        *((void *)v67[0] + 3) = v59;
        uint64_t v34 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
        v60[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v34 = check_errors(v15);
    }

void sub_8912C( _Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, char a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22)
{
  if (a22) {
    free(a22);
  }
  _Unwind_Resume(a1);
}

void program_uniform_matrix2x4fv( __GLIContextRec *a1, volatile int *a2, uint64_t a3, uint64_t a4, unsigned int a5, float *a6)
{
  unint64_t v10 = *(void **)(ContextInfo::activeCtxInfoMap + 8);
  if (!v10) {
    goto LABEL_12;
  }
  uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  do
  {
    unint64_t v12 = v10[4];
    BOOL v13 = v12 >= (unint64_t)a1;
    else {
      unint64_t v14 = v10 + 1;
    }
    if (v13) {
      uint64_t v11 = (uint64_t)v10;
    }
    unint64_t v10 = (void *)*v14;
  }

  while (*v14);
  if (v11 == ContextInfo::activeCtxInfoMap + 8 || *(void *)(v11 + 32) > (unint64_t)a1) {
LABEL_12:
  }
    uint64_t v11 = ContextInfo::activeCtxInfoMap + 8;
  uint64_t v15 = *(void *)(v11 + 40);
  unsigned int v16 = (char *)(v15 + 4709);
  signed int v17 = (unsigned int *)(v15 + 4640);
  do
  {
    unsigned int v18 = __ldaxr(v17);
    signed int v19 = v18 + 1;
  }

  while (__stlxr(v19, v17));
  if (gCheckGLErrors) {
    BOOL v20 = v19 <= 1;
  }
  else {
    BOOL v20 = 1;
  }
  if (v20)
  {
    id v54 = [(id)DYGetGLGuestAppClient(a1) waitOnGraphicsSemaphoreAssertions];
  }

  else
  {
    uint64_t v53 = handle_opengl_thread_conflict((const void **)v15);
    id v54 = [(id)DYGetGLGuestAppClient(v53) waitOnGraphicsSemaphoreAssertions];
    if ((int)v54 >= 1)
    {
      do
LABEL_62:
        unsigned int v55 = __ldaxr(v17);
      while (__stlxr(v55 - 1, v17));
      uint64_t v56 = (dispatch_queue_s *)[(id)DYGetGLGuestAppClient(v54) graphicsLockWaitQueue];
      dispatch_sync_f(v56, 0LL, (dispatch_function_t)do_nothing);
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 24) + 6864LL))( a1,  a2,  a3,  a4,  a5,  a6);
      return;
    }
  }

  *(_BYTE *)(v15 + 483_Block_object_dispose((const void *)(v1 - 176), 8) = 1;
  v67[0] = 0LL;
  v67[1] = 0LL;
  int v68 = 0;
  if ([(id)DYGetGLGuestAppClient(v54) state] != (char *)&dword_0 + 1
    || (id v21 = [(id)DYGetGLGuestAppClient(1) triggerCaptureOnNextGLCommand], !(_DWORD)v21))
  {
    uint64_t v22 = wrapper_map_uniform_loc((ContextInfo *)v15, a2, a3);
    __int128 v64 = 0u;
    __int128 v65 = 0u;
    __int128 v66 = 0u;
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, *(void **)v15);
    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a2);
    *(_WORD *)unsigned int v16 = 30019;
    *(_BYTE *)(v15 + 4711) = 105;
    uint64_t v23 = (_BYTE *)(v15 + 4712);
    if ((_DWORD)v22 == -1)
    {
      *uint64_t v23 = 105;
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, -1);
      uint64_t v24 = 1LL;
    }

    else
    {
      *(_DWORD *)(v15 + 4712) = 1047084118;
      snprintf((char *)(v15 + 4773), 0x40uLL, "u_%016lx_%u_%u", **(void **)(v15 + 40), (_DWORD)a2, v22);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4773));
      uint64_t v24 = 4LL;
    }

    GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a4);
    uint64_t v25 = GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a5);
    unint64_t v26 = &v23[v24];
    *(_WORD *)unint64_t v26 = 30057;
    v26[2] = 98;
    uint64_t v27 = &v23[v24 + 3];
    unint64_t v28 = 32LL * (_DWORD)a4;
    if (v28 < 0x41)
    {
      int v31 = snprintf(v27, v16 - v27 + 64, "@%df", 8 * a4);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, a6);
      uint64_t v30 = v31;
    }

    else
    {
      uint64_t v29 = DYGetGLGuestAppClient(v25);
      GPUTools::Interpose::DYSavePointer(v29, v28, a6, v15 + 4644, 65LL, 0LL, 1LL, 0LL, 0LL);
      GPUTools::FB::FIFOArgumentProvider::push((GPUTools::FB::FIFOArgumentProvider *)&v63, (void *)(v15 + 4644));
      *(_DWORD *)uint64_t v27 = 1046887509;
      uint64_t v30 = 4LL;
    }

    v27[v30] = 0;
    uint64_t v32 = GPUTools::FB::Encode(v67, 958LL, 0LL, v15 + 4709, &v63);
    char v33 = byte_207216;
    if ((byte_207216 & 1) != 0) {
      breakpoint_break( (uint64_t)v67,  (volatile int *)((char *)&stru_388.align + 2),  1LL,  *(unsigned int *)(v15 + 3404),  v15);
    }
    uint64_t v34 = (uint64_t)[(id)DYGetGLGuestAppClient(v32) overrideFlags];
    if (!(v34 & 0x10 | v33 & 4))
    {
      uint64_t v35 = mach_absolute_time();
      (*(void (**)(__GLIContextRec *, volatile int *, uint64_t, uint64_t, void, float *))(*(void *)(v15 + 32) + 6864LL))( a1,  a2,  v22,  a4,  a5,  a6);
      uint64_t v34 = mach_absolute_time();
      uint64_t v36 = v34 - v35;
      unint64_t v37 = g_DYTimebaseInfo;
      if (g_DYTimebaseInfo == *((_DWORD *)&g_DYTimebaseInfo + 1))
      {
        unsigned int v38 = v67[0];
        *((void *)v67[0] + 2) = v35;
        v38[3] = v36;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      else
      {
        uint64_t v59 = __udivti3(g_DYTimebaseInfo * v36, (g_DYTimebaseInfo * (unsigned __int128)v36) >> 64);
        __int128 v60 = v67[0];
        *((void *)v67[0] + 3) = v59;
        uint64_t v34 = __udivti3(v37 * v35, (v37 * (unsigned __int128)v35) >> 64);
        v60[2] = v34;
        if (!gCheckGLErrors) {
          goto LABEL_33;
        }
      }

      uint64_t v34 = check_errors(v15);
    }